[{"content":"github Source code\nAngularã€Reactã€Vue æ˜¯ä¸‰å€‹æœ€å—æ­¡è¿çš„å‰ç«¯æ¡†æ¶ï¼Œé€™æ˜¯ä¸‰ç¯‡ç­†è¨˜åˆ†åˆ¥ä½¿ç”¨é€™ä¸‰å€‹ä¸åŒçš„æ¡†æ¶ä¾†å»ºç«‹åŠŸèƒ½ä¸€æ¨¡ä¸€æ¨£çš„ç¶²è·¯æ‡‰ç”¨ç¨‹å¼ä¸­çš„ç¬¬ä¸‰ç¯‡ - ä½¿ç”¨ Vue ä¾†å»ºç«‹ç¶²è·¯æ‡‰ç”¨ç¨‹å¼ã€‚\né€™å€‹ç¶²è·¯æ‡‰ç”¨ç¨‹å¼çš„éœ€æ±‚\n ç”£å“è¨‚è³¼åŠŸèƒ½  è¡¨é ­ï¼šè¨‚è³¼å•†å“ç¸½æ•¸ã€ç¸½é¡åŠé€å‡ºè¨‚å–®åŠŸèƒ½ å•†å“éæ¿¾åŠŸèƒ½ï¼šä¾ç”£å“é¡åˆ¥ä¾†é¡¯ç¤ºå•†å“ å•†å“æ¸…å–®ï¼šé¡¯ç¤ºå•†å“æ˜ç´°ã€å•†å“å”®åƒ¹ã€è¨‚è³¼æ•¸é‡ä¸‹æ‹‰é¸å–®åŠåŠ å…¥è³¼ç‰©è»Šç­‰åŠŸèƒ½   è¨‚å–®ç¢ºèªåŠŸèƒ½ï¼šé¡¯ç¤ºè¨‚è³¼å•†å“æ˜ç´°åŠç¸½é‡‘é¡ è¨‚è³¼æˆåŠŸåŠŸèƒ½ï¼šé¡¯ç¤ºè¨‚è³¼å®Œæˆè³‡è¨Š  ä½¿ç”¨æŠ€è¡“:\n Vue 3 Bootstrap 5 (UI Framework) Vue Router 4 Vuex 4 axios 0.27 NodeJS 18.5 \u0026amp; Express 4.18 json-server 0.17.0 npm-run-all 4.1.5 (npm å¥—ä»¶) @vue/cli  å»ºç«‹æ–°å°ˆæ¡ˆ ä½¿ç”¨ä¸‹åˆ—çš„ npx èªæ³•å³å¯å»ºç«‹æœ€æ–°ç‰ˆ Vue é è¨­çš„æ‡‰ç”¨ç¨‹å¼çµæ§‹\n$ npx @vue/cli create vueapp Vue CLI v5.0.8 ? Please pick a preset: Manually select features ? Check the features needed for your project: (Press \u0026lt;space\u0026gt; to select, \u0026lt;a\u0026gt; to toggle all, \u0026lt;i\u0026gt; to invert selection, and \u0026lt;enter\u0026gt; to proceed) â—‰ Babel â—‰ TypeScript â—¯ Progressive Web App (PWA) Support â—‰ Router â¯â—‰ Vuex â—¯ CSS Pre-processors â—‰ Linter / Formatter â—¯ Unit Testing â—¯ E2E Testing ? Choose a version of Vue.js that you want to start the project with 3.x ? Use class-style component syntax? No ? Use Babel alongside TypeScript (required for modern mode, auto-detected polyfills, transpiling JSX)? Yes ? Use history mode for router? (Requires proper server setup for index fallback in production) Yes ? Pick a linter / formatter config: Basic ? Pick additional lint features: Lint on save ? Where do you prefer placing config for Babel, ESLint, etc.? In dedicated config files ? Save this as a preset for future projects? No Vue CLI v5.0.8 âœ¨ Creating project in /home/egs/tmp/vueapp. ğŸ—ƒ Initializing git repository... âš™ï¸ Installing CLI plugins. This might take a while... yarn install v1.22.19 info No lockfile found. [1/4] Resolving packages... [2/4] Fetching packages... [3/4] Linking dependencies... success Saved lockfile. Done in 19.80s. ğŸš€ Invoking generators... ğŸ“¦ Installing additional dependencies... yarn install v1.22.19 [1/4] Resolving packages... [2/4] Fetching packages... [3/4] Linking dependencies... [4/4] Building fresh packages... success Saved lockfile. Done in 23.14s. âš“ Running completion hooks... ğŸ“„ Generating README.md... ğŸ‰ Successfully created project vueapp. ğŸ‘‰ Get started with the following commands: $ cd vueapp $ yarn serve æŸ¥çœ‹ package.json ä¸­ç›¸ä¾å¥—ä»¶åŠç‰ˆæœ¬ $ cd vueapp $ cat package.json { \u0026#34;name\u0026#34;: \u0026#34;vueapp\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0.1.0\u0026#34;, \u0026#34;private\u0026#34;: true, \u0026#34;scripts\u0026#34;: { \u0026#34;serve\u0026#34;: \u0026#34;vue-cli-service serve\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;vue-cli-service build\u0026#34;, \u0026#34;lint\u0026#34;: \u0026#34;vue-cli-service lint\u0026#34; }, \u0026#34;dependencies\u0026#34;: { \u0026#34;core-js\u0026#34;: \u0026#34;^3.8.3\u0026#34;, \u0026#34;vue\u0026#34;: \u0026#34;^3.2.13\u0026#34;, \u0026#34;vue-router\u0026#34;: \u0026#34;^4.0.3\u0026#34;, \u0026#34;vuex\u0026#34;: \u0026#34;^4.0.0\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;@typescript-eslint/eslint-plugin\u0026#34;: \u0026#34;^5.4.0\u0026#34;, \u0026#34;@typescript-eslint/parser\u0026#34;: \u0026#34;^5.4.0\u0026#34;, \u0026#34;@vue/cli-plugin-babel\u0026#34;: \u0026#34;~5.0.0\u0026#34;, \u0026#34;@vue/cli-plugin-eslint\u0026#34;: \u0026#34;~5.0.0\u0026#34;, \u0026#34;@vue/cli-plugin-router\u0026#34;: \u0026#34;~5.0.0\u0026#34;, \u0026#34;@vue/cli-plugin-typescript\u0026#34;: \u0026#34;~5.0.0\u0026#34;, \u0026#34;@vue/cli-plugin-vuex\u0026#34;: \u0026#34;~5.0.0\u0026#34;, \u0026#34;@vue/cli-service\u0026#34;: \u0026#34;~5.0.0\u0026#34;, \u0026#34;@vue/eslint-config-typescript\u0026#34;: \u0026#34;^9.1.0\u0026#34;, \u0026#34;eslint\u0026#34;: \u0026#34;^7.32.0\u0026#34;, \u0026#34;eslint-plugin-vue\u0026#34;: \u0026#34;^8.0.3\u0026#34;, \u0026#34;typescript\u0026#34;: \u0026#34;~4.5.5\u0026#34; } } ç”£ç”Ÿçš„é è¨­ç¨‹å¼çµæ§‹ åŸ·è¡Œç”± CLI ç”£ç”Ÿçš„é è¨­ç¨‹å¼æ¶æ§‹ $ yarn serve yarn run v1.22.19 $ vue-cli-service serve INFO Starting development server... DONE Compiled successfully in 1436ms ä¸‹åˆ4:10:07 App running at: - Local: http://localhost:8080/ - Network: http://192.168.0.125:8080/ Note that the development build is not optimized. To create a production build, run yarn build. é–‹å•Ÿç€è¦½å™¨ï¼Œè¼¸å…¥ http://localhost:8080\n$ git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Initial Commit\u0026#34; # åŠ å…¥ git æ–°ç‰ˆæœ¬ $ code . # æ‰“é–‹ vscode ä½¿ç”¨ json-server ç•¶ä½œå¾Œç«¯ Web Api åœ¨æˆ‘å€‘çš„å‰ç«¯æ‡‰ç”¨ç¨‹å¼ä¸­æœƒä½¿ç”¨åˆ°å¾Œç«¯ä¼ºæœå™¨çš„è³‡æ–™ï¼Œæ–¹ä¾¿èµ·è¦‹ç›´æ¥ä½¿ç”¨ json-serverã€€ä¾†ç•¶ä½œå¾Œç«¯ Web Api\nå®‰è£ json-server $ npm install --save-dev json-server@0.17.0 npm-run-all@4.1.5\nå»ºç«‹çµ¦ json-server ä½¿ç”¨çš„è³‡æ–™ $ touch data.json # data.json å…§å®¹å¦‚ä¸‹ { \u0026#34;products\u0026#34;: [ { \u0026#34;id\u0026#34;: 1, \u0026#34;name\u0026#34;: \u0026#34;kayak\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Watersports\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;A boat form on person\u0026#34;, \u0026#34;price\u0026#34;: 275 }, { \u0026#34;id\u0026#34;: 2, \u0026#34;name\u0026#34;: \u0026#34;Lifejacket\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Watersports\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Protective and fashionable boat form on person\u0026#34;, \u0026#34;price\u0026#34;: 48.95 }, { \u0026#34;id\u0026#34;: 3, \u0026#34;name\u0026#34;: \u0026#34;Soccer Ball\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Soccer\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;FIFA-approved size and weight\u0026#34;, \u0026#34;price\u0026#34;: 19.5 }, { \u0026#34;id\u0026#34;: 4, \u0026#34;name\u0026#34;: \u0026#34;Corner Flags\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Soccer\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Give your playing field a professional touch\u0026#34;, \u0026#34;price\u0026#34;: 34.95 }, { \u0026#34;id\u0026#34;: 5, \u0026#34;name\u0026#34;: \u0026#34;Stadium\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Soccer\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Flat-packed 35,000-seat stadium\u0026#34;, \u0026#34;price\u0026#34;: 79500 }, { \u0026#34;id\u0026#34;: 6, \u0026#34;name\u0026#34;: \u0026#34;Thinking Cap\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Chess\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Imporove brain efficiency by 75%\u0026#34;, \u0026#34;price\u0026#34;: 16 }, { \u0026#34;id\u0026#34;: 7, \u0026#34;name\u0026#34;: \u0026#34;Unsteady Chair\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Chess\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Secretly give your opponent a disadvantage\u0026#34;, \u0026#34;price\u0026#34;: 29.95 }, { \u0026#34;id\u0026#34;: 8, \u0026#34;name\u0026#34;: \u0026#34;Human Chess Board\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Chess\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;A fun game for the family\u0026#34;, \u0026#34;price\u0026#34;: 75 }, { \u0026#34;id\u0026#34;: 9, \u0026#34;name\u0026#34;: \u0026#34;Bling Bling King\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Chess\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Gold-plated, diamond-studded King\u0026#34;, \u0026#34;price\u0026#34;: 1200 } ], \u0026#34;orders\u0026#34;: [ ] } æ¸¬è©¦ json-server $ npx json-server data.json -p 4600 # ä½¿ç”¨ 4600 port \\{^_^}/ hi! Loading data.json Done Resources http://localhost:4600/products http://localhost:4600/orders Home http://localhost:4600 Type s + enter at any time to create a snapshot of the database GET /db 304 1.630 ms - - GET /__rules 404 4.536 ms - 2 è¨­å®š npm script in package.sjon // ...  \u0026#34;scripts\u0026#34;: { \u0026#34;serve\u0026#34;: \u0026#34;vue-cli-service serve\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;vue-cli-service build\u0026#34;, \u0026#34;lint\u0026#34;: \u0026#34;vue-cli-service lint\u0026#34;, \u0026#34;json\u0026#34;: \u0026#34;json-server data.json -p 4600\u0026#34;, \u0026#34;start\u0026#34;: \u0026#34;npm-run-all -p serve json\u0026#34; }, // ... åœ¨å°ˆæ¡ˆä¸­ä½¿ç”¨ Bootstrap CSS å¥—ä»¶ å®‰è£ bootstrap 5 $ npm install bootstrap@5.2.0\nå¼•å…¥ bootstrap in main.ts // ./src/main.ts import { createApp } from \u0026#39;vue\u0026#39; import App from \u0026#39;./App.vue\u0026#39; import router from \u0026#39;./router\u0026#39; import store from \u0026#39;./store\u0026#39; import \u0026#34;bootstrap/dist/css/bootstrap.css\u0026#34;; createApp(App).use(store).use(router).mount(\u0026#39;#app\u0026#39;) ç‚ºç¶²ç«™åŠ å…¥è³‡æ–™ å»ºç«‹è³‡æ–™æ¨¡å‹ $ mkdir ./src/data \u0026amp;\u0026amp; touch ./src/data/entities.ts\nentities.ts æª”æ¡ˆå…§å®¹å¦‚ä¸‹ï¼š\n// ./src/data/entities.ts export class Product { constructor( public id: number, public name: string, public description: string, public category: string, public price: number) {} } export class OrderLine { constructor(public product: Product, public quantity: number) { } get total(): number { return this.product.price * this.quantity; } } export class Order { private lines: OrderLine[] = []; constructor(initialLines?: OrderLine[]) { if (initialLines) { this.lines.push(...initialLines); } } public addProduct(prod: Product, quantity: number) { const index = this.lines.findIndex(ol =\u0026gt; ol.product.id === prod.id); if (index \u0026gt; -1) { if (quantity === 0) { this.removeProduct(prod.id); } else { this.lines[index].quantity += quantity; } } else { this.lines.push(new OrderLine(prod, quantity)); } } public removeProduct(id: number) { this.lines = this.lines.filter(ol =\u0026gt; ol.product.id !== id); } get orderLines(): OrderLine[] { return this.lines; } get productCount(): number { return this.lines.reduce((total, ol) =\u0026gt; total += ol.quantity, 0); } get total(): number { return this.lines.reduce((total, ol) =\u0026gt; total += ol.total, 0); } } å»ºç«‹å•†å“è¨‚è³¼ç›¸é—œå…ƒä»¶ $ touch ./src/components/ProductItem.vue $ touch ./src/components/CategoryList.vue $ touch ./src/components/Header.vue $ touch ./src/views/ProductList.vue å•†å“æ˜ç´°å…ƒä»¶ (ProductItem) // ProductItem.vue \u0026lt;template\u0026gt; \u0026lt;div class=\u0026#34;card m-1 p-1 bg-light\u0026#34;\u0026gt; \u0026lt;h4\u0026gt; {{ product?.name }} \u0026lt;span class=\u0026#34;badge rounded-pill bg-primary float-end\u0026#34;\u0026gt; ${{ product?.price.toFixed(2) }} \u0026lt;/span\u0026gt; \u0026lt;/h4\u0026gt; \u0026lt;div class=\u0026#34;card-text bg-white p-1\u0026#34;\u0026gt; {{ product?.description }} \u0026lt;button class=\u0026#34;btn btn-success btn-sm float-end\u0026#34; @click=\u0026#34;handleAddToCart\u0026#34;\u0026gt; Add To Cart \u0026lt;/button\u0026gt; \u0026lt;select class=\u0026#34;from-control-inline float-end m-1\u0026#34; v-model.number=\u0026#34;quantity\u0026#34;\u0026gt; \u0026lt;option\u0026gt;1\u0026lt;/option\u0026gt; \u0026lt;option\u0026gt;2\u0026lt;/option\u0026gt; \u0026lt;option\u0026gt;3\u0026lt;/option\u0026gt; \u0026lt;/select\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script lang=\u0026#34;ts\u0026#34;\u0026gt; import { defineComponent, PropType } from \u0026#34;vue\u0026#34;; import { Product } from \u0026#34;../data/entities\u0026#34;; export default defineComponent({ name: \u0026#34;ProductItem\u0026#34;, props: { product: { type: Object as PropType\u0026lt;Product\u0026gt;, }, }, data() { return { quantity: 1, }; }, methods: { handleAddToCart() { this.$emit(\u0026#34;addToCart\u0026#34;, { product: this.product, quantity: this.quantity, }); }, }, }); \u0026lt;/script\u0026gt; å•†å“åˆ†é¡æŒ‰éˆ•å…ƒä»¶ (CategoryList.vue) // CategoryList.vue \u0026lt;template\u0026gt; \u0026lt;div class=\u0026#34;d-grid gap-2\u0026#34;\u0026gt; \u0026lt;button v-for=\u0026#34;c in categories\u0026#34; v-bind:key=\u0026#34;c\u0026#34; v-bind:class=\u0026#34;getButtonClasses(c)\u0026#34; @click=\u0026#34;selectCategory(c)\u0026#34;\u0026gt; {{ c }} \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script lang=\u0026#34;ts\u0026#34;\u0026gt; import { defineComponent, PropType } from \u0026#39;vue\u0026#39;; export default defineComponent({ name: \u0026#34;CategoryList\u0026#34;, props: { categories: { type: Object as PropType\u0026lt;string[]\u0026gt;, require: true }, selected: { type: String as PropType\u0026lt;string\u0026gt;, }, }, methods: { selectCategory(category: string) { this.$emit(\u0026#34;selectCategory\u0026#34;, category); }, getButtonClasses(category: string): string { const btnClass = this.selected === category ? \u0026#34;btn-primary\u0026#34; : \u0026#34;btn-secondary\u0026#34;; return `btn ${btnClass}`; }, }, }); \u0026lt;/script\u0026gt; è¡¨é ­å…ƒä»¶ (Header) // Header.vue \u0026lt;template\u0026gt; \u0026lt;div class=\u0026#34;p-1 bg-secondary text-white text-end\u0026#34;\u0026gt; {{ displayText }} \u0026lt;!-- \u0026lt;button class=\u0026#34;btn btn-sm btn-primary m-1\u0026gt;\u0026#34;\u0026gt;Submit Order\u0026lt;/button\u0026gt; --\u0026gt; \u0026lt;router-link to = \u0026#34;/order\u0026#34; class=\u0026#34;btn btn-sm btn-primary m-1\u0026#34;\u0026gt; Submit Order \u0026lt;/router-link\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script lang=\u0026#34;ts\u0026#34;\u0026gt; import { Order } from \u0026#39;@/data/entities\u0026#39;; import { defineComponent, PropType } from \u0026#39;vue\u0026#39;; export default defineComponent({ name: \u0026#34;Header\u0026#34;, props: { order: { type: Object as PropType\u0026lt;Order\u0026gt;, required: true }, }, computed: { displayText(): string { const count = this.order.productCount; return count === 0 ? \u0026#34;(No Selection)\u0026#34; : `${count}Product(s), $${this.order.total.toFixed(2)}`; }, }, }); \u0026lt;/script\u0026gt;``` ### å•†å“æ¸…å–®å…ƒä»¶ (ProductList) ```tsx // ./views/ProductList.vue \u0026lt;template\u0026gt; \u0026lt;div\u0026gt; \u0026lt;Header v-bind:order=\u0026#34;order\u0026#34; /\u0026gt; \u0026lt;div class=\u0026#34;container-fluid\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;row\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;col-3 p-2\u0026#34;\u0026gt; \u0026lt;CategoryList v-bind:categories=\u0026#34;categories\u0026#34; v-bind:selected=\u0026#34;selectedCategory\u0026#34; @selectCategory=\u0026#34;handleSelectCategory\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;col-9 p-2\u0026#34;\u0026gt; \u0026lt;ProductItem v-for=\u0026#34;p in filteredProducts\u0026#34; v-bind:key=\u0026#34;p.id\u0026#34; v-bind:product=\u0026#34;p\u0026#34; @addToCart=\u0026#34;handleAddToCart\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script lang=\u0026#34;ts\u0026#34;\u0026gt; import { defineComponent } from \u0026#39;vue\u0026#39;; import { Order, Product } from \u0026#39;@/data/entities\u0026#39;; import ProductItem from \u0026#34;../components/ProductItem.vue\u0026#34; import CategoryList from \u0026#34;../components/CategoryList.vue\u0026#34; import Header from \u0026#34;../components/Header.vue\u0026#34; export default defineComponent({ name: \u0026#34;ProductList\u0026#34;, components: { ProductItem, CategoryList, Header }, data() { const products: Product[] = []; [1, 2, 3, 4, 5].map((num) =\u0026gt; products.push( new Product(num, `Prod${num}`, `Product ${num}`, `Cat${num % 2}`, 100))); return { products, selectedCategory: \u0026#34;All\u0026#34;, order: new Order() }; }, computed: { categories(): string[] { return [\u0026#34;All\u0026#34;, ...new Set\u0026lt;string\u0026gt;(this.products.map((p) =\u0026gt; p.category))]; }, filteredProducts(): Product[] { return this.products.filter((p) =\u0026gt; this.selectedCategory == \u0026#34;All\u0026#34; || this.selectedCategory === p.category); } }, methods: { handleSelectCategory(category: string) { this.selectedCategory = category; }, handleAddToCart(data: { product: Product; quantity: number; }) { this.order.addProduct(data.product, data.quantity); }, }, }); \u0026lt;/script\u0026gt; ä¿®æ”¹ App.vue å…§å®¹å¦‚ä¸‹ï¼š\n// ./src/App.vue \u0026lt;template\u0026gt; \u0026lt;ProductList /\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script lang=\u0026#34;ts\u0026#34;\u0026gt; import { defineComponent } from \u0026#39;vue\u0026#39;; import ProductList from \u0026#34;./views/ProductList.vue\u0026#34; export default defineComponent({ name: \u0026#34;App\u0026#34;, components: { ProductList }, }); \u0026lt;/script\u0026gt; æª”æ¡ˆçµæ§‹ ##ã€€åŸ·è¡Œç¨‹å¼\n$ npm start ERROR Failed to compile with 1 error ä¸‹åˆ6:39:49 [eslint] /home/egs/cal-data/tech-test/typescript/book/vueapp/src/components/Header.vue 17:11 error Component name \u0026#34;Header\u0026#34; should always be multi-word vue/multi-word-component-names âœ– 1 problem (1 error, 0 warnings) You may use special comments to disable some warnings. Use // eslint-disable-next-line to ignore the next line. Use /* eslint-disable */ to ignore all warnings in a file. ERROR in [eslint] /home/egs/cal-data/tech-test/typescript/book/vueapp/src/components/Header.vue 17:11 error Component name \u0026#34;Header\u0026#34; should always be multi-word vue/multi-word-component-names âœ– 1 problem (1 error, 0 warnings) webpack compiled with 1 error åŸ·è¡Œæ™‚ç™¼ç”ŸéŒ¯èª¤ï¼Œç”±è¨Šæ¯ä¸­å¯çœ‹å‡ºæ˜¯å› ç‚º Header.vue é€™å€‹å…ƒä»¶çš„å‘½åæ‰€å°è‡´ã€‚esline é è¨­çš„å‘½åæª¢æ ¸è¦å‰‡å¿…é ˆæ˜¯è¦è¶…éä¸€å€‹è‹±æ–‡å­—(Word)ã€‚è§£æ±ºæ–¹æ³•æœ‰äºŒï¼šä¸€æ˜¯å°‡ Header.vue æ”¹åç‚ºäºŒå€‹å­—ï¼Œå¦‚FunHeader.vueã€‚ç¬¬äºŒå€‹æ–¹æ³•æ˜¯ä¿®æ”¹ esline ä¸­çš„æª¢æ ¸è¦å‰‡ï¼Œé¿æ‰ multi word naming çš„æª¢æ ¸ã€‚\nåŠ å…¥ç¬¬åä¸ƒè¡Œçš„è¨­å®š\nmodule.exports = { root: true, env: { node: true }, 'extends': [ 'plugin:vue/vue3-essential', 'eslint:recommended', '@vue/typescript/recommended' ], parserOptions: { ecmaVersion: 2020 }, rules: { 'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off', 'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off', 'vue/multi-word-component-names': 0 // é¿æ‰ compoenent å¿…é ˆæ˜¯è¦ Multi word Name } } ä½¿ç”¨ Data Store ä¾†ç®¡ç† Vue æ‡‰ç”¨ç¨‹å¼çš„è³‡æ–™ åœ¨å¤§å¤šæ•¸çš„ Vue å°ˆæ¡ˆä¸­ï¼Œæ‡‰ç”¨ç¨‹å¼çš„è³‡æ–™æ˜¯äº¤ç”± Vuex å¥—ä»¶ä¾†ç®¡ç†ã€‚å®ƒæä¾›ã€€\u0026ldquo;data store\u0026rdquo; åŠŸèƒ½å·²ç¶“æ•´åˆåˆ° Vue.jsã€€çš„ API å…§ã€‚\nå®‰è£ Vuex åœ¨æœ¬ç­†è¨˜é–‹é ­ï¼Œä½¿ç”¨ vue/cli å»ºç«‹å°ˆæ¡ˆæ™‚ï¼Œæˆ‘å€‘å·²é¸æ“‡ä½¿ç”¨ vuex é¸é …ï¼Œæ‰€ä»¥åœ¨ package.json ä¸­å·² æœ‰ vuex å¥—ä»¶çš„å®‰è£è³‡è¨Šã€‚è‹¥åœ¨å»ºç«‹å°ˆæ¡ˆæ™‚æœªé¸æ“‡ä½¿ç”¨ vuexï¼Œå‰‡é ˆè‡ªè¡Œæ‰‹å‹•å®‰è£ vuex å¥—ä»¶ã€‚\n$ npm install vuex@4.0.0 å»ºç«‹ data store // ./src/data/index.ts import { Order, Product } from \u0026#39;@/data/entities\u0026#39; import { createStore } from \u0026#39;vuex\u0026#39; export interface StoreState { products: Product[], order: Order, selectedCategory: string, } type ProductSelection = { product: Product, quantity: number } export default createStore\u0026lt;StoreState\u0026gt;({ state: { products: [1, 2, 3, 4, 5].map(num =\u0026gt; new Product( num, `StoreProd${num}`, `Product${num}`, `Cat${num % 2}` , 450) ), order: new Order(), selectedCategory: \u0026#34;All\u0026#34;, }, mutations: { selectCategory(currentState: StoreState, category: string) { currentState.selectedCategory = category; }, addToOrder(currentState: StoreState, selection: ProductSelection) { currentState.order.addProduct(selection.product, selection.quantity); } }, getters: { categories(state): string[] { return [\u0026#34;All\u0026#34;, ...new Set(state.products.map(p =\u0026gt; p.category))]; }, filteredProducts(state): Product[] { return state.products.filter(p =\u0026gt; state.selectedCategory === \u0026#34;All\u0026#34; || state.selectedCategory === p.category); } }, actions: { }, modules: { } }) å°‡å…ƒä»¶é€£çµè‡³ data store ä¿®æ”¹ Header.vue å…§å®¹å¦‚ä¸‹ï¼š\n// ./src/components/Header.vue \u0026lt;template\u0026gt; \u0026lt;div class=\u0026#34;p-1 bg-secondary text-white text-end\u0026#34;\u0026gt; {{ displayText }} \u0026lt;button class=\u0026#34;btn btn-sm btn-primary m-1\u0026gt;\u0026#34;\u0026gt;Submit Order\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script lang=\u0026#34;ts\u0026#34;\u0026gt; import { defineComponent, PropType } from \u0026#39;vue\u0026#39;; import { useStore } from \u0026#34;vuex\u0026#34;; export default defineComponent({ name: \u0026#34;Header\u0026#34;, setup() { return {store: useStore()}; }, computed: { displayText(): string { // const count = this.order.productCount;  // return count === 0 ? \u0026#34;(No Selection)\u0026#34; : `${count} Product(s), $${this.order.total.toFixed(2)}`;  const count = this.store.state.order.productCount; return count === 0 ? \u0026#34;(No Selection)\u0026#34; : `${count}Product(s) ` + `$${this.store.state.order.total.toFixed(2)}`; }, }, }); \u0026lt;/script\u0026gt; ä¿®æ”¹ã€€ProductList.vueã€€å¦‚ä¸‹ï¼š\n// ./src/views/ProductList.vue \u0026lt;template\u0026gt; \u0026lt;div\u0026gt; \u0026lt;Header v-bind:order=\u0026#34;order\u0026#34; /\u0026gt; \u0026lt;div class=\u0026#34;container-fluid\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;row\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;col-3 p-2\u0026#34;\u0026gt; \u0026lt;CategoryList v-bind:categories=\u0026#34;categories\u0026#34; v-bind:selected=\u0026#34;selectedCategory\u0026#34; @selectCategory=\u0026#34;handleSelectCategory\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;col-9 p-2\u0026#34;\u0026gt; \u0026lt;ProductItem v-for=\u0026#34;p in filteredProducts\u0026#34; v-bind:key=\u0026#34;p.id\u0026#34; v-bind:product=\u0026#34;p\u0026#34; @addToCart=\u0026#34;handleAddToCart\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script lang=\u0026#34;ts\u0026#34;\u0026gt; import { Order, Product } from \u0026#39;@/data/entities\u0026#39;; import { defineComponent } from \u0026#39;vue\u0026#39;; import ProductItem from \u0026#34;../components/ProductItem.vue\u0026#34; import CategoryList from \u0026#34;../components/CategoryList.vue\u0026#34; import Header from \u0026#34;../components/Header.vue\u0026#34; import { mapMutations, mapState, mapGetters } from \u0026#39;vuex\u0026#39;; import { StoreState } from \u0026#34;../store\u0026#34;; export default defineComponent({ name: \u0026#34;ProductList\u0026#34;, components: { ProductItem, CategoryList, Header }, data() { const products: Product[] = []; [1, 2, 3, 4, 5].map((num) =\u0026gt; products.push( new Product(num, `Prod${num}`, `Product ${num}`, `Cat${num % 2}`, 100))); return { products, selectedCategory: \u0026#34;All\u0026#34;, order: new Order() }; }, computed: { ... mapState\u0026lt;StoreState\u0026gt;({ selectedCategory: (state: StoreState) =\u0026gt; state.selectedCategory, products: (state: StoreState) =\u0026gt; state.products, order: (state: StoreState) =\u0026gt; state.order, }), ...mapGetters([\u0026#34;filteredProducts\u0026#34;, \u0026#34;categories\u0026#34;]), }, methods: { ...mapMutations({ handleSelectCategory: \u0026#34;selectCategory\u0026#34;, handleAddToCart: \u0026#34;addToOrder\u0026#34;, }), }, }); \u0026lt;/script\u0026gt; ä½¿ç”¨ data store çš„æ¸¬è©¦çµæœ è©ƒä‡¸å¼æ”¹ç”±ç¶²è·¯æœå‹™å–å¾—è³‡æ–™ ä¿®æ”¹ data store ç¨‹å¼å…§å®¹ import { Order, Product } from \u0026#39;@/data/entities\u0026#39; import { createStore } from \u0026#39;vuex\u0026#39; export interface StoreState { products: Product[], order: Order, selectedCategory: string, storedId: number } type ProductSelection = { product: Product, quantity: number } export default createStore\u0026lt;StoreState\u0026gt;({ state: { products: [1, 2, 3, 4, 5].map(num =\u0026gt; new Product( num, `StoreProd${num}`, `Product${num}`, `Cat${num % 2}` , 450) ), order: new Order(), selectedCategory: \u0026#34;All\u0026#34;, storedId: -1 }, mutations: { selectCategory(currentState: StoreState, category: string) { currentState.selectedCategory = category; }, addToOrder(currentState: StoreState, selection: ProductSelection) { currentState.order.addProduct(selection.product, selection.quantity); }, addProducts(currentState: StoreState, products: Product[]) { currentState.products = products; }, setOrderId(currentState: StoreState, id: number) { currentState.storedId = id; }, resetOrder(currentState: StoreState) { currentState.order = new Order(); } }, getters: { categories(state): string[] { return [\u0026#34;All\u0026#34;, ...new Set(state.products.map(p =\u0026gt; p.category))]; }, filteredProducts(state): Product[] { return state.products.filter(p =\u0026gt; state.selectedCategory === \u0026#34;All\u0026#34; || state.selectedCategory === p.category); } }, actions: { async loadProducts(context, task: () =\u0026gt; Promise\u0026lt;Product[]\u0026gt;) { const data = await task(); context.commit(\u0026#34;addProducts\u0026#34;, data); }, async storeOrder(context, task: (order: Order) =\u0026gt; Promise\u0026lt;number\u0026gt;) { context.commit(\u0026#34;setOrderId\u0026#34;, await task(context.state.order)); context.commit(\u0026#34;resetOrder\u0026#34;); }, }, modules: { } }) å»ºç«‹ httpHandler.ts åœ¨æ’°å¯« httpHandler.ts å‰è¦å®‰è£ axios\n$ npm install axios@0.27.2 $ touch ./src/data/httpHandler.ts httpHandler.ts å…§å®¹å¦‚ä¸‹ï¼š\nimport Axios from \u0026#34;axios\u0026#34;; import { Order, Product } from \u0026#34;./entities\u0026#34;; const protocol = \u0026#34;http\u0026#34;; const hostname = \u0026#34;localhost\u0026#34;; const port = 4600; const urls ={ products: `${protocol}://${hostname}:${port}/products`, orders: `${protocol}://${hostname}:${port}/orders` }; export class HttpHandler { loadProducts(): Promise\u0026lt;Product[]\u0026gt; { return Axios.get\u0026lt;Product[]\u0026gt;(urls.products).then(response =\u0026gt; response.data); } storeOrder(order: Order): Promise\u0026lt;number\u0026gt; { const orderData = { lines: [...order.orderLines.values()].map(ol =\u0026gt; ({ productId: ol.product.id, productName: ol.product.name, quantity: ol.quantity })) } return Axios.post\u0026lt;{id: number }\u0026gt;(urls.orders, orderData).then(response =\u0026gt; response.data.id); } } ä¿®æ”¹ App.vue å¾ç¶²è·¯è¼‰å…¥å•†å“è³‡æ–™ \u0026lt;template\u0026gt; \u0026lt;ProductList /\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script lang=\u0026#34;ts\u0026#34;\u0026gt; import { defineComponent, onMounted } from \u0026#39;vue\u0026#39;; import { useStore } from \u0026#39;vuex\u0026#39;; import { HttpHandler } from \u0026#39;./data/httpHandler\u0026#39;; import ProductList from \u0026#34;./views/ProductList.vue\u0026#34; export default defineComponent({ name: \u0026#34;App\u0026#34;, components: { ProductList }, setup() { const store = useStore(); const handler = new HttpHandler(); onMounted(() =\u0026gt; store.dispatch(\u0026#34;loadProducts\u0026#34;, handler.loadProducts)); }, }); \u0026lt;/script\u0026gt; onMounted() æ˜¯ Vue.js æä¾›çš„ä¸€å€‹å…ƒä»¶ç”Ÿå‘½é€±æœŸå‡½å¼ã€‚é€šå¸¸éƒ½æœƒè¢«é¸å®šåœ¨é€™å€‹æ™‚æ©Ÿä¾†è¼‰å…¥å¤–éƒ¨è³‡æ–™ã€‚\nåŸ·è¡Œæ¸¬è©¦ ç¨‹å¼è‡³æ­¤å·²å°‡è³‡æ–™é€£çµç”± local æ”¹åˆ° Json-Serverï¼Œä¸¦å°‡å–å¾—çš„è³‡æ–™æ”¾å…¥ data store ä¸­ï¼Œä¸”å…ƒä»¶è³‡æ–™ç¶å®šè‡³ data storeã€‚\n$ npm start è¨­å®š URL è·¯ç”± é›–ç„¶åœ¨ç­†è¨˜æœ€å‰é¢ä½¿ç”¨ @vue/cli ä¾†ç”£ç”Ÿæ‡‰ç”¨ç¨‹å¼é è¨­æ¶æ§‹æ™‚ï¼Œæˆ‘å€‘å·²é¸æ“‡ä½¿ç”¨ Router åŠŸèƒ½ï¼Œä½†ç¨‹å¼è‡³æ­¤æˆ‘å€‘é‚„æ²’æœ‰ä½¿ç”¨åˆ° Router ç›¸é—œåŠŸèƒ½ã€‚æˆ‘å€‘å…ˆå°‡ App.vue template ä¸­ï½€å¯«æ­»ï½€ä½¿ç”¨ ProductList å…ƒä»¶çš„èªæ³•æ”¹æˆé€é router åŠŸèƒ½ä¾†å‘¼å« ProductList å…ƒä»¶ã€‚\nä¿®æ”¹ Router è¨­å®šè³‡æ–™ ä¿®æ”¹ ./src/router/index.ts æª”æ¡ˆï¼Œå°‡é è¨­ç”£ç”Ÿçš„å…§å®¹ä¿®æ”¹å¦‚ä¸‹\nimport ProductList from \u0026#39;@/views/ProductList.vue\u0026#39; import { createRouter, createWebHistory, RouteRecordRaw } from \u0026#39;vue-router\u0026#39; const routes: Array\u0026lt;RouteRecordRaw\u0026gt; = [ { path: \u0026#39;/products\u0026#39;, component: ProductList }, { path: \u0026#39;/\u0026#39;, redirect: \u0026#39;/products\u0026#39; } ] const router = createRouter({ history: createWebHistory(process.env.BASE_URL), routes }) export default router ä¿®æ”¹ App.vue å°‡ App.vue ä¸­ template å¯«æ­»çš„ç¨‹å¼ç¢¼ï¼ˆä½¿ç”¨å…ƒä»¶ï¼‰æ”¹æˆ  tag\n// ./src/App.vue \u0026lt;template\u0026gt; \u0026lt;router-view/\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script lang=\u0026#34;ts\u0026#34;\u0026gt; import { defineComponent, onMounted } from \u0026#39;vue\u0026#39;; import { useStore } from \u0026#39;vuex\u0026#39;; import { HttpHandler } from \u0026#39;./data/httpHandler\u0026#39;; // import ProductList from \u0026#34;./views/ProductList.vue\u0026#34;  export default defineComponent({ name: \u0026#34;App\u0026#34;, // components: { ProductList },  setup() { const store = useStore(); const handler = new HttpHandler(); onMounted(() =\u0026gt; store.dispatch(\u0026#34;loadProducts\u0026#34;, handler.loadProducts)); }, }); \u0026lt;/script\u0026gt; åŸ·è¡Œç¨‹å¼ ä¿®æ”¹å¾ŒåŸ·è¡Œçµæœï¼š\nå®Œæˆå…¶ä»–åŠŸèƒ½ æ¥ä¸‹ä¾†æˆ‘å€‘è¦å®Œæˆå…¶é¤˜çš„äºŒå€‹åŠŸèƒ½ï¼šè¨‚å–®ç¢ºèªåŠŸèƒ½åŠè¨‚è³¼æˆåŠŸç­‰åŠŸèƒ½ï¼Œä¸¦å°‡æ­¤äºŒåŠŸèƒ½ä¹ŸåŠ å…¥ URLè·¯ç”± è¨­å®šæª”ä¸­ã€‚\nåŠ å…¥è¨‚å–®ç¢ºèªå…ƒä»¶ $ touch ./src/views/OrderDetails.vue\n\u0026lt;template\u0026gt; \u0026lt;div\u0026gt; \u0026lt;h3 class=\u0026#34;text-center bg-primary text-white p-2\u0026#34;\u0026gt; Order Summary \u0026lt;/h3\u0026gt; \u0026lt;div class=\u0026#34;p-3\u0026#34;\u0026gt; \u0026lt;table class=\u0026#34;table table-sm table-striped\u0026#34;\u0026gt; \u0026lt;thead\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;th\u0026gt; Quantity\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt; Product\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-end\u0026#34;\u0026gt; Price\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-end\u0026#34;\u0026gt; Subtotal\u0026lt;/th\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/thead\u0026gt; \u0026lt;tbody\u0026gt; \u0026lt;tr v-for=\u0026#34;line in order.lines\u0026#34; v-bind:key=\u0026#34;line.product.id\u0026#34;\u0026gt; \u0026lt;td\u0026gt;{{ line.quantity }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ line.product.name }}\u0026lt;/td\u0026gt; \u0026lt;td class=\u0026#34;text-end\u0026#34;\u0026gt;{{ line.product.price.toFixed(2) }}\u0026lt;/td\u0026gt; \u0026lt;td class=\u0026#34;text-end\u0026#34;\u0026gt;{{ line.total.toFixed(2) }}\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/tbody\u0026gt; \u0026lt;tfoot\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;th class=\u0026#34;text-end\u0026#34; colspan=\u0026#34;3\u0026#34;\u0026gt;Total:\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-end\u0026#34;\u0026gt;${{ order.total.toFixed(2) }}\u0026lt;/th\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/tfoot\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;text-center\u0026#34;\u0026gt; \u0026lt;router-link to=\u0026#34;/products\u0026#34; class=\u0026#34;btn btn-secondary m-1\u0026#34;\u0026gt; Back \u0026lt;/router-link\u0026gt; \u0026lt;button class=\u0026#34;btn btn-primary m-1\u0026#34; @click=\u0026#34;submit\u0026#34;\u0026gt;Submit Order\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script lang=\u0026#34;ts\u0026#34;\u0026gt; import { Order } from \u0026#39;@/data/entities\u0026#39;; import { HttpHandler } from \u0026#39;../data/httpHandler\u0026#39;; import { StoreState } from \u0026#39;@/store\u0026#39;; import { defineComponent } from \u0026#39;vue\u0026#39;; import { mapActions, mapState } from \u0026#39;vuex\u0026#39;; export default defineComponent({ name: \u0026#34;OrderDetails\u0026#34;, computed: { ...mapState\u0026lt;StoreState\u0026gt;({ order: (state: StoreState) =\u0026gt; state.order, }), }, methods: { ...mapActions([\u0026#34;storeOrder\u0026#34;]), submit() { this.storeOrder((order: Order) =\u0026gt; { return new HttpHandler().storeOrder(order).then((id) =\u0026gt; { this.$router.push(\u0026#34;/summary\u0026#34;); return id; }); }); }, }, }); \u0026lt;/script\u0026gt; åŠ å…¥è¨‚è³¼æˆåŠŸå…ƒä»¶ $ touch ./src/views/Summary.vue\n\u0026lt;template\u0026gt; \u0026lt;div class=\u0026#34;m-2 text-center\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;Thanks!\u0026lt;/h2\u0026gt; \u0026lt;p\u0026gt;Thanks for placing your order.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;Your order is #{{ id }}\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;We\u0026#39;ll ship your goods as soon as possible.\u0026lt;/p\u0026gt; \u0026lt;router-link to=\u0026#34;/products\u0026#34; class=\u0026#34;btn btn-primary\u0026#34;\u0026gt;OK\u0026lt;/router-link\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script lang=\u0026#34;ts\u0026#34;\u0026gt; import { StoreState } from \u0026#39;@/store\u0026#39;; import { defineComponent } from \u0026#39;vue\u0026#39;; import { mapState } from \u0026#39;vuex\u0026#39;; export default defineComponent({ name: \u0026#34;Summary\u0026#34;, computed: { ...mapState\u0026lt;StoreState\u0026gt;({ id: (state: StoreState) =\u0026gt; state.storedId, }) } }) \u0026lt;/script\u0026gt; ä¿®æ”¹ Header.vue URL è½‰å€åŠŸèƒ½ // Header.vue \u0026lt;template\u0026gt; \u0026lt;div class=\u0026#34;p-1 bg-secondary text-white text-end\u0026#34;\u0026gt; {{ displayText }} \u0026lt;!-- \u0026lt;button class=\u0026#34;btn btn-sm btn-primary m-1\u0026gt;\u0026#34;\u0026gt;Submit Order\u0026lt;/button\u0026gt; --\u0026gt; \u0026lt;router-link to = \u0026#34;/order\u0026#34; class=\u0026#34;btn btn-sm btn-primary m-1\u0026#34;\u0026gt; Submit Order \u0026lt;/router-link\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/template\u0026gt; \u0026lt;script lang=\u0026#34;ts\u0026#34;\u0026gt; // import { Order } from \u0026#39;@/data/entities\u0026#39;; import { defineComponent, PropType } from \u0026#39;vue\u0026#39;; import { useStore } from \u0026#34;vuex\u0026#34;; export default defineComponent({ name: \u0026#34;Header\u0026#34;, // props: {  // order: {  // type: Object as PropType\u0026lt;Order\u0026gt;,  // required: true  // },  // },  setup() { return {store: useStore()}; }, computed: { displayText(): string { // const count = this.order.productCount;  // return count === 0 ? \u0026#34;(No Selection)\u0026#34; : `${count} Product(s), $${this.order.total.toFixed(2)}`;  const count = this.store.state.order.productCount; return count === 0 ? \u0026#34;(No Selection)\u0026#34; : `${count}Product(s) ` + `$${this.store.state.order.total.toFixed(2)}`; }, }, }); \u0026lt;/script\u0026gt; å®Œæˆè·¯ç”±è¨­å®š // ./src/router/index.ts import ProductList from \u0026#39;@/views/ProductList.vue\u0026#39; import OrderDetails from \u0026#39;@/views/OrderDetails.vue\u0026#39; import Summary from \u0026#39;@/views/Summary.vue\u0026#39; import { createRouter, createWebHistory, RouteRecordRaw } from \u0026#39;vue-router\u0026#39; const routes: Array\u0026lt;RouteRecordRaw\u0026gt; = [ { path: \u0026#39;/products\u0026#39;, component: ProductList }, { path: \u0026#39;/order\u0026#39;, component: OrderDetails }, { path: \u0026#39;/summary\u0026#39;, component: Summary }, { path: \u0026#39;/\u0026#39;, redirect: \u0026#39;/products\u0026#39; } ] const router = createRouter({ history: createWebHistory(process.env.BASE_URL), routes }) export default router åŸ·è¡Œæ¸¬è©¦ ä½ˆç½²æ‡‰ç”¨ç¨‹å¼ ä½¿ç”¨ NodeJS \u0026amp; Express ä¾†ç•¶ä½œ Http Server \u0026amp; Web Api Server\nå®‰è£ express å¥—ä»¶ \u0026amp; -connect-history-api-fallback å¥—ä»¶ $ npm install --save-dev express@4.18.1 connect-history-api-fallback@2.0.0\nå»ºç«‹ node ä¼ºæœå™¨ $ touch server.js\nconst express = require(\u0026#34;express\u0026#34;); const jsonServer = require(\u0026#34;json-server\u0026#34;); const history = require(\u0026#34;connect-history-api-fallback\u0026#34;); const app = express(); app.use(history()); app.use(\u0026#34;/\u0026#34;, express.static(\u0026#34;dist\u0026#34;)); const router = jsonServer.router(\u0026#34;data.json\u0026#34;); app.use(jsonServer.bodyParser); app.use(\u0026#34;/api\u0026#34;, (req, res, next) =\u0026gt; router(req, res, next)); const port = process.argv[3] || 4003; app.listen(port, ()=\u0026gt; console.log(`Running on port ${port}`)); ä¿®æ”¹ url è·¯å¾‘ ä¿®æ”¹ httpHandler.ts\nimport Axios from \u0026#34;axios\u0026#34;; import { Order, Product } from \u0026#34;./entities\u0026#34;; // const protocol = \u0026#34;http\u0026#34;; // const hostname = \u0026#34;localhost\u0026#34;; // const port = 4600; // const urls = { // products: `${protocol}://${hostname}:${port}/products`, // orders: `${protocol}://${hostname}:${port}/orders`, // }; const urls = { products: \u0026#34;/api/products\u0026#34;, orders: \u0026#34;/api/orders\u0026#34; } export class HttpHandler { loadProducts(callback: (producs: Product[]) =\u0026gt; void): void { Axios.get(urls.products).then(response =\u0026gt; callback(response.data)) } storeOrder(order: Order, callback: (id: number) =\u0026gt; void): void { let orderData = { lines: [...order.orderLines.values()].map(ol =\u0026gt; ({ productId: ol.product.id, productName: ol.product.name, quantity: ol.quantity })) } Axios.post(urls.orders, orderData).then(response =\u0026gt; callback(response.data.id)); } } å»ºç½® Vue App $ npm run build npm run build \u0026gt; vueapp@0.1.0 build \u0026gt; vue-cli-service build All browser targets in the browserslist configuration have supported ES module. Therefore we do not build two separate bundles for differential loading. â § Building for production... WARNING Compiled with 3 warnings ä¸‹åˆ12:03:12 [eslint] /home/egs/cal-data/tech-test/typescript/book/vueapp/src/components/Header.vue 13:27 warning \u0026#39;PropType\u0026#39; is defined but never used @typescript-eslint/no-unused-vars âœ– 1 problem (0 errors, 1 warning) You may use special comments to disable some warnings. Use // eslint-disable-next-line to ignore the next line. Use /* eslint-disable */ to ignore all warnings in a file. warning entrypoint size limit: The following entrypoint(s) combined asset size exceeds the recommended limit (244 KiB). This can impact web performance. Entrypoints: app (336 KiB) css/chunk-vendors.2186f2e7.css js/chunk-vendors.c958b33a.js js/app.e01e1595.js warning webpack performance recommendations: You can limit the size of your bundles by using import() or require.ensure to lazy load some parts of your application. For more info visit https://webpack.js.org/guides/code-splitting/ File Size Gzipped dist/js/chunk-vendors.c958b33a.js 139.69 KiB 49.73 KiB dist/js/app.e01e1595.js 9.58 KiB 3.57 KiB dist/css/chunk-vendors.2186f2e7.css 187.06 KiB 26.69 KiB Images and other types of assets omitted. Build at: 2022-08-28T04:03:12.312Z - Hash: b0905e88b215d52d - Time: 9430ms DONE Build complete. The dist directory is ready to be deployed. INFO Check out deployment instructions at https://cli.vuejs.org/guide/deployment.html åŸ·è¡Œ $ node server.js Running on port 4003 åŠŸèƒ½å®Œæˆå¾Œçš„ç¨‹å¼æª”æ¡ˆçµæ§‹ï¼š\n","permalink":"https://calvinegs.github.io/posts/webapp-vue/","summary":"github Source code\nAngularã€Reactã€Vue æ˜¯ä¸‰å€‹æœ€å—æ­¡è¿çš„å‰ç«¯æ¡†æ¶ï¼Œé€™æ˜¯ä¸‰ç¯‡ç­†è¨˜åˆ†åˆ¥ä½¿ç”¨é€™ä¸‰å€‹ä¸åŒçš„æ¡†æ¶ä¾†å»ºç«‹åŠŸèƒ½ä¸€æ¨¡ä¸€æ¨£çš„ç¶²è·¯æ‡‰ç”¨ç¨‹å¼ä¸­çš„ç¬¬ä¸‰ç¯‡ - ä½¿ç”¨ Vue ä¾†å»ºç«‹ç¶²è·¯æ‡‰ç”¨ç¨‹å¼ã€‚\né€™å€‹ç¶²è·¯æ‡‰ç”¨ç¨‹å¼çš„éœ€æ±‚\n ç”£å“è¨‚è³¼åŠŸèƒ½  è¡¨é ­ï¼šè¨‚è³¼å•†å“ç¸½æ•¸ã€ç¸½é¡åŠé€å‡ºè¨‚å–®åŠŸèƒ½ å•†å“éæ¿¾åŠŸèƒ½ï¼šä¾ç”£å“é¡åˆ¥ä¾†é¡¯ç¤ºå•†å“ å•†å“æ¸…å–®ï¼šé¡¯ç¤ºå•†å“æ˜ç´°ã€å•†å“å”®åƒ¹ã€è¨‚è³¼æ•¸é‡ä¸‹æ‹‰é¸å–®åŠåŠ å…¥è³¼ç‰©è»Šç­‰åŠŸèƒ½   è¨‚å–®ç¢ºèªåŠŸèƒ½ï¼šé¡¯ç¤ºè¨‚è³¼å•†å“æ˜ç´°åŠç¸½é‡‘é¡ è¨‚è³¼æˆåŠŸåŠŸèƒ½ï¼šé¡¯ç¤ºè¨‚è³¼å®Œæˆè³‡è¨Š  ä½¿ç”¨æŠ€è¡“:\n Vue 3 Bootstrap 5 (UI Framework) Vue Router 4 Vuex 4 axios 0.27 NodeJS 18.5 \u0026amp; Express 4.18 json-server 0.17.0 npm-run-all 4.1.5 (npm å¥—ä»¶) @vue/cli  å»ºç«‹æ–°å°ˆæ¡ˆ ä½¿ç”¨ä¸‹åˆ—çš„ npx èªæ³•å³å¯å»ºç«‹æœ€æ–°ç‰ˆ Vue é è¨­çš„æ‡‰ç”¨ç¨‹å¼çµæ§‹\n$ npx @vue/cli create vueapp Vue CLI v5.0.8 ? Please pick a preset: Manually select features ?","title":"ä½¿ç”¨ Vue ä¾†å»ºç«‹ç¶²è·¯æ‡‰ç”¨ç¨‹å¼"},{"content":"github Source code\nAngularã€Reactã€Vue æ˜¯ä¸‰å€‹æœ€å—æ­¡è¿çš„å‰ç«¯æ¡†æ¶ï¼Œé€™æ˜¯ä¸‰ç¯‡ç­†è¨˜åˆ†åˆ¥ä½¿ç”¨é€™ä¸‰å€‹ä¸åŒçš„æ¡†æ¶ä¾†å»ºç«‹åŠŸèƒ½ä¸€æ¨¡ä¸€æ¨£çš„ç¶²è·¯æ‡‰ç”¨ç¨‹å¼ä¸­çš„ç¬¬äºŒç¯‡ã€‚\né€™å€‹ç¶²è·¯æ‡‰ç”¨ç¨‹å¼çš„éœ€æ±‚\n ç”£å“è¨‚è³¼åŠŸèƒ½  è¡¨é ­ï¼šè¨‚è³¼å•†å“ç¸½æ•¸ã€ç¸½é¡åŠé€å‡ºè¨‚å–®åŠŸèƒ½ å•†å“éæ¿¾åŠŸèƒ½ï¼šä¾ç”£å“é¡åˆ¥ä¾†é¡¯ç¤ºå•†å“ å•†å“æ¸…å–®ï¼šé¡¯ç¤ºå•†å“æ˜ç´°ã€å•†å“å”®åƒ¹ã€è¨‚è³¼æ•¸é‡ä¸‹æ‹‰é¸å–®åŠåŠ å…¥è³¼ç‰©è»Šç­‰åŠŸèƒ½   è¨‚å–®ç¢ºèªåŠŸèƒ½ï¼šé¡¯ç¤ºè¨‚è³¼å•†å“æ˜ç´°åŠç¸½é‡‘é¡ è¨‚è³¼æˆåŠŸåŠŸèƒ½ï¼šé¡¯ç¤ºè¨‚è³¼å®Œæˆè³‡è¨Š  ä½¿ç”¨æŠ€è¡“:\n React 18 Bootstrap 5 (UI Framework) React Router 6 React Redux 8 NodeJS \u0026amp; Express json-server npm-run-all (npm å¥—ä»¶)  å»ºç«‹æ–°å°ˆæ¡ˆ ä½¿ç”¨ä¸‹åˆ—çš„ npm init èªæ³•å³å¯å»ºç«‹æœ€æ–°ç‰ˆ React é è¨­çš„æ‡‰ç”¨ç¨‹å¼çµæ§‹\n$ npx create-react-app reactapp --template typescript Creating a new React app in /home/egs/cal-data/tech-test/typescript/book/reactapp. Installing packages. This might take a couple of minutes. Installing react, react-dom, and react-scripts with cra-template-typescript... added 1393 packages in 45s 207 packages are looking for funding run `npm fund` for details Initialized a git repository. Installing template dependencies using npm... added 35 packages, and changed 1 package in 5s 207 packages are looking for funding run `npm fund` for details We detected TypeScript in your project (src/App.test.tsx) and created a tsconfig.json file for you. Your tsconfig.json has been populated with default values. Removing template package using npm... removed 1 package, and audited 1428 packages in 2s 207 packages are looking for funding run `npm fund` for details 6 high severity vulnerabilities To address all issues (including breaking changes), run: npm audit fix --force Run `npm audit` for details. Created git commit. Success! Created reactapp at /home/egs/cal-data/tech-test/typescript/book/reactapp Inside that directory, you can run several commands: npm start Starts the development server. npm run build Bundles the app into static files for production. npm test Starts the test runner. npm run eject Removes this tool and copies build dependencies, configuration files and scripts into the app directory. If you do this, you canâ€™t go back! We suggest that you begin by typing: cd reactapp npm start Happy hacking! æŸ¥çœ‹ package.json ä¸­ç›¸ä¾å¥—ä»¶åŠç‰ˆæœ¬ $ cd reactapp $ cat package.json { \u0026#34;name\u0026#34;: \u0026#34;reactapp\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0.1.0\u0026#34;, \u0026#34;private\u0026#34;: true, \u0026#34;dependencies\u0026#34;: { \u0026#34;@testing-library/jest-dom\u0026#34;: \u0026#34;^5.16.5\u0026#34;, \u0026#34;@testing-library/react\u0026#34;: \u0026#34;^13.3.0\u0026#34;, \u0026#34;@testing-library/user-event\u0026#34;: \u0026#34;^13.5.0\u0026#34;, \u0026#34;@types/jest\u0026#34;: \u0026#34;^27.5.2\u0026#34;, \u0026#34;@types/node\u0026#34;: \u0026#34;^16.11.54\u0026#34;, \u0026#34;@types/react\u0026#34;: \u0026#34;^18.0.17\u0026#34;, \u0026#34;@types/react-dom\u0026#34;: \u0026#34;^18.0.6\u0026#34;, \u0026#34;react\u0026#34;: \u0026#34;^18.2.0\u0026#34;, \u0026#34;react-dom\u0026#34;: \u0026#34;^18.2.0\u0026#34;, \u0026#34;react-scripts\u0026#34;: \u0026#34;5.0.1\u0026#34;, \u0026#34;typescript\u0026#34;: \u0026#34;^4.7.4\u0026#34;, \u0026#34;web-vitals\u0026#34;: \u0026#34;^2.1.4\u0026#34; }, \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;react-scripts start\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;react-scripts build\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;react-scripts test\u0026#34;, \u0026#34;eject\u0026#34;: \u0026#34;react-scripts eject\u0026#34; }, \u0026#34;eslintConfig\u0026#34;: { \u0026#34;extends\u0026#34;: [ \u0026#34;react-app\u0026#34;, \u0026#34;react-app/jest\u0026#34; ] }, \u0026#34;browserslist\u0026#34;: { \u0026#34;production\u0026#34;: [ \u0026#34;\u0026gt;0.2%\u0026#34;, \u0026#34;not dead\u0026#34;, \u0026#34;not op_mini all\u0026#34; ], \u0026#34;development\u0026#34;: [ \u0026#34;last 1 chrome version\u0026#34;, \u0026#34;last 1 firefox version\u0026#34;, \u0026#34;last 1 safari version\u0026#34; ] } } ç”£ç”Ÿçš„é è¨­ç¨‹å¼çµæ§‹ åŸ·è¡Œç”± CLI ç”£ç”Ÿçš„é è¨­ç¨‹å¼æ¶æ§‹ $ npm i $ npm start Compiled successfully! You can now view reactapp in the browser. Local: http://localhost:3000 On Your Network: http://192.168.0.125:3000 Note that the development build is not optimized. To create a production build, use npm run build. webpack compiled successfully No issues found. é–‹å•Ÿç€è¦½å™¨ï¼Œè¼¸å…¥ http://localhost:3000/ $ git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Initial Commit\u0026#34; # åŠ å…¥ git æ–°ç‰ˆæœ¬ $ code . # æ‰“é–‹ vscode ä½¿ç”¨ json-server ç•¶ä½œå¾Œç«¯ Web Api åœ¨æˆ‘å€‘çš„å‰ç«¯æ‡‰ç”¨ç¨‹å¼ä¸­æœƒä½¿ç”¨åˆ°å¾Œç«¯ä¼ºæœå™¨çš„è³‡æ–™ï¼Œæ–¹ä¾¿èµ·è¦‹ç›´æ¥ä½¿ç”¨ json-serverã€€ä¾†ç•¶ä½œå¾Œç«¯ Web Api\nå®‰è£ json-server $ npm install --save-dev json-server@0.17.0 npm-run-all@4.1.5\nå»ºç«‹çµ¦ json-server ä½¿ç”¨çš„è³‡æ–™ $ touch data.json # data.json å…§å®¹å¦‚ä¸‹ { \u0026#34;products\u0026#34;: [ { \u0026#34;id\u0026#34;: 1, \u0026#34;name\u0026#34;: \u0026#34;kayak\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Watersports\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;A boat form on person\u0026#34;, \u0026#34;price\u0026#34;: 275 }, { \u0026#34;id\u0026#34;: 2, \u0026#34;name\u0026#34;: \u0026#34;Lifejacket\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Watersports\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Protective and fashionable boat form on person\u0026#34;, \u0026#34;price\u0026#34;: 48.95 }, { \u0026#34;id\u0026#34;: 3, \u0026#34;name\u0026#34;: \u0026#34;Soccer Ball\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Soccer\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;FIFA-approved size and weight\u0026#34;, \u0026#34;price\u0026#34;: 19.5 }, { \u0026#34;id\u0026#34;: 4, \u0026#34;name\u0026#34;: \u0026#34;Corner Flags\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Soccer\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Give your playing field a professional touch\u0026#34;, \u0026#34;price\u0026#34;: 34.95 }, { \u0026#34;id\u0026#34;: 5, \u0026#34;name\u0026#34;: \u0026#34;Stadium\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Soccer\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Flat-packed 35,000-seat stadium\u0026#34;, \u0026#34;price\u0026#34;: 79500 }, { \u0026#34;id\u0026#34;: 6, \u0026#34;name\u0026#34;: \u0026#34;Thinking Cap\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Chess\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Imporove brain efficiency by 75%\u0026#34;, \u0026#34;price\u0026#34;: 16 }, { \u0026#34;id\u0026#34;: 7, \u0026#34;name\u0026#34;: \u0026#34;Unsteady Chair\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Chess\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Secretly give your opponent a disadvantage\u0026#34;, \u0026#34;price\u0026#34;: 29.95 }, { \u0026#34;id\u0026#34;: 8, \u0026#34;name\u0026#34;: \u0026#34;Human Chess Board\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Chess\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;A fun game for the family\u0026#34;, \u0026#34;price\u0026#34;: 75 }, { \u0026#34;id\u0026#34;: 9, \u0026#34;name\u0026#34;: \u0026#34;Bling Bling King\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Chess\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Gold-plated, diamond-studded King\u0026#34;, \u0026#34;price\u0026#34;: 1200 } ], \u0026#34;orders\u0026#34;: [ ] } æ¸¬è©¦ json-server $ npx json-server data.json -p 4600 # ä½¿ç”¨ 4600 port \\{^_^}/ hi! Loading data.json Done Resources http://localhost:4600/products http://localhost:4600/orders Home http://localhost:4600 Type s + enter at any time to create a snapshot of the database GET /db 304 1.630 ms - - GET /__rules 404 4.536 ms - 2 è¨­å®š npm script in package.sjon // ... \t\u0026#34;scripts\u0026#34;: { \u0026#34;serve\u0026#34;: \u0026#34;react-scripts start\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;react-scripts build\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;react-scripts test\u0026#34;, \u0026#34;eject\u0026#34;: \u0026#34;react-scripts eject\u0026#34;, \u0026#34;json\u0026#34;: \u0026#34;json-server data.json -p 4600\u0026#34;, \u0026#34;start\u0026#34;: \u0026#34;npm-run-all -p serve json\u0026#34; }, // ... åœ¨å°ˆæ¡ˆä¸­ä½¿ç”¨ Bootstrap CSS å¥—ä»¶ å®‰è£ bootstrap 5 $ npm install bootstrap@5.2.0\nå¼•å…¥ bootstrap in index.tsx // ./src/index.tsx import React from \u0026#39;react\u0026#39;; import ReactDOM from \u0026#39;react-dom/client\u0026#39;; import \u0026#39;./index.css\u0026#39;; import App from \u0026#39;./App\u0026#39;; import \u0026#39;bootstrap/dist/css/bootstrap.css\u0026#39;; const root = ReactDOM.createRoot( document.getElementById(\u0026#39;root\u0026#39;) as HTMLElement ); root.render( \u0026lt;React.StrictMode\u0026gt; \u0026lt;App /\u0026gt; \u0026lt;/React.StrictMode\u0026gt; ); ä¿®æ”¹ tsconfig.json å°‡ \u0026ldquo;target\u0026rdquo; æ”¹æˆ \u0026ldquo;es2015\u0026rdquo;\n1 2 3 4 5 6 7 8 9 10 11 12  { \u0026#34;compilerOptions\u0026#34;: { \u0026#34;target\u0026#34;: \u0026#34;es2015\u0026#34;,  \u0026#34;lib\u0026#34;: [ \u0026#34;dom\u0026#34;, \u0026#34;dom.iterable\u0026#34;, \u0026#34;esnext\u0026#34; ], \u0026#34;allowJs\u0026#34;: true, // ...  } }   ç‚ºç¶²ç«™åŠ å…¥è³‡æ–™ å»ºç«‹è³‡æ–™æ¨¡å‹ $ mkdir ./src/data \u0026amp;\u0026amp; touch ./src/data/entities.ts\nentities.ts æª”æ¡ˆå…§å®¹å¦‚ä¸‹ï¼š\n// ./src/data/entities.ts export type Product = { id: number, name: string, description: string, category: string, price: number }; export class OrderLine { constructor(public product: Product, public quantity: number) { } get total(): number { return this.product.price * this.quantity; } } export class Order { private lines = new Map\u0026lt;number, OrderLine\u0026gt;(); constructor(initialLines?: OrderLine[]) { if (initialLines) { initialLines.forEach(ol =\u0026gt; this.lines.set(ol.product.id, ol)); } } public addProduct(prod: Product, quantity: number) { if (this.lines.has(prod.id)) { if (quantity === 0) { this.removeProduct(prod.id); } else { this.lines.get(prod.id)!.quantity += quantity; } } else { this.lines.set(prod.id, new OrderLine(prod, quantity)); } } public removeProduct(id: number) { this.lines.delete(id); } get orderLines(): OrderLine[] { return [...this.lines.values()]; } get productCount(): number { return [...this.lines.values()] .reduce((total, ol) =\u0026gt; total += ol.quantity, 0); } get total(): number { return [...this.lines.values()].reduce((total, ol) =\u0026gt; total += ol.total, 0); } } å»ºç«‹å•†å“è¨‚è³¼ç›¸é—œå…ƒä»¶ $ mkdir ./src/pages $ touch ./src/pages/productItem.tsx $ touch ./src/pages/categoryList.tsx $ touch ./src/pages/header.tsx $ touch ./src/pages/productList.tsx å•†å“æ˜ç´°å…ƒä»¶ (productItem) // productItem.tsx import { ChangeEvent, FunctionComponent, useState } from \u0026#34;react\u0026#34;; import { Product } from \u0026#34;../data/entities\u0026#34;; interface Props { product: Product, callback: (product: Product, quantity: number) =\u0026gt; void } export const ProductItem: FunctionComponent\u0026lt;Props\u0026gt; = (props) =\u0026gt; { const [quantity, setQuantity] = useState\u0026lt;number\u0026gt;(1); return \u0026lt;div className=\u0026#34;card m-1 p-1 bg-light\u0026#34;\u0026gt; \u0026lt;h4\u0026gt; {props.product.name} \u0026lt;span className=\u0026#34;badge rounded-pill bg-primary float-end\u0026#34;\u0026gt; ${props.product.price.toFixed(2)} \u0026lt;/span\u0026gt; \u0026lt;/h4\u0026gt; \u0026lt;div className=\u0026#34;card-text bg-white p-1\u0026#34;\u0026gt; {props.product.description} \u0026lt;button className=\u0026#34;btn btn-success btn-sm float-end\u0026#34; onClick={() =\u0026gt; props.callback(props.product, quantity)} \u0026gt; Add To Cart \u0026lt;/button\u0026gt; \u0026lt;select className=\u0026#34;form-control-inline float-end m-1\u0026#34; onChange={(ev: ChangeEvent\u0026lt;HTMLSelectElement\u0026gt;) =\u0026gt; setQuantity(Number(ev.target.value))}\u0026gt; \u0026lt;option\u0026gt;1\u0026lt;/option\u0026gt; \u0026lt;option\u0026gt;2\u0026lt;/option\u0026gt; \u0026lt;option\u0026gt;3\u0026lt;/option\u0026gt; \u0026lt;/select\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; } å•†å“åˆ†é¡æŒ‰éˆ•å…ƒä»¶ (categoryList.tsx) // categoryList.tsx import React, { ChangeEvent, FunctionComponent, useState } from \u0026#39;react\u0026#39; interface Props { selected: string, categories: string[], selectCategory: (category: string) =\u0026gt; void } // export default function productItem() { export const CategoryList: FunctionComponent\u0026lt;Props\u0026gt; = (props) =\u0026gt; { return ( \u0026lt;div className=\u0026#39;d-grid gap-2\u0026#39;\u0026gt; {[\u0026#34;All\u0026#34;, ...props.categories].map(c =\u0026gt; { let btnClass = props.selected === c ? \u0026#34;btn-primary\u0026#34; : \u0026#34;btn-secondary\u0026#34;; return \u0026lt;button key={c} className={`btn ${btnClass}`} onClick={() =\u0026gt; props.selectCategory(c)}\u0026gt; {c} \u0026lt;/button\u0026gt; })} \u0026lt;/div\u0026gt; ) } è¡¨é ­å…ƒä»¶ (header) // header.tsx import { FunctionComponent } from \u0026#39;react\u0026#39; import { Order } from \u0026#39;../data/entities\u0026#39; interface Props { order: Order } // export default function productItem() { export const Header: FunctionComponent\u0026lt;Props\u0026gt; = (props) =\u0026gt; { const count = props.order.productCount; return ( \u0026lt;div className=\u0026#39;p-1 bg-secondary text-white text-end\u0026#39;\u0026gt; {count === 0 ? \u0026#34;(No Selection)\u0026#34; : `${count}product(s), $${props.order.total.toFixed(2)}`} \u0026lt;button className=\u0026#39;btn btn-sm btn-primary m-1\u0026#39;\u0026gt; Submit Order \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; ) } å•†å“æ¸…å–®å…ƒä»¶ (productList) // productList.tsx import { ChangeEvent, FunctionComponent, useState } from \u0026#39;react\u0026#39; import { Order, Product } from \u0026#39;../data/entities\u0026#39;; import { CategoryList } from \u0026#39;./categoryList\u0026#39;; import { Header } from \u0026#39;./header\u0026#39;; import { ProductItem } from \u0026#39;./productItem\u0026#39;; interface Props { products: Product[], categories: string[], order: Order, addToOrder: (product: Product, quantity: number) =\u0026gt; void } export const ProductList: FunctionComponent\u0026lt;Props\u0026gt; = (props) =\u0026gt; { const [selectedCategory, setSelectedCategory] = useState\u0026lt;string\u0026gt;(\u0026#34;All\u0026#34;); let products : Product[] = props.products.filter( p =\u0026gt; selectedCategory === \u0026#34;All\u0026#34; || p.category === selectedCategory); return ( \u0026lt;div\u0026gt; \u0026lt;Header order={props.order} /\u0026gt; {/* \u0026lt;Header order={Orders} /\u0026gt; */} \u0026lt;div className=\u0026#39;container-fluid\u0026#39;\u0026gt; \u0026lt;div className=\u0026#39;row\u0026#39;\u0026gt; \u0026lt;div className=\u0026#39;col-3 p-2\u0026#39;\u0026gt; \u0026lt;CategoryList categories={props.categories} selected={selectedCategory} selectCategory={(cat: string) =\u0026gt; { setSelectedCategory(cat); }} /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div className=\u0026#39;col-9 p-2\u0026#39;\u0026gt; { products.map(p =\u0026gt; \u0026lt;ProductItem key={p.id} product={p} callback={props.addToOrder} /\u0026gt;) } \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ) } æª”æ¡ˆçµæ§‹ ##ã€€åŸ·è¡Œç¨‹å¼\n$ npm start ä½¿ç”¨ Data Store ä¾†ç®¡ç† React æ‡‰ç”¨ç¨‹å¼çš„è³‡æ–™ åœ¨å¤§å¤šæ•¸çš„ React å°ˆæ¡ˆä¸­ï¼Œæ‡‰ç”¨ç¨‹å¼çš„è³‡æ–™æ˜¯äº¤ç”± \u0026ldquo;data store\u0026rdquo; è³‡æ–™å€‰å„²ä¾†ç®¡ç†ï¼Œç”±æœ€å¤šäººä½¿ç”¨çš„ç®¡ç†è³‡æ–™å¥—ä»¶å°±æ˜¯ Reduxã€‚\nå®‰è£ Redux $ npm install redux@4.2.0 react-redux@8.0.2 $ npm install --save-dev @types/react-redux@7.1.24 å»ºç«‹ Redux çš„ action é¡åˆ¥ $ touch ./src/data/types.ts // ./src/data/types.ts import { Action } from \u0026#34;redux\u0026#34;; import { Order, Product } from \u0026#34;./entities\u0026#34;; export interface StoreData { products: Product[], order: Order } export enum ACTIONS { ADD_PRODUCTS, MODIFY_ORDER, RESET_ORDER } export interface AddProductsAction extends Action\u0026lt;ACTIONS.ADD_PRODUCTS\u0026gt; { payload: Product[] } export interface ModifyOrderAction extends Action\u0026lt;ACTIONS.MODIFY_ORDER\u0026gt; { payload: { product: Product, quantity: number } } export interface ResetOrderAction extends Action\u0026lt;ACTIONS.RESET_ORDER\u0026gt; {} export type StoreAction = AddProductsAction | ModifyOrderAction | ResetOrderAction; å»ºç«‹ action creator $ touch ./src/data/actionCreators.ts // ./src/data/actionCreators.ts import { Product } from \u0026#34;./entities\u0026#34;; import { ACTIONS, AddProductsAction, ModifyOrderAction, ResetOrderAction } from \u0026#34;./types\u0026#34;; export const addProduct = (...products: Product[]): AddProductsAction =\u0026gt; ({ type: ACTIONS.ADD_PRODUCTS, payload: products }); export const modifyOrder = (product: Product, quantity: number): ModifyOrderAction =\u0026gt; ({ type: ACTIONS.MODIFY_ORDER, payload: { product, quantity} }); export const resetOrder = (product: Product, quantity: number): ResetOrderAction =\u0026gt; ({ type: ACTIONS.RESET_ORDER }); å»ºç«‹ Redux reducer ä¾†è™•ç† action $ touch ./src/data/reducer.ts import { Reducer } from \u0026#34;redux\u0026#34;; import { Order } from \u0026#34;./entities\u0026#34;; import { ACTIONS, StoreAction, StoreData } from \u0026#34;./types\u0026#34;; export const StoreReducer: Reducer\u0026lt;StoreData, StoreAction\u0026gt; = (data: StoreData | undefined , action) =\u0026gt; { data = data || { products: [], order: new Order()} switch (action.type) { case ACTIONS.ADD_PRODUCTS: return { ...data, products: [...data.products, ...action.payload] }; case ACTIONS.MODIFY_ORDER: data.order.addProduct( action.payload.product, action.payload.quantity ) return {...data}; case ACTIONS.RESET_ORDER: return { ...data, order:new Order() }; default: return data; } } å»ºç«‹ Data store $ touch ./src/data/dataStore.ts import { createStore, Store } from \u0026#34;redux\u0026#34;; import { StoreReducer } from \u0026#34;./reducer\u0026#34;; import { StoreAction, StoreData } from \u0026#34;./types\u0026#34;; export const dataStore: Store\u0026lt;StoreData, StoreAction\u0026gt; = createStore(StoreReducer); æ–°å¢ HTTP è«‹æ±‚é¡åˆ¥ å®‰è£ axios $ npm install axios@0.27.2 å»ºç«‹ httpHandler.ts $ touch ./src/data/httpHandler.ts import Axios from \u0026#34;axios\u0026#34;; import { Order, Product } from \u0026#34;./entities\u0026#34;; const protocol = \u0026#34;http\u0026#34;; const hostname = \u0026#34;localhost\u0026#34;; const port = 4600; const urls = { products: `${protocol}://${hostname}:${port}/products`, orders: `${protocol}://${hostname}:${port}/orders`, }; export class HttpHandler { loadProducts(callback: (producs: Product[]) =\u0026gt; void): void { Axios.get(urls.products).then(response =\u0026gt; callback(response.data)) } storeOrder(order: Order, callback: (id: number) =\u0026gt; void): void { let orderData = { lines: [...order.orderLines.values()].map(ol =\u0026gt; ({ productId: ol.product.id, productName: ol.product.name, quantity: ol.quantity })) } Axios.post(urls.orders, orderData).then(response =\u0026gt; callback(response.data.id)); } } é€£çµ Data Store èˆ‡å„å€‹å…ƒä»¶ ä½¿ç”¨ React-Redux å¥—ä»¶ä¾†å°‡æ‡‰ç”¨ç¨‹å¼å…ƒä»¶é€£æ¥åˆ° Redux data storeã€‚\n$ touch .src/data/productLitConnector.ts import { connect } from \u0026#34;react-redux\u0026#34;; import { ProductList } from \u0026#34;../pages/productList\u0026#34;; import { modifyOrder } from \u0026#34;./actionCreators\u0026#34;; import { StoreData } from \u0026#34;./types\u0026#34;; const mapStateToProps = (data: StoreData) =\u0026gt; ({ products: data.products, categories: [...new Set(data.products.map(p =\u0026gt; p.category))], order: data.order }) const mapDispatchToProps = { addToOrder: modifyOrder } const connectFunction = connect(mapStateToProps, mapDispatchToProps); export const ConnectedProductList = connectFunction(ProductList); ä¿®æ”¹ App.tsx import React, { FunctionComponent, useState } from \u0026#39;react\u0026#39;; import { Provider } from \u0026#39;react-redux\u0026#39;; import { addProduct } from \u0026#39;./data/actionCreators\u0026#39;; import { dataStore } from \u0026#39;./data/dataStore\u0026#39;; import { HttpHandler } from \u0026#39;./data/httpHandler\u0026#39;; import { ConnectedProductList } from \u0026#39;./data/productLitConnector\u0026#39;; interface Props { } let httpHandler = new HttpHandler(); httpHandler.loadProducts(data =\u0026gt; dataStore.dispatch(addProduct(...data))); export const App: FunctionComponent\u0026lt;Props\u0026gt; = (props) =\u0026gt; { let submitCallback = () =\u0026gt; { console.log(\u0026#34;Submit order\u0026#34;); }; return \u0026lt;div className=\u0026#39;App\u0026#39;\u0026gt; \u0026lt;Provider store={dataStore}\u0026gt; \u0026lt;ConnectedProductList /\u0026gt; \u0026lt;/Provider\u0026gt; \u0026lt;/div\u0026gt; } export default App; åŸ·è¡Œæ¸¬è©¦ ç¨‹å¼è‡³æ­¤å·²å°‡è³‡æ–™é€£çµç”± local æ”¹åˆ° Json-Serverï¼Œä¸¦å°‡å–å¾—çš„è³‡æ–™æ”¾å…¥ Redux data store ä¸­äº†ã€‚\n$ npm start å®Œæˆå…¶ä»–åŠŸèƒ½ æ¥ä¸‹ä¾†æˆ‘å€‘è¦å®Œæˆå…¶é¤˜çš„äºŒå€‹åŠŸèƒ½ï¼šè¨‚å–®ç¢ºèªåŠŸèƒ½åŠè¨‚è³¼æˆåŠŸåŠŸèƒ½ï¼Œåœ¨æˆ‘å€‘å·²å®Œæˆçš„å•†å“è¨‚è³¼å…ƒä»¶èˆ‡å‰è¿°äºŒå€‹å…ƒä»¶ä¸­åšåˆ‡æ›æ™‚ï¼Œæœƒéœ€è¦ä½¿ç”¨åˆ°URLè·¯ç”±åŠŸèƒ½ï¼Œåœ¨ React æ ¸å¿ƒä¸­ä¸¦æœªå…§å»ºè·¯ç”±åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘å€‘å¿…é ˆå®‰è£é¡å¤–çš„å¥—ä»¶ \u0026ndash; React Router å¥—ä»¶ã€‚\nå®‰è£ React Router å¥—ä»¶ $ npm install react-router-dom@6.3.0 $ npm install --save-dev @types/react-router-dom5.3.3 URL è·¯ç”±è¨­å®š ä¿®æ”¹ App.tsx\nimport { FunctionComponent } from \u0026#39;react\u0026#39;; import { Route, Routes, useNavigate } from \u0026#39;react-router-dom\u0026#39;; import { addProduct } from \u0026#39;./data/actionCreators\u0026#39;; import { dataStore } from \u0026#39;./data/dataStore\u0026#39;; import { Order } from \u0026#39;./data/entities\u0026#39;; import { HttpHandler } from \u0026#39;./data/httpHandler\u0026#39;; import { ConnectedProductList } from \u0026#39;./data/productLitConnector\u0026#39;; interface Props { } let httpHandler = new HttpHandler(); httpHandler.loadProducts(data =\u0026gt; dataStore.dispatch(addProduct(...data))); export const App: FunctionComponent\u0026lt;Props\u0026gt; = (props) =\u0026gt; { const navigate = useNavigate(); let submitCallback = () =\u0026gt; { httpHandler.storeOrder(dataStore.getState().order, id =\u0026gt; navigate(`/summary/${id}`, { replace: true})); dataStore.getState().order = new Order(); }; return \u0026lt;div className=\u0026#39;App\u0026#39;\u0026gt; \u0026lt;Routes\u0026gt; \u0026lt;Route index element={\u0026lt;ConnectedProductList/\u0026gt;}/\u0026gt; \u0026lt;Route path=\u0026#34;/products\u0026#34; element={\u0026lt;ConnectedProductList/\u0026gt;}/\u0026gt; {/* \u0026lt;Route path=\u0026#34;/order\u0026#34; element={\u0026lt;OrderDetails submitCallback={() =\u0026gt; submitCallback()}/\u0026gt;} /\u0026gt; \u0026lt;Route path=\u0026#34;/summary/:id\u0026#34; element={\u0026lt;Summary /\u0026gt;} /\u0026gt; */} \u0026lt;/Routes\u0026gt; \u0026lt;/div\u0026gt; } export default App; ä¿®æ”¹ index.tsx\nimport React from \u0026#39;react\u0026#39;; import ReactDOM from \u0026#39;react-dom/client\u0026#39;; import \u0026#39;./index.css\u0026#39;; import App from \u0026#39;./App\u0026#39;; import \u0026#39;bootstrap/dist/css/bootstrap.css\u0026#39;; import { BrowserRouter } from \u0026#39;react-router-dom\u0026#39;; import { Provider } from \u0026#39;react-redux\u0026#39;; import { dataStore } from \u0026#39;./data/dataStore\u0026#39;; const root = ReactDOM.createRoot( document.getElementById(\u0026#39;root\u0026#39;) as HTMLElement ); root.render( \u0026lt;React.StrictMode\u0026gt; \u0026lt;Provider store={dataStore}\u0026gt; \u0026lt;BrowserRouter\u0026gt; \u0026lt;App /\u0026gt; \u0026lt;/BrowserRouter\u0026gt; \u0026lt;/Provider\u0026gt; \u0026lt;/React.StrictMode\u0026gt; ); åŠ å…¥è¨‚å–®ç¢ºèªå…ƒä»¶ $ touch ./src/pages/orderDetails.tsx\nimport { connect } from \u0026#34;react-redux\u0026#34; import { FunctionComponent } from \u0026#34;react\u0026#34; import { NavLink } from \u0026#34;react-router-dom\u0026#34; import { Order } from \u0026#34;../data/entities\u0026#34; import { StoreData } from \u0026#34;../data/types\u0026#34; const mapStateToProps = (data: StoreData) =\u0026gt; ({ order: data.order }) interface Props { order: Order, submitCallback: () =\u0026gt; void } const OrderDetailComponent: FunctionComponent\u0026lt;Props\u0026gt; = (props) =\u0026gt; { return \u0026lt;div\u0026gt; \u0026lt;h3 className=\u0026#34;text-center bg-primary text-white p-2\u0026#34;\u0026gt; Order Summary \u0026lt;/h3\u0026gt; \u0026lt;div className=\u0026#34;p-3\u0026#34;\u0026gt; \u0026lt;table className=\u0026#34;table table-sm table-striped\u0026#34;\u0026gt; \u0026lt;thead\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;th\u0026gt;Quantity\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;Product\u0026lt;/th\u0026gt; \u0026lt;th className=\u0026#34;text-end\u0026#34;\u0026gt;Price\u0026lt;/th\u0026gt; \u0026lt;th className=\u0026#34;text-end\u0026#34;\u0026gt;Subtotal\u0026lt;/th\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/thead\u0026gt; \u0026lt;tbody\u0026gt; {props.order.orderLines.map(line =\u0026gt; \u0026lt;tr key={line.product.id}\u0026gt; \u0026lt;td\u0026gt;{line.quantity}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{line.product.name}\u0026lt;/td\u0026gt; \u0026lt;td className=\u0026#34;text-end\u0026#34;\u0026gt;{line.product.price.toFixed(2)}\u0026lt;/td\u0026gt; \u0026lt;td className=\u0026#34;text-end\u0026#34;\u0026gt;{line.total.toFixed(2)}\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; )} \u0026lt;/tbody\u0026gt; \u0026lt;tfoot\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;th className=\u0026#34;text-end\u0026#34; colSpan={3}\u0026gt;Total:\u0026lt;/th\u0026gt; \u0026lt;th className=\u0026#34;text-end\u0026#34; colSpan={3}\u0026gt;${props.order.total.toFixed(2)}\u0026lt;/th\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/tfoot\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div className=\u0026#34;text-center\u0026#34;\u0026gt; \u0026lt;NavLink to=\u0026#34;/products\u0026#34; className=\u0026#34;btn btn-secondary m-1\u0026#34;\u0026gt; Back \u0026lt;/NavLink\u0026gt; \u0026lt;button className=\u0026#34;btn btn-primary m-1\u0026#34; onClick={props.submitCallback}\u0026gt; Submit Order \u0026lt;/button\u0026gt; {/* \u0026lt;NavLink to=\u0026#34;/summary\u0026#34; className=\u0026#34;btn btn-primary m-1\u0026#34;\u0026gt; Submit Order \u0026lt;/NavLink\u0026gt; */} \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; } const connectFunction = connect(mapStateToProps); export const OrderDetails = connectFunction(OrderDetailComponent); åŠ å…¥è¨‚è³¼æˆåŠŸå…ƒä»¶ $ touch ./src/pages/summary.tsx\nimport { FunctionComponent } from \u0026#34;react\u0026#34; import { NavLink } from \u0026#34;react-router-dom\u0026#34; import { useParams } from \u0026#34;react-router-dom\u0026#34; interface Params { id: string } export const Summary: FunctionComponent = () =\u0026gt; { let params = useParams(); const id = params.id; return \u0026lt;div className=\u0026#34;m-2 text-center\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;Thanks!\u0026lt;/h2\u0026gt; \u0026lt;p\u0026gt;Thanks for placing your order.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;Your order is #{id}\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;We\u0026#39;ll ship your goods as soon as possible.\u0026lt;/p\u0026gt; \u0026lt;NavLink to=\u0026#34;/products\u0026#34; className=\u0026#34;btn btn-primary\u0026#34;\u0026gt;OK\u0026lt;/NavLink\u0026gt; \u0026lt;/div\u0026gt; } ä¿®æ”¹ Header.tsx URL è½‰å€åŠŸèƒ½ // header.tsx  å®Œæˆè·¯ç”±è¨­å®š // App.tsx import { FunctionComponent } from \u0026#39;react\u0026#39;; import { Route, Routes, useNavigate } from \u0026#39;react-router-dom\u0026#39;; import { addProduct } from \u0026#39;./data/actionCreators\u0026#39;; import { dataStore } from \u0026#39;./data/dataStore\u0026#39;; import { Order } from \u0026#39;./data/entities\u0026#39;; import { HttpHandler } from \u0026#39;./data/httpHandler\u0026#39;; import { ConnectedProductList } from \u0026#39;./data/productLitConnector\u0026#39;; import { OrderDetails } from \u0026#39;./pages/orderDetails\u0026#39;; import { Summary } from \u0026#39;./pages/summary\u0026#39;; interface Props { } let httpHandler = new HttpHandler(); httpHandler.loadProducts(data =\u0026gt; dataStore.dispatch(addProduct(...data))); export const App: FunctionComponent\u0026lt;Props\u0026gt; = (props) =\u0026gt; { const navigate = useNavigate(); let submitCallback = () =\u0026gt; { httpHandler.storeOrder(dataStore.getState().order, id =\u0026gt; navigate(`/summary/${id}`, { replace: true})); dataStore.getState().order = new Order(); }; return \u0026lt;div className=\u0026#39;App\u0026#39;\u0026gt; \u0026lt;Routes\u0026gt; \u0026lt;Route index element={\u0026lt;ConnectedProductList/\u0026gt;}/\u0026gt; \u0026lt;Route path=\u0026#34;/products\u0026#34; element={\u0026lt;ConnectedProductList/\u0026gt;}/\u0026gt; \u0026lt;Route path=\u0026#34;/order\u0026#34; element={\u0026lt;OrderDetails submitCallback={() =\u0026gt; submitCallback()}/\u0026gt;} /\u0026gt; \u0026lt;Route path=\u0026#34;/summary/:id\u0026#34; element={\u0026lt;Summary /\u0026gt;} /\u0026gt; \u0026lt;/Routes\u0026gt; \u0026lt;/div\u0026gt; } export default App; åŸ·è¡Œæ¸¬è©¦ ä½ˆç½²æ‡‰ç”¨ç¨‹å¼ ä½¿ç”¨ NodeJS \u0026amp; Express ä¾†ç•¶ä½œ Http Server \u0026amp; Web Api Server\nå®‰è£ express å¥—ä»¶ \u0026amp; -connect-history-api-fallback å¥—ä»¶ $ npm install --save-dev express@4.18.1 connect-history-api-fallback@2.0.0\nå»ºç«‹ node ä¼ºæœå™¨ $ touch server.js\nconst express = require(\u0026#34;express\u0026#34;); const jsonServer = require(\u0026#34;json-server\u0026#34;); const history = require(\u0026#34;connect-history-api-fallback\u0026#34;); const app = express(); app.use(history()); app.use(\u0026#34;/\u0026#34;, express.static(\u0026#34;build\u0026#34;)); const router = jsonServer.router(\u0026#34;data.json\u0026#34;); app.use(jsonServer.bodyParser); app.use(\u0026#34;/api\u0026#34;, (req, res, next) =\u0026gt; router(req, res, next)); const port = process.argv[3] || 4002; app.listen(port, ()=\u0026gt; console.log(`Running on port ${port}`)); ä¿®æ”¹ url è·¯å¾‘ ä¿®æ”¹ httpHandler.ts\nimport Axios from \u0026#34;axios\u0026#34;; import { Order, Product } from \u0026#34;./entities\u0026#34;; // const protocol = \u0026#34;http\u0026#34;; // const hostname = \u0026#34;localhost\u0026#34;; // const port = 4600; // const urls = { // products: `${protocol}://${hostname}:${port}/products`, // orders: `${protocol}://${hostname}:${port}/orders`, // }; const urls = { products: \u0026#34;/api/products\u0026#34;, orders: \u0026#34;/api/orders\u0026#34; } export class HttpHandler { loadProducts(callback: (producs: Product[]) =\u0026gt; void): void { Axios.get(urls.products).then(response =\u0026gt; callback(response.data)) } storeOrder(order: Order, callback: (id: number) =\u0026gt; void): void { let orderData = { lines: [...order.orderLines.values()].map(ol =\u0026gt; ({ productId: ol.product.id, productName: ol.product.name, quantity: ol.quantity })) } Axios.post(urls.orders, orderData).then(response =\u0026gt; callback(response.data.id)); } } å»ºç½® React App $ npm run build \u0026gt; reactapp@0.1.0 build \u0026gt; react-scripts build Creating an optimized production build... Compiled with warnings. [eslint] src/pages/categoryList.tsx Line 1:17: \u0026#39;ChangeEvent\u0026#39; is defined but never used @typescript-eslint/no-unused-vars Line 1:49: \u0026#39;useState\u0026#39; is defined but never used @typescript-eslint/no-unused-vars src/pages/productList.tsx Line 1:10: \u0026#39;ChangeEvent\u0026#39; is defined but never used @typescript-eslint/no-unused-vars src/pages/summary.tsx Line 5:11: \u0026#39;Params\u0026#39; is defined but never used @typescript-eslint/no-unused-vars Search for the keywords to learn more about each warning. To ignore, add // eslint-disable-next-line to the line before. File sizes after gzip: 63.26 kB (-45 B) build/static/js/main.2ece24f2.js 27.93 kB build/static/css/main.24b68c36.css The project was built assuming it is hosted at /. You can control this with the homepage field in your package.json. The build folder is ready to be deployed. You may serve it with a static server: npm install -g serve serve -s build Find out more about deployment here: https://cra.link/deployment $ ls -al build ç¸½ç”¨é‡ 52 drwxrwxr-x 3 egs egs 4096 å…« 23 18:50 . drwxrwxr-x 7 egs egs 4096 å…« 23 18:46 .. -rw-rw-r-- 1 egs egs 369 å…« 23 18:50 asset-manifest.json -rw-rw-r-- 1 egs egs 3870 å…« 23 18:50 favicon.ico -rw-rw-r-- 1 egs egs 644 å…« 23 18:50 index.html -rw-rw-r-- 1 egs egs 5347 å…« 23 18:50 logo192.png -rw-rw-r-- 1 egs egs 9664 å…« 23 18:50 logo512.png -rw-rw-r-- 1 egs egs 492 å…« 23 18:50 manifest.json -rw-rw-r-- 1 egs egs 67 å…« 23 18:50 robots.txt drwxrwxr-x 4 egs egs 4096 å…« 23 18:50 static åŸ·è¡Œ $ node server.js Running on port 4002 åŠŸèƒ½å®Œæˆå¾Œçš„ç¨‹å¼æª”æ¡ˆçµæ§‹ï¼š\n","permalink":"https://calvinegs.github.io/posts/webapp-react/","summary":"github Source code\nAngularã€Reactã€Vue æ˜¯ä¸‰å€‹æœ€å—æ­¡è¿çš„å‰ç«¯æ¡†æ¶ï¼Œé€™æ˜¯ä¸‰ç¯‡ç­†è¨˜åˆ†åˆ¥ä½¿ç”¨é€™ä¸‰å€‹ä¸åŒçš„æ¡†æ¶ä¾†å»ºç«‹åŠŸèƒ½ä¸€æ¨¡ä¸€æ¨£çš„ç¶²è·¯æ‡‰ç”¨ç¨‹å¼ä¸­çš„ç¬¬äºŒç¯‡ã€‚\né€™å€‹ç¶²è·¯æ‡‰ç”¨ç¨‹å¼çš„éœ€æ±‚\n ç”£å“è¨‚è³¼åŠŸèƒ½  è¡¨é ­ï¼šè¨‚è³¼å•†å“ç¸½æ•¸ã€ç¸½é¡åŠé€å‡ºè¨‚å–®åŠŸèƒ½ å•†å“éæ¿¾åŠŸèƒ½ï¼šä¾ç”£å“é¡åˆ¥ä¾†é¡¯ç¤ºå•†å“ å•†å“æ¸…å–®ï¼šé¡¯ç¤ºå•†å“æ˜ç´°ã€å•†å“å”®åƒ¹ã€è¨‚è³¼æ•¸é‡ä¸‹æ‹‰é¸å–®åŠåŠ å…¥è³¼ç‰©è»Šç­‰åŠŸèƒ½   è¨‚å–®ç¢ºèªåŠŸèƒ½ï¼šé¡¯ç¤ºè¨‚è³¼å•†å“æ˜ç´°åŠç¸½é‡‘é¡ è¨‚è³¼æˆåŠŸåŠŸèƒ½ï¼šé¡¯ç¤ºè¨‚è³¼å®Œæˆè³‡è¨Š  ä½¿ç”¨æŠ€è¡“:\n React 18 Bootstrap 5 (UI Framework) React Router 6 React Redux 8 NodeJS \u0026amp; Express json-server npm-run-all (npm å¥—ä»¶)  å»ºç«‹æ–°å°ˆæ¡ˆ ä½¿ç”¨ä¸‹åˆ—çš„ npm init èªæ³•å³å¯å»ºç«‹æœ€æ–°ç‰ˆ React é è¨­çš„æ‡‰ç”¨ç¨‹å¼çµæ§‹\n$ npx create-react-app reactapp --template typescript Creating a new React app in /home/egs/cal-data/tech-test/typescript/book/reactapp. Installing packages. This might take a couple of minutes. Installing react, react-dom, and react-scripts with cra-template-typescript.","title":"ä½¿ç”¨ React ä¾†å»ºç«‹ç¶²è·¯æ‡‰ç”¨ç¨‹å¼"},{"content":"github Source code\nAngularã€Reactã€Vue æ˜¯ä¸‰å€‹æœ€å—æ­¡è¿çš„å‰ç«¯æ¡†æ¶ï¼Œæ¥ä¸‹ä¾†çš„ä¸‰ç¯‡ç­†è¨˜åˆ†åˆ¥è¦ç´€éŒ„ä½¿ç”¨é€™ä¸‰å€‹ä¸åŒçš„æ¡†æ¶ä¾†å»ºç«‹åŠŸèƒ½ä¸€æ¨¡ä¸€æ¨£çš„ç¶²è·¯æ‡‰ç”¨ç¨‹å¼ã€‚\né€™å€‹ç¶²è·¯æ‡‰ç”¨ç¨‹å¼çš„éœ€æ±‚\n ç”£å“è¨‚è³¼åŠŸèƒ½  è¡¨é ­ï¼šè¨‚è³¼å•†å“ç¸½æ•¸ã€ç¸½é¡åŠé€å‡ºè¨‚å–®åŠŸèƒ½ å•†å“éæ¿¾åŠŸèƒ½ï¼šä¾ç”£å“é¡åˆ¥ä¾†é¡¯ç¤ºå•†å“ å•†å“æ¸…å–®ï¼šé¡¯ç¤ºå•†å“æ˜ç´°ã€å•†å“å”®åƒ¹ã€è¨‚è³¼æ•¸é‡ä¸‹æ‹‰é¸å–®åŠåŠ å…¥è³¼ç‰©è»Šç­‰åŠŸèƒ½   è¨‚å–®ç¢ºèªåŠŸèƒ½ï¼šé¡¯ç¤ºè¨‚è³¼å•†å“æ˜ç´°åŠç¸½é‡‘é¡ è¨‚è³¼æˆåŠŸåŠŸèƒ½ï¼šé¡¯ç¤ºè¨‚è³¼å®Œæˆè³‡è¨Š  ä½¿ç”¨æŠ€è¡“:\n Angular 14 Bootstrap 5 (UI Framework) Angular  Router Services   NodeJS \u0026amp; Express json-server npm-run-all (npm å¥—ä»¶)  å»ºç«‹æ–°å°ˆæ¡ˆ ä½¿ç”¨ä¸‹åˆ—çš„ npm init èªæ³•å³å¯å»ºç«‹æœ€æ–°ç‰ˆ Angular é è¨­çš„æ‡‰ç”¨ç¨‹å¼çµæ§‹\n$ npm init @angular angularapp -- --routing --style=scss Need to install the following packages: @angular/create@14.1.3 Ok to proceed? (y) CREATE angularapp/README.md (1064 bytes) CREATE angularapp/.editorconfig (274 bytes) CREATE angularapp/.gitignore (548 bytes) CREATE angularapp/angular.json (3160 bytes) CREATE angularapp/package.json (1041 bytes) CREATE angularapp/tsconfig.json (863 bytes) CREATE angularapp/.browserslistrc (600 bytes) CREATE angularapp/karma.conf.js (1427 bytes) CREATE angularapp/tsconfig.app.json (287 bytes) CREATE angularapp/tsconfig.spec.json (333 bytes) CREATE angularapp/.vscode/extensions.json (130 bytes) CREATE angularapp/.vscode/launch.json (474 bytes) CREATE angularapp/.vscode/tasks.json (938 bytes) CREATE angularapp/src/favicon.ico (948 bytes) CREATE angularapp/src/index.html (296 bytes) CREATE angularapp/src/main.ts (372 bytes) CREATE angularapp/src/polyfills.ts (2338 bytes) CREATE angularapp/src/styles.scss (80 bytes) CREATE angularapp/src/test.ts (749 bytes) CREATE angularapp/src/assets/.gitkeep (0 bytes) CREATE angularapp/src/environments/environment.prod.ts (51 bytes) CREATE angularapp/src/environments/environment.ts (658 bytes) CREATE angularapp/src/app/app-routing.module.ts (245 bytes) CREATE angularapp/src/app/app.module.ts (393 bytes) CREATE angularapp/src/app/app.component.scss (0 bytes) CREATE angularapp/src/app/app.component.html (23115 bytes) CREATE angularapp/src/app/app.component.spec.ts (1085 bytes) CREATE angularapp/src/app/app.component.ts (215 bytes) âœ” Packages installed successfully. Successfully initialized git. æŸ¥çœ‹ package.json ä¸­ç›¸ä¾å¥—ä»¶åŠç‰ˆæœ¬ $ cd angularapp $ cat package.json { \u0026#34;name\u0026#34;: \u0026#34;angularapp\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0.0.0\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;ng\u0026#34;: \u0026#34;ng\u0026#34;, \u0026#34;start\u0026#34;: \u0026#34;ng serve\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;ng build\u0026#34;, \u0026#34;watch\u0026#34;: \u0026#34;ng build --watch --configuration development\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;ng test\u0026#34; }, \u0026#34;private\u0026#34;: true, \u0026#34;dependencies\u0026#34;: { \u0026#34;@angular/animations\u0026#34;: \u0026#34;^14.1.0\u0026#34;, \u0026#34;@angular/common\u0026#34;: \u0026#34;^14.1.0\u0026#34;, \u0026#34;@angular/compiler\u0026#34;: \u0026#34;^14.1.0\u0026#34;, \u0026#34;@angular/core\u0026#34;: \u0026#34;^14.1.0\u0026#34;, \u0026#34;@angular/forms\u0026#34;: \u0026#34;^14.1.0\u0026#34;, \u0026#34;@angular/platform-browser\u0026#34;: \u0026#34;^14.1.0\u0026#34;, \u0026#34;@angular/platform-browser-dynamic\u0026#34;: \u0026#34;^14.1.0\u0026#34;, \u0026#34;@angular/router\u0026#34;: \u0026#34;^14.1.0\u0026#34;, \u0026#34;rxjs\u0026#34;: \u0026#34;~7.5.0\u0026#34;, \u0026#34;tslib\u0026#34;: \u0026#34;^2.3.0\u0026#34;, \u0026#34;zone.js\u0026#34;: \u0026#34;~0.11.4\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;@angular-devkit/build-angular\u0026#34;: \u0026#34;^14.1.3\u0026#34;, \u0026#34;@angular/cli\u0026#34;: \u0026#34;~14.1.3\u0026#34;, \u0026#34;@angular/compiler-cli\u0026#34;: \u0026#34;^14.1.0\u0026#34;, \u0026#34;@types/jasmine\u0026#34;: \u0026#34;~4.0.0\u0026#34;, \u0026#34;jasmine-core\u0026#34;: \u0026#34;~4.2.0\u0026#34;, \u0026#34;karma\u0026#34;: \u0026#34;~6.4.0\u0026#34;, \u0026#34;karma-chrome-launcher\u0026#34;: \u0026#34;~3.1.0\u0026#34;, \u0026#34;karma-coverage\u0026#34;: \u0026#34;~2.2.0\u0026#34;, \u0026#34;karma-jasmine\u0026#34;: \u0026#34;~5.1.0\u0026#34;, \u0026#34;karma-jasmine-html-reporter\u0026#34;: \u0026#34;~2.0.0\u0026#34;, \u0026#34;typescript\u0026#34;: \u0026#34;~4.7.2\u0026#34; } } ç”£ç”Ÿçš„é è¨­ç¨‹å¼çµæ§‹ åŸ·è¡Œç”± CLI ç”£ç”Ÿçš„é è¨­ç¨‹å¼æ¶æ§‹ $ npm i $ npm start \u0026gt; angularapp@0.0.0 start \u0026gt; ng serve âœ” Browser application bundle generation complete. Initial Chunk Files | Names | Raw Size vendor.js | vendor | 2.04 MB | polyfills.js | polyfills | 315.29 kB | styles.css, styles.js | styles | 207.84 kB | main.js | main | 49.85 kB | runtime.js | runtime | 6.52 kB | | Initial Total | 2.61 MB Build at: 2022-08-22T03:50:11.996Z - Hash: fe04b1895edac604 - Time: 8579ms ** Angular Live Development Server is listening on localhost:4200, open your browser on http://localhost:4200/ ** âœ” Compiled successfully. é–‹å•Ÿç€è¦½å™¨ï¼Œè¼¸å…¥ http://localhost:4200/\n$ git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Initial Commit\u0026#34; # åŠ å…¥ git æ–°ç‰ˆæœ¬ $ code . # æ‰“é–‹ vscode ä½¿ç”¨ json-server ç•¶ä½œå¾Œç«¯ Web Api åœ¨æˆ‘å€‘çš„å‰ç«¯æ‡‰ç”¨ç¨‹å¼ä¸­æœƒä½¿ç”¨åˆ°å¾Œç«¯ä¼ºæœå™¨çš„è³‡æ–™ï¼Œæ–¹ä¾¿èµ·è¦‹ç›´æ¥ä½¿ç”¨ json-serverã€€ä¾†ç•¶ä½œå¾Œç«¯ Web Api\nå®‰è£ json-server $ npm install --save-dev json-server@0.17.0 npm-run-all@4.1.5\nå»ºç«‹çµ¦ json-server ä½¿ç”¨çš„è³‡æ–™ $ touch data.json # data.json å…§å®¹å¦‚ä¸‹ { \u0026#34;products\u0026#34;: [ { \u0026#34;id\u0026#34;: 1, \u0026#34;name\u0026#34;: \u0026#34;kayak\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Watersports\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;A boat form on person\u0026#34;, \u0026#34;price\u0026#34;: 275 }, { \u0026#34;id\u0026#34;: 2, \u0026#34;name\u0026#34;: \u0026#34;Lifejacket\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Watersports\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Protective and fashionable boat form on person\u0026#34;, \u0026#34;price\u0026#34;: 48.95 }, { \u0026#34;id\u0026#34;: 3, \u0026#34;name\u0026#34;: \u0026#34;Soccer Ball\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Soccer\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;FIFA-approved size and weight\u0026#34;, \u0026#34;price\u0026#34;: 19.5 }, { \u0026#34;id\u0026#34;: 4, \u0026#34;name\u0026#34;: \u0026#34;Corner Flags\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Soccer\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Give your playing field a professional touch\u0026#34;, \u0026#34;price\u0026#34;: 34.95 }, { \u0026#34;id\u0026#34;: 5, \u0026#34;name\u0026#34;: \u0026#34;Stadium\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Soccer\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Flat-packed 35,000-seat stadium\u0026#34;, \u0026#34;price\u0026#34;: 79500 }, { \u0026#34;id\u0026#34;: 6, \u0026#34;name\u0026#34;: \u0026#34;Thinking Cap\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Chess\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Imporove brain efficiency by 75%\u0026#34;, \u0026#34;price\u0026#34;: 16 }, { \u0026#34;id\u0026#34;: 7, \u0026#34;name\u0026#34;: \u0026#34;Unsteady Chair\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Chess\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Secretly give your opponent a disadvantage\u0026#34;, \u0026#34;price\u0026#34;: 29.95 }, { \u0026#34;id\u0026#34;: 8, \u0026#34;name\u0026#34;: \u0026#34;Human Chess Board\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Chess\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;A fun game for the family\u0026#34;, \u0026#34;price\u0026#34;: 75 }, { \u0026#34;id\u0026#34;: 9, \u0026#34;name\u0026#34;: \u0026#34;Bling Bling King\u0026#34;, \u0026#34;category\u0026#34;: \u0026#34;Chess\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Gold-plated, diamond-studded King\u0026#34;, \u0026#34;price\u0026#34;: 1200 } ], \u0026#34;orders\u0026#34;: [ ] } æ¸¬è©¦ json-server $ npx json-server data.json -p 4600 # ä½¿ç”¨ 4600 port \\{^_^}/ hi! Loading data.json Done Resources http://localhost:4600/products http://localhost:4600/orders Home http://localhost:4600 Type s + enter at any time to create a snapshot of the database GET /db 304 1.630 ms - - GET /__rules 404 4.536 ms - 2 è¨­å®š npm script in package.sjon \u0026#34;serve\u0026#34;: \u0026#34;ng serve\u0026#34;, \u0026#34;json\u0026#34;: \u0026#34;json-server data.jus -p 4600\u0026#34;, \u0026#34;start\u0026#34;: \u0026#34;npm-run-all -p serve json\u0026#34; åœ¨å°ˆæ¡ˆä¸­ä½¿ç”¨ Bootstrap CSS å¥—ä»¶ å®‰è£ bootstrap 5 $ npm install bootstrap@5.2.0\nå¼•å…¥ bootstrap in angular.json \u0026#34;architect\u0026#34;: { \u0026#34;build\u0026#34;: { \u0026#34;builder\u0026#34;: \u0026#34;@angular-devkit/build-angular:browser\u0026#34;, \u0026#34;options\u0026#34;: { \u0026#34;outputPath\u0026#34;: \u0026#34;dist/angularapp\u0026#34;, \u0026#34;index\u0026#34;: \u0026#34;src/index.html\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;src/main.ts\u0026#34;, \u0026#34;polyfills\u0026#34;: \u0026#34;src/polyfills.ts\u0026#34;, \u0026#34;tsConfig\u0026#34;: \u0026#34;tsconfig.app.json\u0026#34;, \u0026#34;inlineStyleLanguage\u0026#34;: \u0026#34;scss\u0026#34;, \u0026#34;assets\u0026#34;: [ \u0026#34;src/favicon.ico\u0026#34;, \u0026#34;src/assets\u0026#34; ], \u0026#34;styles\u0026#34;: [ \u0026#34;src/styles.scss\u0026#34;, \u0026#34;node_modules/bootstrap/dist/css/bootstrap.min.css\u0026#34; ], ä½¿ç”¨ bootstrap  ä¿®æ”¹ app.component.ts ä¿®æ”¹ app.component.html  // app.component.ts import { Component } from \u0026#39;@angular/core\u0026#39;; @Component({ selector: \u0026#39;app-root\u0026#39;, templateUrl: \u0026#39;./app.component.html\u0026#39;, styleUrls: [\u0026#39;./app.component.scss\u0026#39;] }) export class AppComponent { title = \u0026#39;angularapp\u0026#39;; names: string[] = [\u0026#34;John\u0026#34;, \u0026#34;Alian\u0026#34;, \u0026#34;James\u0026#34;]; } \u0026lt;!-- app.component.html --\u0026gt; \u0026lt;h4 class=\u0026#34;bg-primary text-white text-center p-2\u0026#34;\u0026gt;Names\u0026lt;/h4\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li *ngFor=\u0026#34;let name of names\u0026#34;\u0026gt;{{ name }}\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; ç‚ºç¶²ç«™åŠ å…¥è³‡æ–™ å»ºç«‹è³‡æ–™æ¨¡å‹ $ npx ng g class data/entities --skip-tests\n// entities.ts export type Product = { id: number, name: string, description: string, category: string, price: number }; export class OrderLine { constructor(public product: Product, public quantity: number) { } get total(): number { return this.product.price * this.quantity; } } export class Order { private lines = new Map\u0026lt;number, OrderLine\u0026gt;(); constructor(initialLines?: OrderLine[]) { if (initialLines) { initialLines.forEach(ol =\u0026gt; this.lines.set(ol.product.id, ol)); } } public addProduct(prod: Product, quantity: number) { if (this.lines.has(prod.id)) { if (quantity === 0) { this.removeProduct(prod.id); } else { this.lines.get(prod.id)!.quantity += quantity; } } else { this.lines.set(prod.id, new OrderLine(prod, quantity)); } } public removeProduct(id: number) { this.lines.delete(id); } get orderLines(): OrderLine[] { return [...this.lines.values()]; } get productCount(): number { return [...this.lines.values()] .reduce((total, ol) =\u0026gt; total += ol.quantity, 0); } get total(): number { return [...this.lines.values()].reduce((total, ol) =\u0026gt; total += ol.total, 0); } } å»ºç«‹è³‡æ–™ä¾†æº æœå‹™ç¨‹å¼ $ npx ng g s data/dataSource\n// data-source.service.ts import { Injectable } from \u0026#39;@angular/core\u0026#39;; import { Observable } from \u0026#39;rxjs\u0026#39;; import { Order, Product } from \u0026#39;./entities\u0026#39;; export type ProductProp = keyof Product; export abstract class DataSourceBase { abstract loadProducts(): Observable\u0026lt;Product[]\u0026gt;; abstract storeOrder(order: Order): Observable\u0026lt;number\u0026gt;; } @Injectable({ providedIn: \u0026#39;root\u0026#39; }) export class DataSourceService { private _products: Product[]; private _categories: Set\u0026lt;string\u0026gt;; public order: Order; constructor(private impl: DataSourceBase) { this._products = []; this._categories = new Set\u0026lt;string\u0026gt;(); this.order = new Order(); this.getData(); } getProducts(sortProp: ProductProp = \u0026#34;id\u0026#34;, category?: string): Product[]{ return this.selectProducts(this._products, sortProp, category); } protected getData(): void { this._products = []; this._categories.clear(); this.impl.loadProducts().subscribe(rawData =\u0026gt; { rawData.forEach(p =\u0026gt; { this._products.push(p); this._categories.add(p.category); }); }); } protected selectProducts(prods: Product[], sortProp: ProductProp, category?: string): Product[] { return prods.filter(p =\u0026gt; category === undefined || p.category == category) .sort((p1, p2) =\u0026gt; p1[sortProp] ? 1 : 0); } getCategories(): string[] { return [...this._categories.values()]; } storeOrder(): Observable\u0026lt;number\u0026gt; { return this.impl.storeOrder(this.order); } } å¯¦ä½œè³‡æ–™ä¾†æºã€€æœå‹™ç¨‹å¼ $ npx ng g s data/remoteDataSource\n// remote-data-source.service.ts import { Injectable } from \u0026#39;@angular/core\u0026#39;; import { Observable } from \u0026#39;rxjs\u0026#39;; import { DataSourceBase } from \u0026#39;./data-source.service\u0026#39;; import { Order, Product } from \u0026#39;./entities\u0026#39;; import { HttpClient } from \u0026#39;@angular/common/http\u0026#39;; const protocol = \u0026#34;http\u0026#34;; const hostname= \u0026#34;localhost\u0026#34;; const prot = 4600; const urls = { products: `${protocol}://${hostname}:${prot}/products`, orders: `${protocol}://${hostname}:${prot}/orders` } @Injectable({ providedIn: \u0026#39;root\u0026#39; }) export class RemoteDataSourceService extends DataSourceBase { constructor(private http: HttpClient) { super(); } loadProducts(): Observable\u0026lt;Product[]\u0026gt; { return this.http.get\u0026lt;Product[]\u0026gt;(urls.products); } storeOrder(order: Order): Observable\u0026lt;number\u0026gt; { let orderData = { lines: [...order.orderLines.values()].map(ol =\u0026gt; ({ productId: ol.product.id, productName: ol.product.name, quantity: ol.quantity })) } return this.http.post\u0026lt;{ id: number }\u0026gt;(urls.orders, orderData).pipe\u0026lt;number\u0026gt;(map(val =\u0026gt; val.id)); } } è¨­å®šè³‡æ–™ä¾†æº æ¨¡çµ„ $ npx ng g module data\n// data.module.ts import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { HttpClientModule } from \u0026#39;@angular/common/http\u0026#39;; import { DataSourceBase } from \u0026#39;./data-source.service\u0026#39;; import { RemoteDataSourceService } from \u0026#39;./remote-data-source.service\u0026#39;; @NgModule({ imports: [ HttpClientModule ], providers: [ { provide: DataSourceBase, useClass: RemoteDataSourceService} ] }) export class DataModule { } å»ºç«‹å•†å“è¨‚è³¼ç›¸é—œå…ƒä»¶ $ npx ng g c pages/productItem $ npx ng g c pages/categoryList $ npx ng g c pages/header $ npx ng g c pages/productList å•†å“æ˜ç´°å…ƒä»¶ (productItem) // product-item.component.ts import { Component, EventEmitter, Input, OnInit, Output } from \u0026#39;@angular/core\u0026#39;; import { Product } from \u0026#39;src/app/data/entities\u0026#39;; export type productSelection = { product: Product, quantity: number } @Component({ selector: \u0026#39;app-product-item\u0026#39;, templateUrl: \u0026#39;./product-item.component.html\u0026#39;, styleUrls: [\u0026#39;./product-item.component.scss\u0026#39;] }) export class ProductItemComponent { quantity: number = 1; @Input() product!: Product; @Output() addToCart = new EventEmitter\u0026lt;productSelection\u0026gt;(); handleAddToCart() { this.addToCart.emit({ product: this.product, quantity: Number(this.quantity) }) } } // product-item.component.html \u0026lt;div class=\u0026#34;card m-1 p-1 bg-light\u0026#34;\u0026gt; \u0026lt;h4\u0026gt; {{ product.name }} \u0026lt;span class=\u0026#34;badge rounded-pill bg-primary float-end\u0026#34;\u0026gt; ${{ product.price.toFixed(2) }} \u0026lt;/span\u0026gt; \u0026lt;/h4\u0026gt; \u0026lt;div class=\u0026#34;card-text bg-white p-1\u0026#34;\u0026gt; {{ product.description }} \u0026lt;button class=\u0026#34;btn btn-success btn-sm float-end\u0026#34; (click)=\u0026#34;handleAddToCart()\u0026#34;\u0026gt; Add To Cart \u0026lt;/button\u0026gt; \u0026lt;select title=\u0026#34;quantity\u0026#34; class=\u0026#34;form-control-inline float-end m-1\u0026#34; [(ngModel)]=\u0026#34;quantity\u0026#34;\u0026gt; \u0026lt;option\u0026gt;1\u0026lt;/option\u0026gt; \u0026lt;option\u0026gt;2\u0026lt;/option\u0026gt; \u0026lt;option\u0026gt;3\u0026lt;/option\u0026gt; \u0026lt;/select\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; å•†å“åˆ†é¡æŒ‰éˆ•å…ƒä»¶ (categoryList) // category-list.component.ts import { Component, EventEmitter, Input, OnInit, Output } from \u0026#39;@angular/core\u0026#39;; @Component({ selector: \u0026#39;app-category-list\u0026#39;, templateUrl: \u0026#39;./category-list.component.html\u0026#39;, styleUrls: [\u0026#39;./category-list.component.scss\u0026#39;] }) export class CategoryListComponent implements OnInit { @Input() selected!: string; @Input() categories!: string[]; @Output() selectCategory = new EventEmitter\u0026lt;string\u0026gt;(); constructor() { } ngOnInit(): void { } getBtnClass(category: string): string { return \u0026#34;btn \u0026#34; + (category === this.selected ? \u0026#34;btn-primary\u0026#34; : \u0026#34;btn-secondary\u0026#34;); } } // category-list.component.html \u0026lt;button *ngFor=\u0026#34;let category of categories\u0026#34; [class]=\u0026#34;getBtnClass(category)\u0026#34; (click)=\u0026#34;selectCategory.emit(category)\u0026#34;\u0026gt; {{ category }} \u0026lt;/button\u0026gt; è¡¨é ­å…ƒä»¶ (header) // header.component.ts import { Component, EventEmitter, Input, OnInit, Output } from \u0026#39;@angular/core\u0026#39;; import { Order } from \u0026#39;src/app/data/entities\u0026#39;; @Component({ selector: \u0026#39;app-header\u0026#39;, templateUrl: \u0026#39;./header.component.html\u0026#39;, styleUrls: [\u0026#39;./header.component.scss\u0026#39;] }) export class HeaderComponent implements OnInit { @Input() order!: Order; @Output() submit = new EventEmitter\u0026lt;void\u0026gt;(); constructor() { } ngOnInit(): void { } get headerText(): string { let count = this.order.productCount; return count === 0 ? \u0026#34;(No Selection)\u0026#34; : `${count}product(s), $${this.order.total.toFixed(2)}` } } // header.component.html \u0026lt;div class=\u0026#34;p-1 bg-secondary text-white text-end\u0026#34;\u0026gt; {{ headerText }} \u0026lt;button class=\u0026#34;btn btn-sm btn-primary m-1\u0026#34; (click)=\u0026#34;submit.emit()\u0026#34;\u0026gt; Submit Order \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; å•†å“æ¸…å–®å…ƒä»¶ (productList) // product-list.component.ts import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { Router } from \u0026#39;@angular/router\u0026#39;; import { DataSourceService } from \u0026#39;src/app/data/data-source.service\u0026#39;; import { Order, Product } from \u0026#39;src/app/data/entities\u0026#39;; @Component({ selector: \u0026#39;app-product-list\u0026#39;, templateUrl: \u0026#39;./product-list.component.html\u0026#39;, styleUrls: [\u0026#39;./product-list.component.scss\u0026#39;] }) export class ProductListComponent implements OnInit { selectedCategory = \u0026#34;All\u0026#34;; constructor(public dataSource: DataSourceService) { } ngOnInit(): void { } get products(): Product[] { return this.dataSource.getProducts(\u0026#34;id\u0026#34;, this.selectedCategory === \u0026#34;All\u0026#34; ? undefined : this.selectedCategory); } get categories():string[] { return [\u0026#34;All\u0026#34;, ...this.dataSource.getCategories()]; } handleCategorySelect(category: string) { this.selectedCategory = category; } handleAdd(data: { product: Product, quantity: number }) { this.dataSource.order.addProduct(data.product, data.quantity); } handleSubmit() { console.log(\u0026#34;SUBMIT\u0026#34;); } } // product-list.component.html \u0026lt;app-header [order]=\u0026#34;dataSource.order\u0026#34; (submit)=\u0026#34;handleSubmit()\u0026#34;\u0026gt;\u0026lt;/app-header\u0026gt; \u0026lt;div class=\u0026#34;container-fluid\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;row\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;col-3 p-2\u0026#34;\u0026gt; \u0026lt;app-category-list class=\u0026#34;d-grid gap-2\u0026#34; [selected]=\u0026#34;selectedCategory\u0026#34; [categories]=\u0026#34;categories\u0026#34; (selectCategory)=\u0026#34;handleCategorySelect($event)\u0026#34;\u0026gt; \u0026lt;/app-category-list\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;col-9 p-2\u0026#34;\u0026gt; \u0026lt;app-product-item *ngFor=\u0026#34;let p of products\u0026#34; [product]=\u0026#34;p\u0026#34; (addToCart)=\u0026#34;handleAdd($event)\u0026#34;\u0026gt;\u0026lt;/app-product-item\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; AppComponent ä¿®æ”¹ import { Component } from \u0026#39;@angular/core\u0026#39;; @Component({ selector: \u0026#39;app-root\u0026#39;, templateUrl: \u0026#39;./app.component.html\u0026#39;, styleUrls: [\u0026#39;./app.component.scss\u0026#39;] }) export class AppComponent { // title = \u0026#39;angularapp\u0026#39;;  // names: string[] = [\u0026#34;John\u0026#34;, \u0026#34;Alian\u0026#34;, \u0026#34;James\u0026#34;]; } \u0026lt;app-product-list\u0026gt;\u0026lt;/app-product-list\u0026gt; AppModule è¨­å®š import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { BrowserModule } from \u0026#39;@angular/platform-browser\u0026#39;; import { AppRoutingModule } from \u0026#39;./app-routing.module\u0026#39;; import { AppComponent } from \u0026#39;./app.component\u0026#39;; import { ProductItemComponent } from \u0026#39;./pages/product-item/product-item.component\u0026#39;; import { CategoryListComponent } from \u0026#39;./pages/category-list/category-list.component\u0026#39;; import { HeaderComponent } from \u0026#39;./pages/header/header.component\u0026#39;; import { ProductListComponent } from \u0026#39;./pages/product-list/product-list.component\u0026#39;; import { FormsModule } from \u0026#39;@angular/forms\u0026#39;; import { DataModule } from \u0026#39;./data/data.module\u0026#39;; @NgModule({ declarations: [ AppComponent, ProductItemComponent, CategoryListComponent, HeaderComponent, ProductListComponent ], imports: [ BrowserModule, AppRoutingModule, FormsModule, DataModule ], providers: [], bootstrap: [AppComponent] }) export class AppModule { } æª”æ¡ˆçµæ§‹ ##ã€€åŸ·è¡Œç¨‹å¼\n$ npm start å®Œæˆå…¶ä»–åŠŸèƒ½ åŠ å…¥è¨‚å–®ç¢ºèªå…ƒä»¶ $ npx ng g c pages/orderDetails\nimport { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { Router } from \u0026#39;@angular/router\u0026#39;; import { DataSourceService } from \u0026#39;src/app/data/data-source.service\u0026#39;; import { Order } from \u0026#39;src/app/data/entities\u0026#39;; @Component({ selector: \u0026#39;app-order-details\u0026#39;, templateUrl: \u0026#39;./order-details.component.html\u0026#39;, styleUrls: [\u0026#39;./order-details.component.scss\u0026#39;] }) export class OrderDetailsComponent implements OnInit { constructor(private dataSource: DataSourceService, private router: Router) { } ngOnInit(): void { } get order(): Order { return this.dataSource.order; } submit() { this.dataSource.storeOrder().subscribe(id =\u0026gt; this.router.navigateByUrl(`/summary/${id}`)); } } \u0026lt;h3 class=\u0026#34;text-center bg-primary text-white p-2\u0026#34;\u0026gt;Order Summary\u0026lt;/h3\u0026gt; \u0026lt;div class=\u0026#34;p-3\u0026#34;\u0026gt; \u0026lt;table class=\u0026#34;table table-sm table-stgriped\u0026#34;\u0026gt; \u0026lt;thead\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;th\u0026gt;Quantity\u0026lt;/th\u0026gt; \u0026lt;th\u0026gt;Product\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-end\u0026#34;\u0026gt;Price\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-end\u0026#34;\u0026gt;Subtotal\u0026lt;/th\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/thead\u0026gt; \u0026lt;tbody\u0026gt; \u0026lt;tr *ngFor=\u0026#34;let line of order.orderLines\u0026#34;\u0026gt; \u0026lt;td\u0026gt;{{ line.quantity }}\u0026lt;/td\u0026gt; \u0026lt;td\u0026gt;{{ line.product.name }}\u0026lt;/td\u0026gt; \u0026lt;td class=\u0026#34;text-end\u0026#34;\u0026gt;{{ line.product.price.toFixed(2) }}\u0026lt;/td\u0026gt; \u0026lt;td class=\u0026#34;text-end\u0026#34;\u0026gt;{{ line.total.toFixed(2) }}\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/tbody\u0026gt; \u0026lt;tfoot\u0026gt; \u0026lt;tr\u0026gt; \u0026lt;th class=\u0026#34;text-end\u0026#34; colSpan=\u0026#34;3\u0026#34;\u0026gt;Total:\u0026lt;/th\u0026gt; \u0026lt;th class=\u0026#34;text-end\u0026#34;\u0026gt; ${{ order.total.toFixed(2) }} \u0026lt;/th\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/tfoot\u0026gt; \u0026lt;/table\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;text-center\u0026#34;\u0026gt; \u0026lt;button class=\u0026#34;btn btn-secondary m-1\u0026#34; routerLink=\u0026#34;/products\u0026#34;\u0026gt;Back\u0026lt;/button\u0026gt; \u0026lt;button class=\u0026#34;btn btn-primary m-1\u0026#34; (click)=\u0026#34;submit()\u0026#34;\u0026gt;Submit Order\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; åŠ å…¥è¨‚è³¼æˆåŠŸå…ƒä»¶ $ npx ng g c pages/summary\nimport { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { ActivatedRoute } from \u0026#39;@angular/router\u0026#39;; @Component({ selector: \u0026#39;app-summary\u0026#39;, templateUrl: \u0026#39;./summary.component.html\u0026#39;, styleUrls: [\u0026#39;./summary.component.scss\u0026#39;] }) export class SummaryComponent implements OnInit { constructor(private activatedRoute: ActivatedRoute) { } ngOnInit(): void { } get id(): string { return this.activatedRoute.snapshot.params[\u0026#34;id\u0026#34;]; } } \u0026lt;div class=\u0026#34;m-2 text-center\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;Thanks!\u0026lt;/h2\u0026gt; \u0026lt;p\u0026gt;Thanks for placing your order.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;Your order is #{{ id }}\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;We\u0026#39;ll ship your goods as soon as possible.\u0026lt;/p\u0026gt; \u0026lt;button class=\u0026#34;btn btn-primary\u0026#34; routerLink=\u0026#34;/products\u0026#34;\u0026gt;OK\u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; ä¿®æ”¹è·¯ç”±è¨­å®š // app-routing.module.ts import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { RouterModule, Routes } from \u0026#39;@angular/router\u0026#39;; import { OrderDetailsComponent } from \u0026#39;./pages/order-details/order-details.component\u0026#39;; import { ProductListComponent } from \u0026#39;./pages/product-list/product-list.component\u0026#39;; import { SummaryComponent } from \u0026#39;./pages/summary/summary.component\u0026#39;; const routes: Routes = ([ { path: \u0026#34;products\u0026#34;, component: ProductListComponent }, { path: \u0026#34;order\u0026#34;, component: OrderDetailsComponent }, { path: \u0026#34;summary/:id\u0026#34;, component: SummaryComponent }, { path: \u0026#34;\u0026#34;, redirectTo: \u0026#34;/products\u0026#34;, pathMatch: \u0026#34;full\u0026#34; } ]); @NgModule({ imports: [RouterModule.forRoot(routes)], exports: [RouterModule] }) export class AppRoutingModule { } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42  // product-list.component.ts import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { Router } from \u0026#39;@angular/router\u0026#39;; import { DataSourceService } from \u0026#39;src/app/data/data-source.service\u0026#39;; import { Order, Product } from \u0026#39;src/app/data/entities\u0026#39;; @Component({ selector: \u0026#39;app-product-list\u0026#39;, templateUrl: \u0026#39;./product-list.component.html\u0026#39;, styleUrls: [\u0026#39;./product-list.component.scss\u0026#39;] }) export class ProductListComponent implements OnInit { selectedCategory = \u0026#34;All\u0026#34;; constructor(public dataSource: DataSourceService, private router: Router) {  this.dataSource.order = new Order; } ngOnInit(): void { } get products(): Product[] { return this.dataSource.getProducts(\u0026#34;id\u0026#34;, this.selectedCategory === \u0026#34;All\u0026#34; ? undefined : this.selectedCategory); } get categories():string[] { return [\u0026#34;All\u0026#34;, ...this.dataSource.getCategories()]; } handleCategorySelect(category: string) { this.selectedCategory = category; } handleAdd(data: { product: Product, quantity: number }) { this.dataSource.order.addProduct(data.product, data.quantity); } handleSubmit() { this.router.navigateByUrl(\u0026#34;/order\u0026#34;);  } }   \u0026lt;!-- app.component.html --\u0026gt; \u0026lt;router-outlet\u0026gt;\u0026lt;/router-outlet\u0026gt; ä½ˆç½²æ‡‰ç”¨ç¨‹å¼ ä½¿ç”¨ NodeJS \u0026amp; Express ä¾†ç•¶ä½œ Http Server \u0026amp; Web Api Server\nå®‰è£ express å¥—ä»¶ \u0026amp; -connect-history-api-fallback å¥—ä»¶ $ npm install --save-dev express@4.18.1 connect-history-api-fallback@2.0.0\nå»ºç«‹ node ä¼ºæœå™¨ $ touch server.js\nconst express = require(\u0026#34;express\u0026#34;); const jsonServer = require(\u0026#34;json-server\u0026#34;); const history = require(\u0026#34;connect-history-api-fallback\u0026#34;); const app = express(); app.use(history()); app.use(\u0026#34;/\u0026#34;, express.static(\u0026#34;dist/angularapp\u0026#34;)); const router = jsonServer.router(\u0026#34;data.json\u0026#34;); app.use(jsonServer.bodyParser); app.use(\u0026#34;/api\u0026#34;, (req, res, next) =\u0026gt; router(req, res, next)); const port = process.argv[3] || 4001; app.listen(port, ()=\u0026gt; console.log(`Running on port ${port}`)); ä¿®æ”¹ url è·¯å¾‘ ä¿®æ”¹ remoteDataSource.ts\n// const protocol = \u0026#34;http\u0026#34;; // const hostname= \u0026#34;localhost\u0026#34;; // const prot = 4600; // const urls = { // products: `${protocol}://${hostname}:${prot}/products`, // orders: `${protocol}://${hostname}:${prot}/orders` // } const urls = { products: `/api/products`, orders: `/api/orders` } å»ºç½® Angular App $ npx ng build \u0026gt; angularapp@0.0.0 build \u0026gt; ng build âœ” Browser application bundle generation complete. âœ” Copying assets complete. â ‹ Generating index html...1 rules skipped due to selector errors: legend+* -\u0026gt; Cannot read properties of undefined (reading \u0026#39;type\u0026#39;) âœ” Index html generation complete. Initial Chunk Files | Names | Raw Size | Estimated Transfer Size main.ea031ef95dc394fc.js | main | 236.73 kB | 61.78 kB styles.698134ce9b91eefb.css | styles | 187.70 kB | 19.36 kB polyfills.d575d5a0c2fddf81.js | polyfills | 33.07 kB | 10.63 kB runtime.816becf396788283.js | runtime | 1.04 kB | 598 bytes | Initial Total | 458.56 kB | 92.36 kB Build at: 2022-08-22T10:34:24.214Z - Hash: 10534740714270dd - Time: 9530ms $ ls -al dist/angularapp/ ç¸½ç”¨é‡ 500 drwxrwxr-x 2 egs egs 4096 å…« 22 18:19 . drwxrwxr-x 3 egs egs 4096 å…« 22 18:19 .. -rw-rw-r-- 1 egs egs 14114 å…« 22 18:19 3rdpartylicenses.txt -rw-rw-r-- 1 egs egs 948 å…« 22 18:19 favicon.ico -rw-rw-r-- 1 egs egs 3043 å…« 22 18:19 index.html -rw-rw-r-- 1 egs egs 242506 å…« 22 18:19 main.1386edd316823fa4.js -rw-rw-r-- 1 egs egs 33867 å…« 22 18:19 polyfills.d575d5a0c2fddf81.js -rw-rw-r-- 1 egs egs 1070 å…« 22 18:19 runtime.816becf396788283.js åŸ·è¡Œ $ node server.js Running on port 4001 å®¹å™¨åŒ–æ‡‰ç”¨ç¨‹å¼ $ touch deploy-package.json\n{ \u0026#34;name\u0026#34;: \u0026#34;angularapp\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Angular Web App\u0026#34;, \u0026#34;repository\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;license\u0026#34;: \u0026#34;0BSD\u0026#34;, \u0026#34;devDependencies\u0026#34;: { \u0026#34;connect-history-api-fallback\u0026#34;: \u0026#34;^2.0.0\u0026#34;, \u0026#34;express\u0026#34;: \u0026#34;^4.18.1\u0026#34;, \u0026#34;json-server\u0026#34;: \u0026#34;^0.17.0\u0026#34; } } $ touch Dockerfile\nFROMnode:14.19.0RUN mkdir -p /usr/src/angularappCOPY dist /usr/src/angularapp/distCOPY data.json /usr/src/angularapp/COPY server.js /usr/src/angularapp/COPY deploy-package.json /usr/src/angularapp/package.jsonWORKDIR/usr/src/angularappRUN echo \u0026#39;package-lock=false\u0026#39; \u0026gt;\u0026gt; .npmrcRUN npm installEXPOSE4001CMD [\u0026#34;node\u0026#34;, \u0026#34;server.js\u0026#34;]$ touch .dockerignore\nnode_modules $ docker build . -t angularapp -f Dockerfile\n$ docker run -p 4001:4001 angularapp\næŸ¥çœ‹ docker ä¸Šçš„ è¨‚å–®è³‡æ–™ $ docker exec -it c46f23 bash $ cat data.json\n","permalink":"https://calvinegs.github.io/posts/webapp-angular/","summary":"github Source code\nAngularã€Reactã€Vue æ˜¯ä¸‰å€‹æœ€å—æ­¡è¿çš„å‰ç«¯æ¡†æ¶ï¼Œæ¥ä¸‹ä¾†çš„ä¸‰ç¯‡ç­†è¨˜åˆ†åˆ¥è¦ç´€éŒ„ä½¿ç”¨é€™ä¸‰å€‹ä¸åŒçš„æ¡†æ¶ä¾†å»ºç«‹åŠŸèƒ½ä¸€æ¨¡ä¸€æ¨£çš„ç¶²è·¯æ‡‰ç”¨ç¨‹å¼ã€‚\né€™å€‹ç¶²è·¯æ‡‰ç”¨ç¨‹å¼çš„éœ€æ±‚\n ç”£å“è¨‚è³¼åŠŸèƒ½  è¡¨é ­ï¼šè¨‚è³¼å•†å“ç¸½æ•¸ã€ç¸½é¡åŠé€å‡ºè¨‚å–®åŠŸèƒ½ å•†å“éæ¿¾åŠŸèƒ½ï¼šä¾ç”£å“é¡åˆ¥ä¾†é¡¯ç¤ºå•†å“ å•†å“æ¸…å–®ï¼šé¡¯ç¤ºå•†å“æ˜ç´°ã€å•†å“å”®åƒ¹ã€è¨‚è³¼æ•¸é‡ä¸‹æ‹‰é¸å–®åŠåŠ å…¥è³¼ç‰©è»Šç­‰åŠŸèƒ½   è¨‚å–®ç¢ºèªåŠŸèƒ½ï¼šé¡¯ç¤ºè¨‚è³¼å•†å“æ˜ç´°åŠç¸½é‡‘é¡ è¨‚è³¼æˆåŠŸåŠŸèƒ½ï¼šé¡¯ç¤ºè¨‚è³¼å®Œæˆè³‡è¨Š  ä½¿ç”¨æŠ€è¡“:\n Angular 14 Bootstrap 5 (UI Framework) Angular  Router Services   NodeJS \u0026amp; Express json-server npm-run-all (npm å¥—ä»¶)  å»ºç«‹æ–°å°ˆæ¡ˆ ä½¿ç”¨ä¸‹åˆ—çš„ npm init èªæ³•å³å¯å»ºç«‹æœ€æ–°ç‰ˆ Angular é è¨­çš„æ‡‰ç”¨ç¨‹å¼çµæ§‹\n$ npm init @angular angularapp -- --routing --style=scss Need to install the following packages: @angular/create@14.1.3 Ok to proceed? (y) CREATE angularapp/README.md (1064 bytes) CREATE angularapp/.","title":"ä½¿ç”¨ Angular ä¾†å»ºç«‹ç¶²è·¯æ‡‰ç”¨ç¨‹å¼"},{"content":"github Source code\néœ€æ±‚æƒ…å¢ƒ å¸Œæœ›æˆ‘å€‘çš„æ‡‰ç”¨ç¨‹å¼åœ¨æ¯æ¬¡æˆåŠŸå°èˆªå¾Œéƒ½èƒ½è‡ªå‹•æ–°ç€è¦½å™¨çš„é é¢æ¨™é¡Œã€‚\nç•¶ä½¿ç”¨è€…æŒ‰ä¸‹â€œåŠŸèƒ½åˆ—çš„HOMEå¾Œï¼Œç¨‹å¼é™¤äº†å°è¦½è‡³ Home Pageå¤–ï¼Œç€è¦½å™¨çš„é é¢æ¨™é¡Œé¡¯ç¤ºçš„æ˜¯: \u0026ldquo;CRUD App - Home\u0026rdquo;\nç•¶ä½¿ç”¨è€…æŒ‰ä¸‹â€œåŠŸèƒ½åˆ—çš„ç™»å…¥æŒ‰éˆ•å¾Œï¼Œç¨‹å¼é™¤äº†å°è¦½è‡³ ç™»å…¥ç•«é¢ã€€å¤–ï¼Œç€è¦½å™¨çš„é é¢æ¨™é¡Œé¡¯ç¤ºçš„æ˜¯: \u0026ldquo;CRUD App - Login\u0026rdquo;\næª¢è¦– Angular/CLI $ ng version _ _ ____ _ ___ / \\  _ __ __ _ _ _| | __ _ _ __ / ___| | |_ _| / â–³ \\ | \u0026#39;_ \\ / _` | | | | |/ _` | \u0026#39;__| | | | | | | / ___ \\| | | | (_| | |_| | | (_| | | | |___| |___ | | /_/ \\_\\_| |_|\\__, |\\__,_|_|\\__,_|_| \\____|_____|___| |___/ Angular CLI: 14.0.5 Node: 16.14.0 Package Manager: npm 8.3.1 OS: linux x64 Angular: undefined ... Package Version ------------------------------------------------------ @angular-devkit/architect 0.1400.5 @angular-devkit/core 14.0.5 @angular-devkit/schematics 14.0.5 @angular/cli 14.0.5 @schematics/angular 14.0.5 å»ºç«‹æ–°å°ˆæ¡ˆ $ npx ng new angular-titlestrategy ? Would you like to add Angular routing? Yes ? Which stylesheet format would you like to use? SCSS [ https://sass-lang.com/documentation/syntax#scss ] CREATE angular-titlestrategy/README.md (1074 bytes) CREATE angular-titlestrategy/.editorconfig (274 bytes) CREATE angular-titlestrategy/.gitignore (548 bytes) CREATE angular-titlestrategy/angular.json (3171 bytes) CREATE angular-titlestrategy/package.json (1052 bytes) CREATE angular-titlestrategy/tsconfig.json (863 bytes) CREATE angular-titlestrategy/.browserslistrc (600 bytes) CREATE angular-titlestrategy/karma.conf.js (1438 bytes) CREATE angular-titlestrategy/tsconfig.app.json (287 bytes) CREATE angular-titlestrategy/tsconfig.spec.json (333 bytes) CREATE angular-titlestrategy/.vscode/extensions.json (130 bytes) CREATE angular-titlestrategy/.vscode/launch.json (474 bytes) CREATE angular-titlestrategy/.vscode/tasks.json (938 bytes) CREATE angular-titlestrategy/src/favicon.ico (948 bytes) CREATE angular-titlestrategy/src/index.html (306 bytes) CREATE angular-titlestrategy/src/main.ts (372 bytes) CREATE angular-titlestrategy/src/polyfills.ts (2338 bytes) CREATE angular-titlestrategy/src/styles.scss (80 bytes) CREATE angular-titlestrategy/src/test.ts (749 bytes) CREATE angular-titlestrategy/src/assets/.gitkeep (0 bytes) CREATE angular-titlestrategy/src/environments/environment.prod.ts (51 bytes) CREATE angular-titlestrategy/src/environments/environment.ts (658 bytes) CREATE angular-titlestrategy/src/app/app-routing.module.ts (245 bytes) CREATE angular-titlestrategy/src/app/app.module.ts (393 bytes) CREATE angular-titlestrategy/src/app/app.component.scss (0 bytes) CREATE angular-titlestrategy/src/app/app.component.html (23364 bytes) CREATE angular-titlestrategy/src/app/app.component.spec.ts (1118 bytes) CREATE angular-titlestrategy/src/app/app.component.ts (226 bytes) âœ” Packages installed successfully. Successfully initialized git. $ cd angular-titlestrategy $ cat package.json { \u0026#34;name\u0026#34;: \u0026#34;angular-titlestrategy\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0.0.0\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;ng\u0026#34;: \u0026#34;ng\u0026#34;, \u0026#34;start\u0026#34;: \u0026#34;ng serve\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;ng build\u0026#34;, \u0026#34;watch\u0026#34;: \u0026#34;ng build --watch --configuration development\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;ng test\u0026#34; }, \u0026#34;private\u0026#34;: true, \u0026#34;dependencies\u0026#34;: { \u0026#34;@angular/animations\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/common\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/compiler\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/core\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/forms\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/platform-browser\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/platform-browser-dynamic\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/router\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;rxjs\u0026#34;: \u0026#34;~7.5.0\u0026#34;, \u0026#34;tslib\u0026#34;: \u0026#34;^2.3.0\u0026#34;, \u0026#34;zone.js\u0026#34;: \u0026#34;~0.11.4\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;@angular-devkit/build-angular\u0026#34;: \u0026#34;^14.0.5\u0026#34;, \u0026#34;@angular/cli\u0026#34;: \u0026#34;~14.0.5\u0026#34;, \u0026#34;@angular/compiler-cli\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@types/jasmine\u0026#34;: \u0026#34;~4.0.0\u0026#34;, \u0026#34;jasmine-core\u0026#34;: \u0026#34;~4.1.0\u0026#34;, \u0026#34;karma\u0026#34;: \u0026#34;~6.3.0\u0026#34;, \u0026#34;karma-chrome-launcher\u0026#34;: \u0026#34;~3.1.0\u0026#34;, \u0026#34;karma-coverage\u0026#34;: \u0026#34;~2.2.0\u0026#34;, \u0026#34;karma-jasmine\u0026#34;: \u0026#34;~5.0.0\u0026#34;, \u0026#34;karma-jasmine-html-reporter\u0026#34;: \u0026#34;~1.7.0\u0026#34;, \u0026#34;typescript\u0026#34;: \u0026#34;~4.7.2\u0026#34; } } è¨­ç½®å°ˆæ¡ˆ å»ºç«‹ç›¸é—œå…ƒä»¶ èˆ‡ æœå‹™ $ ng g c pages/login $ ng g c pages/register $ ng g c pages/profile $ ng g c pages/home $ ng g c pages/userdata $ ng g c pages/order ä½¿ç”¨ Bootstrap é–‹å•Ÿ src/index.html åœ¨  åŠ å…¥ link tag\n ä½¿ç”¨ bootstrap 5 å¦‚ç¬¬ 9 è¡ŒåŒ¯å…¥èªæ³•  1 2 3 4 5 6 7 8 9 10 11 12 13 14  \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;AngularTitlestrategy\u0026lt;/title\u0026gt; \u0026lt;base href=\u0026#34;/\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;icon\u0026#34; type=\u0026#34;image/x-icon\u0026#34; href=\u0026#34;favicon.ico\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\u0026#34; integrity=\u0026#34;sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;app-root\u0026gt;\u0026lt;/app-root\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;   è·¯ç”±è¨­ç½® é€éè·¯ç”±çš„è¨­ç½®ï¼Œç¨‹å¼æ‰æœƒçŸ¥é“ç•¶ä½¿ç”¨è€…åœ¨ç€è¦§å™¨ç‰¹å®šçš„ URI æ™‚ï¼Œç¨‹å¼æ‡‰è©²å»åŸ·é‚£æ”¯ç›¸å°æ‡‰çš„ç¨‹å¼ã€‚è·¯ç”±æ¨¡çµ„æª”æ¡ˆï¼ˆapp-routin.module.tsï¼‰å…§å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { RouterModule, Routes } from \u0026#39;@angular/router\u0026#39;; import { HomeComponent } from \u0026#39;./pages/home/home.component\u0026#39;; import { LoginComponent } from \u0026#39;./pages/login/login.component\u0026#39;; import { OrderComponent } from \u0026#39;./pages/order/order.component\u0026#39;; import { ProfileComponent } from \u0026#39;./pages/profile/profile.component\u0026#39;; import { RegisterComponent } from \u0026#39;./pages/register/register.component\u0026#39;; import { UserdataComponent } from \u0026#39;./pages/userdata/userdata.component\u0026#39;; const routes: Routes = [  { path: \u0026#39;home\u0026#39;, component: HomeComponent }, { path: \u0026#39;login\u0026#39;, component: LoginComponent }, { path: \u0026#39;register\u0026#39;, component: RegisterComponent }, { path: \u0026#39;profile\u0026#39;, component: ProfileComponent }, { path: \u0026#39;userdata\u0026#39;, component: UserdataComponent}, { path: \u0026#39;order\u0026#39;, component: OrderComponent }, { path: \u0026#39;\u0026#39;, redirectTo: \u0026#39;home\u0026#39;, pathMatch: \u0026#39;full\u0026#39;} ]; @NgModule({ imports: [RouterModule.forRoot(routes)], exports: [RouterModule] }) export class AppRoutingModule { }   App Component ä¿®æ”¹ App å…ƒä»¶çš„ç¨‹å¼ç¢¼\n// app.component.ts import { Component } from \u0026#39;@angular/core\u0026#39;; @Component({ selector: \u0026#39;app-root\u0026#39;, templateUrl: \u0026#39;./app.component.html\u0026#39;, styleUrls: [\u0026#39;./app.component.scss\u0026#39;] }) export class AppComponent { } App å…ƒä»¶çš„ HTML\n\u0026lt;!-- app.component.html --\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;nav class=\u0026#34;navbar navbar-expand navbar-dark bg-dark\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;container-fluid\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;#\u0026#34; class=\u0026#34;navbar-brand\u0026#34;\u0026gt;Angular14\u0026lt;/a\u0026gt; \u0026lt;ul class=\u0026#34;navbar-nav me-auto\u0026#34; routerLinkActive=\u0026#34;active\u0026#34;\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/home\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;home\u0026#34;\u0026gt;é¦–é \u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/userdata\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;userdata\u0026#34;\u0026gt;ä½¿ç”¨è€…ç®¡ç†\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/order\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;order\u0026#34;\u0026gt;è¨‚å–®\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;ul class=\u0026#34;navbar-nav ms-auto\u0026#34;\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/register\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;register\u0026#34;\u0026gt;è¨»å†Š\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/login\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;login\u0026#34;\u0026gt;ç™»å…¥\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/nav\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;router-outlet\u0026gt;\u0026lt;/router-outlet\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; åŸ·è¡Œç¨‹å¼ çµè¡Œçµæœï¼š\nå°è¦½è‡³é¦–é æ™‚ å°è¦½è‡³ä½¿ç”¨è€…è³‡æ–™åŠŸèƒ½æ™‚ å°è¦½è‡³è¨‚å–®åŠŸèƒ½æ™‚ æœƒç™¼ç¾ç€è¦½å™¨çš„é é¢æ¨™é¡Œéƒ½ç¶­è­·æ˜¯\u0026quot;AngularTitlestrategy\u0026quot;ã€‚é€™å€‹æ¨™é¡Œçš„è¨­å®šå€¼æ˜¯åœ¨ index.htmlã€€ä¸­\nä½¿ç”¨ Angular 14 æ–°å¢çš„åŠŸèƒ½ - TitleStrategy Titleã€€Strategyæ˜¯ Angular 14å…§å»ºçš„åŠŸèƒ½ï¼Œåªé ˆåœ¨ Routes è¨­å®šå€¼ä¸­åŠ å…¥ title å±¬æ€§å€¼å³å¯è‡ªå‹•æ›´æ–°ç€è¦½å™¨çš„é é¢æ¨™é¡Œ\nç•¶å°è¦½è‡³Homeæ™‚ï¼Œç€è¦½å™¨çš„é é¢æ¨™é¡Œè‡ªå‹•æ›´æ–°ç‚ºé¦–é  ç•¶å°è¦½è‡³ä½¿ç”¨è€…è³‡æ–™æ™‚ï¼Œç€è¦½å™¨çš„é é¢æ¨™é¡Œè‡ªå‹•æ›´æ–°ç‚ºä½¿ç”¨è€…è³‡æ–™ ç•¶å°è¦½è‡³è¨‚å–®æ™‚ï¼Œç€è¦½å™¨çš„é é¢æ¨™é¡Œè‡ªå‹•æ›´æ–°ç‚ºè¨‚å–® å®¢åˆ¶åŒ–æ¨™é¡Œ æ–°å¢ä¸€å€‹ç¹¼æ‰¿è‡ª TitleStrategy çš„ Class é€™å€‹ class æœƒè¦†å¯«æ‰é è¨­çš„ Title Strategy\n@Injectable() export class TemplatePageTitleStrategy extends TitleStrategy { constructor(private readonly title: Title) { super(); } override updateTitle(routerState: RouterStateSnapshot) { const title = this.buildTitle(routerState); if (title !== undefined) { this.title.setTitle(`My App - ${title}`); // é€é setTitle ä¾†è¦†å¯«é è¨­çš„ Title å€¼  } } } å®Œæ•´çš„ app-routing.module.ts\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42  import { Injectable, NgModule } from \u0026#39;@angular/core\u0026#39;; import { Title } from \u0026#39;@angular/platform-browser\u0026#39;; import { RouterModule, RouterStateSnapshot, Routes, TitleStrategy } from \u0026#39;@angular/router\u0026#39;; import { HomeComponent } from \u0026#39;./pages/home/home.component\u0026#39;; import { LoginComponent } from \u0026#39;./pages/login/login.component\u0026#39;; import { OrderComponent } from \u0026#39;./pages/order/order.component\u0026#39;; import { ProfileComponent } from \u0026#39;./pages/profile/profile.component\u0026#39;; import { RegisterComponent } from \u0026#39;./pages/register/register.component\u0026#39;; import { UserdataComponent } from \u0026#39;./pages/userdata/userdata.component\u0026#39;;  const routes: Routes = [ { path: \u0026#39;home\u0026#39;, component: HomeComponent, title: \u0026#39;é¦–é \u0026#39; }, { path: \u0026#39;login\u0026#39;, component: LoginComponent, title: \u0026#39;ç™»å…¥\u0026#39; }, { path: \u0026#39;register\u0026#39;, component: RegisterComponent, title: \u0026#39;è¨»å†Š\u0026#39; }, { path: \u0026#39;profile\u0026#39;, component: ProfileComponent, title: \u0026#39;Profile\u0026#39; }, { path: \u0026#39;userdata\u0026#39;, component: UserdataComponent, title: \u0026#39;ä½¿ç”¨è€…è³‡æ–™\u0026#39; }, { path: \u0026#39;order\u0026#39;, component: OrderComponent, title: \u0026#39;è¨‚å–®\u0026#39; }, { path: \u0026#39;\u0026#39;, redirectTo: \u0026#39;home\u0026#39;, pathMatch: \u0026#39;full\u0026#39;} ]; @Injectable() export class TemplatePageTitleStrategy extends TitleStrategy { constructor(private readonly title: Title) { super(); } override updateTitle(routerState: RouterStateSnapshot) { const title = this.buildTitle(routerState); if (title !== undefined) { this.title.setTitle(`My App - ${title}`); } } } @NgModule({ imports: [RouterModule.forRoot(routes)], exports: [RouterModule], providers: [ { provide: TitleStrategy, useClass: TemplatePageTitleStrategy } ] }) export class AppRoutingModule { }   åŸ·è¡Œçµæœ çœŸæ„Ÿè¬ Angular 14 å°‡æ­¤éœ€æ±‚è®Šæˆå…§å»ºåŠŸèƒ½ã€‚\n","permalink":"https://calvinegs.github.io/posts/angular-titlestrategy/","summary":"github Source code\néœ€æ±‚æƒ…å¢ƒ å¸Œæœ›æˆ‘å€‘çš„æ‡‰ç”¨ç¨‹å¼åœ¨æ¯æ¬¡æˆåŠŸå°èˆªå¾Œéƒ½èƒ½è‡ªå‹•æ–°ç€è¦½å™¨çš„é é¢æ¨™é¡Œã€‚\nç•¶ä½¿ç”¨è€…æŒ‰ä¸‹â€œåŠŸèƒ½åˆ—çš„HOMEå¾Œï¼Œç¨‹å¼é™¤äº†å°è¦½è‡³ Home Pageå¤–ï¼Œç€è¦½å™¨çš„é é¢æ¨™é¡Œé¡¯ç¤ºçš„æ˜¯: \u0026ldquo;CRUD App - Home\u0026rdquo;\nç•¶ä½¿ç”¨è€…æŒ‰ä¸‹â€œåŠŸèƒ½åˆ—çš„ç™»å…¥æŒ‰éˆ•å¾Œï¼Œç¨‹å¼é™¤äº†å°è¦½è‡³ ç™»å…¥ç•«é¢ã€€å¤–ï¼Œç€è¦½å™¨çš„é é¢æ¨™é¡Œé¡¯ç¤ºçš„æ˜¯: \u0026ldquo;CRUD App - Login\u0026rdquo;\næª¢è¦– Angular/CLI $ ng version _ _ ____ _ ___ / \\  _ __ __ _ _ _| | __ _ _ __ / ___| | |_ _| / â–³ \\ | \u0026#39;_ \\ / _` | | | | |/ _` | \u0026#39;__| | | | | | | / ___ \\| | | | (_| | |_| | | (_| | | | |___| |___ | | /_/ \\_\\_| |_|\\__, |\\__,_|_|\\__,_|_| \\____|_____|___| |___/ Angular CLI: 14.","title":"ä½¿ç”¨ Angular 14 ä¸­å…§å»ºçš„ TitleStrategy åŠŸèƒ½ä¾†è‡ªå®šç€è¦½å™¨çš„é é¢æ¨™é¡Œ"},{"content":"github Source code\næœ¬æ–‡ä¸»è¦çš„ä¸»é¡Œæ˜¯è¦å‘ˆç¾å¦‚ä½•å®Œæˆå…·æœ‰ \u0026ldquo;æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤ã€æŸ¥è©¢â€œ Todo List åŠŸèƒ½çš„ Angular Applicationã€‚åŒæ™‚æ­é…ä½¿ç”¨è€…è§’è‰²/æ¬Šé™æ§ç®¡ä¾†å‘ˆç¾ä¸åŒ UI åŠŸèƒ½ã€‚\nåœ¨æœ€å¾Œçš„ç« ç¯€æœƒä»‹ç´¹åˆ°å¦‚ä½•ä½¿ç”¨ Angular Directive ä¾†ç°¡åŒ–ç¨‹å¼é¿å…ç¨‹å¼ç¢¼é‡è¦†ã€‚\nç‚ºå®Œæ•´æ€§è€ƒé‡ï¼Œé‚„æ˜¯è¨˜éŒ„å¦‚ä½•ä¸€æ­¥æ­¥å¾ç„¡åˆ°æœ‰ä½¿ç”¨ Angular 14 ç›¸é—œåŠŸèƒ½ä¾†å»ºç«‹ä¸€å€‹ä½¿ç”¨è€…è³‡æ–™è¨»å†Šã€ç™»å…¥çš„è¡¨å–®åŠŸèƒ½ï¼ˆé€£çµåˆ°å¾Œç«¯ node+MySQL Web API )ï¼Œåœ¨é€™äº›è¡¨å–®ä¸­æŒ‰ä¸‹é€å‡ºæ™‚æœƒè‡ªå‹•æª¢æ ¸ä½¿ç”¨è€…æ‰€è¼¸å…¥çš„è³‡æ–™æ˜¯å¦åˆä¹ç¨‹å¼ä¸­æ‰€è¨­å®šçš„æª¢æ ¸é‚è¼¯ï¼Œä¸¦é¡¯ç¤ºåˆé©çš„è¨Šæ¯åæ‡‰çµ¦ä½¿ç”¨è€…ã€‚å…¶ä¸­å°‡æœƒä½¿ç”¨åˆ°ä¸‹åˆ—æŠ€è¡“:\n Angular CLI 14 Bootstrap 5 (UI Framework) Angular  Reactive Form Custome Validator Interceptor JWT Session Storage Router Services Guard \u0026amp; Router Data RxJs Custome Directive     è¨»1: è‹¥ä½ å·²ç¶“æŸ¥é–±é ä½¿ç”¨ Angular 14 å»ºç«‹ Reactive Form è¡¨å–®é©—è­‰ç¯„ä¾‹ é€™ç¯‡ç­†è¨˜äº†ï¼Œé‚£å¯ä»¥ç›´æ¥è·³åˆ° \u0026ldquo;å®Œæˆ Todo ç›¸é—œ Component çš„åŠŸèƒ½\u0026rdquo; é€™å€‹ç« ç¯€ã€‚\nè¨»2: è‹¥ä½ è¦æ›´ç­è§£å¾Œç«¯ Web API å¯åƒè€ƒæ­¤ç¯‡ ä½¿ç”¨ Node.js + express + MySQL å»ºç«‹ä¸€å€‹å¾Œç«¯æœå‹™ REST API ç­†è¨˜ã€‚\n å®‰è£ Angular/CLI æª¢è¦–ç›®å‰ç’°å¢ƒç‚º node v16.14.0ï¼Œ global å®‰è£çš„æ˜¯ Angular CLI 13.3.6\n$ node --version v16.14.0 $ ng version _ _ ____ _ ___ / \\  _ __ __ _ _ _| | __ _ _ __ / ___| | |_ _| / â–³ \\ | \u0026#39;_ \\ / _` | | | | |/ _` | \u0026#39;__| | | | | | | / ___ \\| | | | (_| | |_| | | (_| | | | |___| |___ | | /_/ \\_\\_| |_|\\__, |\\__,_|_|\\__,_|_| \\____|_____|___| |___/ Angular CLI: 13.3.6 Node: 16.14.0 Package Manager: npm 8.3.1 OS: linux x64 Angular: ... Package Version ------------------------------------------------------ @angular-devkit/architect 0.1303.6 (cli-only) @angular-devkit/core 13.3.6 (cli-only) @angular-devkit/schematics 13.3.6 (cli-only) @schematics/angular 13.3.6 (cli-only) åœ¨ Local å®‰è£ Angular CLI ver.14 $ mkdir angular14 \u0026amp;\u0026amp; cd angular14 $ npm install @angular/cli@14 added 219 packages, and audited 220 packages in 6s 25 packages are looking for funding run `npm fund` for details found 0 vulnerabilities $ ls -al ç¸½ç”¨é‡ 176 drwxrwxr-x 3 egs egs 4096 å…­ 16 11:10 . drwxrwxr-x 10 egs egs 4096 å…­ 16 11:10 .. drwxrwxr-x 191 egs egs 4096 å…­ 16 11:10 node_modules -rw-rw-r-- 1 egs egs 58 å…­ 16 11:10 package.json -rw-rw-r-- 1 egs egs 163807 å…­ 16 11:10 package-lock.json $ cat package.json { \u0026#34;dependencies\u0026#34;: { \u0026#34;@angular/cli\u0026#34;: \u0026#34;^14.0.2\u0026#34; } } $ npx ng version _ _ ____ _ ___ / \\  _ __ __ _ _ _| | __ _ _ __ / ___| | |_ _| / â–³ \\ | \u0026#39;_ \\ / _` | | | | |/ _` | \u0026#39;__| | | | | | | / ___ \\| | | | (_| | |_| | | (_| | | | |___| |___ | | /_/ \\_\\_| |_|\\__, |\\__,_|_|\\__,_|_| \\____|_____|___| |___/ Angular CLI: 14.0.5 Node: 16.14.0 Package Manager: npm 8.3.1 OS: linux x64 Angular: undefined ... Package Version ------------------------------------------------------ @angular-devkit/architect 0.1400.5 @angular-devkit/core 14.0.5 @angular-devkit/schematics 14.0.5 @angular/cli 14.0.5 @schematics/angular 14.0.5 å»ºç«‹æ–°å°ˆæ¡ˆ $ npx ng new angular-webapi-crud ? Would you like to add Angular routing? Yes ? Which stylesheet format would you like to use? SCSS [ https://sass-lang.com/documentation/syntax#scss ] CREATE angular-webapi-crud/README.md (1071 bytes) CREATE angular-webapi-crud/.editorconfig (274 bytes) CREATE angular-webapi-crud/.gitignore (548 bytes) CREATE angular-webapi-crud/angular.json (3161 bytes) CREATE angular-webapi-crud/package.json (1050 bytes) CREATE angular-webapi-crud/tsconfig.json (863 bytes) CREATE angular-webapi-crud/.browserslistrc (600 bytes) CREATE angular-webapi-crud/karma.conf.js (1436 bytes) CREATE angular-webapi-crud/tsconfig.app.json (287 bytes) CREATE angular-webapi-crud/tsconfig.spec.json (333 bytes) CREATE angular-webapi-crud/.vscode/extensions.json (130 bytes) CREATE angular-webapi-crud/.vscode/launch.json (474 bytes) CREATE angular-webapi-crud/.vscode/tasks.json (938 bytes) CREATE angular-webapi-crud/src/favicon.ico (948 bytes) CREATE angular-webapi-crud/src/index.html (303 bytes) CREATE angular-webapi-crud/src/main.ts (372 bytes) CREATE angular-webapi-crud/src/polyfills.ts (2338 bytes) CREATE angular-webapi-crud/src/styles.scss (80 bytes) CREATE angular-webapi-crud/src/test.ts (749 bytes) CREATE angular-webapi-crud/src/assets/.gitkeep (0 bytes) CREATE angular-webapi-crud/src/environments/environment.prod.ts (51 bytes) CREATE angular-webapi-crud/src/environments/environment.ts (658 bytes) CREATE angular-webapi-crud/src/app/app-routing.module.ts (245 bytes) CREATE angular-webapi-crud/src/app/app.module.ts (393 bytes) CREATE angular-webapi-crud/src/app/app.component.scss (0 bytes) CREATE angular-webapi-crud/src/app/app.component.html (23364 bytes) CREATE angular-webapi-crud/src/app/app.component.spec.ts (1112 bytes) CREATE angular-webapi-crud/src/app/app.component.ts (224 bytes) âœ” Packages installed successfully. Successfully initialized git. $ cd angular-webapi-curd $ cat package.json { \u0026#34;name\u0026#34;: \u0026#34;angular-webapi-crud\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0.0.0\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;ng\u0026#34;: \u0026#34;ng\u0026#34;, \u0026#34;start\u0026#34;: \u0026#34;ng serve\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;ng build\u0026#34;, \u0026#34;watch\u0026#34;: \u0026#34;ng build --watch --configuration development\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;ng test\u0026#34; }, \u0026#34;private\u0026#34;: true, \u0026#34;dependencies\u0026#34;: { \u0026#34;@angular/animations\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/common\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/compiler\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/core\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/forms\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/platform-browser\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/platform-browser-dynamic\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/router\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;rxjs\u0026#34;: \u0026#34;~7.5.0\u0026#34;, \u0026#34;tslib\u0026#34;: \u0026#34;^2.3.0\u0026#34;, \u0026#34;zone.js\u0026#34;: \u0026#34;~0.11.4\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;@angular-devkit/build-angular\u0026#34;: \u0026#34;^14.0.5\u0026#34;, \u0026#34;@angular/cli\u0026#34;: \u0026#34;~14.0.5\u0026#34;, \u0026#34;@angular/compiler-cli\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@types/jasmine\u0026#34;: \u0026#34;~4.0.0\u0026#34;, \u0026#34;jasmine-core\u0026#34;: \u0026#34;~4.1.0\u0026#34;, \u0026#34;karma\u0026#34;: \u0026#34;~6.3.0\u0026#34;, \u0026#34;karma-chrome-launcher\u0026#34;: \u0026#34;~3.1.0\u0026#34;, \u0026#34;karma-coverage\u0026#34;: \u0026#34;~2.2.0\u0026#34;, \u0026#34;karma-jasmine\u0026#34;: \u0026#34;~5.0.0\u0026#34;, \u0026#34;karma-jasmine-html-reporter\u0026#34;: \u0026#34;~1.7.0\u0026#34;, \u0026#34;typescript\u0026#34;: \u0026#34;~4.7.2\u0026#34; } } åŸ·è¡Œç”± CLI ç”£ç”Ÿçš„é è¨­ç¨‹å¼æ¶æ§‹\n$ npm start \u0026gt; angular-webapi-crud@0.0.0 start \u0026gt; ng serve âœ” Browser application bundle generation complete. Initial Chunk Files | Names | Raw Size vendor.js | vendor | 2.02 MB | polyfills.js | polyfills | 315.29 kB | styles.css, styles.js | styles | 207.83 kB | main.js | main | 50.14 kB | runtime.js | runtime | 6.54 kB | | Initial Total | 2.58 MB Build at: 2022-07-11T09:47:38.380Z - Hash: 1a9fa50dab468973 - Time: 10661ms ** Angular Live Development Server is listening on localhost:4200, open your browser on http://localhost:4200/ ** âœ” Compiled successfully. é–‹å•Ÿç€è¦½å™¨ï¼Œè¼¸å…¥ http://localhost:4200/\n$ ls -al ç¸½ç”¨é‡ 868 drwxrwxr-x 7 egs egs 4096 å…­ 15 11:24 . drwxrwxr-x 4 egs egs 4096 å…­ 15 11:21 .. drwxrwxr-x 3 egs egs 4096 å…­ 15 11:24 .angular -rw-rw-r-- 1 egs egs 3146 å…­ 15 11:21 angular.json -rw-rw-r-- 1 egs egs 600 å…­ 15 11:21 .browserslistrc -rw-rw-r-- 1 egs egs 274 å…­ 15 11:21 .editorconfig drwxrwxr-x 8 egs egs 4096 å…­ 15 11:22 .git -rw-rw-r-- 1 egs egs 548 å…­ 15 11:21 .gitignore -rw-rw-r-- 1 egs egs 1433 å…­ 15 11:21 karma.conf.js drwxrwxr-x 596 egs egs 20480 å…­ 15 11:24 node_modules -rw-rw-r-- 1 egs egs 1047 å…­ 15 11:21 package.json -rw-rw-r-- 1 egs egs 800093 å…­ 15 11:22 package-lock.json -rw-rw-r-- 1 egs egs 1068 å…­ 15 11:21 README.md drwxrwxr-x 5 egs egs 4096 å…­ 15 11:21 src -rw-rw-r-- 1 egs egs 287 å…­ 15 11:21 tsconfig.app.json -rw-rw-r-- 1 egs egs 863 å…­ 15 11:21 tsconfig.json -rw-rw-r-- 1 egs egs 333 å…­ 15 11:21 tsconfig.spec.json drwxrwxr-x 2 egs egs 4096 å…­ 15 11:21 .vscode è¨­ç½®å°ˆæ¡ˆ å»ºç«‹ç›¸é—œå…ƒä»¶ èˆ‡ æœå‹™ $ ng g s shared/services/auth # æ–°å¢ auth service $ ng g s shared/services/token-storage # æ–°å¢ token-storage service $ ng g s shared/services/todo # æ–°å¢ todo service $ ng g class shared/models/todo --type=model $ ng g interceptor shared/interceptor/authã€€# æ–°å¢ auth interceptor $ ng g c pages/login $ ng g c pages/register $ ng g c pages/profile $ ng g c pages/home $ ng g c pages/add-todo $ ng g c pages/todo-detail $ ng g c pages/todo-list $ ng g guard shared/guard/auth --implements=\u0026#34;CanActivate\u0026#34; # æ–°å¢ auth guard $ ng g guard shared/guard/role --implements=\u0026#34;CanActivate\u0026#34; # æ–°å¢ role guard æª”æ¡ˆçµæ§‹ å®šç¾© ï¼­odel Class ä¸»è¦æœƒç”¨åˆ°çš„ Model Class æ˜¯ Todoã€‚shared/models/todo.model.ts\nexport class Todo { id?: any; title?: string; description?: string; status?: boolean; } æ’°å¯« Data Services ç¨‹å¼ æ‰“é–‹ vscode\n$ code .ã€€# æ‰“é–‹ vscode å°‡ç¨‹å¼ä¸­æœƒä½¿ç”¨çš„åƒæ•¸å€¼æ”¾åœ¨ appSettings.ts ä¸­ åœ¨é–‹å§‹æ–°å¢ Services ç¨‹å¼å‰ï¼Œæˆ‘å€‘å¯ä»¥è€ƒæ…®å°‡å›ºå®šçš„åƒæ•¸å€¼æ”¾åœ¨ appSettings.ts ä¸­ï¼Œä¾†å¢åŠ ä¸€äº›å½ˆæ€§ã€‚åœ¨ sharedç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹ã€€helpers çš„å­ç›®éŒ„ï¼Œä¸¦æ–°å¢ä¸€æ”¯ appSettings.ts ç¨‹å¼ï¼Œå…§å®¹å¦‚ä¸‹ã€‚è¨­ç½®ä¸€å€‹éœæ…‹å¸¸æ•¸ API_URLï¼Œä¸¦æŠŠå®ƒ export å‡ºä¾†ï¼Œè®“å¤–é¢çš„ç¨‹å¼å¯ä»¥å¼•ç”¨å®ƒã€‚\nexport class AppSettings { static API_URL = \u0026#39;http://localhost:5000/api/\u0026#39;; } è¨»å†Šèˆ‡ç™»å…¥ä½¿ç”¨çš„æœå‹™ç¨‹å¼ auth.service.ts è¨»å†Šèˆ‡ç™»å…¥åŠŸèƒ½é ˆæ­é…å¾Œç«¯ APIï¼Œå¯åƒè€ƒã€€ä½¿ç”¨ Node.js + express + MariaDB å»ºç«‹ä¸€å€‹å¾Œç«¯æœå‹™ REST API\nimport { Injectable } from \u0026#39;@angular/core\u0026#39;; import { HttpClient } from \u0026#39;@angular/common/http\u0026#39;; import { Observable } from \u0026#39;rxjs\u0026#39;; import { AppSettings } from \u0026#39;../helpers/appSettings\u0026#39;; const API_URL = AppSettings.API_URL + \u0026#39;auth/\u0026#39;; @Injectable({ providedIn: \u0026#39;root\u0026#39; }) export class AuthService { constructor( private http: HttpClient) { } login(username: string, password: string): Observable\u0026lt;any\u0026gt; { return this.http.post(API_URL + \u0026#39;signin\u0026#39;, { username, password }) } register(username: string, email:string, password: string): Observable\u0026lt;any\u0026gt; { return this.http.post(API_URL + \u0026#39;signup\u0026#39;, { username, email, password }) } } Token ç›¸é—œçš„æœå‹™ç¨‹å¼ token-storage.service.ts åœ¨æœ¬ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘æœƒæŠŠç”± API å›ä¾†å›ä¾†çš„ Token å„²å­˜åœ¨ local ç€è¦½å™¨ä¸­çš„ Session Local Storage ä¸­ã€‚\nimport { Injectable } from \u0026#39;@angular/core\u0026#39;; const TOKEN_KEY = \u0026#39;auth-token\u0026#39;; const USER_KEY = \u0026#39;auth-user\u0026#39;; @Injectable({ providedIn: \u0026#39;root\u0026#39; }) export class TokenStorageService { constructor() { } signOut(): void { window.sessionStorage.clear(); } public saveToken(token: string): void { sessionStorage.removeItem(TOKEN_KEY); sessionStorage.setItem(TOKEN_KEY, token); } public getToken(): string | null { return sessionStorage.getItem(TOKEN_KEY); } public saveUser(user: any): void { sessionStorage.removeItem(USER_KEY); sessionStorage.setItem(USER_KEY, JSON.stringify(user)); } public getUser(): any { const user = sessionStorage.getItem(USER_KEY); if (user) { return JSON.parse(user); } return user; } } Todo ç›¸é—œçš„æœå‹™ç¨‹å¼ todo.service.ts todo service æ˜¯è—‰ç”± å¾Œç«¯çš„ Web API ä¾†å®Œæˆ Todo è³‡æ–™çš„æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤ã€æŸ¥è©¢ç­‰è³‡æ–™åº«åŠŸèƒ½ã€‚\nimport { Injectable } from \u0026#39;@angular/core\u0026#39;; import { HttpClient } from \u0026#39;@angular/common/http\u0026#39;; import { Observable } from \u0026#39;rxjs\u0026#39;; import { Todo } from \u0026#39;../models/todo.model\u0026#39;; import { AppSettings } from \u0026#39;../helpers/appSettings\u0026#39;; const API_URL = AppSettings.API_URL + \u0026#39;todos/\u0026#39;; @Injectable({ providedIn: \u0026#39;root\u0026#39; }) export class TodoService { constructor(private http: HttpClient) { } getAll(): Observable\u0026lt;Todo[]\u0026gt; { return this.http.get\u0026lt;Todo[]\u0026gt;(API_URL); } get(id: any): Observable\u0026lt;Todo\u0026gt; { return this.http.get(`${API_URL}/${id}`); } create(data: any): Observable\u0026lt;any\u0026gt; { return this.http.post(API_URL, data); } update(id: any, data: any): Observable\u0026lt;any\u0026gt; { return this.http.put(`${API_URL}/${id}`, data); } delete(id: any): Observable\u0026lt;any\u0026gt; { return this.http.delete(`${API_URL}/${id}`); } deleteAll(): Observable\u0026lt;any\u0026gt; { return this.http.delete(API_URL); } findByTitle(title: any): Observable\u0026lt;Todo[]\u0026gt; { return this.http.get\u0026lt;Todo[]\u0026gt;(`${API_URL}?title=${title}`); } } æ’°å¯« HTTP Interceptor ç¨‹å¼ HTTP Interceptor å¯ä»¥è®“æˆ‘å€‘å¾ˆå®¹æ˜“çš„åœ¨æ¯ä¸€å€‹ request Header ä¸­åŠ å…¥æˆ‘å€‘ç™»å…¥æˆåŠŸå¾Œç”± API å›å‚³å›ä¾†çš„ï½€åˆæ³•Token`ã€‚åœ¨é€™å€‹ç¨‹å¼ä¸­å”¯ä¸€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸æ‡‰æ›´æ”¹åŸå§‹çš„ requestï¼Œè€Œæ˜¯æ‡‰è©²é€é clone åŠŸèƒ½ä¾†ç”£ç”Ÿä¸€å€‹æ–°çš„ request å†å°‡ token å¯«å…¥é€™å€‹æ–° request çš„ Headerã€‚\n// ./app/shared/interceptor/auth.interceptor.ts import { Injectable } from \u0026#39;@angular/core\u0026#39;; import { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor, HTTP_INTERCEPTORS } from \u0026#39;@angular/common/http\u0026#39;; import { Observable } from \u0026#39;rxjs\u0026#39;; import { TokenStorageService } from \u0026#39;../services/token-storage.service\u0026#39;; @Injectable() export class AuthInterceptor implements HttpInterceptor { constructor(private tokenService: TokenStorageService) {} intercept(request: HttpRequest\u0026lt;any\u0026gt;, next: HttpHandler): Observable\u0026lt;HttpEvent\u0026lt;any\u0026gt;\u0026gt; { let authRequest = request; const token = this.tokenService.getToken(); if (token != null) { authRequest = request.clone({ setHeaders: { Authorization: `Bearer ${token}` } }); } return next.handle(authRequest); } } export const authInterceptorProviders = [{ provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true }] å°‡ HTTP Interceptor åŠ å…¥åˆ° app module çš„ providers ä¸Šè¿°å®Œæˆçš„ Interceptor è¦è¨˜å¾—æ³¨å…¥åˆ° app module providers è¨­å®šä¸­ï¼ˆç¬¬13ã€32è¡Œï¼‰ã€‚ åŒæ™‚ï¼Œåœ¨å‰è¿°çš„ services ä¸­æˆ‘å€‘ä½¿ç”¨åˆ°äº† HttpClientï¼Œæ‰€ä»¥ä¹Ÿå¿…é ˆåŒ¯å…¥ HttpClient Moduleï¼ˆç¬¬14ã€30è¡Œï¼‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38  import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { BrowserModule } from \u0026#39;@angular/platform-browser\u0026#39;; import { HttpClientModule } from \u0026#39;@angular/common/http\u0026#39;; import { AppRoutingModule } from \u0026#39;./app-routing.module\u0026#39;; import { AppComponent } from \u0026#39;./app.component\u0026#39;; import { LoginComponent } from \u0026#39;./pages/login/login.component\u0026#39;; import { RegisterComponent } from \u0026#39;./pages/register/register.component\u0026#39;; import { ProfileComponent } from \u0026#39;./pages/profile/profile.component\u0026#39;; import { HomeComponent } from \u0026#39;./pages/home/home.component\u0026#39;; import { AddTodoComponent } from \u0026#39;./pages/add-todo/add-todo.component\u0026#39;; import { TodoDetailComponent } from \u0026#39;./pages/todo-detail/todo-detail.component\u0026#39;; import { TodoListComponent } from \u0026#39;./pages/todo-list/todo-list.component\u0026#39;; import { FormsModule } from \u0026#39;@angular/forms\u0026#39;; import { authInterceptorProviders } from \u0026#39;./shared/interceptor/auth.interceptor\u0026#39;; @NgModule({ declarations: [ AppComponent, LoginComponent, RegisterComponent, ProfileComponent, HomeComponent, AddTodoComponent, TodoDetailComponent, TodoListComponent ], imports: [ BrowserModule, AppRoutingModule,  FormsModule, HttpClientModule  ], providers: [authInterceptorProviders], bootstrap: [AppComponent] }) export class AppModule { }   æ–°å¢ components æ¥è‘—è¦ä¾†å»ºç«‹ componentsï¼Œåœ¨æ­¤æˆ‘å€‘ä½¿çš„æ˜¯ Reactive Form ä¸¦ä½¿ç”¨ bootstrap CSS frameworkä¾†è£é£¾æˆ‘å€‘çš„ component ï¼Œæ‰€å¿…é ˆå…ˆé€²è¡Œç›¸é—œè¨­å®š\nåŒ¯å…¥ ReactiveFormModule æ¨¡çµ„ é–‹å•Ÿ src/app/app.module.ts ä¸¦ç”± @angular/forms åŒ¯å…¥ ReactiveFormModule\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { BrowserModule } from \u0026#39;@angular/platform-browser\u0026#39;; import { ReactiveFormsModule } from \u0026#39;@angular/forms\u0026#39;; import { HttpClientModule } from \u0026#39;@angular/common/http\u0026#39;; import { AppRoutingModule } from \u0026#39;./app-routing.module\u0026#39;; import { AppComponent } from \u0026#39;./app.component\u0026#39;; //... @NgModule({ declarations: [ AppComponent //...  ], imports: [ BrowserModule, AppRoutingModule, ReactiveFormsModule,  HttpClientModule ], providers: [authInterceptorProviders], bootstrap: [AppComponent] }) export class AppModule { }   ä½¿ç”¨ Bootstrap é–‹å•Ÿ src/index.html åœ¨  åŠ å…¥ link tag\n ä½¿ç”¨ bootstrap 5 å¦‚ç¬¬ 9 è¡ŒåŒ¯å…¥èªæ³•  1 2 3 4 5 6 7 8 9 10 11 12 13 14  \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;AngularAuthJwt\u0026lt;/title\u0026gt; \u0026lt;base href=\u0026#34;/\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;icon\u0026#34; type=\u0026#34;image/x-icon\u0026#34; href=\u0026#34;favicon.ico\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\u0026#34; integrity=\u0026#34;sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;app-root\u0026gt;\u0026lt;/app-root\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;   æ–°å¢ Register Component è¨»å†Šå…ƒä»¶çš„ç¨‹å¼ç¢¼\n// register.component.ts import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { AbstractControl, FormBuilder, FormControl, FormGroup, Validators } from \u0026#39;@angular/forms\u0026#39;; import Validation from \u0026#39;src/app/shared/helpers/validation\u0026#39;; import { AuthService } from \u0026#39;src/app/shared/services/auth.service\u0026#39;; @Component({ selector: \u0026#39;app-register\u0026#39;, templateUrl: \u0026#39;./register.component.html\u0026#39;, styleUrls: [\u0026#39;./register.component.scss\u0026#39;] }) export class RegisterComponent implements OnInit { form: FormGroup = new FormGroup({ username: new FormControl(\u0026#39;\u0026#39;), email: new FormControl(\u0026#39;\u0026#39;), password: new FormControl(\u0026#39;\u0026#39;), confirmPassword: new FormControl(\u0026#39;\u0026#39;) }); submitted = false; isSuccessful = false;; isSignUpFailed = false; errorMessage = \u0026#39;\u0026#39;; constructor(private formBuilder: FormBuilder, private authService: AuthService) { } ngOnInit(): void { this.form = this.formBuilder.group( { username: [ \u0026#39;\u0026#39;, [ Validators.required, Validators.minLength(4), Validators.maxLength(20) ] ], email: [\u0026#39;\u0026#39;, [Validators.required, Validators.email]], password: [ \u0026#39;\u0026#39;, [ Validators.required, Validators.minLength(6), Validators.maxLength(40) ] ], confirmPassword: [\u0026#39;\u0026#39;,Validators.required], }, { validators: [Validation.match(\u0026#39;password\u0026#39;, \u0026#39;confirmPassword\u0026#39;)] } ) } get f(): { [key: string]: AbstractControl } { return this.form.controls; } onSubmit(): void { this.submitted = true; if (this.form.invalid) { return; } const { username, email, password } = this.form.getRawValue(); this.authService.register(username!, email!, password!).subscribe({ next: (data) =\u0026gt; { console.log(data); this.isSuccessful = true; this.isSignUpFailed = false; }, error: (err) =\u0026gt; { this.isSuccessful = false; this.isSignUpFailed = true; } }); } onReset(): void { this.submitted = false; this.isSignUpFailed = false; this.form.reset(); } } åœ¨ Register Component ä¸­æˆ‘å€‘ä½¿ç”¨äº†ä¸€å€‹ Custom Validatorï¼Œå®ƒç”¨ä¾†æ¯”å°äºŒæ¬¡è¼¸å…¥çš„å¯†ç¢¼æ˜¯å¦ä¸€è‡´ï¼Œç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š\n// validation.ts import { AbstractControl, ValidatorFn } from \u0026#34;@angular/forms\u0026#34;; export default class Validation { static match(controlName: string, checkControlName: string): ValidatorFn { return (controls: AbstractControl) =\u0026gt; { const control = controls.get(controlName); const checkControl = controls.get(checkControlName); if (checkControl?.errors \u0026amp;\u0026amp; !checkControl.errors[\u0026#39;matching\u0026#39;]) { return null; } if (control?.value !== checkControl?.value) { controls.get(checkControlName)?.setErrors({ matching: true }); return { match: true }; } else { return null; } } } } è¨»å†Šå…ƒä»¶çš„ HTML\n\u0026lt;!-- register.component.html --\u0026gt; \u0026lt;div class=\u0026#34;container-fluid register-form\u0026#34;\u0026gt; \u0026lt;form needs-validation [formGroup]=\u0026#34;form\u0026#34; (ngSubmit)=\u0026#34;onSubmit()\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;note\u0026#34;\u0026gt; \u0026lt;h1\u0026gt; ä½¿ç”¨è€…è³‡æ–™è¨»å†Š \u0026lt;/h1\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;username\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Username\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; autofocus formControlName=\u0026#34;username\u0026#34; id=\u0026#34;username\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;username\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;username\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;username\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;username\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Username ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;username\u0026#39;].errors[\u0026#39;minlength\u0026#39;]\u0026#34;\u0026gt; Username å¿…é ˆè‡³å°‘ç‚ºå…­å€‹å­—å…ƒ \u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;username\u0026#39;].errors[\u0026#39;maxlength\u0026#39;]\u0026#34;\u0026gt; Username å¿…é ˆè‡³å¤šç‚ºäºŒåå€‹å­—å…ƒ \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;email\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Email\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; formControlName=\u0026#34;email\u0026#34; id=\u0026#34;email\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;email\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;email\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;email\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;email\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Email ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;email\u0026#39;].errors[\u0026#39;email\u0026#39;]\u0026#34;\u0026gt;Email æ ¼å¼ä¸ç¬¦\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;password\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Password\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;password\u0026#34; formControlName=\u0026#34;password\u0026#34; id=\u0026#34;password\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;password\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;password\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;password\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;password\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Password ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;password\u0026#39;].errors[\u0026#39;minlength\u0026#39;]\u0026#34;\u0026gt; Password å¿…é ˆè‡³å°‘ç‚ºå…­å€‹å­—å…ƒ \u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;password\u0026#39;].errors[\u0026#39;maxlength\u0026#39;]\u0026#34;\u0026gt; Password å¿…é ˆè‡³å¤šç‚ºå››åå€‹å­—å…ƒ \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;confirmPassword\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Confirm Password\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;password\u0026#34; formControlName=\u0026#34;confirmPassword\u0026#34; id=\u0026#34;confirmPassword\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;confirmPassword\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;confirmPassword\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;confirmPassword\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;confirmPassword\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Confirm Password ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;confirmPassword\u0026#39;].errors[\u0026#39;matching\u0026#39;]\u0026#34;\u0026gt; Confirm Password ä¸ç¬¦ \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34; class=\u0026#34;btn btn-primary\u0026#34;\u0026gt;é€å‡º\u0026lt;/button\u0026gt; \u0026lt;button type=\u0026#34;button\u0026#34; (click)=\u0026#34;onReset()\u0026#34; class=\u0026#34;btn btn-warning float-end\u0026#34;\u0026gt; é‡ç½® \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;alert alert-warning\u0026#34; *ngIf=\u0026#34;isSignUpFailed\u0026#34;\u0026gt; è¨»å†Šå¤±æ•—!\u0026lt;br /\u0026gt;{{ errorMessage }} \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;alert alert-success\u0026#34; *ngIf=\u0026#34;isSuccessful\u0026#34;\u0026gt; è¨»å†ŠæˆåŠŸï¼ \u0026lt;/div\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;/div\u0026gt; è¨»å†Šå…ƒä»¶çš„ CSS\n/* register.component.scss */ .register-form { max-width: 350px; margin: auto; } æ–°å¢ Login Component ç™»å…¥å…ƒä»¶çš„ç¨‹å¼ç¢¼\n// login.component.ts import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { AbstractControl, FormBuilder, FormControl, FormGroup, Validators } from \u0026#39;@angular/forms\u0026#39;; import { AuthService } from \u0026#39;src/app/shared/services/auth.service\u0026#39;; import { TokenStorageService } from \u0026#39;src/app/shared/services/token-storage.service\u0026#39;; @Component({ selector: \u0026#39;app-login\u0026#39;, templateUrl: \u0026#39;./login.component.html\u0026#39;, styleUrls: [\u0026#39;./login.component.scss\u0026#39;] }) export class LoginComponent implements OnInit { form: FormGroup = new FormGroup({ username: new FormControl(\u0026#39;\u0026#39;), password: new FormControl(\u0026#39;\u0026#39;) }); isLoggedIn = false; isLoginFailed = false; submitted = false; errorMessage = \u0026#39;\u0026#39;; roles: string[] = []; constructor(private formBuilder: FormBuilder, private authService: AuthService, private tokenStorage: TokenStorageService) { } ngOnInit(): void { if (this.tokenStorage.getToken()) { this.isLoggedIn = true; this.roles = this.tokenStorage.getUser().roles; } this.form = this.formBuilder.group( { username: [\u0026#39;\u0026#39;,[Validators.required]], password: [\u0026#39;\u0026#39;,[Validators.required]] } ) } get f(): { [key: string]: AbstractControl } { return this.form.controls; } onSubmit(): void { this.submitted = true; if (this.form.invalid) { return; } const { username, password } = this.form.getRawValue(); this.authService.login(username, password).subscribe({ next: data =\u0026gt; { this.tokenStorage.saveToken(data.accessToken); this.tokenStorage.saveUser(data); this.isLoggedIn = true; this.roles = this.tokenStorage.getUser().roles; this.roloadPage(); }, error: err =\u0026gt; { this.errorMessage = err.error.message; this.isLoginFailed = true; } }) } roloadPage(): void { this.submitted = false; location.reload(); } onReset(): void { this.submitted = false; this.isLoginFailed = false; this.form.reset(); } } ç™»å…¥å…ƒä»¶çš„ HTML\n\u0026lt;!-- login.component.html --\u0026gt; \u0026lt;div class=\u0026#34;container-fluid register-form\u0026#34;\u0026gt; \u0026lt;form *ngIf=\u0026#34;!isLoggedIn\u0026#34; needs-validation [formGroup]=\u0026#34;form\u0026#34; (ngSubmit)=\u0026#34;onSubmit()\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;note\u0026#34;\u0026gt; \u0026lt;h1\u0026gt; ä½¿ç”¨è€…ç™»å…¥ \u0026lt;/h1\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;username\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Username\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; autofocus formControlName=\u0026#34;username\u0026#34; id=\u0026#34;username\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;username\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;username\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;username\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;username\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Username ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;password\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Password\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;password\u0026#34; formControlName=\u0026#34;password\u0026#34; id=\u0026#34;password\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;password\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;password\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;password\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;password\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Password ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34; class=\u0026#34;btn btn-primary\u0026#34;\u0026gt;é€å‡º\u0026lt;/button\u0026gt; \u0026lt;button type=\u0026#34;button\u0026#34; (click)=\u0026#34;onReset()\u0026#34; class=\u0026#34;btn btn-warning float-end\u0026#34;\u0026gt; é‡ç½® \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;alert alert-warning\u0026#34; *ngIf=\u0026#34;isLoginFailed\u0026#34;\u0026gt; Signin failed!\u0026lt;br /\u0026gt;{{ errorMessage }} \u0026lt;/div\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;div class=\u0026#34;alert alert-success\u0026#34; *ngIf=\u0026#34;isLoggedIn\u0026#34;\u0026gt; ç™»å…¥è€…å…·å‚™çš„è§’è‰² {{ roles }}. \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ç™»å…¥å…ƒä»¶çš„ CSS\n/* login.component.scss */ .login-form { max-width: 350px; margin: auto; } æ–°å¢ Profile Component å€‹äººæª”æ¡ˆçš„ç¨‹å¼ç¢¼\n// profile.component.ts import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { TokenStorageService } from \u0026#39;src/app/shared/services/token-storage.service\u0026#39;; @Component({ selector: \u0026#39;app-profile\u0026#39;, templateUrl: \u0026#39;./profile.component.html\u0026#39;, styleUrls: [\u0026#39;./profile.component.scss\u0026#39;] }) export class ProfileComponent implements OnInit { currentUser: any; constructor(private token: TokenStorageService) { } ngOnInit(): void { this.currentUser = this.token.getUser(); } } å€‹äººæª”æ¡ˆçš„ HTML\n\u0026lt;!-- profile.component.html --\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34; *ngIf=\u0026#34;currentUser; else loggedOut\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;jumbotron\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;\u0026lt;strong\u0026gt;{{ currentUser.username }}\u0026lt;/strong\u0026gt; å€‹äººè¨Šæ¯\u0026lt;/h3\u0026gt; \u0026lt;/header\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Token:\u0026lt;/strong\u0026gt; {{ currentUser.accessToken.substring(0, 20)}} ... {{ currentUser.accessToken.substr( currentUser.accessToken.length - 20)}} \u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;é›»å­ä¿¡ç®±:\u0026lt;/strong\u0026gt; {{ currentUser.email }} \u0026lt;/p\u0026gt; \u0026lt;strong\u0026gt;åƒèˆ‡çš„è§’è‰²:\u0026lt;/strong\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li *ngFor=\u0026#34;let role of currentUser.roles\u0026#34;\u0026gt; {{ role }} \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;ng-template #loggedOut\u0026gt; è«‹å…ˆç™»å…¥ \u0026lt;/ng-template\u0026gt; è·¯ç”±è¨­ç½® é€éè·¯ç”±çš„è¨­ç½®ï¼Œç¨‹å¼æ‰æœƒçŸ¥é“ç•¶ä½¿ç”¨è€…åœ¨ç€è¦§å™¨ç‰¹å®šçš„ URI æ™‚ï¼Œç¨‹å¼æ‡‰è©²å»åŸ·é‚£æ”¯ç›¸å°æ‡‰çš„ç¨‹å¼ã€‚è·¯ç”±æ¨¡çµ„æª”æ¡ˆï¼ˆapp-routin.module.tsï¼‰å…§å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { RouterModule, Routes } from \u0026#39;@angular/router\u0026#39;; import { AddTodoComponent } from \u0026#39;./pages/add-todo/add-todo.component\u0026#39;; import { HomeComponent } from \u0026#39;./pages/home/home.component\u0026#39;; import { LoginComponent } from \u0026#39;./pages/login/login.component\u0026#39;; import { ProfileComponent } from \u0026#39;./pages/profile/profile.component\u0026#39;; import { RegisterComponent } from \u0026#39;./pages/register/register.component\u0026#39;; import { TodoDetailComponent } from \u0026#39;./pages/todo-detail/todo-detail.component\u0026#39;; import { TodoListComponent } from \u0026#39;./pages/todo-list/todo-list.component\u0026#39;; const routes: Routes = [  { path: \u0026#39;home\u0026#39;, component: HomeComponent }, { path: \u0026#39;login\u0026#39;, component: LoginComponent }, { path: \u0026#39;register\u0026#39;, component: RegisterComponent }, { path: \u0026#39;profile\u0026#39;, component: ProfileComponent }, { path: \u0026#39;add-todo\u0026#39;, component: AddTodoComponent }, { path: \u0026#39;todo-detail\u0026#39;, component: TodoDetailComponent }, { path: \u0026#39;todo-list\u0026#39;, component: TodoListComponent }, { path: \u0026#39;\u0026#39;, redirectTo: \u0026#39;home\u0026#39;, pathMatch: \u0026#39;full\u0026#39; } ]; @NgModule({ imports: [RouterModule.forRoot(routes)], exports: [RouterModule] }) export class AppRoutingModule { }   App Module çš„è¨­ç½® // app.module.ts import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { BrowserModule } from \u0026#39;@angular/platform-browser\u0026#39;; import { AppRoutingModule } from \u0026#39;./app-routing.module\u0026#39;; import { AppComponent } from \u0026#39;./app.component\u0026#39;; import { LoginComponent } from \u0026#39;./pages/login/login.component\u0026#39;; import { RegisterComponent } from \u0026#39;./pages/register/register.component\u0026#39;; import { ProfileComponent } from \u0026#39;./pages/profile/profile.component\u0026#39;; import { HomeComponent } from \u0026#39;./pages/home/home.component\u0026#39;; import { AddTodoComponent } from \u0026#39;./pages/add-todo/add-todo.component\u0026#39;; import { TodoDetailComponent } from \u0026#39;./pages/todo-detail/todo-detail.component\u0026#39;; import { TodoListComponent } from \u0026#39;./pages/todo-list/todo-list.component\u0026#39;; import { authInterceptorProviders } from \u0026#39;./shared/interceptor/auth.interceptor\u0026#39;; import { HttpClientModule } from \u0026#39;@angular/common/http\u0026#39;; import { ReactiveFormsModule } from \u0026#39;@angular/forms\u0026#39;; @NgModule({ declarations: [ AppComponent, LoginComponent, RegisterComponent, ProfileComponent, HomeComponent, AddTodoComponent, TodoDetailComponent, TodoListComponent ], imports: [ BrowserModule, AppRoutingModule, ReactiveFormsModule, HttpClientModule ], providers: [authInterceptorProviders], bootstrap: [AppComponent] }) export class AppModule { } App Component ä¿®æ”¹ // app.component.ts import { Component } from \u0026#39;@angular/core\u0026#39;; import { TokenStorageService } from \u0026#39;./shared/services/token-storage.service\u0026#39;; @Component({ selector: \u0026#39;app-root\u0026#39;, templateUrl: \u0026#39;./app.component.html\u0026#39;, styleUrls: [\u0026#39;./app.component.scss\u0026#39;] }) export class AppComponent { private roles: string[] = []; //ä½¿ç”¨è€…å…·å‚™çš„è§’è‰²  isLoggedIn = false; //ç”¨ä¾†è¨˜éŒ„æ˜¯å¦å·²ç™»å…¥ç³»çµ±çš„è®Šæ•¸  showAdminFunction = false; //è¨˜éŒ„æ˜¯å¦æœ‰ï½€ç®¡ç†è€…ï½€è§’è‰²çš„è®Šæ•¸  username?: string; constructor(private tokenStorageService: TokenStorageService) { } ngOnInit(): void { // è‹¥åœ¨ session storage ä¸­æœ‰æœ‰æ•ˆçš„ token å‰‡è¡¨ç¤ºå·²æœ‰æ­£å¸¸çš„ç™»å…¥ç³»çµ±  this.isLoggedIn = !!this.tokenStorageService.getToken(); if(this.isLoggedIn) { const user = this.tokenStorageService.getUser(); this.roles = user.roles; this.showAdminFunction = this.roles.includes(\u0026#34;ADMIN\u0026#34;); this.username = user.username; } } logout(): void { this.tokenStorageService.signOut(); //æ¸…é™¤ session storage  location.reload(); } } \u0026lt;!-- app.component.html --\u0026gt; \u0026lt;div class=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;nav class=\u0026#34;navbar navbar-expand navbar-dark bg-dark\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;container-fluid\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;#\u0026#34; class=\u0026#34;navbar-brand\u0026#34;\u0026gt;Angular curd example\u0026lt;/a\u0026gt; \u0026lt;ul class=\u0026#34;navbar-nav me-auto\u0026#34; routerLinkActive=\u0026#34;active\u0026#34;\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/home\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;home\u0026#34;\u0026gt;é¦–é \u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/todo-list\u0026#34; class=\u0026#34;nav-link\u0026#34; *ngIf=\u0026#34;isLoggedIn\u0026#34; routerLink=\u0026#34;todo-list\u0026#34;\u0026gt;Todo\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34; *ngIf=\u0026#34;showAdminFunction\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/add-todo\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;add-todo\u0026#34;\u0026gt;æ–°å¢\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;ul class=\u0026#34;navbar-nav ms-auto\u0026#34; *ngIf=\u0026#34;!isLoggedIn\u0026#34;\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/register\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;register\u0026#34;\u0026gt;è¨»å†Š\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/login\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;login\u0026#34;\u0026gt;ç™»å…¥\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;ul class=\u0026#34;navbar-nav ms-auto\u0026#34; *ngIf=\u0026#34;isLoggedIn\u0026#34;\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/profile\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;profile\u0026#34;\u0026gt;{{ username }}\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href class=\u0026#34;nav-link\u0026#34; (click)=\u0026#34;logout()\u0026#34;\u0026gt;ç™»å‡º\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/nav\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;router-outlet\u0026gt;\u0026lt;/router-outlet\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; åŸ·è¡Œç¨‹å¼ çµè¡Œçµæœï¼š\n Home Page  é¦–é ç‚ºé è¨­çš„ Pageï¼ŒåŒæ™‚å®ƒä¹Ÿæ˜¯ä¸€ä¾›å…¬é–‹çš„åŠŸèƒ½ï¼Œæ²’æœ‰ä½¿ç”¨æ¬Šé™çš„é™å®šï¼Œæ‰€ä»¥å³ä½¿ä½ æœªç™»å…¥ï¼Œä¹Ÿå¯ä»¥ç€è¦½æ­¤ç¶²é ã€‚\nä¸€èˆ¬ä½¿ç”¨è€…ç™»å…¥å¾Œçš„ç•«é¢  ä»¥å·²è¨»å†Šçš„ä½¿ç”¨è€…ç™»å…¥ç³»çµ±å¾Œï¼Œå¯ä»¥ç™¼ç¾ä¸»é é¢ä¸Šçš„åŠŸèƒ½é¸é …å¤šå‡ºäº† â€œTodoâ€ èˆ‡ \u0026ldquo;tomchen\u0026rdquo; å…©é …\nå…¶ä¸­ ï½€tomchenï½€ æŒ‡çš„æ˜¯ç¾åœ¨å·²ç™»å…¥è€…çš„ username (ç™»å…¥å¸³è™Ÿ)ï¼ŒåŒæ™‚é»é€²é€™åŠŸèƒ½æœƒé¡¯ç¤ºä½¿ç”¨è€…çš„æ˜ç´°è³‡æ–™ã€‚ è€Œï½€Todoï½€é€™å€‹åŠŸèƒ½é …ç›®ä¹Ÿæ˜¯éš¨è‘—ä½¿ç”¨è€…ç™»å…¥æˆåŠŸå¾Œæ‰é¡¯ç¤ºå‡ºä¾†çš„ã€‚\nç®¡ç†è§’è‰²ä½¿ç”¨è€…ç™»å…¥å¾Œçš„ç•«é¢  ä¸‹åœ–æ˜¯ä»¥ï½€ç®¡ç†è€…ï½€è§’è‰²ç™»å…¥å¾Œæ‰€é¡¯ç¤ºçš„ç•«é¢ã€‚è€Œå› ç‚ºé€™å€‹ä½¿ç”¨è€…å…·å‚™æœ‰ç®¡ç†è€…è§’è‰²ï¼ˆadmin)ï¼Œæ‰€ä»¥åŠŸèƒ½é¸é …åŒæ™‚å‡ºç¾äº† ï½€Addï½€é€™å€‹é …ç›®ã€‚ Route Guard (è·¯ç”±ä¿è­·å™¨) ç”±ä¸Šè¿°çš„æ¸¬è©¦ï¼Œç™¼ç¾ä¸€å€‹å•é¡Œï¼Œç•¶ä½¿ç”¨ä¸€èˆ¬ User å¸³è™Ÿç™»æ™‚æ™‚ï¼Œé›–ç„¶åœ¨ç•«é¢ä¸Šæ–¹çš„åŠŸèƒ½é¸é …ä¸­æ²’æœ‰å‡ºç¾ \u0026ldquo;æ–°å¢\u0026rdquo; çš„åŠŸèƒ½é¸é …ï¼Œä½†ä½ å»å¯ä»¥ç›´æ¥åœ¨ç€è¦½å™¨çš„ç¶²å€åˆ—è¼¸å…¥ http://localhost:4200/add-todo ä¾†åŸ·è¡Œ Todo çš„åŠŸèƒ½ã€‚é€™å€‹è·¯ç”±æ‰€å°æ‡‰åˆ°çš„ç¨‹å¼æ˜¯å¯ä»¥è¢«åŸ·è¡Œçš„ã€‚\né‚„æœ‰ä¸€å€‹æ›´åš´é‡çš„æƒ…å¢ƒï¼Œåœ¨æœªç™»å…¥çš„ç‹€æ…‹ä¸‹ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥åœ¨ç€è¦½å™¨çš„ç¶²å€åˆ—è¼¸å…¥ http://localhost:4200/add-todo ä¾†åŸ·è¡Œ Todo çš„åŠŸèƒ½ã€‚\nç”±è€Œçœ‹èµ·ä¾†ï¼Œæˆ‘å€‘çš„æ¬Šé™æ§åˆ¶åªåšäº†åŠå¥—ã€‚é‚£éº¼æ‡‰è©²è¦å¦‚ä½•ä¾†è§£æ±ºé€™æ¨£çš„å•é¡Œå‘¢ï¼Ÿ\nå¸³è™Ÿèªè­‰æ””æˆªå™¨ é¦–å…ˆä»‹ç´¹çš„ã€€è·¯ç”±ä¿è­·å™¨(æ””æˆªå™¨)ã€€æ˜¯ä¸€ç¨® local ç«¯ä¿è­·æ©Ÿåˆ¶ã€‚é€é Route Guard çš„è¨­ç½®å¯ä»¥åœ¨ä½¿ç”¨è€…ç«¯å°±èƒ½æ•ˆç®¡ç†å„å€‹ route çš„åŸ·è¡Œæ¬Šé™çš„æ§ç®¡ã€‚\nauthGuard é€™å€‹è·¯ç”±ä¿è­·å™¨çš„åŠŸèƒ½å°±æ˜¯ä¾†æ””æˆªæ²’æœ‰æ­£å¸¸ç™»å…¥ç³»çµ±çš„ä½¿ç”¨è€…ä¸å¾—åŸ·è¡Œç‰¹å®šçš„è·¯ç”±ã€‚åœ¨ç¨‹å¼ä¸­é€é tokenService.getToken() åŠŸèƒ½ä¾†è®€å– tokenï¼Œè‹¥ session storeage ä¸­æ²’æœ‰åˆæ³• tokenï¼Œè¡¨ç¤ºç›®å‰é‚„æ²’æœ‰æ­£ç¢ºçš„ç™»å…¥ç³»çµ±ï¼Œä¸¦å°‡ç¨‹å¼æŒ‡å‘ç™»å…¥åŠŸèƒ½ã€‚\n// auth.guard.ts import { Injectable } from \u0026#39;@angular/core\u0026#39;; import { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from \u0026#39;@angular/router\u0026#39;; import { Observable } from \u0026#39;rxjs\u0026#39;; import { TokenStorageService } from \u0026#39;../services/token-storage.service\u0026#39;; @Injectable({ providedIn: \u0026#39;root\u0026#39; }) export class AuthGuard implements CanActivate { constructor(private router: Router, private tokenService: TokenStorageService) {} canActivate( route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable\u0026lt;boolean | UrlTree\u0026gt; | Promise\u0026lt;boolean | UrlTree\u0026gt; | boolean | UrlTree { if (this.tokenService.getToken()) return true; this.router.navigate([\u0026#39;/login\u0026#39;]); return true; } } app-routing.module.ts ä¸­çš„è·¯ç”±è¨­å®šï¼Œå°‡ AuthGurad åŠ å…¥åˆ°è¦ä¿è­·çš„ è·¯ç”±è¨­å®šã€€ä¸­ã€‚ å¦‚ä¸‹ç¨‹å¼ç¬¬18è¡Œ{ path: 'add-todo', canActivate:[AuthGuard], component: AddTodoComponent },ï¼Œå…¶ä¸­çš„ã€€canActivate:[AuthGuard] å°±æ˜¯å¹«é€™å€‹è·¯ç”±è¨­å®šåŠ å…¥äº† â€˜AuthGuardâ€™ é€™å€‹æ””æˆªå™¨ä¾†èµ·åˆ°ä¿è­·é€™å€‹è·¯ç”±çš„ä½œç”¨ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  // app-routing.module.ts import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { RouterModule, Routes } from \u0026#39;@angular/router\u0026#39;; import { AddTodoComponent } from \u0026#39;./pages/add-todo/add-todo.component\u0026#39;; import { HomeComponent } from \u0026#39;./pages/home/home.component\u0026#39;; import { LoginComponent } from \u0026#39;./pages/login/login.component\u0026#39;; import { ProfileComponent } from \u0026#39;./pages/profile/profile.component\u0026#39;; import { RegisterComponent } from \u0026#39;./pages/register/register.component\u0026#39;; import { TodoDetailComponent } from \u0026#39;./pages/todo-detail/todo-detail.component\u0026#39;; import { TodoListComponent } from \u0026#39;./pages/todo-list/todo-list.component\u0026#39;; import { AuthGuard } from \u0026#39;./shared/guard/auth.guard\u0026#39;;  const routes: Routes = [ { path: \u0026#39;home\u0026#39;, component: HomeComponent }, { path: \u0026#39;login\u0026#39;, component: LoginComponent }, { path: \u0026#39;register\u0026#39;, component: RegisterComponent }, { path: \u0026#39;profile\u0026#39;, component: ProfileComponent }, { path: \u0026#39;add-todo\u0026#39;, canActivate:[AuthGuard], component: AddTodoComponent },  { path: \u0026#39;todo-detail\u0026#39;, canActivate:[AuthGuard], component: TodoDetailComponent }, { path: \u0026#39;todo-list\u0026#39;, canActivate:[AuthGuard], component: TodoListComponent }, { path: \u0026#39;\u0026#39;, redirectTo: \u0026#39;home\u0026#39;, pathMatch: \u0026#39;full\u0026#39; } ]; @NgModule({ imports: [RouterModule.forRoot(routes)], exports: [RouterModule] }) export class AppRoutingModule { }   å®Œæˆä¸Šè¿°çš„ç¨‹å¼å¾Œï¼Œæˆ‘å€‘å†ä¾†æ¸¬è©¦ä¸€ä¸‹â€œæœªç™»å…¥è€Œç›´æ¥åœ¨ç€è¦½å™¨çš„ç¶²å€åˆ—è¼¸å…¥ http://localhost:4200/add-todo é€™å€‹æƒ…å¢ƒã€‚ä½ æœƒç™¼ç¾è¼¸å…¥ http://localhost:4200/add-todoå†æŒ‰ä¸‹ enter éµå¾Œï¼Œç³»çµ±æœƒæª¢æ ¸å‡ºå°šæœªç™»å…¥è€Œè‡ªå‹•è½‰å€åˆ°ä½¿ç”¨è€…ç™»å…¥åŠŸèƒ½ä¸­ã€‚\nè§’è‰²æˆæ¬Šæ””æˆªå™¨ æ¥ä¸‹ä¾†è¦ä»‹ç´¹roleGuard é€™å€‹è·¯ç”±ä¿è­·å™¨çš„åŠŸèƒ½å°±æ˜¯ä¾†æ””æˆªç¾è¡Œçš„ä½¿ç”¨è€…æ˜¯å¦å…·å‚™æœ‰ç‰¹å®šçš„è§’è‰²ï¼Œè‹¥æ²’æœ‰æŒ‡å®šçš„è§’è‰²ä¸å¾—åŸ·è¡Œç‰¹å®šçš„è·¯ç”±ã€‚ä¸¦é¡¯ç¤ºç›®å‰ä½¿æœ‰è€…æ‰€å…·å‚™çš„è§’è‰²æœ‰é‚£äº›ã€‚\n// role.guard.ts import { Injectable } from \u0026#39;@angular/core\u0026#39;; import { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from \u0026#39;@angular/router\u0026#39;; import { Observable } from \u0026#39;rxjs\u0026#39;; import { TokenStorageService } from \u0026#39;../services/token-storage.service\u0026#39;; @Injectable({ providedIn: \u0026#39;root\u0026#39; }) export class RoleGuard implements CanActivate { constructor(private router: Router, private tokenService: TokenStorageService) {}; canActivate( route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable\u0026lt;boolean | UrlTree\u0026gt; | Promise\u0026lt;boolean | UrlTree\u0026gt; | boolean | UrlTree { const roles = this.tokenService.getUser().roles; const rolesPara = route.data[\u0026#34;roles\u0026#34;] as Array\u0026lt;string\u0026gt;; let searchRole = \u0026#39;ADMIN\u0026#39;; if (rolesPara) { searchRole = rolesPara[0].toUpperCase(); } if (roles) { const rolesArray = roles as Array\u0026lt;string\u0026gt; if (rolesArray.indexOf(searchRole) != -1) return true; }; this.router.navigate([\u0026#39;/login\u0026#39;]); return true; } } å°‡ RoleGurad åŠ å…¥åˆ°è¦ä¿è­·çš„ è·¯ç”±è¨­å®šã€€ä¸­ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  // app-routing.module.ts import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { RouterModule, Routes } from \u0026#39;@angular/router\u0026#39;; import { AddTodoComponent } from \u0026#39;./pages/add-todo/add-todo.component\u0026#39;; import { HomeComponent } from \u0026#39;./pages/home/home.component\u0026#39;; import { LoginComponent } from \u0026#39;./pages/login/login.component\u0026#39;; import { ProfileComponent } from \u0026#39;./pages/profile/profile.component\u0026#39;; import { RegisterComponent } from \u0026#39;./pages/register/register.component\u0026#39;; import { TodoDetailComponent } from \u0026#39;./pages/todo-detail/todo-detail.component\u0026#39;; import { TodoListComponent } from \u0026#39;./pages/todo-list/todo-list.component\u0026#39;; import { AuthGuard } from \u0026#39;./shared/guard/auth.guard\u0026#39;; import { RoleGuard } from \u0026#39;./shared/guard/role.guard\u0026#39;;  const routes: Routes = [ { path: \u0026#39;home\u0026#39;, component: HomeComponent }, { path: \u0026#39;login\u0026#39;, component: LoginComponent }, { path: \u0026#39;register\u0026#39;, component: RegisterComponent }, { path: \u0026#39;profile\u0026#39;, component: ProfileComponent }, { path: \u0026#39;add-todo\u0026#39;, canActivate:[AuthGuard, RoleGuard], component: AddTodoComponent },  { path: \u0026#39;todo-detail\u0026#39;, canActivate:[AuthGuard], component: TodoDetailComponent }, { path: \u0026#39;todo-list\u0026#39;, canActivate:[AuthGuard], component: TodoListComponent }, { path: \u0026#39;\u0026#39;, redirectTo: \u0026#39;home\u0026#39;, pathMatch: \u0026#39;full\u0026#39; } ]; @NgModule({ imports: [RouterModule.forRoot(routes)], exports: [RouterModule] }) export class AppRoutingModule { }   å®Œæˆä¸Šè¿°åŠŸèƒ½å¾Œï¼Œå°±åªæœ‰å…·å‚™æœ‰â€œADMINâ€è§’è‰²è€…æ‰èƒ½åŸ·è¡Œâ€œadd-todoâ€åŠŸèƒ½äº†ã€‚\nå®Œæˆ Todo ç›¸é—œ Component çš„åŠŸèƒ½ ç¨‹å¼è‡³æ­¢ç®—æ˜¯å®Œæˆäº†â€œåŸºç¤â€œçš„éƒ¨ä»½ï¼Œæ¥ä¸‹ä¾†è¦å›æ­¸æœ¬ç¯‡ç­†è¨˜çš„ä¸»é¡Œ - Todo list çš„è³‡æ–™ç¶­è­·ã€‚åŒ…å«æœ‰â€œæ–°å¢ Todo Item\u0026rdquo;ã€â€œé¡¯ç¤º Todo Item æ¸…å–®â€ã€\u0026ldquo;Todo æ˜ç´°\u0026quot;ç­‰ Componentã€‚\næ–°å¢ Todo Item çš„ Component æ–°å¢ Todo Item æ™‚é€éã€€TodoService.create() functionä¾†å®Œæˆã€‚\n// add-todo.component.ts import { Component, OnInit, ValueProvider } from \u0026#39;@angular/core\u0026#39;; import { AbstractControl, FormBuilder, FormControl, FormGroup, Validators } from \u0026#39;@angular/forms\u0026#39;; import { Router } from \u0026#39;@angular/router\u0026#39;; import { Todo } from \u0026#39;src/app/shared/models/todo.model\u0026#39;; import { TodoService } from \u0026#39;src/app/shared/services/todo.service\u0026#39;; @Component({ selector: \u0026#39;app-add-todo\u0026#39;, templateUrl: \u0026#39;./add-todo.component.html\u0026#39;, styleUrls: [\u0026#39;./add-todo.component.scss\u0026#39;] }) export class AddTodoComponent implements OnInit { form: FormGroup = new FormGroup({ title: new FormControl(\u0026#39;\u0026#39;), description: new FormControl(\u0026#39;\u0026#39;) }); submitted = false; // é€å‡ºå¦  isAddFailed = false; // æ–°å¢æœ‰èª¤å¦  isAdded = false; // æ–°å¢æˆåŠŸå¦  errorMessage = \u0026#34;\u0026#34;; constructor(private formBuilder: FormBuilder, private router: Router, private todoService: TodoService) { } ngOnInit(): void { this.form = this.formBuilder.group( { title: [\u0026#39;\u0026#39;,[Validators.required]], description: [\u0026#39;\u0026#39;,[Validators.required]] } )} onSubmit(): void { this.submitted = true; if (this.form.invalid) { return; } const data = this.form.getRawValue(); this.todoService.create(data) .subscribe({ next: (res) =\u0026gt; { this.isAdded = true; this.router.navigate([\u0026#39;/todolist\u0026#39;]); }, error: (e) =\u0026gt; { this.errorMessage = e.message this.isAddFailed = true; } }); } get f(): { [key: string]: AbstractControl } { return this.form.controls; } onReset(): void { this.submitted = false; this.isAddFailed = false; this.form.reset(); } } \u0026lt;!-- add-todo.component.html --\u0026gt; \u0026lt;div class=\u0026#34;container-fluid submit-form\u0026#34;\u0026gt; \u0026lt;form *ngIf=\u0026#34;!isAdded\u0026#34; needs-validation [formGroup]=\u0026#34;form\u0026#34; (ngSubmit)=\u0026#34;onSubmit()\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;note\u0026#34;\u0026gt; \u0026lt;h2\u0026gt; æ–°å¢ Todo \u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;title\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Title\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; autofocus formControlName=\u0026#34;title\u0026#34; id=\u0026#34;title\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;title\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;title\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;title\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;title\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Title ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;description\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Description\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;description\u0026#34; formControlName=\u0026#34;description\u0026#34; id=\u0026#34;description\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;description\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;description\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;description\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;description\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Description ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34; class=\u0026#34;btn btn-primary\u0026#34;\u0026gt;é€å‡º\u0026lt;/button\u0026gt; \u0026lt;button type=\u0026#34;button\u0026#34; (click)=\u0026#34;onReset()\u0026#34; class=\u0026#34;btn btn-warning float-end\u0026#34;\u0026gt; é‡ç½® \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;alert alert-warning\u0026#34; *ngIf=\u0026#34;isAddFailed\u0026#34;\u0026gt; æ–°å¢æœ‰èª¤!\u0026lt;br /\u0026gt;{{ errorMessage }} \u0026lt;/div\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;div class=\u0026#34;alert alert-success\u0026#34; *ngIf=\u0026#34;isAdded\u0026#34;\u0026gt; æ–°å¢æˆåŠŸ! \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; /* add-todo.scss */ .submit-form { max-width: 400px; margin: auto; } Todo Item æ¸…å–® çš„ Component // todo-list.component.ts import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { VirtualTimeScheduler } from \u0026#39;rxjs\u0026#39;; import { Todo } from \u0026#39;src/app/shared/models/todo.model\u0026#39;; import { TodoService } from \u0026#39;src/app/shared/services/todo.service\u0026#39;; @Component({ selector: \u0026#39;app-todo-list\u0026#39;, templateUrl: \u0026#39;./todo-list.component.html\u0026#39;, styleUrls: [\u0026#39;./todo-list.component.scss\u0026#39;] }) export class TodoListComponent implements OnInit { todos?: Todo[]; currentTodo: Todo = {}; currentIndex = -1; title=\u0026#39;\u0026#39;; constructor(private todoService: TodoService) { } ngOnInit(): void { this.retrieveTodos(); } // å–å¾—æ‰€æœ‰çš„ Todo Lists  retrieveTodos(): void { this.todoService.getAll() .subscribe({ next: (data) =\u0026gt; { this.todos = data; }, error: (e) =\u0026gt; console.log(e) }); } // é‡æ–°å–å¾—æ‰€æœ‰çš„ Todo Lists  refreshList(): void { this.retrieveTodos(); this.currentTodo = {}; this.currentIndex = -1 } // è¨­å®šç¾è¡Œ Todo  setActiveTodo(todo: Todo, index: number): void { this.currentTodo = todo; this.currentIndex = index; } // ç§»é™¤æ‰€æœ‰ Todo Lists  removeAllTodos(): void { this.todoService.deleteAll() .subscribe({ next: (res) =\u0026gt; { this.refreshList(); }, error: (e) =\u0026gt; console.log(e) }); } // ä»¥é—œéµå­—æŸ¥è©¢æ¨™é¡Œæ¬„ä»¥å–å¾— Todo Lists  searchTitle(): void { this.currentTodo = {}; this.currentIndex = -1; this.todoService.findByTitle(this.title) .subscribe({ next: (data) =\u0026gt; { this.todos = data; console.log(data); }, error: (e) =\u0026gt; console.log(e) }); } } \u0026lt;!-- todo-list.component.html --\u0026gt; \u0026lt;div class=\u0026#34;list row\u0026#34;\u0026gt; \u0026lt;h2\u0026gt;Todo è³‡æ–™ç¶­è­·\u0026lt;/h2\u0026gt; \u0026lt;!-- ä»¥é—œéµå­—æŸ¥è©¢æ¨™é¡Œæ¬„ä»¥å–å¾— Todo Lists --\u0026gt; \u0026lt;div class=\u0026#34;col-md-8\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;input-group mb-3\u0026#34;\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; class=\u0026#34;form-control\u0026#34; placeholder=\u0026#34;Search by title\u0026#34; [(ngModel)]=\u0026#34;title\u0026#34; /\u0026gt; \u0026lt;div class=\u0026#34;input-group-append\u0026#34;\u0026gt; \u0026lt;button class=\u0026#34;btn btn-outline-secondary\u0026#34; type=\u0026#34;button\u0026#34; (click)=\u0026#34;searchTitle()\u0026#34;\u0026gt; æœå°‹ \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- é¡¯ç¤ºç¬¦åˆçš„ Todo æ¸…å–® --\u0026gt; \u0026lt;div class=\u0026#34;col-md-6\u0026#34;\u0026gt; \u0026lt;h4\u0026gt;Todo æ¸…å–®\u0026lt;/h4\u0026gt; \u0026lt;ul class=\u0026#34;list-group\u0026#34;\u0026gt; \u0026lt;li class=\u0026#34;list-group-item\u0026#34; *ngFor=\u0026#34;let todo of todos; let i = index\u0026#34; [class.active]=\u0026#34;i == currentIndex\u0026#34; (click)=\u0026#34;setActiveTodo(todo, i)\u0026#34;\u0026gt; {{ todo.title }} \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;!-- åˆªé™¤æ‰€æœ‰ Todo --\u0026gt; \u0026lt;button class=\u0026#34;m-3 btn btn-sm btn-danger\u0026#34; (click)=\u0026#34;removeAllTodos()\u0026#34;\u0026gt; åˆªé™¤æ‰€æœ‰ \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- å°‡\u0026#34;Todo æ˜ç´°\u0026#34;å­å…ƒä»¶ç¯å…¥åˆ° Todo List å…ƒä»¶ä¸­ --\u0026gt; \u0026lt;div class=\u0026#34;col-md-6\u0026#34;\u0026gt; \u0026lt;app-todo-detail [viewMode]=\u0026#34;false\u0026#34; [currentTodo]=\u0026#34;currentTodo\u0026#34; (refreshProcess)=\u0026#34;refreshList()\u0026#34;\u0026gt;\u0026lt;/app-todo-detail\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; /* todo-list.component.scss */ .list { text-align: left; max-width: 750px; margin: auto; } Todo Item æ˜ç´° çš„ Component // todo-detail.component.ts import { Component, EventEmitter, Input, OnInit, Output } from \u0026#39;@angular/core\u0026#39;; import { ActivatedRoute, Router } from \u0026#39;@angular/router\u0026#39;; import { Todo } from \u0026#39;src/app/shared/models/todo.model\u0026#39;; import { TodoService } from \u0026#39;src/app/shared/services/todo.service\u0026#39;; @Component({ selector: \u0026#39;app-todo-detail\u0026#39;, templateUrl: \u0026#39;./todo-detail.component.html\u0026#39;, styleUrls: [\u0026#39;./todo-detail.component.scss\u0026#39;] }) export class TodoDetailComponent implements OnInit { @Input() viewMode = false; @Input() currentTodo: Todo = { title: \u0026#39;\u0026#39;, description: \u0026#39;\u0026#39;, status: false, } @Output() refreshProcess = new EventEmitter() message = \u0026#39;\u0026#39;; showBackto = 0; constructor(private todoService: TodoService, private route: ActivatedRoute, private router: Router) { } ngOnInit(): void { if (!this.viewMode) { this.message = \u0026#39;\u0026#39;; this.getTodo(this.route.snapshot.params[\u0026#34;id\u0026#34;]); } this.route.queryParams.subscribe(params =\u0026gt; { this.showBackto = params[\u0026#39;showbackto\u0026#39;]; }); } // å–å¾— Todo æ˜ç´°å…§å®¹  getTodo(id: string): void { this.todoService.get(id) .subscribe({ next: (data) =\u0026gt; { this.currentTodo = data; // console.log(data);  }, error: (e) =\u0026gt; console.log(e) }); } // æ›´æ–° Todo ç‹€æ…‹  updateStatus(status: boolean): void { const data = { title: this.currentTodo.title, description: this.currentTodo.description, status: status, }; this.message = \u0026#39;\u0026#39;; this.todoService.update(this.currentTodo.id, data) .subscribe({ next: (res) =\u0026gt; { console.log(res); this.currentTodo.status = status; this.message = res.message ? res.message : \u0026#39;ç‹€æ…‹æ›´æ–°æˆåŠŸï¼\u0026#39;; }, error: (e) =\u0026gt; console.log(e) }); } // ä¿®æ”¹ Todo æ˜ç´°  updateTodo(): void { this.message = \u0026#39;\u0026#39;; this.todoService.update(this.currentTodo.id, this.currentTodo) .subscribe({ next: (res) =\u0026gt; { console.log(res); this.message = res.message ? res.message : \u0026#39;todo æ›´æ–°æˆåŠŸï¼\u0026#39;; }, error: (e) =\u0026gt; console.log(e) }); } // åˆªé™¤ Todo æ˜ç´°  deleteTodo(): void { this.todoService.delete(this.currentTodo.id) .subscribe({ next: (res) =\u0026gt; { console.log(res); this.router.navigate([\u0026#39;/todolist\u0026#39;]); this.refreshProcess.emit(); }, error: (e) =\u0026gt; console.log(e) }); } backtoTodo(): void { this.router.navigate([\u0026#39;/todolist\u0026#39;]); } } \u0026lt;!-- doto-detail.component.html --\u0026gt; \u0026lt;div *ngIf=\u0026#34;viewMode; else editable\u0026#34;\u0026gt; \u0026lt;!-- é¡¯ç¤º Todo æ˜ç´°å…§å®¹ --\u0026gt; \u0026lt;div *ngIf=\u0026#34;currentTodo.id\u0026#34;\u0026gt; \u0026lt;h4\u0026gt;Todo\u0026lt;/h4\u0026gt; \u0026lt;div\u0026gt; \u0026lt;label\u0026gt;\u0026lt;strong\u0026gt;Title:\u0026lt;/strong\u0026gt;\u0026lt;/label\u0026gt; {{ currentTodo.title }} \u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;label\u0026gt;\u0026lt;strong\u0026gt;Description:\u0026lt;/strong\u0026gt;\u0026lt;/label\u0026gt; {{ currentTodo.description }} \u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;label\u0026gt;\u0026lt;strong\u0026gt;Status:\u0026lt;/strong\u0026gt;\u0026lt;/label\u0026gt; {{ currentTodo.status ? \u0026#34;Done\u0026#34; : \u0026#34;Pending\u0026#34; }} \u0026lt;/div\u0026gt; \u0026lt;!-- åˆ‡æ›è‡³ç·¨è¼¯ç•«é¢ --\u0026gt; \u0026lt;a [routerLink]=\u0026#34;[\u0026#39;/tododetail/\u0026#39; + currentTodo.id]\u0026#34; [queryParams]=\u0026#34;{showbackto: 1}\u0026#34;\u0026gt; Edit \u0026lt;/a\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;!currentTodo\u0026#34;\u0026gt; \u0026lt;br /\u0026gt; \u0026lt;p\u0026gt;è«‹é»é¸ Todo...\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- Todo æ˜ç´°ç·¨è¼¯ç•«é¢ --\u0026gt; \u0026lt;ng-template #editable\u0026gt; \u0026lt;div *ngIf=\u0026#34;currentTodo.id\u0026#34; class=\u0026#34;edit-form\u0026#34;\u0026gt; \u0026lt;h4\u0026gt;Todo\u0026lt;/h4\u0026gt; \u0026lt;form\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;title\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Title\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; class=\u0026#34;form-control\u0026#34; id=\u0026#34;title\u0026#34; [(ngModel)]=\u0026#34;currentTodo.title\u0026#34; name=\u0026#34;title\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;description\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Description\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; class=\u0026#34;form-control\u0026#34; id=\u0026#34;description\u0026#34; [(ngModel)]=\u0026#34;currentTodo.description\u0026#34; name=\u0026#34;description\u0026#34; /\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label\u0026gt;\u0026lt;strong\u0026gt;Status:\u0026lt;/strong\u0026gt;\u0026lt;/label\u0026gt; {{ currentTodo.status ? \u0026#34;Done\u0026#34; : \u0026#34;Pending\u0026#34; }} \u0026lt;/div\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;!-- å°‡ç‹€æ…‹æ›´æ–°æˆ Pending --\u0026gt; \u0026lt;button class=\u0026#34;btn btn-primary\u0026#34; *ngIf=\u0026#34;currentTodo.status\u0026#34; (click)=\u0026#34;updateStatus(false)\u0026#34;\u0026gt; Pending \u0026lt;/button\u0026gt; \u0026lt;!-- å°‡ç‹€æ…‹æ›´æ–°æˆ `å®Œæˆ` --\u0026gt; \u0026lt;button *ngIf=\u0026#34;!currentTodo.status\u0026#34; class=\u0026#34;btn btn-primary\u0026#34; (click)=\u0026#34;updateStatus(true)\u0026#34;\u0026gt; Done \u0026lt;/button\u0026gt; \u0026lt;!-- åˆªé™¤ Todo --\u0026gt; \u0026lt;button class=\u0026#34;btn btn-danger\u0026#34; (click)=\u0026#34;deleteTodo()\u0026#34;\u0026gt; Delete \u0026lt;/button\u0026gt; \u0026lt;!-- æ›´æ–°æ˜ç´°å…§å®¹ --\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34; class=\u0026#34;btn btn-warning\u0026#34; (click)=\u0026#34;updateTodo()\u0026#34;\u0026gt; Update \u0026lt;/button\u0026gt; \u0026lt;button *ngIf=\u0026#34;showBackto == 1\u0026#34; class=\u0026#34;btn btn-primary float-end\u0026#34; (click)=\u0026#34;backtoTodo()\u0026#34;\u0026gt; Back \u0026lt;/button\u0026gt; \u0026lt;!-- é¡¯ç¤ºæ“ä½œå¾Œè¨Šæ¯ --\u0026gt; \u0026lt;p\u0026gt;{{ message }}\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;!currentTodo.id\u0026#34;\u0026gt; \u0026lt;br /\u0026gt; \u0026lt;p\u0026gt;Cannot access this Todo...\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/ng-template\u0026gt; /* todo-detail.component.scss */ .edit-form { max-width: 400px; margin: auto; } åŸ·è¡Œ Todo åŠŸèƒ½æ¸¬è©¦ æ–°å¢ Todo Item æ–°å¢ Todo çš„åŠŸèƒ½ç•«é¢\nè¼¸å…¥è³‡æ–™å¾ŒæŒ‰ä¸‹ Enter\nè‡ªå‹•è·³åˆ° Todo ç¶­è­·åŠŸèƒ½ä¸­\nè³‡æ–™æª¢æ ¸ï¼Œè‹¥è³‡æ–™æ¬„ä½æœªè¼¸å…¥æ™‚é€å‡ºå‰æœƒæœ‰è­¦èªå‡ºç¾\nTodo è³‡æ–™ç¶­è­·  Title æ¬„ä½çš„é—œéµå­—æŸ¥è©¢ Todo æ¸…å–®é¡¯ç¤ºå€ï¼Œå¯é€éæ»‘é¼ é»é¸ä¾†é¡¯ç¤ºè©³ç´°è³‡æ–™ï¼ˆé¡¯ç¤ºåœ¨ 3. Todo è©³ç´°å€ï¼‰ Todo è©³ç´°å€ï¼Œé™¤é¡¯ç¤ºTodo è©³ç´°æ¬„ä½è³‡è¨Šå¤–ï¼Œä¹Ÿæä¾›äº†ç¶­è­·çš„ç›¸é—œæŒ‰éˆ•ï¼Œå¦‚ï¼šDone/Pending æŒ‰éˆ•æ˜¯ç”¨ä¾†åˆ‡æ›ç‹€æ…‹æ¬„è³‡æ–™ã€Delete æŒ‰éˆ•ç”¨ä¾†åˆªé™¤ç¾è¡Œçš„é€™ç­† Todoã€UpdateæŒ‰éˆ•å‰‡æ˜¯æ›´æ–°è³‡æ–™ç”¨ã€‚ ï½€åˆªé™¤æ‰€æœ‰ï½€æŒ‰éˆ•æœƒæ¸…é™¤æ‰€æœ‰ Todo Item  Custom Directive åœ¨å‰è¿°çš„ç¨‹å¼ä¸­ï¼Œæˆ‘å€‘åœ¨ä¸åŒè§’è‰²ä½¿ç”¨ç™»å…¥æ™‚æœƒè‡ªå‹•æ§åˆ¶ç•«é¢ä¸Šæ–¹çš„åŠŸèƒ½åˆ—ï¼Œåªæœ‰å…·æœ‰Adminè§’è‰²çš„ä½¿ç”¨è€…ç™»å…¥æ™‚æ‰æœƒå‡ºç¾ã€‚è‹¥é€™å€‹éœ€æ±‚ä¹Ÿå‡ºç¾åœ¨ Todo ç¶­è­·åŠŸèƒ½ä¸­ï¼Œè­¬å¦‚ï¼š åˆªé™¤æ‰€æœ‰ ä»¥åŠ Delete å…©å€‹åŠŸèƒ½ï¼Œä¹Ÿå¸Œæœ›åªæœ‰å…·æœ‰Adminè§’è‰²çš„ä½¿ç”¨è€…æ‰èƒ½æ“ä½œã€‚\næ§åˆ¶æ–°å¢åŠŸèƒ½çš„ç¨‹å¼ç¢¼æ˜¯åœ¨ app.component.ts ä»¥åŠ app.component.html ä¸­ å¾ˆé¡¯ç„¶çš„å¿…é ˆæŠŠé€™äº›ç¨‹å¼ç¢¼è¤‡åˆ¶è²¼ä¸Šåˆ° TodoList åŠ TodoDetail äºŒå€‹å…ƒä»¶ä¸­ã€‚ç•¶ç„¶æˆ‘å€‘æœƒæ€è€ƒå¦‚ä½•é¿å…ç¨‹å¼é‡è¦†åŠç¨‹å¼å…¬ç”¨çš„å•é¡Œã€‚ä¸Šè¿°çš„éœ€æ±‚å¯åˆ©ç”¨ Angular Directive çš„åŠŸèƒ½ä¾†å®Œç¾è§£æ±ºã€‚\né¦–å…ˆä¸€æ¨£å…ˆé€é ng Cli ä¾†å»ºç«‹ç¨‹å¼æ¡†æ¶\n$ ng g d shared/directive/if å†æ‰“é–‹ if.directive.ts è¼¸å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ï¼š\nimport { Directive, TemplateRef, ViewContainerRef } from \u0026#39;@angular/core\u0026#39;; import { TokenStorageService } from \u0026#39;../services/token-storage.service\u0026#39;; @Directive({ selector: \u0026#39;[csdIf]\u0026#39; }) export class IfDirective { private roles: string[] = []; //ä½¿ç”¨è€…å…·å‚™çš„è§’è‰²  constructor(private templateRef: TemplateRef\u0026lt;unknown\u0026gt;, private vcr: ViewContainerRef, private tokenStorageService: TokenStorageService) { } ngOnInit(): void { this.displayTemplate(); } private displayTemplate() { this.vcr.clear(); const user = this.tokenStorageService.getUser(); this.roles = user.roles; if (this.roles.includes(\u0026#34;ADMIN\u0026#34;)) { this.vcr.createEmbeddedView(this.templateRef); } else { this.vcr.clear(); } } } å°‡é€™å€‹ è‡ªå®šçš„ Directive å®£å‘Šåœ¨ app.module.ts ä¸­ å®Œæˆå¾Œï¼Œåˆ†åˆ¥\n å°‡ app.components.ts åŸä¾†çš„ç¨‹å¼ç¢¼ç§»é™¤ å°‡ app.component.html ä¸­çš„ *ngIf=\u0026quot;showAdminFunction\u0026quot; æ”¹æˆ *csdIf å°‡ todo-list.component.html ä¸­çš„åˆªé™¤æ‰€æœ‰ button åŠ å…¥ *csdIfã€€å±¬æ€§ å°‡ todo-list.component.html ä¸­çš„Delete button åŠ å…¥ *csdIfã€€å±¬æ€§  ä¿®æ”¹å®Œæˆå¾Œï¼Œå†åŸ·è¡Œä¸€æ¬¡ï¼Œç™¼ç¾åœ¨ä¸‰å€‹è¦è¢«æ§åˆ¶çš„åœ°æ–¹éƒ½å·²é †åˆ©çš„è¢«æ§åˆ¶å®Œæˆäº†ã€‚åŒæ™‚ç¨‹å¼ä¹Ÿè®Šå¾—æ›´åŠ ç°¡æ½”äº†ã€‚\n","permalink":"https://calvinegs.github.io/posts/angular-webapi-crud/","summary":"github Source code\næœ¬æ–‡ä¸»è¦çš„ä¸»é¡Œæ˜¯è¦å‘ˆç¾å¦‚ä½•å®Œæˆå…·æœ‰ \u0026ldquo;æ–°å¢ã€ä¿®æ”¹ã€åˆªé™¤ã€æŸ¥è©¢â€œ Todo List åŠŸèƒ½çš„ Angular Applicationã€‚åŒæ™‚æ­é…ä½¿ç”¨è€…è§’è‰²/æ¬Šé™æ§ç®¡ä¾†å‘ˆç¾ä¸åŒ UI åŠŸèƒ½ã€‚\nåœ¨æœ€å¾Œçš„ç« ç¯€æœƒä»‹ç´¹åˆ°å¦‚ä½•ä½¿ç”¨ Angular Directive ä¾†ç°¡åŒ–ç¨‹å¼é¿å…ç¨‹å¼ç¢¼é‡è¦†ã€‚\nç‚ºå®Œæ•´æ€§è€ƒé‡ï¼Œé‚„æ˜¯è¨˜éŒ„å¦‚ä½•ä¸€æ­¥æ­¥å¾ç„¡åˆ°æœ‰ä½¿ç”¨ Angular 14 ç›¸é—œåŠŸèƒ½ä¾†å»ºç«‹ä¸€å€‹ä½¿ç”¨è€…è³‡æ–™è¨»å†Šã€ç™»å…¥çš„è¡¨å–®åŠŸèƒ½ï¼ˆé€£çµåˆ°å¾Œç«¯ node+MySQL Web API )ï¼Œåœ¨é€™äº›è¡¨å–®ä¸­æŒ‰ä¸‹é€å‡ºæ™‚æœƒè‡ªå‹•æª¢æ ¸ä½¿ç”¨è€…æ‰€è¼¸å…¥çš„è³‡æ–™æ˜¯å¦åˆä¹ç¨‹å¼ä¸­æ‰€è¨­å®šçš„æª¢æ ¸é‚è¼¯ï¼Œä¸¦é¡¯ç¤ºåˆé©çš„è¨Šæ¯åæ‡‰çµ¦ä½¿ç”¨è€…ã€‚å…¶ä¸­å°‡æœƒä½¿ç”¨åˆ°ä¸‹åˆ—æŠ€è¡“:\n Angular CLI 14 Bootstrap 5 (UI Framework) Angular  Reactive Form Custome Validator Interceptor JWT Session Storage Router Services Guard \u0026amp; Router Data RxJs Custome Directive     è¨»1: è‹¥ä½ å·²ç¶“æŸ¥é–±é ä½¿ç”¨ Angular 14 å»ºç«‹ Reactive Form è¡¨å–®é©—è­‰ç¯„ä¾‹ é€™ç¯‡ç­†è¨˜äº†ï¼Œé‚£å¯ä»¥ç›´æ¥è·³åˆ° \u0026ldquo;å®Œæˆ Todo ç›¸é—œ Component çš„åŠŸèƒ½\u0026rdquo; é€™å€‹ç« ç¯€ã€‚","title":"Angular 14 ç¯„ä¾‹: é€é Web API å®Œæˆ CRUD çš„æ‡‰ç”¨ç¨‹å¼"},{"content":"github Source code\nTechnology:\n NodeJs 17.6.0 Express 4.18.1 cors 2.8.5 crypto-js 4.1.1 # åŠ è§£å¯†å¥—ä»¶ jsonwebtoken 8.5.1 # Json Web Token çš„åŠŸèƒ½å¥—ä»¶ sequelize 6.20.2 # ORM å¥—ä»¶ mysql2 2.3.3 # MySQL client for Node.js MariaDB 10.8.3 # ä½¿ç”¨çš„è³‡æ–™åº«  å°ˆæ¡ˆå®Œæˆå¾Œçš„æª”æ¡ˆçµæ§‹ ./å°ˆæ¡ˆç›®éŒ„ â”œâ”€â”€ app/ â”‚ â”œâ”€â”€ config/ â”‚ â”‚ â””â”€â”€ db.config.js â”‚ â”œâ”€â”€ middleware/ â”‚ â”‚ â”œâ”€â”€ auth.jwt.js â”‚ â”‚ â”œâ”€â”€ index.js â”‚ â”‚ â””â”€â”€ verify.signup.js â”‚ â”œâ”€â”€ models/ â”‚ â”‚ â”œâ”€â”€ index.js â”‚ â”‚ â”œâ”€â”€ role.model.js â”‚ â”‚ â”œâ”€â”€ todo.model.js â”‚ â”‚ â””â”€â”€ user.model.js â”‚ â”œâ”€â”€ routes/ â”‚ â”‚ â”œâ”€â”€ auth.routes.js â”‚ â”‚ â”œâ”€â”€ todo.routes.js â”‚ â”‚ â””â”€â”€ user.routes.js â”‚ â””â”€â”€ services/ â”‚ â”œâ”€â”€ auth.service.js â”‚ â”œâ”€â”€ todo.service.js â”‚ â””â”€â”€ user.service.js â”œâ”€â”€ node_modules/ â”œâ”€â”€ .env â”œâ”€â”€ .gitignore â”œâ”€â”€ package.json â”œâ”€â”€ README.md â”œâ”€â”€ server.js â””â”€â”€ yarn-lock å°ˆæ¡ˆå®Œæˆå¾Œæ‰€æä¾›çš„ API ç«¯é»    Methods Urls Actions     POST /api/auth/signup è¨»å†Šæ–°ä½¿ç”¨è€…å¸³è™Ÿ   POST /api/auth/signin ä½¿ç”¨è€…å¸³è™Ÿç™»å…¥   GET /api/todos get all Todos   GET /api/todos/:id get Todo by id   GET /api/todos/done find all done Todos   GET /api/todos/title=[keyword] find all Todos whick title contains keyword   POST /api/todos add New Todo   PUT /api/todos/:id update Todo by id   DELETE /api/todos/:id remove Todo by id   DELETE /api/todos remove all Todos    è¨­ç½®å°ˆæ¡ˆç’°å¢ƒ é€™å€‹å°ˆæ¡ˆä¸æœƒå¾é ­å¾ç„¡åˆ°æœ‰ç´€éŒ„æ¯ä¸€å€‹å»ºç½®çš„æ­¥é©Ÿï¼Œè€Œæ˜¯æ¡å–å¥—ç”¨ \u0026ldquo;ä½¿ç”¨ Node.js + express + MySQL å»ºç«‹ä¸€å€‹å¾Œç«¯æœå‹™ REST API\u0026rdquo; é€™ç¯‡ç­†è¨˜å…§å®¹ä¾†ä¿®æ”¹æˆç‚ºä½¿ç”¨ Mariadb è³‡æ–™åº«è€Œå®Œæˆã€‚\nè¤‡è£½å³æœ‰å°ˆæ¡ˆ é¦–å…ˆ git clone å³æœ‰çš„ MySQL å°ˆæ¡ˆ\n$ git clone https://github.com/calvinegs/nodejs-webapi-jwt-mysql.git nodejs-webapi-jwt-mariadb $ cd nodejs-webapi-jwt-mariadb clone æˆåŠŸå¾Œï¼Œå†ä¾†èª¿æ•´ç›¸ä¾çš„å¥—ä»¶ã€‚èª¿æ•´å‰å…ˆå›å¾©åŸå°ˆæ¡ˆæ‰€ä½¿ç”¨çš„å¥—ä»¶\n$ yarn install yarn install v1.22.19 info No lockfile found. [1/4] Resolving packages... [2/4] Fetching packages... [3/4] Linking dependencies... [4/4] Building fresh packages... success Saved lockfile. Done in 4.92s. åœ¨ \u0026ldquo;ä½¿ç”¨ Node.js + express + MySQL å»ºç«‹ä¸€å€‹å¾Œç«¯æœå‹™ REST API\u0026rdquo; é€™å°ˆæ¡ˆè£¡æ¡ç”¨äº† ORM çš„å¥—ä»¶ä¾†å­˜å–è³‡æ–™åº«ï¼Œä½¿ç”¨ ORM å·¥å…·å±¤çš„å¥½è™•æ˜¯å®ƒæ˜¯ä¸€å€‹æŠ½è±¡å±¤ï¼Œä¸ç›´æ¥ä½¿ç”¨ SQL ä¾†ï¼Œç•¶å¾Œç«¯è³‡æ–™åº«è½‰æ›æ™‚ï¼Œåªè¦æ­é…ä¸ç”¨çš„ Driver ä¾¿å¯å®Œæˆï¼Œå®Œå…¨ä¸é ˆä¿®æ”¹ç›¸é—œç¨‹å¼ã€‚\nç§»é™¤ mysql driver å¥—ä»¶ $ yarn remove mysql2 yarn remove v1.22.19 [1/2] Removing module mysql2... [2/2] Regenerating lockfile and installing missing dependencies... success Uninstalled packages. Done in 0.49s. å®‰è£ mariadb driver å¥—ä»¶ $ yarn add mariadb arn add v1.22.19 [1/4] Resolving packages... [2/4] Fetching packages... [3/4] Linking dependencies... [4/4] Building fresh packages... success Saved lockfile. success Saved 7 new dependencies. info Direct dependencies â””â”€ mariadb@3.0.0 info All dependencies â”œâ”€ @alloc/quick-lru@5.2.0 â”œâ”€ @types/geojson@7946.0.8 â”œâ”€ @types/node@17.0.45 â”œâ”€ denque@2.0.1 â”œâ”€ mariadb@3.0.0 â”œâ”€ please-upgrade-node@3.2.0 â””â”€ semver-compare@1.0.0 Done in 2.45s. ä¿®æ”¹å®Œæˆå¾Œçš„ package.json é è¨­çš„å…§å®¹\n{ \u0026quot;name\u0026quot;: \u0026quot;nodejs-webapi-jwt-mariadb\u0026quot;, \u0026quot;version\u0026quot;: \u0026quot;1.0.0\u0026quot;, \u0026quot;description\u0026quot;: \u0026quot;Node.js + express + JWT + MariaDB\u0026quot;, \u0026quot;main\u0026quot;: \u0026quot;server.js\u0026quot;, \u0026quot;scripts\u0026quot;: { \u0026quot;start\u0026quot;: \u0026quot;nodemon server.js\u0026quot; }, \u0026quot;keywords\u0026quot;: [ \u0026quot;node.js\u0026quot;, \u0026quot;express\u0026quot;, \u0026quot;jwt\u0026quot;, \u0026quot;mysql\u0026quot; ], \u0026quot;author\u0026quot;: \u0026quot;calvin\u0026quot;, \u0026quot;license\u0026quot;: \u0026quot;ISC\u0026quot;, \u0026quot;dependencies\u0026quot;: { \u0026quot;cors\u0026quot;: \u0026quot;^2.8.5\u0026quot;, \u0026quot;crypto-js\u0026quot;: \u0026quot;^4.1.1\u0026quot;, \u0026quot;dotenv\u0026quot;: \u0026quot;^16.0.1\u0026quot;, \u0026quot;express\u0026quot;: \u0026quot;^4.18.1\u0026quot;, \u0026quot;jsonwebtoken\u0026quot;: \u0026quot;^8.5.1\u0026quot;, \u0026quot;mariadb\u0026quot;: \u0026quot;^3.0.0\u0026quot;, \u0026quot;sequelize\u0026quot;: \u0026quot;^6.21.2\u0026quot; }, \u0026quot;devDependencies\u0026quot;: { \u0026quot;nodemon\u0026quot;: \u0026quot;^2.0.18\u0026quot; } } ä¿®æ”¹ç¨‹å¼ èª¿æ•´è³‡æ–™åº«é€£çµè³‡æ–™ ä¿®æ”¹ app/config/db.config.js\nmodule.exports = { HOST: \u0026#34;localhost\u0026#34;, USER: \u0026#34;root\u0026#34;, PASSWORD: \u0026#34;mariadb@12345\u0026#34;, DB: \u0026#34;testdb\u0026#34;, dialect: \u0026#34;mariadb\u0026#34;, pool: { max: 5, min: 0, acquire: 3000, idle: 10000 } } èª¿æ•´ Server.js å°‡åŸæœ¬è¢«è¨»è§£æ‰çš„ â€œè³‡æ–™åº«åˆå§‹åŒ–ç¨‹å¼ç¢¼â€æ‰“é–‹ï¼Œä»¥ä¾¿åˆæ¬¡åŸ·è¡Œå‰ç¨‹å¼å¯ä»¥è‡ªå‹•å»ºç«‹ç›¸é—œè³‡æ–™è¡¨(Tables)\nconst express = require(\u0026quot;express\u0026quot;); const dotenv = require(\u0026quot;dotenv\u0026quot;); const cors = require(\u0026quot;cors\u0026quot;); dotenv.config(); const app = express(); const corsOptions = { origin: \u0026quot;http://localhost:4200\u0026quot; }; app.use(cors(corsOptions)); // const { Sequelize } = require('sequelize'); // const sequelize = new Sequelize('testdb', 'root', 'mysql@12345', { // host: 'localhost', // dialect: 'mysql' // }); // try { // sequelize.authenticate(); // console.log('Connection has been established successfully.'); // } catch (error) { // console.error('Unable to connect to the database:', error); // } // app.get(\u0026quot;/api/test\u0026quot;, (req, res) =\u0026gt; { // console.log(\u0026quot;test is successful\u0026quot;); // res.send(\u0026quot;test is successful\u0026quot;); // }); const db = require(\u0026quot;./app/models\u0026quot;); const Role = db.role; db.sequelize.sync({ force: true }).then(() =\u0026gt; { console.log('Drop and Resync Database with { force: true }'); initial(); }).catch((err) =\u0026gt; { console.log(err); }); app.use(express.json()); const userRoute = require(\u0026quot;./app/routes/user.routes\u0026quot;); app.use(\u0026quot;/api/users\u0026quot;, userRoute); const todoRoute = require(\u0026quot;./app/routes/todo.routes\u0026quot;); app.use(\u0026quot;/api/todos\u0026quot;, todoRoute); const authRoute = require(\u0026quot;./app/routes/auth.routes\u0026quot;); app.use(\u0026quot;/api/auth\u0026quot;, authRoute); const PORT = process.env.PORT || 5000; app.listen(PORT, () =\u0026gt; { console.log(`Backend server is running on port ${PORT}`); }); // ç‚º roles table æ–°å¢äºŒç­†åˆå§‹è³‡æ–™ function initial() { Role.create({ id: 1, name: \u0026quot;user\u0026quot; }); Role.create({ id: 2, name: \u0026quot;admin\u0026quot; }); } é–‹å§‹åŸ·è¡Œç¨‹å¼ å®‰è£ MariaDB è³‡æ–™åº« ç¨‹å¼åŸ·è¡Œå‰è¦å‚™å¦¥ MariaDB è³‡æ–™åº«ï¼Œç‚ºæ–¹ä¾¿èµ·è¦‹ï¼Œæ¡ç”¨ docker æ–¹å¼ä¾†åŸ·è¡Œ MariaDB è³‡æ–™ç®¡ç†ç³»çµ±ï¼Œè©³ç´°å…§å®¹å¯åƒè€ƒ ä½¿ç”¨ Docker åŸ·è¡Œ Mariadb  é€™ç¯‡ç­†ç´€ã€‚\nåŸ·è¡Œç¨‹å¼ MariaDB Docker å•Ÿå‹•æˆåŠŸå¾Œå°±å¯ä»¥é–‹å§‹åŸ·è¡Œç¨‹å¼\n$ npm start ä½¿ç”¨ DBeaver æŸ¥çœ‹è³‡æ–™åº« ä½¿ç”¨ DBeaver é€£çµåˆ° MariaDB å¾Œï¼Œç™¼ç¾é€éç¨‹å¼å·²æˆåŠŸçš„ç”£ç”Ÿç›¸é—œçš„ Tables (è³‡æ–™è¡¨)ã€‚\nä½¿ç”¨ Postman æ“ä½œ Web API è¨»å†Šä¸€å€‹ä½¿ç”¨è€…å¸³è™Ÿ\nä½¿ç”¨è¨»å†ŠæˆåŠŸçš„å¸³è™Ÿç™»å…¥ç³»çµ±ï¼Œç™»å…¥æˆåŠŸå¾Œæœƒå›å‚³ä¸€å€‹ Token\nå¸¶å…¥ token å°±å¯æˆåŠŸçš„æ–°å¢ä¸€å€‹ todo\nçµèª è‡³æ­¤ä½ å¯çœ‹åˆ°åªé ˆå°‘è¨±çš„ç¨‹å¼èª¿æ•´å°±å·²å®ŒæˆæŠ½æ›å¾Œç«¯è³‡æ–™åº«çš„å‹•ä½œã€‚åœ¨ç¨‹å¼ä¸­æ‰€æ¡ç”¨ ORM å¥—ä»¶æ˜¯ Sequelizeï¼Œå®ƒåªè¦æ­é…ä¸åŒçš„ dirver ä¾¿å¯æ”¯æ´ Postgresã€MySQLã€MariaDbã€SQLiteã€MS SQL Server ç­‰ä¸åŒçš„é—œé€£å¼è³‡æ–™åº«ç®¡ç†ç³»çµ±ã€‚ï¼ˆSequelize è©³ç´°è³‡è¨Šè«‹åƒè€ƒã€€Sequelize Getting Started  ï¼‰\n","permalink":"https://calvinegs.github.io/posts/nodejs-restapi-mariadb/","summary":"github Source code\nTechnology:\n NodeJs 17.6.0 Express 4.18.1 cors 2.8.5 crypto-js 4.1.1 # åŠ è§£å¯†å¥—ä»¶ jsonwebtoken 8.5.1 # Json Web Token çš„åŠŸèƒ½å¥—ä»¶ sequelize 6.20.2 # ORM å¥—ä»¶ mysql2 2.3.3 # MySQL client for Node.js MariaDB 10.8.3 # ä½¿ç”¨çš„è³‡æ–™åº«  å°ˆæ¡ˆå®Œæˆå¾Œçš„æª”æ¡ˆçµæ§‹ ./å°ˆæ¡ˆç›®éŒ„ â”œâ”€â”€ app/ â”‚ â”œâ”€â”€ config/ â”‚ â”‚ â””â”€â”€ db.config.js â”‚ â”œâ”€â”€ middleware/ â”‚ â”‚ â”œâ”€â”€ auth.jwt.js â”‚ â”‚ â”œâ”€â”€ index.js â”‚ â”‚ â””â”€â”€ verify.signup.js â”‚ â”œâ”€â”€ models/ â”‚ â”‚ â”œâ”€â”€ index.","title":"ä½¿ç”¨ Node.js + express + MariaDB å»ºç«‹ä¸€å€‹å¾Œç«¯æœå‹™ REST API"},{"content":"ä½¿ç”¨ Docker åŸ·è¡Œ Mariadb å°é–‹ç™¼äººå“¡è€Œè¨€ï¼Œä½¿ç”¨å„å¼çš„è³‡æ–™åº«ç®¡ç†ç³»çµ±ä¾†ç•¶æ‡‰ç”¨ç¨‹å¼çš„å¾Œç«¯è³‡æ–™å­˜å–å±¤æ˜¯å®¶å¸¸ä¾¿é£¯ã€‚è‹¥å†è€ƒæ…®ä¸Šæ¯ç¨®è³‡æ–™åº«ç®¡ç†ç³»çµ±æœ‰ä¸åŒçš„ç‰ˆæœ¬ï¼Œè‚¯å®šæœƒè®“ä½ çš„é–‹ç™¼ç’°å¢ƒè² æ“”éé‡ã€éæ–¼è¤‡é›œã€‚ä½¿ç”¨ Docker ä¾†æ–¼é©ç•¶çš„æ™‚æ©Ÿé–‹å•Ÿé©ç”¨çš„è³‡æ–™åº«ç®¡ç†ç³»çµ±æœƒæ˜¯ä¸€å€‹ä¸éŒ¯çš„é¸æ“‡ã€‚\næœ¬ç¯‡ç­†è¨˜ç´€éŒ„ä½¿ç”¨ docker (docker compose) ä¾†å¿«é€Ÿçš„è¨­ç½® Mariadbã€‚\næª¢æŸ¥æ˜¯å¦å·²å®‰è£äº† Docker (docker version) $ docker version Client: Docker Engine - Community Version: 20.10.17 API version: 1.41 Go version: go1.17.11 Git commit: 100c701 Built: Mon Jun 6 23:02:57 2022 OS/Arch: linux/amd64 Context: default Experimental: true Server: Docker Engine - Community Engine: Version: 20.10.17 API version: 1.41 (minimum version 1.12) Go version: go1.17.11 Git commit: a89b842 Built: Mon Jun 6 23:01:03 2022 OS/Arch: linux/amd64 Experimental: false containerd: Version: 1.6.6 GitCommit: 10c12954828e7c7c9b6e0ea9b0c02b01407d3ae1 runc: Version: 1.1.2 GitCommit: v1.1.2-0-ga916309 docker-init: Version: 0.19.0 GitCommit: de40ad0 æª¢æŸ¥æ˜¯å¦å·²å®‰è£äº† docker compose $ docker compose version Docker Compose version v2.6.0 ä½¿ç”¨ docker run ä¾†åŸ·è¡Œ Mariadb 10.8.3 åƒæ•¸èªªæ˜ï¼š \u0026ndash;name: docker name \u0026ndash;rm: åœæ­¢æ™‚ç§»é™¤ container -v: å°‡ container ä¸­çš„ Mariadb è³‡æ–™æ˜ å°„åˆ° local ç«¯çš„ç›®éŒ„(/tmp/mariadb)ä¸­ -e: ç’°å¢ƒè®Šæ•¸è¨­å®š, MARIADB_ROOT_PASSWORD æŒ‡çš„æ˜¯ root å¸³è™Ÿçš„å¯†ç¢¼ï¼ŒMARIADB_DATABASE æŒ‡çš„æ˜¯è³‡æ–™åº«åç¨± -p: Port number\n$ docker run --name mdb --rm \\ -v /tmp/mariadb:/var/lib/mysql \\ -e MARIADB_ROOT_PASSWORD=Password123! \\ -e MARIADB_DATABASE=testing \\ -p 3306:3306 \\ -it mariadb:10.8.3 $ docker exec -it mdb mariadb --user root -pPassword123! Welcome to the MariaDB monitor. Commands end with ; or \\g. Your MariaDB connection id is 3 Server version: 10.8.3-MariaDB-1:10.8.3+maria~jammy mariadb.org binary distribution Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others. Type \u0026#39;help;\u0026#39; or \u0026#39;\\h\u0026#39; for help. Type \u0026#39;\\c\u0026#39; to clear the current input statement. MariaDB [(none)]\u0026gt; # å»ºç«‹ä¸€å€‹è³‡æ–™åº« MariaDB [(none)]\u0026gt; CREATE DATABASE mariadb_is_awesome; Query OK, 1 row affected (0.001 sec) MariaDB [(none)]\u0026gt; æŸ¥çœ‹ docker åŸ·è¡Œçš„æƒ…æ³ $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES f42da79c0a72 mariadb:10.8.3 \u0026#34;docker-entrypoint.sâ€¦\u0026#34; About a minute ago Up About a minute 0.0.0.0:3306-\u0026gt;3306/tcp, :::3306-\u0026gt;3306/tcp mdb æŸ¥çœ‹ local Mariadb è³‡æ–™åº«ç›®éŒ„ (/tmp/mariadb) $ lm /tmp/mariadb/ ç¸½ç”¨é‡ 139276 drwxr-xr-x 7 systemd-coredump systemd-coredump 4096 ä¸ƒ 7 18:04 . drwxrwxrwt 27 root root 12288 ä¸ƒ 7 18:06 .. -rw-rw---- 1 systemd-coredump systemd-coredump 16719872 ä¸ƒ 7 18:03 aria_log.00000001 -rw-rw---- 1 systemd-coredump systemd-coredump 52 ä¸ƒ 7 18:03 aria_log_control -rw-rw---- 1 systemd-coredump systemd-coredump 9 ä¸ƒ 7 18:03 ddl_recovery.log -rw-rw---- 1 systemd-coredump systemd-coredump 868 ä¸ƒ 7 18:03 ib_buffer_pool -rw-rw---- 1 systemd-coredump systemd-coredump 12582912 ä¸ƒ 7 18:03 ibdata1 -rw-rw---- 1 systemd-coredump systemd-coredump 100663296 ä¸ƒ 7 18:06 ib_logfile0 -rw-rw---- 1 systemd-coredump systemd-coredump 12582912 ä¸ƒ 7 18:03 ibtmp1 drwx------ 2 systemd-coredump systemd-coredump 4096 ä¸ƒ 7 18:04 mariadb_is_awesome -rw-rw---- 1 systemd-coredump systemd-coredump 0 ä¸ƒ 7 18:03 multi-master.info drwx------ 2 systemd-coredump systemd-coredump 4096 ä¸ƒ 7 18:03 mysql -rw-r--r-- 1 systemd-coredump systemd-coredump 14 ä¸ƒ 7 18:03 mysql_upgrade_info drwx------ 2 systemd-coredump systemd-coredump 4096 ä¸ƒ 7 18:03 performance_schema drwx------ 2 systemd-coredump systemd-coredump 12288 ä¸ƒ 7 18:03 sys drwx------ 2 systemd-coredump systemd-coredump 4096 ä¸ƒ 7 18:03 testing ä½¿ç”¨ dbeaver-cd é€£çµåˆ° Mariadb é–‹å•Ÿ dbeaver-cd ç¨‹å¼ï¼ŒæŒ‰ä¸‹ ï½€New Database Connection` æŒ‰éˆ•\né–‹å§‹è¨­ç½®é€£ç·šè³‡æ–™è¨­å®šï¼Œé¸æ“‡è³‡æ–™åº« - Mariadb æŒ‰ä¸‹ ï½€Next`\nè¼¸å…¥ç›¸é—œè³‡è¨Šï¼Œå¦‚ Database nameã€Usernameã€Password\u0026hellip;ç­‰ï¼ŒæŒ‰ä¸‹ï½€Test Connectiono\u0026hellip;ï½€ä¾†æ¸¬è©¦è¨­å®šæ˜¯å¦æˆåŠŸã€‚\nè¨­å®šç„¡èª¤æœƒé¡¯ç¤º ï½€å·²é€£çµçš„è¨Šæ¯è¦–çª—ï½€ã€‚æŒ‰ä¸‹ï½€OKï½€å›åˆ°è¨­ç½®ç•«é¢ï¼Œå†æŒ‰ä¸‹ \u0026ldquo;Finish\u0026rdquo; å³å¯é€²å…¥ DBeaver è³‡æ–™åº«ç®¡ç†åŠŸèƒ½ä¸­ã€‚\nä½¿ç”¨ docker compose ä¾†åŸ·è¡Œ Mariadb ï¼ˆ10.8.3ï¼‰ å»ºç½®å°ˆæ¡ˆç›®éŒ„çµæ§‹ $ mkdir mariadb \u0026amp;\u0026amp; cd mariadb $ touch docker-compose.yml README.md $ mkdir sql $ touch ./sql/init.sql ./mariadb â”œâ”€â”€ docker-compose.yml â”œâ”€â”€ README.md â””â”€â”€ sql â””â”€â”€ init.sql å»ºç«‹ docker-compose.yml åœ¨é€™å€‹ compse command file ä¸­ä¸€å€‹ services: dbï¼Œç”¨ä¾†ä¸‹è¼‰ä¸¦å•Ÿå‹• Mariadbã€‚æŒ‡ä»¤èˆ‡èªªæ˜å¦‚ä¸‹\nversion: \u0026#39;3.8\u0026#39; services: db: container_name: maria_db  # container name image: mariadb:10.8.3  # image name cap_add: # å°‡ã€€cap_addã€€è¨­å®šç‚º SYS_NICEæœƒæŠ‘åˆ¶ä¸€äº›ç„¡ç”¨çš„éŒ¯èª¤æ¶ˆæ¯ - SYS_NICE restart: always # ç•¶ç™¼ç”Ÿç³»çµ±éŒ¯èª¤æ™‚æ°¸é éƒ½æœƒé‡å•Ÿ environment: - MARIADB_DATABASE=testdb  # é è¨­è³‡æ–™åº«åç¨± - MARIADB_ROOT_PASSWORD=mariadb@12345 # root å¯†ç¢¼ ports: - \u0026#39;3306:3306\u0026#39; volumes: - /tmp/mariadb:/var/lib/mariadb # å°‡ local /tmp/mariadb æ˜ å°„æˆ Mariadb å¯¦éš›è³‡æ–™åº«æª”æ¡ˆ #- db:/var/lib/mariadb # è‹¥ä»¥æ­¤èªæ³•å°‡å¯æ­é…ä¸‹é¢ volumes çš„é¡å¤–åƒæ•¸ä¾†æŒ‡å®šå¯¦éš›è³‡æ–™åº«æª”æ¡ˆå­˜æ”¾çš„ä½ç½®ï¼Œé è¨­æ˜¯ /var/lib/docker/volumes/mariadb/_data - ./sql:/docker-entrypoint-initdb.d # åœ¨ local ç›®éŒ„ä¸­å¯ç½®å…¥ç›¸é—œçš„ sql æª”æ¡ˆ åˆ°initdb.d ç›®éŒ„ä¸‹ä¾†é€²è¡Œè³‡æ–™åº«è³‡æ–™ initial çš„å‹•ä½œã€‚ #volumes: # db: # driver: local é€é init.sql ä¾†å»ºç«‹ä¸€å€‹ Table åœ¨ init.sql æª”æ¡ˆä¸­è¼¸å…¥ä»¥ä¸‹ SQL èªæ³•ã€‚é€™å€‹æª”æ¡ˆçš„å…§å®¹æœƒåœ¨ docker å•Ÿå‹•æˆåŠŸå¾Œè¢«åŸ·è¡Œã€‚\nuse testdb; CREATE TABLE IF NOT EXISTS tasks ( task_id INT AUTO_INCREMENT PRIMARY KEY, title VARCHAR(255) NOT NULL, start_date DATE, due_date DATE, status TINYINT NOT NULL, priority TINYINT NOT NULL, description TEXT, created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ) ENGINE=INNODB; åŸ·è¡Œ docker compose ä¸Šè¿°çš„ç›®éŒ„èˆ‡æª”æ¡ˆå…§å®¹æº–å‚™å®Œæˆå¾Œï¼Œåœ¨èˆ‡ docker-compose.yml çš„ç›¸åŒç›®éŒ„ä¸­åŸ·è¡Œ docker compose up -dä¾†å•Ÿå‹• db Servicesï¼Œå•Ÿå‹•æˆåŠŸå¾Œï¼Œåœ¨ terminal ä½¿ç”¨ ï½€$ docker psï½€ æŒ‡ä»¤æŸ¥çœ‹å®¹å™¨å•Ÿå‹•ç‹€æ³\n$ docker compose up -d [+] Running 2/2 â ¿ Network mariadb_default Created 0.0s â ¿ Container maria_db Started 0.5s æŸ¥çœ‹ docker åŸ·è¡Œçš„æƒ…æ³ $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 1db21d9e4eab mariadb:10.8.3 \u0026#34;docker-entrypoint.sâ€¦\u0026#34; 2 minutes ago Up 2 minutes 0.0.0.0:3306-\u0026gt;3306/tcp, :::3306-\u0026gt;3306/tcp maria_db e ä½¿ç”¨ dbeaver-cd é€£çµåˆ° Mariadb DB è¨­ç½®é€£ç·šè³‡æ–™è¨­å®šå¾Œé–‹å§‹è³‡æ–™åº«æœƒç™¼ç¾å·²è‡ªå‹•æ–°å»ºç«‹ä¸€å€‹ task çš„ Tableäº†ã€‚\nè³‡æ–™åº«çš„å¯¦éš›æª”æ¡ˆå­˜æ”¾åœ¨ Local çš„ /tmp/mariadb ç›®éŒ„ä¸­ ä½¿ç”¨ä½œæ¥­ç³»çµ±ç®¡ç†è€…æ¬Šé™ä¾†æŸ¥çœ‹æ­¤ç›®éŒ„\n$ ls -al /tmp/mariadb/ ç¸½ç”¨é‡ 139272 drwxr-xr-x 6 systemd-coredump systemd-coredump 4096 ä¸ƒ 7 18:26 . drwxrwxrwt 27 root root 12288 ä¸ƒ 7 18:31 .. -rw-rw---- 1 systemd-coredump systemd-coredump 16719872 ä¸ƒ 7 18:26 aria_log.00000001 -rw-rw---- 1 systemd-coredump systemd-coredump 52 ä¸ƒ 7 18:26 aria_log_control -rw-rw---- 1 systemd-coredump systemd-coredump 9 ä¸ƒ 7 18:26 ddl_recovery.log -rw-rw---- 1 systemd-coredump systemd-coredump 884 ä¸ƒ 7 18:26 ib_buffer_pool -rw-rw---- 1 systemd-coredump systemd-coredump 12582912 ä¸ƒ 7 18:26 ibdata1 -rw-rw---- 1 systemd-coredump systemd-coredump 100663296 ä¸ƒ 7 18:28 ib_logfile0 -rw-rw---- 1 systemd-coredump systemd-coredump 12582912 ä¸ƒ 7 18:26 ibtmp1 -rw-rw---- 1 systemd-coredump systemd-coredump 0 ä¸ƒ 7 18:26 multi-master.info drwx------ 2 systemd-coredump systemd-coredump 4096 ä¸ƒ 7 18:26 mysql -rw-r--r-- 1 systemd-coredump systemd-coredump 14 ä¸ƒ 7 18:26 mysql_upgrade_info drwx------ 2 systemd-coredump systemd-coredump 4096 ä¸ƒ 7 18:26 performance_schema drwx------ 2 systemd-coredump systemd-coredump 12288 ä¸ƒ 7 18:26 sys drwx------ 2 systemd-coredump systemd-coredump 4096 ä¸ƒ 7 18:26 testdb åœæ­¢ Docker é—œé–‰è³‡æ–™åº« $ docker compose down [+] Running 2/2 â ¿ Container maria_db Removed 0.5s â ¿ Network mariadb_default Removed 0.2s $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES ","permalink":"https://calvinegs.github.io/posts/docker-mariadb/","summary":"ä½¿ç”¨ Docker åŸ·è¡Œ Mariadb å°é–‹ç™¼äººå“¡è€Œè¨€ï¼Œä½¿ç”¨å„å¼çš„è³‡æ–™åº«ç®¡ç†ç³»çµ±ä¾†ç•¶æ‡‰ç”¨ç¨‹å¼çš„å¾Œç«¯è³‡æ–™å­˜å–å±¤æ˜¯å®¶å¸¸ä¾¿é£¯ã€‚è‹¥å†è€ƒæ…®ä¸Šæ¯ç¨®è³‡æ–™åº«ç®¡ç†ç³»çµ±æœ‰ä¸åŒçš„ç‰ˆæœ¬ï¼Œè‚¯å®šæœƒè®“ä½ çš„é–‹ç™¼ç’°å¢ƒè² æ“”éé‡ã€éæ–¼è¤‡é›œã€‚ä½¿ç”¨ Docker ä¾†æ–¼é©ç•¶çš„æ™‚æ©Ÿé–‹å•Ÿé©ç”¨çš„è³‡æ–™åº«ç®¡ç†ç³»çµ±æœƒæ˜¯ä¸€å€‹ä¸éŒ¯çš„é¸æ“‡ã€‚\næœ¬ç¯‡ç­†è¨˜ç´€éŒ„ä½¿ç”¨ docker (docker compose) ä¾†å¿«é€Ÿçš„è¨­ç½® Mariadbã€‚\næª¢æŸ¥æ˜¯å¦å·²å®‰è£äº† Docker (docker version) $ docker version Client: Docker Engine - Community Version: 20.10.17 API version: 1.41 Go version: go1.17.11 Git commit: 100c701 Built: Mon Jun 6 23:02:57 2022 OS/Arch: linux/amd64 Context: default Experimental: true Server: Docker Engine - Community Engine: Version: 20.10.17 API version: 1.41 (minimum version 1.12) Go version: go1.17.11 Git commit: a89b842 Built: Mon Jun 6 23:01:03 2022 OS/Arch: linux/amd64 Experimental: false containerd: Version: 1.","title":"ä½¿ç”¨ Docker åŸ·è¡Œ Mariadb"},{"content":"github Source code\nTechnology:\n NodeJs 17.6.0 Express 4.18.1 cors 2.8.5 crypto-js 4.1.1 # åŠ è§£å¯†å¥—ä»¶ jsonwebtoken 8.5.1 # Json Web Token çš„åŠŸèƒ½å¥—ä»¶ sequelize 6.20.2 # ORM å¥—ä»¶ mysql2 2.3.3 # MySQL client for Node.js MySQL 8.0 # ä½¿ç”¨çš„è³‡æ–™åº«  å°ˆæ¡ˆå®Œæˆå¾Œçš„æª”æ¡ˆçµæ§‹ ./å°ˆæ¡ˆç›®éŒ„ â”œâ”€â”€ app/ â”‚ â”œâ”€â”€ config/ â”‚ â”‚ â””â”€â”€ db.config.js â”‚ â”œâ”€â”€ middleware/ â”‚ â”‚ â”œâ”€â”€ auth.jwt.js â”‚ â”‚ â”œâ”€â”€ index.js â”‚ â”‚ â””â”€â”€ verify.signup.js â”‚ â”œâ”€â”€ models/ â”‚ â”‚ â”œâ”€â”€ index.js â”‚ â”‚ â”œâ”€â”€ role.model.js â”‚ â”‚ â”œâ”€â”€ todo.model.js â”‚ â”‚ â””â”€â”€ user.model.js â”‚ â”œâ”€â”€ routes/ â”‚ â”‚ â”œâ”€â”€ auth.routes.js â”‚ â”‚ â”œâ”€â”€ todo.routes.js â”‚ â”‚ â””â”€â”€ user.routes.js â”‚ â””â”€â”€ services/ â”‚ â”œâ”€â”€ auth.service.js â”‚ â”œâ”€â”€ todo.service.js â”‚ â””â”€â”€ user.service.js â”œâ”€â”€ node_modules/ â”œâ”€â”€ .env â”œâ”€â”€ .gitignore â”œâ”€â”€ package.json â”œâ”€â”€ README.md â”œâ”€â”€ server.js â””â”€â”€ yarn-lock å°ˆæ¡ˆå®Œæˆå¾Œæ‰€æä¾›çš„ API ç«¯é»    Methods Urls Actions     POST /api/auth/signup è¨»å†Šæ–°ä½¿ç”¨è€…å¸³è™Ÿ   POST /api/auth/signin ä½¿ç”¨è€…å¸³è™Ÿç™»å…¥   GET /api/todos get all Todos   GET /api/todos/:id get Todo by id   GET /api/todos/done find all done Todos   GET /api/todos/title=[keyword] find all Todos whick title contains keyword   POST /api/todos add New Todo   PUT /api/todos/:id update Todo by id   DELETE /api/todos/:id remove Todo by id   DELETE /api/todos remove all Todos    è¨­ç½®å°ˆæ¡ˆç’°å¢ƒ $ node --version # æª¢æ¸¬ç’°å¢ƒå·²è£å¦¥ node.js (è‹¥å·²å®‰è£æœƒé¡¯ç¤ºç›®å‰å®‰è£çš„ç‰ˆæœ¬ï¼‰ v17.6.0 $ mkdir nodejs-webapi-jwt-mysql \u0026amp;\u0026amp; cd nodejs-webapi-jwt-mysql ï¼ƒ å»ºç«‹ä¸€å€‹å°ˆæ¡ˆç›®éŒ„ $ npm init\tï¼ƒ ç”£ç”Ÿä¸€å°ˆæ¡ˆè¨­å®šæª” package.json $ touch server.js\tï¼ƒ ç”£ç”Ÿä¸€å€‹æ–°æª”æ¡ˆ package.json é è¨­çš„å…§å®¹\n{ \u0026#34;name\u0026#34;: \u0026#34;nodejs-webapi-jwt-mysql\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Node.js + express + JWT + MySQL\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;server.js\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;test\u0026#34;: \u0026#34;echo \\\u0026#34;Error: no test specified\\\u0026#34; \u0026amp;\u0026amp; exit 1\u0026#34; }, \u0026#34;keywords\u0026#34;: [ \u0026#34;node.js\u0026#34;, \u0026#34;express\u0026#34;, \u0026#34;jwt\u0026#34;, \u0026#34;mysql\u0026#34; ], \u0026#34;author\u0026#34;: \u0026#34;calvin\u0026#34;, \u0026#34;license\u0026#34;: \u0026#34;ISC\u0026#34; } å®‰è£ç›¸ä¾å¥—ä»¶ $ yarn add express dotenv sequelize mysql2 # åŠ å…¥ç›¸ä¾å¥—ä»¶ $ yarn add --dev nodemon # åŠ å…¥é–‹ç™¼æ™‚æœŸç›¸ä¾å¥—ä»¶ $ yarn add crypto-js jsonwebtoken # ä½¿ç”¨è€…å¯†ç¢¼åŠ è§£å¯† / Json Web Token $ yarn add cors # å¯è·¨ç¶²åŸŸæä¾› Webapi service å»ºç«‹ git åˆå§‹ç‰ˆæœ¬\n$ git init $ echo 'node_modules/' \u0026gt; .gitignore # æ–°å¢ git ignore è¨­å®šæª”ï¼Œä¸¦è¨­å®š node_modules/ ç›®éŒ„ä¸åŠ å…¥ç‰ˆæ§ $ echo 'yarn.lock' \u0026gt;\u0026gt; .gitignore $ git add . \u0026amp;\u0026amp; git commit -m \u0026quot;Initial commit\u0026quot; å»ºç«‹ git åˆå§‹ç‰ˆæœ¬çš„è³‡è¨Š é–‹å•Ÿ VSCode\n$ code . è¨­å®šå°ˆæ¡ˆå•Ÿå‹•æŒ‡ä»¤ï¼ˆå¦‚ç¬¬ä¸ƒè¡Œçš„æŒ‡ä»¤è¨­å®šï¼‰ï¼Œç•¶è¼¸å…¥ npm start æ™‚ç³»çµ±è‡ªå‹•ä»¥ node ä¾†åŸ·è¡Œ server.js ç¨‹å¼ï¼Œä¸¦å³æ™‚ç›£æ¸¬ server.js æª”æ¡ˆæœ‰è®ŠåŒ–å­˜æª”æ™‚é¦¬ä¸Šé‡æ–°å•Ÿå‹• node server.js ä¾†åŸ·è¡Œè©²ç¨‹å¼ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  { \u0026#34;name\u0026#34;: \u0026#34;nodejs-webapi-jwt-mysql\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Node.js + exporess + JWT + MySQL\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;server.js\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;nodemon server.js\u0026#34;  }, \u0026#34;keywords\u0026#34;: [ \u0026#34;node.js\u0026#34;, \u0026#34;express\u0026#34;, \u0026#34;jwt\u0026#34;, \u0026#34;mysql\u0026#34; ], \u0026#34;author\u0026#34;: \u0026#34;calvin\u0026#34;, \u0026#34;license\u0026#34;: \u0026#34;ISC\u0026#34;, \u0026#34;dependencies\u0026#34;: { \u0026#34;dotenv\u0026#34;: \u0026#34;^16.0.1\u0026#34;, \u0026#34;express\u0026#34;: \u0026#34;^4.18.1\u0026#34;, \u0026#34;pg\u0026#34;: \u0026#34;^8.7.3\u0026#34;, \u0026#34;pg-hstore\u0026#34;: \u0026#34;^2.3.4\u0026#34;, \u0026#34;sequelize\u0026#34;: \u0026#34;^6.20.1\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;nodemon\u0026#34;: \u0026#34;^2.0.16\u0026#34; } }    åœ¨ server.js ä¸­åŠ å…¥æ­¤è¡Œç¨‹å¼ï¼Œä¸¦åœ¨ vscode Terminal ä¸­è¼¸å…¥ npm start\n console.log(\u0026#34;Hi NodeJS...\u0026#34;)\t é¡¯ç¤ºçµæœå¦‚ä¸‹\n \u0026gt; nodejs-webapi-jwt-mysql@1.0.0 start \u0026gt; nodemon server.js [nodemon] 2.0.18 [nodemon] to restart at any time, enter `rs` [nodemon] watching path(s): *.* [nodemon] watching extensions: js,mjs,json [nodemon] starting `node server.js` Hi NodeJS... [nodemon] clean exit - waiting for changes before restart å»ºç«‹ä¸€å€‹ Express æ‡‰ç”¨ç¨‹å¼  ä½¿ç”¨ä»¥ä¸‹ç¨‹å¼è¦†è“‹ server.js æª”æ¡ˆ\n const express = require(\u0026#34;express\u0026#34;); const app = express(); app.get(\u0026#39;/\u0026#39;, function (req, res) { res.send(\u0026#39;Hello World\u0026#39;) }); app.get(\u0026#34;/api/test\u0026#34;, (req, res) =\u0026gt; { console.log(\u0026#34;test is successful\u0026#34;); res.send(\u0026#34;test is successful\u0026#34;); }); const PORT = process.env.PORT || 5000; app.listen(PORT, () =\u0026gt; { console.log(`Backend server is running on port ${PORT}`); })  å­˜æª”å¾Œï¼Œé–‹å•Ÿ ç€è¦½å™¨ï¼Œè¼¸å…¥ localhost:5000/api/testï¼Œåœ¨ vscode terminal è¦–çª—ä¸­æœƒé¡¯ç¤ºï¼š\n Backend server is running on port 5000 test is successful ä½¿ç”¨ Node.js é€£çµ MySQL è‹¥ä½ é‚„æ²’æœ‰å®‰è£ MySQL å¯ä»¥åƒè€ƒé€™ç­†è¨˜å…ˆå°‡è³‡æ–™åº«ç®¡ç†ç³»çµ±å‚™å¦¥ ä½¿ç”¨ Docker åŸ·è¡Œ MySQL\nåœ¨ç¨‹å¼ä¸­ä½¿ç”¨äº† sequelize é€™å€‹å¥—ä»¶çš„åŠŸèƒ½ä¾†é€£çµ mysql è³‡æ–™åº«ï¼Œç›´æ¥é€é Sequelize constructor ä¾†çµ¦å®šé€£çµè³‡æ–™åº«çš„åƒæ•¸ï¼ŒåŒ…å« â€œè³‡æ–™åº«åç¨±â€œã€â€User Id\u0026quot;ã€\u0026ldquo;Password\u0026rdquo;ã€â€œHost Name\u0026quot;ã€\u0026ldquo;è³‡æ–™åº«é¡åˆ¥â€œ(dialect)ç­‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  const express = require(\u0026#34;express\u0026#34;); const app = express(); const { Sequelize } = require(\u0026#39;sequelize\u0026#39;); const sequelize = new Sequelize(\u0026#39;testdb\u0026#39;, \u0026#39;root\u0026#39;, \u0026#39;mysql@12345\u0026#39;, { host: \u0026#39;localhost\u0026#39;, dialect: \u0026#39;mysql\u0026#39; }); try { sequelize.authenticate(); console.log(\u0026#39;Connection has been established successfully.\u0026#39;); } catch (error) { console.error(\u0026#39;Unable to connect to the database:\u0026#39;, error); } app.get(\u0026#34;/api/test\u0026#34;, (req, res) =\u0026gt; { console.log(\u0026#34;test is successful\u0026#34;); res.send(\u0026#34;test is successful\u0026#34;); }); const PORT = process.env.PORT || 5000; app.listen(PORT, () =\u0026gt; { console.log(`Backend server is running on port ${PORT}`); })    å­˜æª”å¾Œï¼Œåœ¨ vscode terminal è¦–çª—ä¸­æœƒé¡¯ç¤ºï¼š\n Connection has been established successfully. Backend server is running on port 5000  è¡¨ç¤ºé€£çµæˆåŠŸã€‚\n å°ˆæ¡ˆç›®éŒ„ æ¥ä¸‹ä¾†è¦é™¸çºŒå®Œæˆç›¸é—œç¨‹å¼ï¼Œç‚ºä½¿ç¨‹å¼æ¶æ§‹æ›´é¡¯æ¸…æ™°ï¼Œå°ˆæ¡ˆç›®éŒ„è¦åŠƒå¦‚ä¸‹ï¼š\n./å°ˆæ¡ˆç›®éŒ„ â”œâ”€â”€ app/ # ç¨‹å¼ç›®éŒ„ â”‚ â”œâ”€â”€ config/ # è¨­ç½®é€£çµ MySQL è³‡æ–™åº«çš„åƒæ•¸ â”‚ â”œâ”€â”€ middleware/ â”‚ â”œâ”€â”€ models/ â”‚ â”œâ”€â”€ routes/ â”‚ â””â”€â”€ services/ # æ¥­å‹™é‚è¼¯ â”œâ”€â”€ node_modules/ â”œâ”€â”€ .env # ç¨‹å¼ä¸­çš„ç›¸é—œâ€œè¨­å®šå€¼â€ â”œâ”€â”€ .gitignore â”œâ”€â”€ package.json â”œâ”€â”€ README.md â”œâ”€â”€ server.js # ä¸»ç¨‹å¼ â””â”€â”€ yarn.loc å½ˆæ€§ç®¡ç†åƒæ•¸å€¼ ç®¡ç†ç¨‹å¼ä¸­çš„â€œè³‡æ–™åº«é€£çµè¨­å®šå€¼â€ åœ¨ app/config/ç›®éŒ„ä¸­æ–°å¢ä¸€æ”¯ db.config.js ç¨‹å¼å…§å®¹å¦‚ä¸‹ï¼š\nmodule.exports = { HOST: \u0026#34;localhost\u0026#34;, // Host Name  USER: \u0026#34;mysql\u0026#34;, // User Name  PASSWORD: \u0026#34;12345\u0026#34;, // Password  DB: \u0026#34;testdb\u0026#34;, // Database Name  dialect: \u0026#34;mysql\u0026#34;, // è³‡æ–™åº«é¡åˆ¥  pool: { max: 5, //ã€€é€£çµæ± ä¸­æœ€å¤§çš„ connection æ•¸  min: 0, acquire: 30000, //ã€€é€£çµ Timeout æ™‚é–“(æ¯«ç§’)  idle: 10000 //ã€€é€£çµè¢«é‡‹æ”¾çš„ idle æ™‚é–“(æ¯«ç§’)  } }; ç®¡ç†ç¨‹å¼ä¸­çš„â€œè¨­å®šå€¼â€ ä½¿ç”¨ dotenv å¥—ä»¶çš„åŠŸèƒ½ä¾†ç®¡ç†ç¨‹å¼ä¸­ç›¸é—œçš„è¨­å®šå€¼\n é¦–å…ˆåœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹å»ºç«‹ä¸€å€‹åç‚º \u0026ldquo;.env\u0026rdquo; çš„æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹ï¼š  JWT_SEC=Jason-Web-Token-Secret-key-jaslkdjfhjwkej01kd1954  åœ¨ç¨‹å¼ä¸­å…ˆåŒ¯å…¥ dotenv å¥—ä»¶(ç¬¬1è¡Œï¼‰ï¼Œå†â€œå•Ÿå‹•å®ƒâ€(ç¬¬2è¡Œï¼‰ï¼Œä½¿ç”¨æ™‚é€é â€œprocess.env.JWT_SEC\u0026rdquo; èªæ³•å–å¾— JWT_SEC çš„è¨­å®šå€¼ ç¬¬å››è¡Œç¨‹å¼ç¢¼ä¸­çš„ process.env.PORT ç‚ºç›¸åŒçš„åŸå‰‡å¯åœ¨ .evn æª”æ¡ˆä¸­åŠ å…¥ PORT çš„è¨­å®šå€¼èª¿æ•´  const dotenv = require(\u0026#34;dotenv\u0026#34;); dotenv.config(); // ... const PORT = process.env.PORT || 5000; // port é è¨­ç‚º 5000 ï¼Œä¸¦å¯ä»¥åœ¨ .env æª”æ¡ˆä¸­é€²è¡Œå®¢è£½åŒ– ï¼ˆå¦‚ï¼šPORTï¼5001ï¼‰ app.listen(PORT, () =\u0026gt; { console.log(`Backend server is running on port ${PORT}`); }) å®šç¾© Sequelize æ¨¡å‹ åœ¨ app/models/ç›®éŒ„ä¸­æ–°å¢ä¸€æ”¯ user.model.js ç¨‹å¼å…§å®¹å¦‚ä¸‹ï¼Œé€™å€‹è¨­å®šè³‡æ–™å¯æ­åˆ sequelize.sync() åŠŸèƒ½è‡ªå‹•åœ¨ MySQL è³‡æ–™åº«ä¸­å»ºç«‹ä¸€å€‹åç‚º users çš„è³‡æ–™è¡¨(table)ï¼Œå…±æœ‰ä¸‰å€‹çš†ç‚º string å‹æ…‹çš„æ¬„ä½ï¼Œåˆ†åˆ¥ç‚º usernameã€emailã€passwordã€‚\nmodule.exports = (sequelize, Sequelize) =\u0026gt; { const User = sequelize.define(\u0026#34;users\u0026#34;, { username: { type: Sequelize.STRING }, email: { type: Sequelize.STRING }, password: { type: Sequelize.STRING } }); return User; }; åŒæ™‚åœ¨ initial Sequelize å¾Œï¼Œæˆ‘å€‘ä¸éœ€è¦ç·¨å¯« CRUD å‡½æ•¸ï¼ŒSequelize æ”¯æŒæ‰€æœ‰é€™äº›å‡½æ•¸\n å»ºç«‹ä¸€å€‹æ–°çš„ user: create(object) é€é id æ‰¾åˆ°ä¸€å€‹ã€€user: findByPk(id) é€é email æ‰¾åˆ°ä¸€å€‹ã€€user: findOne({ where: { email: \u0026hellip; } }) å–å¾—æ‰€æœ‰ä½¿ç”¨è€…: findAll() é€é username æ‰¾åˆ°ç¬¦åˆçš„ã€€user: findAll({ where: { username: \u0026hellip; } })  åœ¨ app/models/ç›®éŒ„ä¸­æ–°å¢ä¸€æ”¯ role.model.js ç¨‹å¼å…§å®¹å¦‚ä¸‹\nmodule.exports = (sequelize, Sequelize) =\u0026gt; { const Role = sequelize.define(\u0026#34;roles\u0026#34;, { id: { type: Sequelize.INTEGER, primaryKey: true }, name: { type: Sequelize.STRING } }); return Role; }; åœ¨ app/models/ç›®éŒ„ä¸­æ–°å¢ä¸€æ”¯ role.model.js ç¨‹å¼å…§å®¹å¦‚ä¸‹\nmodule.exports = (sequelize, Sequelize) =\u0026gt; { const Role = sequelize.define(\u0026#34;roles\u0026#34;, { id: { type: Sequelize.INTEGER, primaryKey: true }, name: { type: Sequelize.STRING } }); return Role; }; åˆå§‹åŒ– Sequelize åœ¨ app/models/ç›®éŒ„ä¸­æ–°å¢ä¸€æ”¯ index.js ç¨‹å¼å…§å®¹å¦‚ä¸‹\nconst config = require(\u0026#34;../config/db.config.js\u0026#34;); // å¼•å…¥è³‡æ–™åº«é€£çµè¨­å®šæª” const Sequelize = require(\u0026#34;sequelize\u0026#34;); const sequelize = new Sequelize( // ç”±è³‡æ–™åº«é€£çµè¨­å®šæª”çš„è¨­å®šå€¼ä¾†å‚™ç½® Sequelize  config.DB, config.USER, config.PASSWORD, { host: config.HOST, dialect: config.dialect, operatorsAliases: 0, pool: { max: config.pool.max, min: config.pool.min, acquire: config.pool.acquire, idle: config.pool.idle } } ); const db = {}; db.Sequelize = Sequelize; db.sequelize = sequelize; db.user = require(\u0026#34;../models/user.model.js\u0026#34;)(sequelize, Sequelize); db.role = require(\u0026#34;../models/role.model.js\u0026#34;)(sequelize, Sequelize); // è¨­å®šå…©è³‡æ–™è¡¨çš„å°æ‡‰é—œä¿‚ï¼ˆå¤šå°å¤šï¼Œæ‰€ä»¥æœƒå¤šå‡ºä¸€å€‹æ–°çš„è¡¨ user_rolesï¼‰ // ä¸€å€‹ä½¿ç”¨è€…å¯èƒ½æœ‰å¤šå€‹è§’è‰² // ä¸€å€‹è§’è‰²ä¹Ÿå¯èƒ½æœ‰å¤šå€‹ä½¿ç”¨è€… db.role.belongsToMany(db.user, { through: \u0026#34;user_roles\u0026#34;, foreignKey: \u0026#34;roleId\u0026#34;, otherKey: \u0026#34;userId\u0026#34; }); db.user.belongsToMany(db.role, { through: \u0026#34;user_roles\u0026#34;, foreignKey: \u0026#34;userId\u0026#34;, otherKey: \u0026#34;roleId\u0026#34; }); db.ROLES = [\u0026#34;user\u0026#34;, \u0026#34;admin\u0026#34;]; module.exports = db; åŸ·è¡Œç¨‹å¼ç”£ç”Ÿè³‡æ–™è¡¨èˆ‡è³‡æ–™ åœ¨ server.js ä¸»ç¨‹å¼ä¸­åŠ å…¥ä»¥ä¸‹ç¨‹å¼ const db = require(\u0026#34;./app/models\u0026#34;); // å¼•å…¥ app/models/index.js åŒ¯å‡ºçš„ç¨‹å¼ç¢¼(å³ sequelize model å®šç¾©æª”) const Role = db.role; // å‘¼å« sync function å°‡æœƒä¾ model å®šç¾©å…§å®¹ç”£ç”Ÿè³‡æ–™è¡¨ï¼Œforce åƒæ•¸å€¼ç‚º true å°‡æœƒé‡å»ºå·²å­˜åœ¨çš„è³‡æ–™è¡¨ db.sequelize.sync({ force: true }).then(() =\u0026gt; { console.log(\u0026#39;Drop and Resync Database with { force: true }\u0026#39;); initial(); // ç”£ç”Ÿè³‡æ–™è¡¨å¾Œï¼Œå‘¼å« initial function ç‚º roles table æ–°å¢äºŒç­†åˆå§‹è³‡æ–™ }).catch((err) =\u0026gt; { console.log(err); }); const PORT = process.env.PORT || 5000; // port é è¨­ç‚º 5000 ï¼Œä¸¦å¯ä»¥åœ¨ .env æª”æ¡ˆä¸­é€²è¡Œå®¢è£½åŒ– ï¼ˆå¦‚ï¼šPORTï¼5001ï¼‰ app.listen(PORT, () =\u0026gt; { console.log(`Backend server is running on port ${PORT}`); }) // ç‚º roles table æ–°å¢äºŒç­†åˆå§‹è³‡æ–™ function initial() { Role.create({ id: 1, name: \u0026#34;user\u0026#34; }); Role.create({ id: 2, name: \u0026#34;admin\u0026#34; }); } åŸ·è¡Œç¨‹å¼ç”£ç”Ÿè³‡æ–™è¡¨ ç¨‹å¼åŸ·è¡ŒæˆåŠŸå¾Œå¯ä»¥æŸ¥çœ‹è³‡æ–™åº«å·²é †åˆ©ç”£ç”Ÿå››å€‹è³‡æ–™è¡¨ä»¥åŠ roles table ä¸­çš„äºŒç­†åˆå§‹è³‡æ–™\näº†è§£ Node.js è·¯ç”± å»ºç«‹ user.routes.js router file æ–°å¢ routes ç›®éŒ„ï¼Œåœ¨æ­¤ç›®éŒ„ä¸‹æ–°å¢ user.routes.js æª”æ¡ˆ\n routes/user.routes.js\n const router = require(\u0026#34;express\u0026#34;).Router(); router.get(\u0026#34;/usertest\u0026#34;, (req, res) =\u0026gt; { res.send(\u0026#34;user test is successful\u0026#34;); }); module.exports = router; åœ¨ server.js ç¨‹å¼ä¸­å…ˆåŒ¯å…¥ \u0026ldquo;./app/routes/user.routes\u0026rdquo; é€™å€‹ router è¨­å®šæª”ï¼Œå†é€é app.use èªæ³•ä¾†ä½¿ç”¨é€™å€‹ router(ç¬¬9è¡Œ)ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13  const express = require(\u0026#34;express\u0026#34;); const app = express(); const dotenv = require(\u0026#34;dotenv\u0026#34;); const userRoute = require(\u0026#34;./app/routes/user.routes\u0026#34;);  dotenv.config(); app.use(\u0026#34;/api/users\u0026#34;, userRoute);  app.listen(process.env.PORT || 5000, ()=\u0026gt;{ console.log(\u0026#34;Backend server is running...\u0026#34;); });   é–‹å•Ÿç€è¦§å™¨ï¼Œè¼¸å…¥ http:5000/api/users/usertestï¼Œç€è¦§å™¨å°‡å‘ˆç¾æˆåŠŸè¨Šæ¯\nuser test is successfull! ç‚º routes/user.routes.js å†æ–°å¢ä¸€å€‹ post method\n1 2 3 4 5 6 7 8 9 10 11  const router = require(\u0026#34;express\u0026#34;).Router(); router.get(\u0026#34;/usertest\u0026#34;, (req, res) =\u0026gt; { res.send(\u0026#34;user test is successful\u0026#34;); }); router.post(\u0026#34;/userposttest\u0026#34;, (req, res) =\u0026gt; { const username = req.body.username; res.send(\u0026#34;your username is: \u0026#34; + username) });  module.exports = router;   ä½¿ç”¨ postman ä¾†æ¸¬è©¦ postï¼Œçµæœå›å‚³çš„æ˜¯ Server Errorï¼ŒåŸå› æ˜¯ express é è¨­æ˜¯ä¸æ¥å— json æ ¼å¼çš„è³‡æ–™ã€‚\nåœ¨ server.js ç¨‹å¼ä¸­åŠ å…¥å¦‚ç¬¬ä¸€è¡Œçš„è¨­å®š\n1 2  app.use(express.json()); app.use(\u0026#34;/api/users\u0026#34;, userRoute);   è¨­å®šå®Œæˆå¾Œå°±å¯æ­£å¸¸äº†\nå»ºç«‹ auth.routes.js router file å°‡ä½¿ç”¨è€…è³‡æ–™è¨»å†Šå’Œè³‡ç”¨è€…å¸³è™Ÿé©—è­‰çš„æ©Ÿåˆ¶ç¨ç«‹åœ¨é€™å€‹ route file ä¸­ï¼Œè®“ç¨‹å¼çµæ§‹æ›´æ¸…æ™°ã€‚å…§å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10  // routes/auth.routes.js const router = require(\u0026#34;express\u0026#34;).Router(); const authService = require(\u0026#34;../services/auth.service\u0026#34;);  // å¸³è™Ÿè¨»å†Š router.post(\u0026#34;/signup\u0026#34;, authService.signup); // ç™»å…¥ router.post(\u0026#34;/signin\u0026#34;, authService.signin);  module.exports = router;    åœ¨ auth.routes.js route ç¨‹å¼ä¸­åŸºæ–¼ï½€é—œæ³¨é»åˆ†é›¢åŸå‰‡ï½€æŠŠï½€å•†æ¥­é‚è¼¯ï½€çš„éƒ¨ä»½å†åˆ†é›¢è‡³ services ä¸­ã€‚\n  åœ¨ ./app ç›®éŒ„ä¸‹æ–°å¢ services å­ç›®éŒ„ï¼Œä¸¦æ–°å¢ä¸€æ”¯ auth.service.js ç¨‹å¼ï¼Œå°‡ä½¿ç”¨è€…è¨»å†ŠåŠç™»å…¥é‚è¼¯æ”¾åœ¨é€™æ”¯ service ç¨‹å¼ä¸­ï¼Œå…§å®¹å¦‚ä¸‹ï¼š\n  åœ¨é€™æ”¯ç¨‹å¼ä¸­æœƒä½¿ç”¨åˆ°é¡å¤–çš„å¥—ä»¶ï¼Œå¿…é ˆå…ˆé€²è¡Œå®‰è£ã€‚$ yarn add crypto-js jsonwebtokenã€‚å…¶ä¸­ crypto-js ç”¨ä¾†é€²è¡Œä½¿ç”¨è€…å¯†ç¢¼åŠ è§£å¯†(ç¨‹å¼ç¬¬2ã€15ã€50ã€51è¡Œ)ï¼Œè€Œ jsonwebtoken å¥—ä»¶å‰‡æ˜¯æ”¯æ´ Json Web Token åŠŸèƒ½(ç¨‹å¼ç¬¬55è¡Œä½¿ç”¨ jwt.sign ç”£ç”Ÿåˆæ³• Token)ã€‚\n // auth.service.js const db = require(\u0026quot;../models\u0026quot;); const CryptoJS = require(\u0026quot;crypto-js\u0026quot;); const jwt = require(\u0026quot;jsonwebtoken\u0026quot;); const User = db.user; const Role = db.role; const Op = db.Sequelize.Op; const signup = (req, res) =\u0026gt; { // Save User to Database User.create({ username: req.body.username, email: req.body.email, password: CryptoJS.AES.encrypt(req.body.password, process.env.PASS_SEC).toString()ï¼Œ }).then(user =\u0026gt; { if (req.body.roles) { Role.findAll({ where: { name: { [Op.or]: req.body.roles } } }).then(roles =\u0026gt; { user.setRoles(roles).then(() =\u0026gt; { res.send({ message: \u0026quot;User registered successfully!\u0026quot; }); }); }); } else { // user role = 1 user.setRoles([1]).then(() =\u0026gt; { res.send({ message: \u0026quot;User registered successfully!\u0026quot; }); }); } }).catch(err =\u0026gt; { res.status(500).send({ message: err.message }); }); }; const signin = (req, res) =\u0026gt; { User.findOne({ where: { username: req.body.username } }).then(user =\u0026gt; { if (!user) { return res.status(404).send({ message: \u0026quot;Wrong Credentials.\u0026quot; }); } const hashedPassword = CryptoJS.AES.decrypt(user.password, process.env.PASS_SEC); const orginalPassword = hashedPassword.toString(CryptoJS.enc.Utf8); orginalPassword !== req.body.password \u0026amp;\u0026amp; res.status(401).json(\u0026quot;Wrong Credentials\u0026quot;); const accessToken = jwt.sign( {id: user.id}, process.env.JWT_SEC, { expiresIn: \u0026quot;3d\u0026quot; } ); var authorities = []; user.getRoles().then(roles =\u0026gt; { for (let i = 0; i \u0026lt; roles.length; i++) { authorities.push(\u0026quot;ROLE_\u0026quot; + roles[i].name.toUpperCase()); } res.status(200).send({ id: user.id, username: user.username, email: user.email, roles: authorities, accessToken: accessToken }); }); }).catch(err =\u0026gt; { res.status(500).send({ message: err.message }); }); }; module.exports = { signup, signin };  åœ¨ server.js å¼•ç”¨é€™å€‹æ–°çš„ router\n 1 2 3 4 5 6 7 8 9 10 11 12  // ... const userRoute = require(\u0026#34;./app/routes/user.routes\u0026#34;); const authRoute = require(\u0026#34;./app/routes/auth.routes\u0026#34;); app.use(express.json()); app.use(\u0026#34;/api/users\u0026#34;, userRoute); app.use(\u0026#34;/api/auth\u0026#34;, authRoute);  const PORT = process.env.PORT || 5000; // port é è¨­ç‚º 5000 ï¼Œä¸¦å¯ä»¥åœ¨ .env æª”æ¡ˆä¸­é€²è¡Œå®¢è£½åŒ– ï¼ˆå¦‚ï¼šPORTï¼5001ï¼‰ app.listen(PORT, () =\u0026gt; { console.log(`Backend server is running on port ${PORT}`); })   æ¸¬è©¦ä½¿ç”¨è€…è¨»å†ŠåŠç™»å…¥åŠŸèƒ½ ä½¿ç”¨ postman é€²è¡Œä½¿ç”¨è€…è¨»å†ŠåŠŸèƒ½æ¸¬è©¦\n è¨»å†ŠæˆåŠŸå¾Œï¼Œåœ¨è³‡æ–™åº«ä¸­å·²æ–°å¢ä¸€ç­†ä½¿ç”¨è€…è³‡æ–™\n ä½¿ç”¨ postman é€²è¡Œä½¿ç”¨è€…ç™»å…¥åŠŸèƒ½æ¸¬è©¦\n ç™»å…¥æˆåŠŸå¾Œæœƒå›å‚³ä¸€å€‹ Token\n åœ¨ Node.js ä¸­ä½¿ç”¨ JWT ä¾†é€²è¡Œ Token-Based çš„ä½¿ç”¨è€…æˆæ¬Šé©—è­‰ ä½¿ç”¨ jsonwebtokenå¥—ä»¶å¯ä»¥å¯¦ç¾ Token-base çš„èº«ä»½é©—è­‰èˆ‡æˆæ¬Šè®“æˆ‘å€‘çš„ API ç¨‹å¼æ›´å®‰å…¨\nJWT å¯¦ä½œçš„éç¨‹å¤§è‡´å¯ä»¥åˆ†æˆä¸‰å€‹éƒ¨åˆ†:\n åœ¨ç™»å…¥æˆåŠŸå¾Œç”£ç”Ÿåˆæ³•çš„ JWT Token æ¯æ¬¡æ”¶åˆ° request æ™‚é©—è­‰æ˜¯å¦ç‚ºåˆæ³•æœ‰æ•ˆçš„ JWT Token åœ¨ç‰¹å®š API Endpoint ä¸Šé©—è­‰æ˜¯å¦å¸¶æœ‰ â€œåˆæ³•æœ‰æ•ˆçš„ JWT Tokenâ€ï¼Œä»¥é”åˆ°æ¬Šé™ç®¡ç†çš„éœ€æ±‚  ç”£ç”Ÿåˆæ³• JWT åœ¨ç™»å…¥è­‰é©—ä¸­åŠ å…¥ç”£ç”Ÿ Token çš„é‚è¼¯ï¼Œåœ¨æª¢æ ¸ä½¿ç”¨è€…è¼¸å…¥çš„å¯†ç¢¼æ­£ç¢ºå¾Œï¼Œå°‡ User ID (_idé€™å€‹å…§éƒ¨ Key)é€™å€‹å±¬æ€§å€¼é€é sign function ä¾†ç”£ç”Ÿ access tokenï¼Œä¸¦å›å‚³çµ¦å‰ç«¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  const jwt = require(\u0026#34;jsonwebtoken\u0026#34;); // åŒ¯å…¥ JsonWebTokenå¥—ä»¶ //...  const accessToken = jwt.sign({  id: user._id }, process.env.JWT_SEC,  { expiresIn: \u0026#34;3d\u0026#34; } ); var authorities = []; user.getRoles().then(roles =\u0026gt; { for (let i = 0; i \u0026lt; roles.length; i++) { authorities.push(roles[i].name.toUpperCase()); } res.status(200).send({ id: user.id, username: user.username, email: user.email, roles: authorities, accessToken: accessToken }); });   encrypt function åƒæ•¸é™¤äº†è¦åŠ å¯†çš„å­—ä¸²å¤–ï¼Œéœ€è¦ä¸€å€‹åŠ å¯† Keyï¼Œç‚ºå½ˆæ€§èµ·è¦‹ï¼ŒæŠŠå®ƒå¯«åœ¨ .env æª”æ¡ˆ\n1 2  # .env JWT_SEC=Jason-Web-Token-Secret-key-thisisaprivatekey   ä½¿ç”¨ JWT ä¾†é©—è­‰ Token åœ¨å‰ç«¯å–å¾—åˆæ³•çš„ JWT Tokenå¾Œï¼Œä¾†çœ‹çœ‹ç•¶ä½¿ç”¨è€…åœ¨å‘¼å«å…¶ä»– API æ™‚ä¸€ä½µå›å‚³çš„ Tokenã€€å¦‚ä½•åœ¨ server ç«¯ä¾†é€²è¡Œé©—è­‰ã€‚\né¦–å…ˆï¼Œæˆ‘å€‘è¦åœ¨ app/ ç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹ middleware/ çš„å­ç›®éŒ„ï¼Œä¸¦åœ¨å…¶ä¸­æ–°å¢ä¸€å€‹åç‚º auth.jwt.js çš„ express Middlewareï¼Œç¨‹å¼å…§å®¹å¦‚ä¸‹\nåœ¨ç¨‹å¼ç¬¬14è¡Œä¸­ä½¿ç”¨ jsonwebtoken å¥—ä»¶çš„ verify function å°±æ˜¯ç”¨ä¾†é©—è­‰ request ä¸­çš„ Token æ˜¯å¦ç‚ºåˆæ³• Tokenã€‚é©—è­‰æ™‚ä¸€æ¨£éœ€è¦ï½€åŠ å¯† Keyï½€ä¾†ç•¶åƒæ•¸ã€‚\nåœ¨é€™ç¨‹å¼ä¸­é™¤äº†é©—è­‰ request ä¸­æ˜¯å¦æœ‰åˆæ³•çš„ Token å¤–ï¼Œé‚„æœ‰å…¶ä»–æˆæ¬Šæª¢æ ¸çš„é‚è¼¯ï¼šé©—è­‰æ˜¯å¦ç‚ºç®¡ç†è€…ã€é©—è­‰æ˜¯å¦ç‚ºç‰ˆä¸»ã€é©—è­‰æ˜¯å¦ç‚ºç®¡ç†è€…æˆ–æ˜¯ç‰ˆä¸»ç­‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47  const jwt = require(\u0026#34;jsonwebtoken\u0026#34;); const db = require(\u0026#34;../models\u0026#34;); const User = db.user; const verifyToken = (req, res, next) =\u0026gt; {  let authHeader = req.headers.authorization; if (!authHeader) { return res.status(403).send({ message: \u0026#34;Your are not authenticated!\u0026#34; }); } const token = authHeader.split(\u0026#34; \u0026#34;)[1]; jwt.verify(token, process.env.JWT_SEC, (err, decoded) =\u0026gt; {  if (err) { return res.status(401).send({ message: \u0026#34;Token is not valid!\u0026#34; }); } req.userId = decoded.id; next(); }); }; const isAdmin = (req, res, next) =\u0026gt; {  User.findByPk(req.userId).then(user =\u0026gt; { user.getRoles().then(roles =\u0026gt; { for (let i = 0; i \u0026lt; roles.length; i++) { if (roles[i].name === \u0026#34;admin\u0026#34;) { next(); return; } } res.status(403).send({ message: \u0026#34;Require Admin Role!\u0026#34; }); return; }); }); }; const authJwt = {  verifyToken: verifyToken, isAdmin: isAdmin }; module.exports = authJwt;   ç‚ºç°¡åŒ– middleware ä½¿ç”¨æ™‚çš„åŒ¯å…¥è·¯å¾‘ï¼Œæˆ‘å€‘åœ¨ã€€middleware/ çš„å­ç›®éŒ„ï¼Œå†æ–°å¢ä¸€å€‹åç‚º index.js çš„ç¨‹å¼ï¼Œå…§å®¹å¦‚ä¸‹\nconst authJwt = require(\u0026#34;./auth.jwt\u0026#34;); module.exports = { authJwt }; åœ¨ç‰¹å®š API Endpoint ä¸Šé©—è­‰æ˜¯å¦å¸¶æœ‰ â€œåˆæ³•æœ‰æ•ˆçš„ JWT Tokenâ€ åœ¨å‰é¢å®Œæˆäº†é©—è­‰ Token çš„ Middleware å¾Œï¼Œæˆ‘å€‘ä¾†çœ‹çœ‹å¦‚ä½•åœ¨ router ä¸­å¥—ç”¨é€™äº› middlewareï¼Œ æ‰“é–‹ã€€routers/userroutes.js ç¨‹å¼æª”ï¼Œä¸¦å°‡å…§å®¹ä¿®æ”¹å¦‚ä¸‹ï¼š\nåœ¨ç¨‹å¼ç¬¬ä¹è¡Œ post çš„ç¬¬äºŒå€‹åƒæ•¸ï¼ŒåŠ å…¥å‘¼å« authJwt.verifyToken é€™å€‹ middleware é©—è­‰ token çš„ functionã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  const router = require(\u0026#34;express\u0026#34;).Router(); const { authJwt } = require(\u0026#34;../middleware\u0026#34;);  router.get(\u0026#34;/usertest\u0026#34;, (req, res) =\u0026gt; { res.send(\u0026#34;user test is successful\u0026#34;); }); router.post(\u0026#34;/userposttest\u0026#34;, authJwt.verifyToken,  (req, res) =\u0026gt; { const username = req.body.username; res.send(\u0026#34;your username is: \u0026#34; + username) } ) module.exports = router;   å†æ¬¡åŸ·è¡Œå‰é¢å·²åŸ·è¡Œéçš„ Postman çš„ postusertest é€™å€‹ requestï¼Œçµæœé€™æ¬¡æœƒå›å‚³ ï½€æœªæˆæ¬Šï½€çš„è­¦å‘Šè¨Šæ¯ã€‚\nå°‡ç™»å…¥æˆåŠŸæ™‚å›å‚³çš„ tokenï¼ŒåŠ å…¥åˆ° Header ä¸­ï¼Œå†åŸ·è¡Œä¸€æ¬¡ postusertest å³å¯åŸ·è¡ŒæˆåŠŸã€‚\n è‹¥é€å‡º request ä¸­æœªåŒ…å« Token å‰‡æœƒå›å‚³â€œæœªè¢«æˆæ¬ŠåŸ·è¡Œæœ¬åŠŸèƒ½â€ã€‚\n  è‹¥é€å‡º request ä¸­åŒ…å«çš„æ˜¯ä¸åˆæ³•çš„ Token å‰‡æœƒå›å‚³â€œTokenä¸åˆæ³•â€œã€‚\n å®Œæˆ todo list ç›¸é—œåŠŸèƒ½ å®šç¾© todo è³‡æ–™æ¨¡å‹ åœ¨ app/models/ç›®éŒ„ä¸­æ–°å¢ä¸€æ”¯ todo.model.js ç¨‹å¼å…§å®¹å¦‚ä¸‹\nmodule.exports = (sequelize, Sequelize) =\u0026gt; { const Todo = sequelize.define(\u0026#34;todo\u0026#34;, { title: { type: Sequelize.STRING }, description: { type: Sequelize.STRING }, status: { type: Sequelize.BOOLEAN } }); return Todo; }; ä¿®æ”¹ app/models/index.js app/models/index.js ä¸­åŠ å…¥ db.todo = require(\u0026quot;../models/todo.model\u0026quot;)(sequelize, Sequelize);\nconst config = require(\u0026quot;../config/db.config\u0026quot;); const Sequelize = require(\u0026quot;sequelize\u0026quot;); const sequelize = new Sequelize( config.DB, config.USER, config.PASSWORD, { host: config.HOST, dialect: config.dialect, operatorsAliases: 0, pool: { max: config.pool.max, min: config.pool.min, acquire: config.pool.acquire, idle: config.pool.idle } } ); const db = {}; db.Sequelize = Sequelize; db.sequelize = sequelize; db.user = require(\u0026quot;../models/user.model\u0026quot;)(sequelize, Sequelize); db.role = require(\u0026quot;../models/role.model\u0026quot;)(sequelize, Sequelize); db.todo = require(\u0026quot;../models/todo.model\u0026quot;)(sequelize, Sequelize); db.role.belongsToMany(db.user, { through: \u0026quot;user_roles\u0026quot;, foreignKey: \u0026quot;roleId\u0026quot;, otherKey: \u0026quot;userId\u0026quot; }); db.user.belongsToMany(db.role, { through: \u0026quot;user_roles\u0026quot;, foreignKey: \u0026quot;userId\u0026quot;, otherKey: \u0026quot;roleId\u0026quot; }); db.ROLES = [\u0026quot;user\u0026quot;, \u0026quot;admin\u0026quot;]; module.exports = db; æ–°å¢ todo.service.js å°‡å¯¦éš›è®€å¯«è³‡æ–™çš„å‹•ä½œå¯«åœ¨ service ä¸­ã€‚\n//./app/services.todo.service.js const db = require(\u0026#34;../models\u0026#34;); const Todo = db.todo; const Op = db.Sequelize.Op; const create = (req, res) =\u0026gt; { if (!req.body.title) { res.status(400).send({ message: \u0026#34;å…§å®¹ä¸å¾—ç‚ºç©ºç™½ï¼\u0026#34; }); return; } // æ–°å¢ä¸€å€‹ Todo  const todo = { title: req.body.title, description: req.body.description, status: req.body.status ? req.body.status : false } // å°‡ todo å­˜å…¥è³‡æ–™åº«  Todo.create(todo) .then(data =\u0026gt; { res.send(data); }).catch(err =\u0026gt; { res.status(500).send({ message: err.message || \u0026#34;è³‡æ–™å­˜æª”æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼\u0026#34; }); }); } const findAll = (req, res) =\u0026gt; { const title = req.query.title; let condition = title ? { title: { [Op.like]: `%${title}%` } } : null; Todo.findAll({ where: condition }) .then(data =\u0026gt; { res.send(data); }) .catch(err =\u0026gt; { res.status(500).send({ message: err.message || \u0026#34;ç”±è³‡æ–™åº«è®€å– Todo è³‡æ–™æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼\u0026#34; }); }); }; const findOne = (req, res) =\u0026gt; { const id = req.params.id; Todo.findByPk(id) .then(data =\u0026gt; { if (data) { res.send(data) } else { res.status(400).send({ message: `ä½¿ç”¨id=${id}æœå°‹æ™‚æ‰¾åˆ°ä¸ Todo è³‡æ–™!` }) } }) .catch(err =\u0026gt; { res.status(500).send({ message: `ä½¿ç”¨id=${id}æœå°‹æ™‚æ‰¾åˆ°ä¸ Todo è³‡æ–™!` }); }); }; const update = (req, res) =\u0026gt; { const id = req.params.id; Todo.update(req.body, { where: { id: id } }) .then(num =\u0026gt; { if (num == 1) { res.send({ mdssage: \u0026#34;Todo æ›´æ–°å®Œæˆï¼\u0026#34; }); } else { res.status(500).send({ message: `ä½¿ç”¨ id= ${id}æ›´æ–°è³‡æ–™æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼` }); }; }) }; const deleteOne = (req, res) =\u0026gt; { const id = req.params.id; Todo.destroy({ where: { id: id } }) .then(num =\u0026gt; { if (num === 1) { res.send({ message: \u0026#34;Todo åˆªé™¤æˆåŠŸï¼\u0026#34; }) } else { res.send({ message: `ä½¿ç”¨ id= ${id}åˆªé™¤ Todo æ™‚æœªæ‰¾åˆ°ä»»ä½•è³‡æ–™ï¼` }) }; }) .catch(err =\u0026gt; { res.status(500).send({ message: `ä½¿ç”¨ id= ${id}åˆªé™¤ Todo æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼` }) }) }; const deleteAll = (req, res) =\u0026gt; { Todo.destroy({ where: {}, truncat: false }) .then(nums =\u0026gt; { res.send({ message: `${nums}Todo è³‡æ–™è¢«åˆªé™¤æˆåŠŸï¼` }) }) .catch(err =\u0026gt; { res.status(500).send({ message: err.message || \u0026#34;åˆªé™¤æ‰€æœ‰è³‡æ–™æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼\u0026#34; }) }) }; const findAllDoneTodos = (req, res) =\u0026gt; { Todo.findAll({ where: { status: true } }) .then(data =\u0026gt; { res.send(data); }) .catch(err =\u0026gt; { res.status(500).send({ message: err.message || \u0026#34;è®€å–è³‡æ–™æ™‚ç™¼ç”ŸéŒ¯èª¤ï¼\u0026#34; }) }) }; module.exports = { create, findAll, findOne, update, deleteAll, deleteOne, findAllDoneTodos }; æ–°å¢ todo.router.js // ./app/routers/todo.routes.js const router = require(\u0026#34;express\u0026#34;).Router(); const todo = require(\u0026#34;../services/todo.service\u0026#34;); router.post(\u0026#34;/\u0026#34;, todo.create); router.get(\u0026#34;/\u0026#34;, todo.findAll); router.get(\u0026#34;/done\u0026#34;, todo.findAllDoneTodos); router.get(\u0026#34;/:id\u0026#34;, todo.findOne); router.put(\u0026#34;/:id\u0026#34;, todo.update); router.delete(\u0026#34;/:id\u0026#34;, todo.deleteOne); router.delete(\u0026#34;/\u0026#34;, todo.deleteAll); module.exports = router; å°‡ todo router åŠ å…¥åˆ° service.js //... app.use(express.json()); const userRoute = require(\u0026#34;./app/routes/user.routes\u0026#34;); app.use(\u0026#34;/api/users\u0026#34;, userRoute); const todoRoute = require(\u0026#34;./app/routes/todo.routes\u0026#34;); app.use(\u0026#34;/api/todos\u0026#34;, todoRoute); const authRoute = require(\u0026#34;./app/routes/auth.routes\u0026#34;); app.use(\u0026#34;/api/auth\u0026#34;, authRoute); const PORT = process.env.PORT || 5000; app.listen(PORT, () =\u0026gt; { console.log(`Backend server is running on port ${PORT}`); }); //... åŸ·è¡Œæ¸¬è©¦ æ–°å¢ä¸€ç­† Todo æ‰¾å‡ºæ‰€æœ‰çš„ Todos æ‰¾å‡º title ä¸­æœ‰å«æŸå€‹ keyword çš„æ‰€æœ‰ Todos ä»¥ ID æ‰¾å‡º Todo æ›´æ–°æŸä¸€å€‹ Todo çš„ status æ¬„ä½ æŸ¥è©¢æ‰€æœ‰å·²ç¶“å®Œæˆçš„ Todos åˆªé™¤æŸä¸€å€‹ Todo åˆªé™¤æ‰€æœ‰çš„ Todos ä½¿ç”¨ middleware ä¾†é€²è¡Œæª¢æ ¸ä½¿ç”¨è€…è§’è‰² å°‡ app/routes/todo.routes.js å…§å®¹ä¿®æ”¹æˆå¦‚ä¸‹ï¼š\n ç¬¬äº”è¡Œï¼šcreate åŠŸèƒ½åŠ å…¥ authJwt.verifyToken middleware æª¢æ ¸ï¼Œå¿…é ˆæ˜¯å·²ç™»å…¥çš„ä½¿ç”¨è€…æ‰èƒ½åŸ·è¡Œ ç¬¬å…­è¡Œï¼šfindall åŠŸèƒ½åŠ å…¥ authJwt.verifyToken ä»¥åŠ authJwt.isAdmin middleware æª¢æ ¸ï¼Œå¿…é ˆæ˜¯å·²ç™»å…¥çš„ä½¿ç”¨è€…ä¸”å…·æœ‰ç®¡ç†è€…èº«ä»½æ‰èƒ½åŸ·è¡Œ  1 2 3 4 5 6 7 8 9 10 11 12 13  const router = require(\u0026#34;express\u0026#34;).Router(); const todo = require(\u0026#34;../services/todo.service\u0026#34;); const { authJwt } = require(\u0026#34;../middleware\u0026#34;); router.post(\u0026#34;/\u0026#34;, authJwt.verifyToken, todo.create); router.get(\u0026#34;/\u0026#34;, [authJwt.verifyToken, authJwt.isAdmin], todo.findAll); router.get(\u0026#34;/done\u0026#34;, todo.findAllDoneTodos); router.get(\u0026#34;/:id\u0026#34;, todo.findOne); router.put(\u0026#34;/:id\u0026#34;, todo.update); router.delete(\u0026#34;/:id\u0026#34;, todo.deleteOne); router.delete(\u0026#34;/\u0026#34;, todo.deleteAll); module.exports = router;   å†æ¬¡åŸ·è¡Œ create Todo API endpointï¼Œç™¼ç¾æœªç™»å…¥çš„ä½¿ç”¨è€…å·²ç„¡æ³•åŸ·è¡Œã€‚\nä»¥ä¸€èˆ¬ä½¿ç”¨è€…é€²è¡Œç™»å…¥\næ‰“é–‹ Postman å…ˆä½¿ç”¨å·²è¨»å†Šçš„ä½¿ç”¨è€…å¸³è™Ÿç™»å…¥ï¼Œå–å¾— token\nå†å°‡é€™å€‹ token (ä½¿è¡¨ä½¿ç”¨è€…æ˜¯ tom) åŠ å…¥ request authorization header ä¸­ï¼Œå†æ¬¡é€ å†æ¬¡åŸ·è¡Œ create Todo API endpointï¼Œçµæœå¯æ­£å¸¸æ–°å»ºä¸€å€‹ Todo\nå†ä»¥ç›¸åŒ token (ä»£è¡¨ä½¿ç”¨è€…æ˜¯ tom) é€ è¨ª get All Todos API endpoint ï¼Œçµæœå›å‚³ \u0026ldquo;é ˆç‚ºç®¡ç†è€…è§’è‰²è€…\u0026quot;æ‰èƒ½é€ è¨ªã€‚\nè¨»å†Šä¸€å€‹æ–°ä½¿ç”¨è€…ä¸”å…·å‚™æœ‰ admin è§’è‰²\næ”¹ç”¨æ–°è¨»å†Šçš„ä½¿ç”¨è€… Jeff ä¾†é‡æ–°ç™»å…¥ï¼Œä¸¦å–å¾—å›å‚³çš„ token\næ”¹æ¡æ­¤ token (ä»£è¡¨ä½¿ç”¨è€…æ˜¯ jeff) å†æ¬¡é€ è¨ª get All Todos API endpoint ï¼Œçµæœé¡¯ç¤ºå¯æ­£å¸¸é¡¯ç¤ºæ‰€æœ‰çš„ Todosã€‚\nä½¿ç”¨ middleware ä¾†é€²è¡Œå…¶ä»–è³‡æ–™æª¢æ ¸ ç¨‹å¼è‡³æ­¤å·²ç¶“å¯ä»¥é€é JWT ç›¸é—œåŠŸèƒ½æŸ¥æ ¸ä½¿ç”¨è€…æ˜¯å¦å·²æ­£ç¢ºç™»å…¥ç³»çµ±ã€æ˜¯ä»¥ä½•ç¨®èº«ä»½ï¼ˆè§’è‰²ï¼‰ç™»å…¥çš„ã€‚\næœ€å¾Œè¦å†å‘ˆç¾çš„æ˜¯ä½¿ç”¨ middleware åŠŸèƒ½ä¾†æŸ¥æ ¸å…¶ä»–è³‡æ–™æ­£ç¢ºæ€§ï¼Œå¦‚ï¼šä½¿ç”¨è€…è¨»å†Šæ™‚æ˜¯å¦ä½¿ç”¨äº†ç›¸åŒçš„ä½¿ç”¨è€…åç¨±ï¼Ÿæ˜¯å¦ email å·²ç¶“è¢«å…¶ä»–ä½¿ç”¨è€…ä½¿ç”¨éï¼Ÿ\nåœ¨ app/middleware ç›®éŒ„ä¸‹æ–°å¢ verify.signup.jsï¼Œå…§å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57  const db = require(\u0026#34;../models\u0026#34;); const ROLES = db.Roles; const User = db.user; checkDuplicateUsernameOrEmail = (req, res, next) =\u0026gt; {  // Username  User.findOne({ where: { username: req.body.username } }).then(user =\u0026gt; { if (user) { res.status(400).send({ message: \u0026#34;Failed! Username is already in use!\u0026#34; }); return; } // Email  User.findOne({ where: { email: req.body.email } }).then(user =\u0026gt; { if (user) { res.status(400).send({ message: \u0026#34;Failed! Email is already in use!\u0026#34; }); return; } next(); }); }); }; checkRolesExisted = (req, res, next) =\u0026gt; {  if (req.body.roles) { for (let i = 0; i \u0026lt; req.body.roles.length; i++) { if (!ROLES.includes(req.body.roles[i])) { res.status(400).send({ message: \u0026#34;Failed! Role does not exist = \u0026#34; + req.body.roles[i] }); return; } } } next(); }; const verifySignUp = { checkDuplicateUsernameOrEmail: checkDuplicateUsernameOrEmail, checkRolesExisted: checkRolesExisted }; module.exports = verifySignUp;   ä¿®æ”¹ app/middleware/index.js æª”æ¡ˆå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7  const authJwt = require(\u0026#34;./auth.jwt\u0026#34;); const verifySignUp = require(\u0026#34;./verify.signup\u0026#34;);  module.exports = { authJwt, verifySignUp };   å°‡æ–°çš„ middlewareã€€åŠŸèƒ½æ”¾å…¥åˆ° SignUp åŠŸèƒ½ä¸­ã€‚ æ‰“é–‹ã€€app/routes/auth.routes.js ç¨‹å¼æª”ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  const router = require(\u0026#34;express\u0026#34;).Router(); const authService = require(\u0026#34;../services/auth.service\u0026#34;); const { verifySignUp } = require(\u0026#34;../middleware\u0026#34;) // å¸³è™Ÿè¨»å†Š router.post(\u0026#34;/signup\u0026#34;, [ verifySignUp.checkDuplicateUsernameOrEmail, verifySignUp.checkRolesExisted ], authService.signup); // ç™»å…¥ router.post(\u0026#34;/signin\u0026#34;, authService.signin); module.exports = router;   å…ˆä½¿ç”¨å·²ç¶“è¢«è¨»å†Šéçš„ EMailä¾†é€²è¡Œæ¸¬è©¦ï¼Œçµæœå›å‚³ EMail å·²è¢«ä½¿ç”¨ã€‚\nå†ä½¿ç”¨å·²è¢«è¨»å†Šéçš„ UserName ä¾†é€²è¡Œè¨»å†Šï¼Œçµæœå›å‚³ï¼š\ncors é€™å€‹å¾Œç«¯å°ˆæ¡ˆé è¨ˆè¦çµ¦å‰ç«¯ Angular ä¾†ä½¿ç”¨ï¼Œè·¨åŸŸå­˜å–å•é¡Œå°±ç”¨ cors è¨­å®šä¾†è§£æ±ºã€‚\nå…ˆå®‰è£ cors å¥—ä»¶\n$ yarn add cors yarn add v1.22.19 [1/4] Resolving packages... [2/4] Fetching packages... [3/4] Linking dependencies... [4/4] Building fresh packages... success Saved lockfile. success Saved 2 new dependencies. info Direct dependencies â””â”€ cors@2.8.5 info All dependencies â”œâ”€ cors@2.8.5 â””â”€ object-assign@4.1.1 Done in 0.86s. æ‰“é–‹ server.jsï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11  const express = require(\u0026#34;express\u0026#34;); const dotenv = require(\u0026#34;dotenv\u0026#34;); const cors = require(\u0026#34;cors\u0026#34;); dotenv.config(); const app = express(); const corsOptions = { origin: \u0026#34;http://localhost:4200\u0026#34; }; app.use(cors(corsOptions)); //...   ","permalink":"https://calvinegs.github.io/posts/nodejs-restapi-mysql/","summary":"github Source code\nTechnology:\n NodeJs 17.6.0 Express 4.18.1 cors 2.8.5 crypto-js 4.1.1 # åŠ è§£å¯†å¥—ä»¶ jsonwebtoken 8.5.1 # Json Web Token çš„åŠŸèƒ½å¥—ä»¶ sequelize 6.20.2 # ORM å¥—ä»¶ mysql2 2.3.3 # MySQL client for Node.js MySQL 8.0 # ä½¿ç”¨çš„è³‡æ–™åº«  å°ˆæ¡ˆå®Œæˆå¾Œçš„æª”æ¡ˆçµæ§‹ ./å°ˆæ¡ˆç›®éŒ„ â”œâ”€â”€ app/ â”‚ â”œâ”€â”€ config/ â”‚ â”‚ â””â”€â”€ db.config.js â”‚ â”œâ”€â”€ middleware/ â”‚ â”‚ â”œâ”€â”€ auth.jwt.js â”‚ â”‚ â”œâ”€â”€ index.js â”‚ â”‚ â””â”€â”€ verify.signup.js â”‚ â”œâ”€â”€ models/ â”‚ â”‚ â”œâ”€â”€ index.","title":"ä½¿ç”¨ Node.js + express + MySQL å»ºç«‹ä¸€å€‹å¾Œç«¯æœå‹™ REST API"},{"content":"ä½¿ç”¨ Docker åŸ·è¡Œ MySQL å°é–‹ç™¼äººå“¡è€Œè¨€ï¼Œä½¿ç”¨å„å¼çš„è³‡æ–™åº«ç®¡ç†ç³»çµ±ä¾†ç•¶æ‡‰ç”¨ç¨‹å¼çš„å¾Œç«¯è³‡æ–™å­˜å–å±¤æ˜¯å®¶å¸¸ä¾¿é£¯ã€‚è‹¥å†è€ƒæ…®ä¸Šæ¯ç¨®è³‡æ–™åº«ç®¡ç†ç³»çµ±æœ‰ä¸åŒçš„ç‰ˆæœ¬ï¼Œè‚¯å®šæœƒè®“ä½ çš„é–‹ç™¼ç’°å¢ƒè² æ“”éé‡ã€éæ–¼è¤‡é›œã€‚ä½¿ç”¨ Docker ä¾†æ–¼é©ç•¶çš„æ™‚æ©Ÿé–‹å•Ÿé©ç”¨çš„è³‡æ–™åº«ç®¡ç†ç³»çµ±æœƒæ˜¯ä¸€å€‹ä¸éŒ¯çš„é¸æ“‡ã€‚\næœ¬ç¯‡ç­†è¨˜ç´€éŒ„ä½¿ç”¨ docker (docker compose) ä¾†å¿«é€Ÿçš„è¨­ç½® MySQLã€‚\næª¢æŸ¥æ˜¯å¦å·²å®‰è£äº† Docker (docker version) $ docker version Client: Docker Engine - Community Version: 20.10.17 API version: 1.41 Go version: go1.17.11 Git commit: 100c701 Built: Mon Jun 6 23:02:57 2022 OS/Arch: linux/amd64 Context: default Experimental: true Server: Docker Engine - Community Engine: Version: 20.10.17 API version: 1.41 (minimum version 1.12) Go version: go1.17.11 Git commit: a89b842 Built: Mon Jun 6 23:01:03 2022 OS/Arch: linux/amd64 Experimental: false containerd: Version: 1.6.6 GitCommit: 10c12954828e7c7c9b6e0ea9b0c02b01407d3ae1 runc: Version: 1.1.2 GitCommit: v1.1.2-0-ga916309 docker-init: Version: 0.19.0 GitCommit: de40ad0 æª¢æŸ¥æ˜¯å¦å·²å®‰è£äº† docker compose $ docker compose version Docker Compose version v2.6.0 ä½¿ç”¨ docker run ä¾†åŸ·è¡Œ MySQL 8.0 åƒæ•¸èªªæ˜ï¼š \u0026ndash;name: docker name \u0026ndash;rm: åœæ­¢æ™‚ç§»é™¤ container -v: å°‡ container ä¸­çš„ MySQL è³‡æ–™æ˜ å°„åˆ° local ç«¯çš„ç›®éŒ„(/tmp/mysqldb)ä¸­ -e: ç’°å¢ƒè®Šæ•¸è¨­å®š, MYSQL_ROOT_PASSWORD æŒ‡çš„æ˜¯ root å¸³è™Ÿçš„å¯†ç¢¼ï¼ŒMYSQL_DATABASE æŒ‡çš„æ˜¯è³‡æ–™åº«åç¨± -p: Port number\n$ mkdir /tmp/mysqldb $ docker run --name mysql-test --rm \\ -v /tmp/mysqldb:/var/lib/mysql \\ -e MYSQL_ROOT_PASSWORD=mysql@12345 \\ -e MYSQL_DATABASE=testing \\ -p 3306:3306 -it mysql:8.0 2022-06-17 04:45:36+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.29-1debian10 started. 2022-06-17 04:45:36+00:00 [Note] [Entrypoint]: Switching to dedicated user \u0026#39;mysql\u0026#39; 2022-06-17 04:45:36+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.29-1debian10 started. 2022-06-17T04:45:37.264452Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.0.29) starting as process 1 2022-06-17T04:45:37.270146Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started. 2022-06-17T04:45:37.445525Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended. 2022-06-17T04:45:37.644757Z 0 [Warning] [MY-010068] [Server] CA certificate ca.pem is self signed. 2022-06-17T04:45:37.644831Z 0 [System] [MY-013602] [Server] Channel mysql_main configured to support TLS. Encrypted connections are now supported for this channel. 2022-06-17T04:45:37.646485Z 0 [Warning] [MY-011810] [Server] Insecure configuration for --pid-file: Location \u0026#39;/var/run/mysqld\u0026#39; in the path is accessible to all OS users. Consider choosing a different directory. 2022-06-17T04:45:37.667321Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections. Version: \u0026#39;8.0.29\u0026#39; socket: \u0026#39;/var/run/mysqld/mysqld.sock\u0026#39; port: 3306 MySQL Community Server - GPL. 2022-06-17T04:45:37.667312Z 0 [System] [MY-011323] [Server] X Plugin ready for connections. Bind-address: \u0026#39;::\u0026#39; port: 33060, socket: /var/run/mysqld/mysqlx.sock æŸ¥çœ‹ docker åŸ·è¡Œçš„æƒ…æ³ $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 986d25a3e618 mysql:8.0 \u0026#34;docker-entrypoint.sâ€¦\u0026#34; 37 seconds ago Up 36 seconds 0.0.0.0:3306-\u0026gt;3306/tcp, :::3306-\u0026gt;3306/tcp, 33060/tcp mysql-tes æŸ¥çœ‹ local MySQL è³‡æ–™åº«ç›®éŒ„ (/tmp/mysqldb) $ lm /tmp/mysqldb/ ç¸½ç”¨é‡ 198088 drwxrwxr-x 7 systemd-coredump egs 4096 å…­ 17 15:45 . drwxrwxrwt 26 root root 12288 å…­ 17 15:45 .. -rw-r----- 1 systemd-coredump systemd-coredump 56 å…­ 17 15:45 auto.cnf -rw-r----- 1 systemd-coredump systemd-coredump 3117132 å…­ 17 15:45 binlog.000001 -rw-r----- 1 systemd-coredump systemd-coredump 157 å…­ 17 15:45 binlog.000002 -rw-r----- 1 systemd-coredump systemd-coredump 32 å…­ 17 15:45 binlog.index -rw------- 1 systemd-coredump systemd-coredump 1680 å…­ 17 15:45 ca-key.pem -rw-r--r-- 1 systemd-coredump systemd-coredump 1112 å…­ 17 15:45 ca.pem -rw-r--r-- 1 systemd-coredump systemd-coredump 1112 å…­ 17 15:45 client-cert.pem -rw------- 1 systemd-coredump systemd-coredump 1680 å…­ 17 15:45 client-key.pem -rw-r----- 1 systemd-coredump systemd-coredump 1382 å…­ 17 15:45 d7ac1e06b7cb.err -rw-r----- 1 systemd-coredump systemd-coredump 196608 å…­ 17 15:45 \u0026#39;#ib_16384_0.dblwr\u0026#39; -rw-r----- 1 systemd-coredump systemd-coredump 8585216 å…­ 17 15:45 \u0026#39;#ib_16384_1.dblwr\u0026#39; -rw-r----- 1 systemd-coredump systemd-coredump 5683 å…­ 17 15:45 ib_buffer_pool -rw-r----- 1 systemd-coredump systemd-coredump 12582912 å…­ 17 15:45 ibdata1 -rw-r----- 1 systemd-coredump systemd-coredump 50331648 å…­ 17 15:45 ib_logfile0 -rw-r----- 1 systemd-coredump systemd-coredump 50331648 å…­ 17 15:45 ib_logfile1 -rw-r----- 1 systemd-coredump systemd-coredump 12582912 å…­ 17 15:45 ibtmp1 drwxr-x--- 2 systemd-coredump systemd-coredump 4096 å…­ 17 15:45 \u0026#39;#innodb_temp\u0026#39; drwxr-x--- 2 systemd-coredump systemd-coredump 4096 å…­ 17 15:45 mysql -rw-r----- 1 systemd-coredump systemd-coredump 31457280 å…­ 17 15:45 mysql.ibd drwxr-x--- 2 systemd-coredump systemd-coredump 4096 å…­ 17 15:45 performance_schema -rw------- 1 systemd-coredump systemd-coredump 1680 å…­ 17 15:45 private_key.pem -rw-r--r-- 1 systemd-coredump systemd-coredump 452 å…­ 17 15:45 public_key.pem -rw-r--r-- 1 systemd-coredump systemd-coredump 1112 å…­ 17 15:45 server-cert.pem -rw------- 1 systemd-coredump systemd-coredump 1676 å…­ 17 15:45 server-key.pem drwxr-x--- 2 systemd-coredump systemd-coredump 4096 å…­ 17 15:45 sys drwxr-x--- 2 systemd-coredump systemd-coredump 4096 å…­ 17 15:45 testing -rw-r----- 1 systemd-coredump systemd-coredump 16777216 å…­ 17 15:45 undo_001 -rw-r----- 1 systemd-coredump systemd-coredump 16777216 å…­ 17 15:45 undo_002 ä½¿ç”¨ dbeaver-cd é€£çµåˆ° MySQL é–‹å•Ÿ dbeaver-cd ç¨‹å¼ï¼ŒæŒ‰ä¸‹ ï½€New Database Connection` æŒ‰éˆ•\né–‹å§‹è¨­ç½®é€£ç·šè³‡æ–™è¨­å®šï¼Œé¸æ“‡è³‡æ–™åº« - MySQL æŒ‰ä¸‹ ï½€Next`\nè¼¸å…¥ç›¸é—œè³‡è¨Šï¼Œå¦‚ Database nameã€Usernameã€Password\u0026hellip;ç­‰ï¼ŒæŒ‰ä¸‹ï½€Test Connectiono\u0026hellip;ï½€ä¾†æ¸¬è©¦è¨­å®šæ˜¯å¦æˆåŠŸã€‚\nè‹¥å‡ºç¾ä»¥ä¸‹éŒ¯èª¤,è«‹å›åˆ°è¨­ç½®ç•«é¢çš„ \u0026ldquo;Driver properties\u0026rdquo; é ç°½ä¸­å»ä¿®æ”¹ \u0026ldquo;allowPublicKeyRetrieval\u0026rdquo; çš„å€¼ã€‚\nå°‡\u0026quot;allowPublicKeyRetrieval\u0026quot; çš„å€¼æ”¹æˆ Trueã€‚æŒ‰ä¸‹ \u0026ldquo;Finish\u0026rdquo;ï¼Œå›åˆ°è¨­ç½®ä¸»é é¢ï¼Œå†æŒ‰ä¸‹ Test Connection æ¸¬è©¦ä¸€æ¬¡ã€‚\nè¨­å®šç„¡èª¤æœƒé¡¯ç¤º ï½€å·²é€£çµçš„è¨Šæ¯è¦–çª—ï½€ã€‚æŒ‰ä¸‹ï½€OKï½€å›åˆ°è¨­ç½®ç•«é¢ï¼Œå†æŒ‰ä¸‹ \u0026ldquo;Finish\u0026rdquo; å³å¯é€²å…¥ DBeaver è³‡æ–™åº«ç®¡ç†åŠŸèƒ½ä¸­ã€‚\nä½¿ç”¨ docker compose ä¾†åŸ·è¡Œ MySQL 8.0 å»ºç½®å°ˆæ¡ˆç›®éŒ„çµæ§‹ $ mkdir mysql \u0026amp;\u0026amp; cd mysql $ touch docker-compose.yml README.md $ mkdir sql $ touch ./sql/initdb.sql ./mysql â”œâ”€â”€ docker-compose.yml â”œâ”€â”€ README.md â””â”€â”€ sql â””â”€â”€ initdb.sql å»ºç«‹ docker-compose.yml åœ¨é€™å€‹ compse command file ä¸­ä¸€å€‹ services: dbï¼Œç”¨ä¾†ä¸‹è¼‰ä¸¦å•Ÿå‹• MySQLã€‚æŒ‡ä»¤èˆ‡èªªæ˜å¦‚ä¸‹\nversion: \u0026#39;3.8\u0026#39; services: db: container_name: mysql_db  # container name image: mysql:8.0  # image name cap_add: # å°‡ã€€cap_addã€€è¨­å®šç‚º SYS_NICEæœƒæŠ‘åˆ¶ä¸€äº›ç„¡ç”¨çš„éŒ¯èª¤æ¶ˆæ¯ - SYS_NICE restart: always # ç•¶ç™¼ç”Ÿç³»çµ±éŒ¯èª¤æ™‚æ°¸é éƒ½æœƒé‡å•Ÿ environment: - MYSQL_DATABASE=testdb  # é è¨­è³‡æ–™åº«åç¨± - MYSQL_ROOT_PASSWORD=mysql@12345 # root å¯†ç¢¼ ports: - \u0026#39;3306:3306\u0026#39; volumes: - /tmp/mysqldb:/var/lib/mysql # å°‡ local /tmp/mysqldb æ˜ å°„æˆ MySQL å¯¦éš›è³‡æ–™åº«æª”æ¡ˆ #- db:/var/lib/mysql # è‹¥ä»¥æ­¤èªæ³•å°‡å¯æ­é…ä¸‹é¢ volumes çš„é¡å¤–åƒæ•¸ä¾†æŒ‡å®šå¯¦éš›è³‡æ–™åº«æª”æ¡ˆå­˜æ”¾çš„ä½ç½®ï¼Œé è¨­æ˜¯ /var/lib/docker/volumes/mysqldb/_data - ./sql/init.sql:/docker-entrypoint-initdb.d/init.sql # åœ¨ local ç›®éŒ„ä¸­å¯ç½®å…¥ç›¸é—œçš„ sql åˆ°init.sqlæª”æ¡ˆä¸­ä¾†é€²è¡Œè³‡æ–™åº«è³‡æ–™ initial çš„å‹•ä½œã€‚ #volumes: # db: # driver: local åŸ·è¡Œ docker compose ä¸Šè¿°çš„ç›®éŒ„èˆ‡æª”æ¡ˆå…§å®¹æº–å‚™å®Œæˆå¾Œï¼Œåœ¨èˆ‡ docker-compose.yml çš„ç›¸åŒç›®éŒ„ä¸­åŸ·è¡Œ docker compose upä¾†å•Ÿå‹• db Servicesï¼Œå•Ÿå‹•æˆåŠŸå¾Œé–‹å•Ÿå¦ä¸€å€‹ terminal ä½¿ç”¨ ï½€$ docker psï½€ æŒ‡ä»¤æŸ¥çœ‹å®¹å™¨å•Ÿå‹•ç‹€æ³\n$ docker compose up # ... â ¿ Container mysql_db Created 0.0s Attaching to mysql_db mysql_db | 2022-06-17 08:23:58+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.29-1debian10 started. mysql_db | 2022-06-17 08:23:58+00:00 [Note] [Entrypoint]: Switching to dedicated user \u0026#39;mysql\u0026#39; mysql_db | 2022-06-17 08:23:58+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.29-1debian10 started. mysql_db | 2022-06-17 08:23:58+00:00 [Note] [Entrypoint]: Initializing database files mysql_db | 2022-06-17T08:23:58.480385Z 0 [System] [MY-013169] [Server] /usr/sbin/mysqld (mysqld 8.0.29) initializing of server in progress as process 43 mysql_db | 2022-06-17T08:23:58.486258Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started. mysql_db | 2022-06-17T08:23:58.797788Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended. mysql_db | 2022-06-17T08:23:59.921507Z 6 [Warning] [MY-010453] [Server] root@localhost is created with an empty password ! Please consider switching off the --initialize-insecure option. mysql_db | 2022-06-17 08:24:01+00:00 [Note] [Entrypoint]: Database files initialized mysql_db | 2022-06-17 08:24:01+00:00 [Note] [Entrypoint]: Starting temporary server mysql_db | 2022-06-17T08:24:02.084039Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.0.29) starting as process 92 mysql_db | 2022-06-17T08:24:02.107066Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started. mysql_db | 2022-06-17T08:24:02.294283Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended. mysql_db | 2022-06-17T08:24:02.522288Z 0 [Warning] [MY-010068] [Server] CA certificate ca.pem is self signed. mysql_db | 2022-06-17T08:24:02.522366Z 0 [System] [MY-013602] [Server] Channel mysql_main configured to support TLS. Encrypted connections are now supported for this channel. mysql_db | 2022-06-17T08:24:02.524085Z 0 [Warning] [MY-011810] [Server] Insecure configuration for --pid-file: Location \u0026#39;/var/run/mysqld\u0026#39; in the path is accessible to all OS users. Consider choosing a different directory. mysql_db | 2022-06-17T08:24:02.545272Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections. Version: \u0026#39;8.0.29\u0026#39; socket: \u0026#39;/var/run/mysqld/mysqld.sock\u0026#39; port: 0 MySQL Community Server - GPL. mysql_db | 2022-06-17T08:24:02.545306Z 0 [System] [MY-011323] [Server] X Plugin ready for connections. Socket: /var/run/mysqld/mysqlx.sock mysql_db | 2022-06-17 08:24:02+00:00 [Note] [Entrypoint]: Temporary server started. mysql_db | Warning: Unable to load \u0026#39;/usr/share/zoneinfo/iso3166.tab\u0026#39; as time zone. Skipping it. mysql_db | Warning: Unable to load \u0026#39;/usr/share/zoneinfo/leap-seconds.list\u0026#39; as time zone. Skipping it. mysql_db | Warning: Unable to load \u0026#39;/usr/share/zoneinfo/zone.tab\u0026#39; as time zone. Skipping it. mysql_db | Warning: Unable to load \u0026#39;/usr/share/zoneinfo/zone1970.tab\u0026#39; as time zone. Skipping it. mysql_db | 2022-06-17 08:24:04+00:00 [Note] [Entrypoint]: Creating database testdb mysql_db | mysql_db | 2022-06-17 08:24:04+00:00 [Note] [Entrypoint]: /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/init.sql mysql_db | ERROR: Can\u0026#39;t initialize batch_readline - may be the input source is a directory or a block device. mysql_db exited with code 1 mysql_db | 2022-06-17 08:24:05+00:00 [Note] [Entrypoint]: Switching to dedicated user \u0026#39;mysql\u0026#39; mysql_db | 2022-06-17 08:24:05+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.29-1debian10 started. mysql_db | 2022-06-17T08:24:05.567299Z 0 [System] [MY-010116] [Server] /usr/sbin/mysqld (mysqld 8.0.29) starting as process 1 mysql_db | 2022-06-17T08:24:05.573086Z 1 [System] [MY-013576] [InnoDB] InnoDB initialization has started. mysql_db | 2022-06-17T08:24:06.719902Z 1 [System] [MY-013577] [InnoDB] InnoDB initialization has ended. mysql_db | 2022-06-17T08:24:06.853179Z 0 [System] [MY-010229] [Server] Starting XA crash recovery... mysql_db | 2022-06-17T08:24:06.860721Z 0 [System] [MY-010232] [Server] XA crash recovery finished. mysql_db | 2022-06-17T08:24:06.953529Z 0 [Warning] [MY-010068] [Server] CA certificate ca.pem is self signed. mysql_db | 2022-06-17T08:24:06.953559Z 0 [System] [MY-013602] [Server] Channel mysql_main configured to support TLS. Encrypted connections are now supported for this channel. mysql_db | 2022-06-17T08:24:06.954832Z 0 [Warning] [MY-011810] [Server] Insecure configuration for --pid-file: Location \u0026#39;/var/run/mysqld\u0026#39; in the path is accessible to all OS users. Consider choosing a different directory. mysql_db | 2022-06-17T08:24:06.973370Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections. Version: \u0026#39;8.0.29\u0026#39; socket: \u0026#39;/var/run/mysqld/mysqld.sock\u0026#39; port: 3306 MySQL Community Server - GPL. mysql_db | 2022-06-17T08:24:06.973520Z 0 [System] [MY-011323] [Server] X Plugin ready for connections. Bind-address: \u0026#39;::\u0026#39; port: 33060, socket: /var/run/mysqld/mysqlx.sock æŸ¥çœ‹ docker åŸ·è¡Œçš„æƒ…æ³ $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES d081aaf01c4e mysql:8.0 \u0026#34;docker-entrypoint.sâ€¦\u0026#34; About a minute ago Up About a minute 0.0.0.0:3306-\u0026gt;3306/tcp, :::3306-\u0026gt;3306/tcp, 33060/tcp mysql_db ä½¿ç”¨ dbeaver-cd é€£çµåˆ° MySQL DB é–‹å•Ÿ dbeaver-cd ç¨‹å¼ï¼ŒæŒ‰ä¸‹ ï½€New Database Connection` æŒ‰éˆ•\né–‹å§‹è¨­ç½®é€£ç·šè³‡æ–™è¨­å®šï¼Œé¸æ“‡è³‡æ–™åº« - MySQL æŒ‰ä¸‹ ï½€Next`\nè¼¸å…¥ç›¸é—œè³‡è¨Šï¼Œå¦‚ Database nameã€Usernameã€Password\u0026hellip;ç­‰ï¼ŒæŒ‰ä¸‹ï½€Test Connectiono\u0026hellip;ï½€ä¾†æ¸¬è©¦è¨­å®šæ˜¯å¦æˆåŠŸã€‚\nè³‡æ–™åº«çš„å¯¦éš›æª”æ¡ˆå­˜æ”¾åœ¨ Local çš„ /tmp/mysqldb ç›®éŒ„ä¸­ ä½¿ç”¨ä½œæ¥­ç³»çµ±ç®¡ç†è€…æ¬Šé™ä¾†æŸ¥çœ‹æ­¤ç›®éŒ„\n$ ls -al /tmp/mysqldb/ ç¸½ç”¨é‡ 198084 drwxrwxr-x 7 systemd-coredump egs 4096 å…­ 17 16:24 . drwxrwxrwt 26 root root 12288 å…­ 17 16:31 .. -rw-r----- 1 systemd-coredump systemd-coredump 56 å…­ 17 16:23 auto.cnf -rw-r----- 1 systemd-coredump systemd-coredump 3117106 å…­ 17 16:24 binlog.000001 -rw-r----- 1 systemd-coredump systemd-coredump 157 å…­ 17 16:24 binlog.000002 -rw-r----- 1 systemd-coredump systemd-coredump 32 å…­ 17 16:24 binlog.index -rw------- 1 systemd-coredump systemd-coredump 1676 å…­ 17 16:23 ca-key.pem -rw-r--r-- 1 systemd-coredump systemd-coredump 1112 å…­ 17 16:23 ca.pem -rw-r--r-- 1 systemd-coredump systemd-coredump 1112 å…­ 17 16:23 client-cert.pem -rw------- 1 systemd-coredump systemd-coredump 1680 å…­ 17 16:23 client-key.pem -rw-r----- 1 systemd-coredump systemd-coredump 196608 å…­ 17 16:26 \u0026#39;#ib_16384_0.dblwr\u0026#39; -rw-r----- 1 systemd-coredump systemd-coredump 8585216 å…­ 17 16:23 \u0026#39;#ib_16384_1.dblwr\u0026#39; -rw-r----- 1 systemd-coredump systemd-coredump 5954 å…­ 17 16:24 ib_buffer_pool -rw-r----- 1 systemd-coredump systemd-coredump 12582912 å…­ 17 16:24 ibdata1 -rw-r----- 1 systemd-coredump systemd-coredump 50331648 å…­ 17 16:26 ib_logfile0 -rw-r----- 1 systemd-coredump systemd-coredump 50331648 å…­ 17 16:23 ib_logfile1 -rw-r----- 1 systemd-coredump systemd-coredump 12582912 å…­ 17 16:24 ibtmp1 drwxr-x--- 2 systemd-coredump systemd-coredump 4096 å…­ 17 16:24 \u0026#39;#innodb_temp\u0026#39; drwxr-x--- 2 systemd-coredump systemd-coredump 4096 å…­ 17 16:23 mysql -rw-r----- 1 systemd-coredump systemd-coredump 31457280 å…­ 17 16:24 mysql.ibd drwxr-x--- 2 systemd-coredump systemd-coredump 4096 å…­ 17 16:23 performance_schema -rw------- 1 systemd-coredump systemd-coredump 1680 å…­ 17 16:23 private_key.pem -rw-r--r-- 1 systemd-coredump systemd-coredump 452 å…­ 17 16:23 public_key.pem -rw-r--r-- 1 systemd-coredump systemd-coredump 1112 å…­ 17 16:23 server-cert.pem -rw------- 1 systemd-coredump systemd-coredump 1676 å…­ 17 16:23 server-key.pem drwxr-x--- 2 systemd-coredump systemd-coredump 4096 å…­ 17 16:24 sys drwxr-x--- 2 systemd-coredump systemd-coredump 4096 å…­ 17 16:24 testdb -rw-r----- 1 systemd-coredump systemd-coredump 16777216 å…­ 17 16:26 undo_001 -rw-r----- 1 systemd-coredump systemd-coredump 16777216 å…­ 17 16:26 undo_002 ","permalink":"https://calvinegs.github.io/posts/docker-mysql/","summary":"ä½¿ç”¨ Docker åŸ·è¡Œ MySQL å°é–‹ç™¼äººå“¡è€Œè¨€ï¼Œä½¿ç”¨å„å¼çš„è³‡æ–™åº«ç®¡ç†ç³»çµ±ä¾†ç•¶æ‡‰ç”¨ç¨‹å¼çš„å¾Œç«¯è³‡æ–™å­˜å–å±¤æ˜¯å®¶å¸¸ä¾¿é£¯ã€‚è‹¥å†è€ƒæ…®ä¸Šæ¯ç¨®è³‡æ–™åº«ç®¡ç†ç³»çµ±æœ‰ä¸åŒçš„ç‰ˆæœ¬ï¼Œè‚¯å®šæœƒè®“ä½ çš„é–‹ç™¼ç’°å¢ƒè² æ“”éé‡ã€éæ–¼è¤‡é›œã€‚ä½¿ç”¨ Docker ä¾†æ–¼é©ç•¶çš„æ™‚æ©Ÿé–‹å•Ÿé©ç”¨çš„è³‡æ–™åº«ç®¡ç†ç³»çµ±æœƒæ˜¯ä¸€å€‹ä¸éŒ¯çš„é¸æ“‡ã€‚\næœ¬ç¯‡ç­†è¨˜ç´€éŒ„ä½¿ç”¨ docker (docker compose) ä¾†å¿«é€Ÿçš„è¨­ç½® MySQLã€‚\næª¢æŸ¥æ˜¯å¦å·²å®‰è£äº† Docker (docker version) $ docker version Client: Docker Engine - Community Version: 20.10.17 API version: 1.41 Go version: go1.17.11 Git commit: 100c701 Built: Mon Jun 6 23:02:57 2022 OS/Arch: linux/amd64 Context: default Experimental: true Server: Docker Engine - Community Engine: Version: 20.10.17 API version: 1.41 (minimum version 1.12) Go version: go1.17.11 Git commit: a89b842 Built: Mon Jun 6 23:01:03 2022 OS/Arch: linux/amd64 Experimental: false containerd: Version: 1.","title":"ä½¿ç”¨ Docker åŸ·è¡Œ MySQL"},{"content":"github Source code\næœ¬æ–‡è¨˜éŒ„å¦‚ä½•ä¸€æ­¥æ­¥å¾ç„¡åˆ°æœ‰ä½¿ç”¨ Angular 14 Reactive Form è¡¨å–®é©—è­‰ èˆ‡ Bootstrap 5 å»ºç«‹ ä¸€å€‹ä½¿ç”¨è€…è³‡æ–™è¨»å†Šã€ç™»å…¥çš„è¡¨å–®åŠŸèƒ½é€£çµåˆ°å¾Œç«¯ API (node+postgresSQL)ï¼Œåœ¨é€™äº›è¡¨å–®ä¸­æŒ‰ä¸‹é€å‡ºæ™‚æœƒè‡ªå‹•æª¢æ ¸ä½¿ç”¨è€…æ‰€è¼¸å…¥çš„è³‡æ–™æ˜¯å¦åˆä¹ç¨‹å¼ä¸­æ‰€è¨­å®šçš„æª¢æ ¸é‚è¼¯ï¼Œä¸¦é¡¯ç¤ºåˆé©çš„è¨Šæ¯åæ‡‰çµ¦ä½¿ç”¨è€…ã€‚å…¶ä¸­å°‡æœƒä½¿ç”¨åˆ°ä¸‹åˆ—æŠ€è¡“:\n Angular CLI 14 Bootstrap 5 (UI Framework) Angular  Reactive Form Custome Validator Interceptor JWT Session Storage Router Services Guard \u0026amp; Router Data    å®‰è£ Angular/CLI æª¢è¦–ç›®å‰ç’°å¢ƒç‚º node v16.14.0ï¼Œ global å®‰è£çš„æ˜¯ Angular CLI 13.3.6\n$ node --version v16.14.0 $ ng version _ _ ____ _ ___ / \\  _ __ __ _ _ _| | __ _ _ __ / ___| | |_ _| / â–³ \\ | \u0026#39;_ \\ / _` | | | | |/ _` | \u0026#39;__| | | | | | | / ___ \\| | | | (_| | |_| | | (_| | | | |___| |___ | | /_/ \\_\\_| |_|\\__, |\\__,_|_|\\__,_|_| \\____|_____|___| |___/ Angular CLI: 13.3.6 Node: 16.14.0 Package Manager: npm 8.3.1 OS: linux x64 Angular: ... Package Version ------------------------------------------------------ @angular-devkit/architect 0.1303.6 (cli-only) @angular-devkit/core 13.3.6 (cli-only) @angular-devkit/schematics 13.3.6 (cli-only) @schematics/angular 13.3.6 (cli-only) åœ¨ Local å®‰è£ Angular CLI ver.14 $ mkdir angular14 \u0026amp;\u0026amp; cd angular14 $ npm install @angular/cli@14 added 219 packages, and audited 220 packages in 6s 25 packages are looking for funding run `npm fund` for details found 0 vulnerabilities $ ls -al ç¸½ç”¨é‡ 176 drwxrwxr-x 3 egs egs 4096 å…­ 16 11:10 . drwxrwxr-x 10 egs egs 4096 å…­ 16 11:10 .. drwxrwxr-x 191 egs egs 4096 å…­ 16 11:10 node_modules -rw-rw-r-- 1 egs egs 58 å…­ 16 11:10 package.json -rw-rw-r-- 1 egs egs 163807 å…­ 16 11:10 package-lock.json $ cat package.json { \u0026#34;dependencies\u0026#34;: { \u0026#34;@angular/cli\u0026#34;: \u0026#34;^14.0.2\u0026#34; } } $ npx ng version _ _ ____ _ ___ / \\  _ __ __ _ _ _| | __ _ _ __ / ___| | |_ _| / â–³ \\ | \u0026#39;_ \\ / _` | | | | |/ _` | \u0026#39;__| | | | | | | / ___ \\| | | | (_| | |_| | | (_| | | | |___| |___ | | /_/ \\_\\_| |_|\\__, |\\__,_|_|\\__,_|_| \\____|_____|___| |___/ Angular CLI: 14.0.1 Node: 16.14.0 Package Manager: npm 8.3.1 OS: linux x64 Angular: undefined ... Package Version ------------------------------------------------------ @angular-devkit/architect 0.1400.1 @angular-devkit/core 14.0.1 @angular-devkit/schematics 14.0.1 @angular/cli 14.0.1 @schematics/angular 14.0.1 å»ºç«‹æ–°å°ˆæ¡ˆ $ npx ng new angular-auth-jwt ? Would you like to add Angular routing? Yes ? Which stylesheet format would you like to use? SCSS [ https://sass-lang.com/documentation/syntax#scss ] CREATE angular-auth-jwt/README.md (1068 bytes) CREATE angular-auth-jwt/.editorconfig (274 bytes) CREATE angular-auth-jwt/.gitignore (548 bytes) CREATE angular-auth-jwt/angular.json (3146 bytes) CREATE angular-auth-jwt/package.json (1047 bytes) CREATE angular-auth-jwt/tsconfig.json (863 bytes) CREATE angular-auth-jwt/.browserslistrc (600 bytes) CREATE angular-auth-jwt/karma.conf.js (1433 bytes) CREATE angular-auth-jwt/tsconfig.app.json (287 bytes) CREATE angular-auth-jwt/tsconfig.spec.json (333 bytes) CREATE angular-auth-jwt/.vscode/extensions.json (130 bytes) CREATE angular-auth-jwt/.vscode/launch.json (474 bytes) CREATE angular-auth-jwt/.vscode/tasks.json (938 bytes) CREATE angular-auth-jwt/src/favicon.ico (948 bytes) CREATE angular-auth-jwt/src/index.html (300 bytes) CREATE angular-auth-jwt/src/main.ts (372 bytes) CREATE angular-auth-jwt/src/polyfills.ts (2338 bytes) CREATE angular-auth-jwt/src/styles.scss (80 bytes) CREATE angular-auth-jwt/src/test.ts (749 bytes) CREATE angular-auth-jwt/src/assets/.gitkeep (0 bytes) CREATE angular-auth-jwt/src/environments/environment.prod.ts (51 bytes) CREATE angular-auth-jwt/src/environments/environment.ts (658 bytes) CREATE angular-auth-jwt/src/app/app-routing.module.ts (245 bytes) CREATE angular-auth-jwt/src/app/app.module.ts (393 bytes) CREATE angular-auth-jwt/src/app/app.component.scss (0 bytes) CREATE angular-auth-jwt/src/app/app.component.html (23364 bytes) CREATE angular-auth-jwt/src/app/app.component.spec.ts (1103 bytes) CREATE angular-auth-jwt/src/app/app.component.ts (221 bytes) âœ” Packages installed successfully. Successfully initialized git. $ cd angular-auth-jwt $ cat package.json { \u0026#34;name\u0026#34;: \u0026#34;angular-auth-jwt\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0.0.0\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;ng\u0026#34;: \u0026#34;ng\u0026#34;, \u0026#34;start\u0026#34;: \u0026#34;ng serve\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;ng build\u0026#34;, \u0026#34;watch\u0026#34;: \u0026#34;ng build --watch --configuration development\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;ng test\u0026#34; }, \u0026#34;private\u0026#34;: true, \u0026#34;dependencies\u0026#34;: { \u0026#34;@angular/animations\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/common\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/compiler\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/core\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/forms\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/platform-browser\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/platform-browser-dynamic\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@angular/router\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;rxjs\u0026#34;: \u0026#34;~7.5.0\u0026#34;, \u0026#34;tslib\u0026#34;: \u0026#34;^2.3.0\u0026#34;, \u0026#34;zone.js\u0026#34;: \u0026#34;~0.11.4\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;@angular-devkit/build-angular\u0026#34;: \u0026#34;^14.0.1\u0026#34;, \u0026#34;@angular/cli\u0026#34;: \u0026#34;~14.0.1\u0026#34;, \u0026#34;@angular/compiler-cli\u0026#34;: \u0026#34;^14.0.0\u0026#34;, \u0026#34;@types/jasmine\u0026#34;: \u0026#34;~4.0.0\u0026#34;, \u0026#34;jasmine-core\u0026#34;: \u0026#34;~4.1.0\u0026#34;, \u0026#34;karma\u0026#34;: \u0026#34;~6.3.0\u0026#34;, \u0026#34;karma-chrome-launcher\u0026#34;: \u0026#34;~3.1.0\u0026#34;, \u0026#34;karma-coverage\u0026#34;: \u0026#34;~2.2.0\u0026#34;, \u0026#34;karma-jasmine\u0026#34;: \u0026#34;~5.0.0\u0026#34;, \u0026#34;karma-jasmine-html-reporter\u0026#34;: \u0026#34;~1.7.0\u0026#34;, \u0026#34;typescript\u0026#34;: \u0026#34;~4.7.2\u0026#34; } } åŸ·è¡Œç”± CLI ç”£ç”Ÿçš„é è¨­ç¨‹å¼æ¶æ§‹\n$ npm start âœ” Browser application bundle generation complete. Initial Chunk Files | Names | Raw Size vendor.js | vendor | 2.02 MB | polyfills.js | polyfills | 313.40 kB | styles.css, styles.js | styles | 207.83 kB | main.js | main | 50.14 kB | runtime.js | runtime | 6.53 kB | | Initial Total | 2.58 MB Build at: 2022-06-15T03:24:52.638Z - Hash: abf680be2edec496 - Time: 9646ms ** Angular Live Development Server is listening on localhost:4200, open your browser on http://localhost:4200/ ** âœ” Compiled successfully. é–‹å•Ÿç€è¦½å™¨ï¼Œè¼¸å…¥ http://localhost:4200/\n$ ls -al ç¸½ç”¨é‡ 868 drwxrwxr-x 7 egs egs 4096 å…­ 15 11:24 . drwxrwxr-x 4 egs egs 4096 å…­ 15 11:21 .. drwxrwxr-x 3 egs egs 4096 å…­ 15 11:24 .angular -rw-rw-r-- 1 egs egs 3146 å…­ 15 11:21 angular.json -rw-rw-r-- 1 egs egs 600 å…­ 15 11:21 .browserslistrc -rw-rw-r-- 1 egs egs 274 å…­ 15 11:21 .editorconfig drwxrwxr-x 8 egs egs 4096 å…­ 15 11:22 .git -rw-rw-r-- 1 egs egs 548 å…­ 15 11:21 .gitignore -rw-rw-r-- 1 egs egs 1433 å…­ 15 11:21 karma.conf.js drwxrwxr-x 596 egs egs 20480 å…­ 15 11:24 node_modules -rw-rw-r-- 1 egs egs 1047 å…­ 15 11:21 package.json -rw-rw-r-- 1 egs egs 800093 å…­ 15 11:22 package-lock.json -rw-rw-r-- 1 egs egs 1068 å…­ 15 11:21 README.md drwxrwxr-x 5 egs egs 4096 å…­ 15 11:21 src -rw-rw-r-- 1 egs egs 287 å…­ 15 11:21 tsconfig.app.json -rw-rw-r-- 1 egs egs 863 å…­ 15 11:21 tsconfig.json -rw-rw-r-- 1 egs egs 333 å…­ 15 11:21 tsconfig.spec.json drwxrwxr-x 2 egs egs 4096 å…­ 15 11:21 .vscode è¨­ç½®å°ˆæ¡ˆ å»ºç«‹ç›¸é—œå…ƒä»¶ èˆ‡ æœå‹™ $ ng g s shared/services/auth # æ–°å¢ auth service $ ng g s shared/services/token-storage # æ–°å¢ token-storage service $ ng g s shared/services/user # æ–°å¢ user service $ ng g interceptor shared/interceptor/authã€€# æ–°å¢ auth interceptor $ ng g c pages/login $ ng g c pages/register $ ng g c pages/profile $ ng g c pages/home $ ng g c pages/board-user $ ng g c pages/board-moderator $ ng g c pages/board-admin $ ng g guard shared/guard/auth --implements=\u0026#34;CanActivate\u0026#34; # æ–°å¢ auth guard $ ng g guard shared/guard/role --implements=\u0026#34;CanActivate\u0026#34; # æ–°å¢ role guard æª”æ¡ˆçµæ§‹ æ’°å¯« Services ç¨‹å¼ æ‰“é–‹ vscode\n$ code .ã€€# æ‰“é–‹ vscode å°‡ç¨‹å¼ä¸­æœƒä½¿ç”¨çš„åƒæ•¸å€¼æ”¾åœ¨ appSettings.ts ä¸­ åœ¨é–‹å§‹æ–°å¢ Services ç¨‹å¼å‰ï¼Œæˆ‘å€‘å¯ä»¥è€ƒæ…®å°‡å›ºå®šçš„åƒæ•¸å€¼æ”¾åœ¨ appSettings.ts ä¸­ï¼Œä¾†å¢åŠ ä¸€äº›å½ˆæ€§ã€‚åœ¨ sharedç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹ã€€helpers çš„å­ç›®éŒ„ï¼Œä¸¦æ–°å¢ä¸€æ”¯ appSettings.ts ç¨‹å¼ï¼Œå…§å®¹å¦‚ä¸‹ã€‚è¨­ç½®ä¸€å€‹éœæ…‹å¸¸æ•¸ API_URLï¼Œä¸¦æŠŠå®ƒ export å‡ºä¾†ï¼Œè®“å¤–é¢çš„ç¨‹å¼å¯ä»¥å¼•ç”¨å®ƒã€‚\nexport class AppSettings { static API_URL = \u0026#39;http://localhost:5000/api/\u0026#39;; } è¨»å†Šèˆ‡ç™»å…¥ä½¿ç”¨çš„æœå‹™ç¨‹å¼ auth.service.ts è¨»å†Šèˆ‡ç™»å…¥åŠŸèƒ½é ˆæ­é…å¾Œç«¯ APIï¼Œå¯åƒè€ƒã€€ä½¿ç”¨ Node.js + express + postgres å»ºç«‹ä¸€å€‹å¾Œç«¯æœå‹™ REST API\nimport { Injectable } from \u0026#39;@angular/core\u0026#39;; import { HttpClient } from \u0026#39;@angular/common/http\u0026#39;; import { Observable } from \u0026#39;rxjs\u0026#39;; import { AppSettings } from \u0026#39;../helpers/appSettings\u0026#39;; const API_URL = AppSettings.API_URL + \u0026#39;auth/\u0026#39;; @Injectable({ providedIn: \u0026#39;root\u0026#39; }) export class AuthService { constructor( private http: HttpClient) { } login(username: string, password: string): Observable\u0026lt;any\u0026gt; { return this.http.post(API_URL + \u0026#39;signin\u0026#39;, { username, password }) } register(username: string, email:string, password: string): Observable\u0026lt;any\u0026gt; { return this.http.post(API_URL + \u0026#39;signup\u0026#39;, { username, email, password }) } } Token ç›¸é—œçš„æœå‹™ç¨‹å¼ token-storage.service.ts åœ¨æœ¬ç¯„ä¾‹ä¸­ï¼Œæˆ‘å€‘æœƒæŠŠç”± API å›ä¾†å›ä¾†çš„ Token å„²å­˜åœ¨ local ç€è¦½å™¨ä¸­çš„ Session Local Storage ä¸­ã€‚\nimport { Injectable } from \u0026#39;@angular/core\u0026#39;; const TOKEN_KEY = \u0026#39;auth-token\u0026#39;; const USER_KEY = \u0026#39;auth-user\u0026#39;; @Injectable({ providedIn: \u0026#39;root\u0026#39; }) export class TokenStorageService { constructor() { } signOut(): void { window.sessionStorage.clear(); } public saveToken(token: string): void { sessionStorage.removeItem(TOKEN_KEY); sessionStorage.setItem(TOKEN_KEY, token); } public getToken(): string | null { return sessionStorage.getItem(TOKEN_KEY); } public saveUser(user: any): void { sessionStorage.removeItem(USER_KEY); sessionStorage.setItem(USER_KEY, JSON.stringify(user)); } public getUser(): any { const user = sessionStorage.getItem(USER_KEY); if (user) { return JSON.parse(user); } return user; } } User ç›¸é—œçš„æœå‹™ç¨‹å¼ user.service.ts user service æ˜¯è—‰ç”± API ä¾†å±•ç¤ºå¦‚ä½•é€éæ¬Šé™ç®¡ç†åŠŸèƒ½ä¾†ç®¡ç†ä¸åŒçš„å­åŠŸèƒ½ã€‚é€™ç”±çš„æ¬Šé™ç®¡æ§æ™‚ç›´æ¥åˆ©ç”¨å¾Œç«¯ API åŠŸèƒ½ä¾†æª¢æ ¸ç›®å‰çš„ä½¿ç”¨è€…æ˜¯å¦å…·æœ‰ç›¸é—œæ¬Šé™ä¾†åŸ·è¡Œé€™äº›åŠŸèƒ½ã€‚åœ¨æœ¬ç­†è¨˜å¾Œé¢æˆ‘å€‘ä¹Ÿæœƒåˆ©ç”¨ Angular Router Guard çš„åŠŸèƒ½ä¾†å¯¦ç¾ Local å¦‚ä½•ä¾†ç®¡ç† user èˆ‡è·¯ç”±é–“çš„åŸ·è¡Œæ¬Šé™ã€‚\nimport { HttpClient } from \u0026#39;@angular/common/http\u0026#39;; import { Injectable } from \u0026#39;@angular/core\u0026#39;; import { Observable } from \u0026#39;rxjs\u0026#39;; import { AppSettings } from \u0026#39;../helpers/appSettings\u0026#39;; const API_URL = AppSettings.API_URL + \u0026#39;users/test/\u0026#39;; @Injectable({ providedIn: \u0026#39;root\u0026#39; }) export class UserService { constructor(private http: HttpClient) { } getPublicContent(): Observable\u0026lt;any\u0026gt; { return this.http.get(API_URL + \u0026#39;all\u0026#39;, { responseType: \u0026#39;text\u0026#39; }) } getUserBoard(): Observable\u0026lt;any\u0026gt; { return this.http.get(API_URL + \u0026#39;user\u0026#39;, { responseType: \u0026#39;text\u0026#39; }) } getModeratorBoard(): Observable\u0026lt;any\u0026gt; { return this.http.get(API_URL + \u0026#39;moderator\u0026#39;, { responseType: \u0026#39;text\u0026#39; }) } getAdminBoard(): Observable\u0026lt;any\u0026gt; { return this.http.get(API_URL + \u0026#39;admin\u0026#39;, { responseType: \u0026#39;text\u0026#39; }) } } æ’°å¯« HTTP Interceptor ç¨‹å¼ HTTP Interceptor å¯ä»¥è®“æˆ‘å€‘å¾ˆå®¹æ˜“çš„åœ¨æ¯ä¸€å€‹ request Header ä¸­åŠ å…¥æˆ‘å€‘ç™»å…¥æˆåŠŸå¾Œç”± API å›å‚³å›ä¾†çš„ï½€åˆæ³•Token`ã€‚åœ¨é€™å€‹ç¨‹å¼ä¸­å”¯ä¸€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸æ‡‰æ›´æ”¹åŸå§‹çš„ requestï¼Œè€Œæ˜¯æ‡‰è©²é€é clone åŠŸèƒ½ä¾†ç”£ç”Ÿä¸€å€‹æ–°çš„ request å†å°‡ token å¯«å…¥é€™å€‹æ–° request çš„ Headerã€‚\n// ./app/shared/interceptor/auth.interceptor.ts import { Injectable } from \u0026#39;@angular/core\u0026#39;; import { HttpRequest, HttpHandler, HttpEvent, HttpInterceptor, HTTP_INTERCEPTORS } from \u0026#39;@angular/common/http\u0026#39;; import { Observable } from \u0026#39;rxjs\u0026#39;; import { TokenStorageService } from \u0026#39;../services/token-storage.service\u0026#39;; @Injectable() export class AuthInterceptor implements HttpInterceptor { constructor(private tokenService: TokenStorageService) {} intercept(request: HttpRequest\u0026lt;any\u0026gt;, next: HttpHandler): Observable\u0026lt;HttpEvent\u0026lt;any\u0026gt;\u0026gt; { let authRequest = request; const token = this.tokenService.getToken(); if (token != null) { authRequest = request.clone({ setHeaders: { Authorization: `Bearer ${token}` } }); } return next.handle(authRequest); } } export const authInterceptorProviders = [{ provide: HTTP_INTERCEPTORS, useClass: AuthInterceptor, multi: true }] å°‡ HTTP Interceptor åŠ å…¥åˆ° app module çš„ providers ä¸Šè¿°å®Œæˆçš„ Interceptor è¦è¨˜å¾—æ³¨å…¥åˆ° app module providers è¨­å®šä¸­ï¼ˆç¬¬14ã€32è¡Œï¼‰ã€‚ åŒæ™‚ï¼Œåœ¨å‰è¿°çš„ services ä¸­æˆ‘å€‘ä½¿ç”¨åˆ°äº† HttpClientï¼Œæ‰€ä»¥ä¹Ÿå¿…é ˆåŒ¯å…¥ HttpClient Moduleï¼ˆç¬¬3ã€30è¡Œï¼‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35  import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { BrowserModule } from \u0026#39;@angular/platform-browser\u0026#39;; import { HttpClientModule } from \u0026#39;@angular/common/http\u0026#39;;  import { AppRoutingModule } from \u0026#39;./app-routing.module\u0026#39;; import { AppComponent } from \u0026#39;./app.component\u0026#39;; import { LoginComponent } from \u0026#39;./pages/login/login.component\u0026#39;; import { RegisterComponent } from \u0026#39;./pages/register/register.component\u0026#39;; import { HomeComponent } from \u0026#39;./pages/home/home.component\u0026#39;; import { ProfileComponent } from \u0026#39;./pages/profile/profile.component\u0026#39;; import { BoardAdminComponent } from \u0026#39;./pages/board-admin/board-admin.component\u0026#39;; import { BoardModeratorComponent } from \u0026#39;./pages/board-moderator/board-moderator.component\u0026#39;; import { BoardUserComponent } from \u0026#39;./pages/board-user/board-user.component\u0026#39;; import { authInterceptorProviders } from \u0026#39;./shared/interceptor/auth.interceptor\u0026#39;;  @NgModule({ declarations: [ AppComponent, LoginComponent, RegisterComponent, HomeComponent, ProfileComponent, BoardAdminComponent, BoardModeratorComponent, BoardUserComponent ], imports: [ BrowserModule, AppRoutingModule, HttpClientModule  ], providers: [authInterceptorProviders],  bootstrap: [AppComponent] }) export class AppModule { }   æ–°å¢ components æ¥è‘—è¦ä¾†å»ºç«‹ componentsï¼Œåœ¨æ­¤æˆ‘å€‘ä½¿çš„æ˜¯ Reactive Form ä¸¦ä½¿ç”¨ bootstrap CSS frameworkä¾†è£é£¾æˆ‘å€‘çš„ component ï¼Œæ‰€å¿…é ˆå…ˆé€²è¡Œç›¸é—œè¨­å®š\nåŒ¯å…¥ ReactiveFormModule æ¨¡çµ„ é–‹å•Ÿ src/app/app.module.ts ä¸¦ç”± @angular/forms åŒ¯å…¥ ReactiveFormModule\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23  import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { BrowserModule } from \u0026#39;@angular/platform-browser\u0026#39;; import { ReactiveFormsModule } from \u0026#39;@angular/forms\u0026#39;; import { HttpClientModule } from \u0026#39;@angular/common/http\u0026#39;; import { AppRoutingModule } from \u0026#39;./app-routing.module\u0026#39;; import { AppComponent } from \u0026#39;./app.component\u0026#39;; //... @NgModule({ declarations: [ AppComponent //...  ], imports: [ BrowserModule, AppRoutingModule, ReactiveFormsModule,  HttpClientModule ], providers: [authInterceptorProviders], bootstrap: [AppComponent] }) export class AppModule { }   ä½¿ç”¨ Bootstrap é–‹å•Ÿ src/index.html åœ¨  åŠ å…¥ link tag\n ä½¿ç”¨ bootstrap 5 å¦‚ç¬¬ 9 è¡ŒåŒ¯å…¥èªæ³•  1 2 3 4 5 6 7 8 9 10 11 12 13 14  \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;AngularAuthJwt\u0026lt;/title\u0026gt; \u0026lt;base href=\u0026#34;/\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;icon\u0026#34; type=\u0026#34;image/x-icon\u0026#34; href=\u0026#34;favicon.ico\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\u0026#34; integrity=\u0026#34;sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;app-root\u0026gt;\u0026lt;/app-root\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;   æ–°å¢ Register Component // register.component.ts import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { AbstractControl, FormBuilder, FormControl, FormGroup, Validators } from \u0026#39;@angular/forms\u0026#39;; import Validation from \u0026#39;src/app/shared/helpers/validation\u0026#39;; import { AuthService } from \u0026#39;src/app/shared/services/auth.service\u0026#39;; @Component({ selector: \u0026#39;app-register\u0026#39;, templateUrl: \u0026#39;./register.component.html\u0026#39;, styleUrls: [\u0026#39;./register.component.scss\u0026#39;] }) export class RegisterComponent implements OnInit { form: FormGroup = new FormGroup({ username: new FormControl(\u0026#39;\u0026#39;), email: new FormControl(\u0026#39;\u0026#39;), password: new FormControl(\u0026#39;\u0026#39;), confirmPassword: new FormControl(\u0026#39;\u0026#39;) }); submitted = false; isSuccessful = false;; isSignUpFailed = false; errorMessage = \u0026#39;\u0026#39;; constructor(private formBuilder: FormBuilder, private authService: AuthService) { } ngOnInit(): void { this.form = this.formBuilder.group( { username: [ \u0026#39;\u0026#39;, [ Validators.required, Validators.minLength(4), Validators.maxLength(20) ] ], email: [\u0026#39;\u0026#39;, [Validators.required, Validators.email]], password: [ \u0026#39;\u0026#39;, [ Validators.required, Validators.minLength(6), Validators.maxLength(40) ] ], confirmPassword: [\u0026#39;\u0026#39;,Validators.required], }, { validators: [Validation.match(\u0026#39;password\u0026#39;, \u0026#39;confirmPassword\u0026#39;)] } ) } get f(): { [key: string]: AbstractControl } { return this.form.controls; } onSubmit(): void { this.submitted = true; if (this.form.invalid) { return; } const { username, email, password } = this.form.getRawValue(); this.authService.register(username!, email!, password!).subscribe({ next: (data) =\u0026gt; { console.log(data); this.isSuccessful = true; this.isSignUpFailed = false; }, error: (err) =\u0026gt; { this.isSuccessful = false; this.isSignUpFailed = true; } }); } onReset(): void { this.submitted = false; this.isSignUpFailed = false; this.form.reset(); } } åœ¨ Register Component ä¸­æˆ‘å€‘ä½¿ç”¨äº†ä¸€å€‹ Custom Validatorï¼Œå®ƒç”¨ä¾†æ¯”å°äºŒæ¬¡è¼¸å…¥çš„å¯†ç¢¼æ˜¯å¦ä¸€è‡´ï¼Œç¨‹å¼ç¢¼å¦‚ä¸‹ï¼š\nè¨»å†Šå…ƒä»¶çš„ç¨‹å¼ç¢¼ // validation.ts import { AbstractControl, ValidatorFn } from \u0026#34;@angular/forms\u0026#34;; export default class Validation { static match(controlName: string, checkControlName: string): ValidatorFn { return (controls: AbstractControl) =\u0026gt; { const control = controls.get(controlName); const checkControl = controls.get(checkControlName); if (checkControl?.errors \u0026amp;\u0026amp; !checkControl.errors[\u0026#39;matching\u0026#39;]) { return null; } if (control?.value !== checkControl?.value) { controls.get(checkControlName)?.setErrors({ matching: true }); return { match: true }; } else { return null; } } } } è¨»å†Šå…ƒä»¶çš„ HTML\n\u0026lt;!-- register.component.html --\u0026gt; \u0026lt;div class=\u0026#34;container-fluid register-form\u0026#34;\u0026gt; \u0026lt;form needs-validation [formGroup]=\u0026#34;form\u0026#34; (ngSubmit)=\u0026#34;onSubmit()\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;note\u0026#34;\u0026gt; \u0026lt;h1\u0026gt; ä½¿ç”¨è€…è³‡æ–™è¨»å†Š \u0026lt;/h1\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;username\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Username\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; autofocus formControlName=\u0026#34;username\u0026#34; id=\u0026#34;username\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;username\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;username\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;username\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;username\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Username ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;username\u0026#39;].errors[\u0026#39;minlength\u0026#39;]\u0026#34;\u0026gt; Username å¿…é ˆè‡³å°‘ç‚ºå…­å€‹å­—å…ƒ \u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;username\u0026#39;].errors[\u0026#39;maxlength\u0026#39;]\u0026#34;\u0026gt; Username å¿…é ˆè‡³å¤šç‚ºäºŒåå€‹å­—å…ƒ \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;email\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Email\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; formControlName=\u0026#34;email\u0026#34; id=\u0026#34;email\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;email\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;email\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;email\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;email\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Email ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;email\u0026#39;].errors[\u0026#39;email\u0026#39;]\u0026#34;\u0026gt;Email æ ¼å¼ä¸ç¬¦\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;password\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Password\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;password\u0026#34; formControlName=\u0026#34;password\u0026#34; id=\u0026#34;password\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;password\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;password\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;password\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;password\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Password ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;password\u0026#39;].errors[\u0026#39;minlength\u0026#39;]\u0026#34;\u0026gt; Password å¿…é ˆè‡³å°‘ç‚ºå…­å€‹å­—å…ƒ \u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;password\u0026#39;].errors[\u0026#39;maxlength\u0026#39;]\u0026#34;\u0026gt; Password å¿…é ˆè‡³å¤šç‚ºå››åå€‹å­—å…ƒ \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;confirmPassword\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Confirm Password\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;password\u0026#34; formControlName=\u0026#34;confirmPassword\u0026#34; id=\u0026#34;confirmPassword\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;confirmPassword\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;confirmPassword\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;confirmPassword\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;confirmPassword\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Confirm Password ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;confirmPassword\u0026#39;].errors[\u0026#39;matching\u0026#39;]\u0026#34;\u0026gt; Confirm Password ä¸ç¬¦ \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34; class=\u0026#34;btn btn-primary\u0026#34;\u0026gt;é€å‡º\u0026lt;/button\u0026gt; \u0026lt;button type=\u0026#34;button\u0026#34; (click)=\u0026#34;onReset()\u0026#34; class=\u0026#34;btn btn-warning float-end\u0026#34;\u0026gt; é‡ç½® \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;alert alert-warning\u0026#34; *ngIf=\u0026#34;isSignUpFailed\u0026#34;\u0026gt; è¨»å†Šå¤±æ•—!\u0026lt;br /\u0026gt;{{ errorMessage }} \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;alert alert-success\u0026#34; *ngIf=\u0026#34;isSuccessful\u0026#34;\u0026gt; è¨»å†ŠæˆåŠŸï¼ \u0026lt;/div\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;/div\u0026gt; è¨»å†Šå…ƒä»¶çš„ CSS\n/* register.component.scss */ .register-form { max-width: 350px; margin: auto; } æ–°å¢ Login Component ç™»å…¥å…ƒä»¶çš„ç¨‹å¼ç¢¼\n// login.component.ts import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { AbstractControl, FormBuilder, FormControl, FormGroup, Validators } from \u0026#39;@angular/forms\u0026#39;; import { AuthService } from \u0026#39;src/app/shared/services/auth.service\u0026#39;; import { TokenStorageService } from \u0026#39;src/app/shared/services/token-storage.service\u0026#39;; @Component({ selector: \u0026#39;app-login\u0026#39;, templateUrl: \u0026#39;./login.component.html\u0026#39;, styleUrls: [\u0026#39;./login.component.scss\u0026#39;] }) export class LoginComponent implements OnInit { form: FormGroup = new FormGroup({ username: new FormControl(\u0026#39;\u0026#39;), password: new FormControl(\u0026#39;\u0026#39;) }); isLoggedIn = false; isLoginFailed = false; submitted = false; errorMessage = \u0026#39;\u0026#39;; roles: string[] = []; constructor(private formBuilder: FormBuilder, private authService: AuthService, private tokenStorage: TokenStorageService) { } ngOnInit(): void { if (this.tokenStorage.getToken()) { this.isLoggedIn = true; this.roles = this.tokenStorage.getUser().roles; } this.form = this.formBuilder.group( { username: [\u0026#39;\u0026#39;,[Validators.required]], password: [\u0026#39;\u0026#39;,[Validators.required]] } ) } get f(): { [key: string]: AbstractControl } { return this.form.controls; } onSubmit(): void { this.submitted = true; if (this.form.invalid) { return; } const { username, password } = this.form.getRawValue(); this.authService.login(username, password).subscribe({ next: data =\u0026gt; { this.tokenStorage.saveToken(data.accessToken); this.tokenStorage.saveUser(data); this.isLoggedIn = true; this.roles = this.tokenStorage.getUser().roles; this.roloadPage(); }, error: err =\u0026gt; { this.errorMessage = err.error.message; this.isLoginFailed = true; } }) } roloadPage(): void { this.submitted = false; location.reload(); } onReset(): void { this.submitted = false; this.isLoginFailed = false; this.form.reset(); } } ç™»å…¥å…ƒä»¶çš„ HTML\n\u0026lt;!-- login.component.html --\u0026gt; \u0026lt;div class=\u0026#34;container-fluid register-form\u0026#34;\u0026gt; \u0026lt;form *ngIf=\u0026#34;!isLoggedIn\u0026#34; needs-validation [formGroup]=\u0026#34;form\u0026#34; (ngSubmit)=\u0026#34;onSubmit()\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;note\u0026#34;\u0026gt; \u0026lt;h1\u0026gt; ä½¿ç”¨è€…ç™»å…¥ \u0026lt;/h1\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;username\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Username\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; autofocus formControlName=\u0026#34;username\u0026#34; id=\u0026#34;username\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;username\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;username\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;username\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;username\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Username ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;password\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Password\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;password\u0026#34; formControlName=\u0026#34;password\u0026#34; id=\u0026#34;password\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;password\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;password\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;password\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;password\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Password ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34; class=\u0026#34;btn btn-primary\u0026#34;\u0026gt;é€å‡º\u0026lt;/button\u0026gt; \u0026lt;button type=\u0026#34;button\u0026#34; (click)=\u0026#34;onReset()\u0026#34; class=\u0026#34;btn btn-warning float-end\u0026#34;\u0026gt; é‡ç½® \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;alert alert-warning\u0026#34; *ngIf=\u0026#34;isLoginFailed\u0026#34;\u0026gt; Signin failed!\u0026lt;br /\u0026gt;{{ errorMessage }} \u0026lt;/div\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;div class=\u0026#34;alert alert-success\u0026#34; *ngIf=\u0026#34;isLoggedIn\u0026#34;\u0026gt; ç™»å…¥è€…å…·å‚™çš„è§’è‰² {{ roles }}. \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; ç™»å…¥å…ƒä»¶çš„ CSS\n/* login.component.scss */ .login-form { max-width: 350px; margin: auto; } æ–°å¢ Profile Component å€‹äººæª”æ¡ˆçš„ç¨‹å¼ç¢¼\n// profile.component.ts import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { TokenStorageService } from \u0026#39;src/app/shared/services/token-storage.service\u0026#39;; @Component({ selector: \u0026#39;app-profile\u0026#39;, templateUrl: \u0026#39;./profile.component.html\u0026#39;, styleUrls: [\u0026#39;./profile.component.scss\u0026#39;] }) export class ProfileComponent implements OnInit { currentUser: any; constructor(private token: TokenStorageService) { } ngOnInit(): void { this.currentUser = this.token.getUser(); } } å€‹äººæª”æ¡ˆçš„ HTML\n\u0026lt;!-- profile.component.html --\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34; *ngIf=\u0026#34;currentUser; else loggedOut\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;jumbotron\u0026#34;\u0026gt; \u0026lt;h3\u0026gt;\u0026lt;strong\u0026gt;{{ currentUser.username }}\u0026lt;/strong\u0026gt; å€‹äººè¨Šæ¯\u0026lt;/h3\u0026gt; \u0026lt;/header\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;Token:\u0026lt;/strong\u0026gt; {{ currentUser.accessToken.substring(0, 20)}} ... {{ currentUser.accessToken.substr( currentUser.accessToken.length - 20)}} \u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;\u0026lt;strong\u0026gt;é›»å­ä¿¡ç®±:\u0026lt;/strong\u0026gt; {{ currentUser.email }} \u0026lt;/p\u0026gt; \u0026lt;strong\u0026gt;åƒèˆ‡çš„è§’è‰²:\u0026lt;/strong\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li *ngFor=\u0026#34;let role of currentUser.roles\u0026#34;\u0026gt; {{ role }} \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;ng-template #loggedOut\u0026gt; è«‹å…ˆç™»å…¥ \u0026lt;/ng-template\u0026gt; æ–°å¢ Role-base components æ¥ä¸‹ä¾†è¦å®Œæˆçš„åŠŸèƒ½æ˜¯ç‚ºäº†å±•ç¤ºä¸åŒæˆæ¬Šä½¿ç”¨è€…å¯ä»¥çœ‹åˆ°çš„ UI åŠ åŸ·è¡Œä¸åŒåŠŸèƒ½çš„æ¬Šé™æ§åˆ¶ã€‚\næ–°å¢ Public Component //home.component.ts import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { UserService } from \u0026#39;../_services/user.service\u0026#39;; @Component({ selector: \u0026#39;app-home\u0026#39;, templateUrl: \u0026#39;./home.component.html\u0026#39;, styleUrls: [\u0026#39;./home.component.css\u0026#39;] }) export class HomeComponent implements OnInit { content?: string; constructor(private userService: UserService) { } ngOnInit(): void { this.userService.getPublicContent().subscribe({ next: data =\u0026gt; { this.content = data; }, error: err =\u0026gt; { this.content = JSON.parse(err.error).message; } }); } } \u0026lt;!-- home.component.heml --\u0026gt; \u0026lt;!-- board-user.component.heml --\u0026gt; \u0026lt;!-- board-moderator.component.heml --\u0026gt; \u0026lt;!-- board-admin.component.heml --\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;header class=\u0026#34;jumbotron\u0026#34;\u0026gt; \u0026lt;p\u0026gt;{{ content }}\u0026lt;/p\u0026gt; \u0026lt;/header\u0026gt; \u0026lt;/div\u0026gt; æ–°å¢ User Component // board-user.component.ts import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { UserService } from \u0026#39;src/app/shared/services/user.service\u0026#39;; @Component({ selector: \u0026#39;app-board-user\u0026#39;, templateUrl: \u0026#39;./board-user.component.html\u0026#39;, styleUrls: [\u0026#39;./board-user.component.scss\u0026#39;] }) export class BoardUserComponent implements OnInit { content?: string; constructor(private userService: UserService) { } ngOnInit(): void { this.userService.getUserBoard().subscribe({ next: data =\u0026gt; { this.content = data; }, error: err =\u0026gt; { this.content = JSON.parse(err.error).message; } }) } } æ–°å¢ Moderator Component // board-moderator.component.ts import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { UserService } from \u0026#39;src/app/shared/services/user.service\u0026#39;; @Component({ selector: \u0026#39;app-board-moderator\u0026#39;, templateUrl: \u0026#39;./board-moderator.component.html\u0026#39;, styleUrls: [\u0026#39;./board-moderator.component.scss\u0026#39;] }) export class BoardModeratorComponent implements OnInit { content?: string; constructor(private userService: UserService) { } ngOnInit(): void { this.userService.getModeratorBoard().subscribe({ next: data =\u0026gt; { this.content = data; }, error: err =\u0026gt; { this.content = JSON.parse(err.error).message; } }) } } æ–°å¢ Admin Component // board-admin.component.ts import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { UserService } from \u0026#39;src/app/shared/services/user.service\u0026#39;; @Component({ selector: \u0026#39;app-board-admin\u0026#39;, templateUrl: \u0026#39;./board-admin.component.html\u0026#39;, styleUrls: [\u0026#39;./board-admin.component.scss\u0026#39;] }) export class BoardAdminComponent implements OnInit { content?: string; constructor(private userService: UserService) { } ngOnInit(): void { this.userService.getAdminBoard().subscribe({ next: data =\u0026gt; { this.content = data; }, error: err =\u0026gt; { this.content = JSON.parse(err.error).message; } }) } } è·¯ç”±è¨­ç½® é€éè·¯ç”±çš„è¨­ç½®ï¼Œç¨‹å¼æ‰æœƒçŸ¥é“ç•¶ä½¿ç”¨è€…åœ¨ç€è¦§å™¨ç‰¹å®šçš„ URI æ™‚ï¼Œç¨‹å¼æ‡‰è©²å»åŸ·é‚£æ”¯ç›¸å°æ‡‰çš„ç¨‹å¼ã€‚è·¯ç”±æ¨¡çµ„æª”æ¡ˆï¼ˆapp-routin.module.tsï¼‰å…§å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { RouterModule, Routes } from \u0026#39;@angular/router\u0026#39;; import { BoardAdminComponent } from \u0026#39;./pages/board-admin/board-admin.component\u0026#39;; import { BoardModeratorComponent } from \u0026#39;./pages/board-moderator/board-moderator.component\u0026#39;; import { BoardUserComponent } from \u0026#39;./pages/board-user/board-user.component\u0026#39;; import { HomeComponent } from \u0026#39;./pages/home/home.component\u0026#39;; import { LoginComponent } from \u0026#39;./pages/login/login.component\u0026#39;; import { ProfileComponent } from \u0026#39;./pages/profile/profile.component\u0026#39;; import { RegisterComponent } from \u0026#39;./pages/register/register.component\u0026#39;; const routes: Routes = [  { path: \u0026#39;home\u0026#39;, component: HomeComponent }, { path: \u0026#39;login\u0026#39;, component: LoginComponent }, { path: \u0026#39;register\u0026#39;, component: RegisterComponent }, { path: \u0026#39;profile\u0026#39;, component: ProfileComponent }, { path: \u0026#39;user\u0026#39;, component: BoardUserComponent}, { path: \u0026#39;moderator\u0026#39;, component: BoardModeratorComponent }, { path: \u0026#39;admin\u0026#39;, component: BoardAdminComponent }, { path: \u0026#39;\u0026#39;, redirectTo: \u0026#39;home\u0026#39;, pathMatch: \u0026#39;full\u0026#39;} ]; @NgModule({ imports: [RouterModule.forRoot(routes)], exports: [RouterModule] }) export class AppRoutingModule { }   App Module çš„è¨­ç½® // app.module.ts import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { BrowserModule } from \u0026#39;@angular/platform-browser\u0026#39;; import { ReactiveFormsModule } from \u0026#39;@angular/forms\u0026#39; import { HttpClientModule } from \u0026#39;@angular/common/http\u0026#39;; import { AppRoutingModule } from \u0026#39;./app-routing.module\u0026#39;; import { AppComponent } from \u0026#39;./app.component\u0026#39;; import { LoginComponent } from \u0026#39;./pages/login/login.component\u0026#39;; import { RegisterComponent } from \u0026#39;./pages/register/register.component\u0026#39;; import { HomeComponent } from \u0026#39;./pages/home/home.component\u0026#39;; import { ProfileComponent } from \u0026#39;./pages/profile/profile.component\u0026#39;; import { BoardAdminComponent } from \u0026#39;./pages/board-admin/board-admin.component\u0026#39;; import { BoardModeratorComponent } from \u0026#39;./pages/board-moderator/board-moderator.component\u0026#39;; import { BoardUserComponent } from \u0026#39;./pages/board-user/board-user.component\u0026#39;; import { authInterceptorProviders } from \u0026#39;./shared/interceptor/auth.interceptor\u0026#39;; @NgModule({ declarations: [ AppComponent, LoginComponent, RegisterComponent, HomeComponent, ProfileComponent, BoardAdminComponent, BoardModeratorComponent, BoardUserComponent ], imports: [ BrowserModule, AppRoutingModule, ReactiveFormsModule, HttpClientModule ], providers: [authInterceptorProviders], bootstrap: [AppComponent] }) export class AppModule { } App Component ä¿®æ”¹ App å…ƒä»¶çš„ç¨‹å¼ç¢¼\n// app.component.ts import { Component } from \u0026#39;@angular/core\u0026#39;; import { TokenStorageService } from \u0026#39;./shared/services/token-storage.service\u0026#39;; @Component({ selector: \u0026#39;app-root\u0026#39;, templateUrl: \u0026#39;./app.component.html\u0026#39;, styleUrls: [\u0026#39;./app.component.scss\u0026#39;] }) export class AppComponent { private roles: string[] = []; isLoggedIn = false; //ç”¨ä¾†è¨˜éŒ„æ˜¯å¦å·²ç™»å…¥ç³»çµ±çš„è®Šæ•¸  showAdminBoard = false; //è¨˜éŒ„æ˜¯å¦æœ‰ï½€ç®¡ç†è€…ï½€è§’è‰²çš„è®Šæ•¸  showModeratorBoard = false;ã€€//è¨˜éŒ„æ˜¯å¦æœ‰ï½€ç‰ˆä¸»ï½€è§’è‰²çš„è®Šæ•¸  username?: string; constructor(private tokenStorageService: TokenStorageService) {} ngOnInit(): void { this.isLoggedIn = !!this.tokenStorageService.getToken(); // è‹¥åœ¨ session storage ä¸­æœ‰æœ‰æ•ˆçš„ token å‰‡è¡¨ç¤ºå·²æœ‰æ­£å¸¸çš„ç™»å…¥ç³»çµ±  if (this.isLoggedIn) { const user = this.tokenStorageService.getUser(); this.roles = user.roles; this.showAdminBoard = this.roles.includes(\u0026#39;ADMIN\u0026#39;); //åˆ¤æ–·æ˜¯å¦æœ‰ç®¡ç†è€…è§’è‰²  this.showModeratorBoard = this.roles.includes(\u0026#39;MODERATOR\u0026#39;);ã€€//åˆ¤æ–·æ˜¯å¦æœ‰ç‰ˆä¸»è§’è‰²  this.username = user.username; } } logout(): void { this.tokenStorageService.signOut(); //æ¸…é™¤ session storage  location.reload(); } } App å…ƒä»¶çš„ HTML\n\u0026lt;!-- app.component.html --\u0026gt; \u0026lt;div id=\u0026#34;app\u0026#34;\u0026gt; \u0026lt;nav class=\u0026#34;navbar navbar-expand navbar-dark bg-dark\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;container-fluid\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;#\u0026#34; class=\u0026#34;navbar-brand\u0026#34;\u0026gt;Angular14\u0026lt;/a\u0026gt; \u0026lt;ul class=\u0026#34;navbar-nav me-auto\u0026#34; routerLinkActive=\u0026#34;active\u0026#34;\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/home\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;home\u0026#34;\u0026gt;é¦–é \u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34; *ngIf=\u0026#34;showAdminBoard\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/admin\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;admin\u0026#34;\u0026gt;ç®¡ç†è€…\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34; *ngIf=\u0026#34;showModeratorBoard\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/moderator\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;moderator\u0026#34;\u0026gt;ç‰ˆä¸»\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/user\u0026#34; class=\u0026#34;nav-link\u0026#34; *ngIf=\u0026#34;isLoggedIn\u0026#34; routerLink=\u0026#34;user\u0026#34;\u0026gt;ä½¿ç”¨è€…\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;ul class=\u0026#34;navbar-nav ms-auto\u0026#34; *ngIf=\u0026#34;!isLoggedIn\u0026#34;\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/register\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;register\u0026#34;\u0026gt;è¨»å†Š\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/login\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;login\u0026#34;\u0026gt;ç™»å…¥\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;ul class=\u0026#34;navbar-nav ms-auto\u0026#34; *ngIf=\u0026#34;isLoggedIn\u0026#34;\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href=\u0026#34;/profile\u0026#34; class=\u0026#34;nav-link\u0026#34; routerLink=\u0026#34;profile\u0026#34;\u0026gt;{{ username }}\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;li class=\u0026#34;nav-item\u0026#34;\u0026gt; \u0026lt;a href class=\u0026#34;nav-link\u0026#34; (click)=\u0026#34;logout()\u0026#34;\u0026gt;ç™»å‡º\u0026lt;/a\u0026gt; \u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/nav\u0026gt; \u0026lt;div class=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;router-outlet\u0026gt;\u0026lt;/router-outlet\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; åŸ·è¡Œç¨‹å¼ çµè¡Œçµæœï¼š\n Home Page  é¦–é ç‚ºé è¨­çš„ Pageï¼ŒåŒæ™‚å®ƒä¹Ÿæ˜¯ä¸€ä¾›å…¬é–‹çš„åŠŸèƒ½ï¼Œæ²’æœ‰ä½¿ç”¨æ¬Šé™çš„é™å®šï¼Œæ‰€ä»¥å³ä½¿ä½ æœªç™»å…¥ï¼Œä¹Ÿå¯ä»¥ç€è¦½ã€‚\nä¸€èˆ¬ä½¿ç”¨è€…ç™»å…¥å¾Œçš„ç•«é¢  ä»¥å·²è¨»å†Šçš„ä½¿ç”¨è€…ç™»å…¥ç³»çµ±å¾Œï¼Œå¯ä»¥ç™¼ç¾ä¸»é é¢ä¸Šçš„åŠŸèƒ½é¸é …å¤šå‡ºäº†â€œä½¿ç”¨è€…â€ èˆ‡ \u0026ldquo;jack\u0026rdquo; å…©é …\nå…¶ä¸­ ï½€jackï½€ æŒ‡çš„æ˜¯ç¾åœ¨å·²ç™»å…¥è€…çš„ username (ç™»å…¥å¸³è™Ÿ)ï¼ŒåŒæ™‚é»é€²é€™åŠŸèƒ½æœƒé¡¯ç¤ºä½¿ç”¨è€…çš„æ˜ç´°è³‡æ–™ã€‚ è€Œï½€ä½¿ç”¨è€…ï½€é€™å€‹åŠŸèƒ½é …ç›®ä¹Ÿæ˜¯éš¨è‘—ä½¿ç”¨è€…ç™»å…¥æˆåŠŸå¾Œæ‰é¡¯ç¤ºå‡ºä¾†çš„ã€‚ ç®¡ç†è§’è‰²ä½¿ç”¨è€…ç™»å…¥å¾Œçš„ç•«é¢  ä¸‹åœ–æ˜¯ä»¥ï½€ç®¡ç†è€…ï½€è§’è‰²ç™»å…¥å¾Œæ‰€é¡¯ç¤ºçš„ç•«é¢ã€‚è€Œå› ç‚ºé€™å€‹ä½¿ç”¨è€…åŒæ™‚è§’è‰²å¤šé‡è§’è‰²ï¼ˆadmin \u0026amp; Moderator)ï¼Œæ‰€ä»¥åŠŸèƒ½é¸é …åŒæ™‚å‡ºç¾äº† `ç®¡ç†è€…ï½€ï½€ç‰ˆä¸»ï½€ï½€ä½¿ç”¨è€…ï½€ç­‰é …ç›®ã€‚ Route Guard ä¸Šè¿° Role-base components åŸ·è¡Œæ™‚çš„æ¬Šé™ç®¡æ§æ˜¯é€é API ç«¯çš„åŠŸèƒ½ä¾†å¯¦ç¾ï¼Œé€™æ¨£çš„æ–¹å¼æœ‰å…¶å¿…è¦æ€§ï¼Œç‰¹åˆ¥æ˜¯åœ¨ä¿è­· Web API ç«¯é»çš„åŸ·è¡Œæ¬Šé™ã€‚\nä¸‹åœ–ä¸­æ˜¯æŒ‡é‚„æ²’æœ‰ç™»å…¥æ™‚åˆ»æ„çš„åœ¨ç€è¦½å™¨è¼¸å…¥ã€€â€œhttp://localhost:4200/userâ€ï¼Œçµæœä»¥ç›®å‰ç¨‹å¼çš„æµç¨‹ï¼Œé€™å€‹è·¯ç”±æ‰€å°æ‡‰åˆ°çš„ç¨‹å¼æ˜¯æœ‰è¢«åŸ·è¡Œçš„ï¼Œåªæ˜¯å› ç‚ºæˆ‘å€‘åœ¨å¾Œå°çš„ API ä¸­æœ‰å•Ÿå‹•äº†ä¿è­·æªæ–½ï¼Œæ‰€ä»¥æª¢æ ¸å‡ºç›®å‰æœªç™»å…¥çš„ç‹€æ…‹ä¸æ‡‰è©²å¯ä»¥åŸ·è¡Œé€™å€‹ç‰¹å®šçš„åŠŸèƒ½ï¼Œæ‰€ä»¥å›å‚³äº†â€œç›®å‰æœªè¢«æˆæ¬Šâ€çš„éŒ¯èª¤è¨Šæ¯ã€‚\nè€Œä¸‹é¢ç¬¬äºŒå€‹æ¡ˆä¾‹ï¼Œä½¿ç”¨è€… jack æ˜¯ä¸€èˆ¬ä½¿ç”¨è€…ï¼Œæ‰€ä»¥ç™»å…¥å¾Œé¡¯ç¤ºå¯åŸ·è¡ŒåŠŸèƒ½å¦‚ä¸‹åœ–åªæœ‰ï½€ä½¿ç”¨è€…ï½€é€™é …åŠŸèƒ½ã€‚æ­¤åˆ»è‹¥ç›´æ¥åœ¨ç€è¦½å™¨è¼¸å…¥ã€€http://localhost:4200/admin æœƒç™¼ç¾é›–ç„¶ç•«é¢ä¸Šæ²’æœ‰é¡¯ç¤ºï½€ç®¡ç†è€…ï½€åŠŸèƒ½é¸é …ï¼Œä½†ä½ é‚„æ˜¯å¯ä»¥ï½€åŸ·è¡Œï½€å®ƒï¼Œä¹Ÿå› ç‚ºå¾Œç«¯ API æœ‰æª¢æ ¸ï¼Œæ‰€ä»¥å›å‚³äº†ï½€Require Admin Role!ï½€çš„éŒ¯èª¤å…§å®¹ã€‚\nå¸³è™Ÿèªè­‰æ””æˆªå™¨ æ¥ä¸‹ä¾†è¦ä»‹ç´¹çš„ã€€è·¯ç”±ä¿è­·å™¨(æ””æˆªå™¨)ã€€æ˜¯ä¸€ç¨® local ç«¯ä¿è­·æ©Ÿåˆ¶ã€‚é€é Route Guard çš„è¨­ç½®å¯ä»¥åœ¨ä½¿ç”¨è€…ç«¯å°±èƒ½æ•ˆç®¡ç†å„å€‹ route çš„åŸ·è¡Œæ¬Šé™çš„æ§ç®¡ã€‚\nauthGuard é€™å€‹è·¯ç”±ä¿è­·å™¨çš„åŠŸèƒ½å°±æ˜¯ä¾†æ””æˆªæ²’æœ‰æ­£å¸¸ç™»å…¥ç³»çµ±çš„ä½¿ç”¨è€…ä¸å¾—åŸ·è¡Œç‰¹å®šçš„è·¯ç”±ã€‚åœ¨ç¨‹å¼ä¸­é€é tokenService.getToken() åŠŸèƒ½ä¾†è®€å– tokenï¼Œè‹¥ session storeage ä¸­æ²’æœ‰åˆæ³• tokenï¼Œè¡¨ç¤ºç›®å‰é‚„æ²’æœ‰æ­£ç¢ºçš„ç™»å…¥ç³»çµ±ï¼Œä¸¦å°‡ç¨‹å¼æŒ‡å‘ç™»å…¥åŠŸèƒ½ã€‚\n// auth.guard.ts import { Injectable } from \u0026#39;@angular/core\u0026#39;; import { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from \u0026#39;@angular/router\u0026#39;; import { Observable } from \u0026#39;rxjs\u0026#39;; import { TokenStorageService } from \u0026#39;../services/token-storage.service\u0026#39;; @Injectable({ providedIn: \u0026#39;root\u0026#39; }) export class AuthGuard implements CanActivate { constructor(private router: Router, private tokenService: TokenStorageService) {}; canActivate( route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable\u0026lt;boolean | UrlTree\u0026gt; | Promise\u0026lt;boolean | UrlTree\u0026gt; | boolean | UrlTree { if(this.tokenService.getToken()) return true; this.router.navigate([\u0026#39;/login\u0026#39;]); return true; } } app-routing.module.ts ä¸­çš„è·¯ç”±è¨­å®šï¼Œå°‡ AuthGurad åŠ å…¥åˆ°è¦ä¿è­·çš„ è·¯ç”±è¨­å®šã€€ä¸­ã€‚å¦‚ä¸‹ç¨‹å¼ç¬¬18è¡Œ{ path: 'add-todo', canActivate:[AuthGuard], component: AddTodoComponent },ï¼Œå…¶ä¸­çš„ã€€canActivate:[AuthGuard] å°±æ˜¯å¹«é€™å€‹è·¯ç”±è¨­å®šåŠ å…¥äº† â€˜AuthGuardâ€™ é€™å€‹æ””æˆªå™¨ä¾†èµ·åˆ°ä¿è­·é€™å€‹è·¯ç”±çš„ä½œç”¨ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28  // app-routing.module.ts import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { RouterModule, Routes } from \u0026#39;@angular/router\u0026#39;; import { BoardAdminComponent } from \u0026#39;./pages/board-admin/board-admin.component\u0026#39;; import { BoardModeratorComponent } from \u0026#39;./pages/board-moderator/board-moderator.component\u0026#39;; import { BoardUserComponent } from \u0026#39;./pages/board-user/board-user.component\u0026#39;; import { HomeComponent } from \u0026#39;./pages/home/home.component\u0026#39;; import { LoginComponent } from \u0026#39;./pages/login/login.component\u0026#39;; import { ProfileComponent } from \u0026#39;./pages/profile/profile.component\u0026#39;; import { RegisterComponent } from \u0026#39;./pages/register/register.component\u0026#39;; import { AuthGuard } from \u0026#39;./shared/guard/auth.guard\u0026#39;;  const routes: Routes = [ { path: \u0026#39;home\u0026#39;, component: HomeComponent }, { path: \u0026#39;login\u0026#39;, component: LoginComponent }, { path: \u0026#39;register\u0026#39;, component: RegisterComponent }, { path: \u0026#39;profile\u0026#39;, component: ProfileComponent }, { path: \u0026#39;user\u0026#39;, component: BoardUserComponent, canActivate:[AuthGuard] },  { path: \u0026#39;moderator\u0026#39;, component: BoardModeratorComponent, canActivate:[AuthGuard, RoleGuard], data: {roles: [\u0026#39;moderator\u0026#39;]} }, { path: \u0026#39;admin\u0026#39;, component: BoardAdminComponent, canActivate:[AuthGuard, RoleGuard], data: {roles: [\u0026#39;admin\u0026#39;]} }, { path: \u0026#39;\u0026#39;, redirectTo: \u0026#39;home\u0026#39;, pathMatch: \u0026#39;full\u0026#39;} ]; @NgModule({ imports: [RouterModule.forRoot(routes)], exports: [RouterModule] }) export class AppRoutingModule { }   è§’è‰²æˆæ¬Šæ””æˆªå™¨ roleGuard é€™å€‹è·¯ç”±ä¿è­·å™¨çš„åŠŸèƒ½å°±æ˜¯ä¾†æ””æˆªç¾è¡Œçš„ä½¿ç”¨è€…æ˜¯å¦å…·å‚™æœ‰ç‰¹å®šçš„è§’è‰²ï¼Œè‹¥æ²’æœ‰æŒ‡å®šçš„è§’è‰²ä¸å¾—åŸ·è¡Œç‰¹å®šçš„è·¯ç”±ã€‚ä¸¦é¡¯ç¤ºç›®å‰ä½¿æœ‰è€…æ‰€å…·å‚™çš„è§’è‰²æœ‰é‚£äº›ã€‚\n// role.guard.ts import { Injectable } from \u0026#39;@angular/core\u0026#39;; import { ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree } from \u0026#39;@angular/router\u0026#39;; import { Observable } from \u0026#39;rxjs\u0026#39;; import { TokenStorageService } from \u0026#39;../services/token-storage.service\u0026#39;; @Injectable({ providedIn: \u0026#39;root\u0026#39; }) export class RoleGuard implements CanActivate { constructor(private router: Router, private tokenService: TokenStorageService) {}; canActivate( route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable\u0026lt;boolean | UrlTree\u0026gt; | Promise\u0026lt;boolean | UrlTree\u0026gt; | boolean | UrlTree { const roles = this.tokenService.getUser().roles; const rolesPara = route.data[\u0026#34;roles\u0026#34;] as Array\u0026lt;string\u0026gt;; let searchRole = \u0026#39;USER\u0026#39;; if (rolesPara) { searchRole = rolesPara[0].toUpperCase(); } if (roles) { const rolesArray = roles as Array\u0026lt;string\u0026gt; if (rolesArray.indexOf(searchRole) != -1) return true; }; this.router.navigate([\u0026#39;/login\u0026#39;]); return true; } } app-routing.module.ts ä¸­çš„è·¯ç”±è¨­å®šï¼Œå°‡ AuthGurad åŠ å…¥åˆ°è¦ä¿è­·çš„ è·¯ç”±è¨­å®šã€€ä¸­ã€‚å¦‚ä¸‹ç¨‹å¼ç¬¬18è¡Œ{ path: 'add-todo', canActivate:[AuthGuard], component: AddTodoComponent },ï¼Œå…¶ä¸­çš„ã€€canActivate:[AuthGuard] å°±æ˜¯å¹«é€™å€‹è·¯ç”±è¨­å®šåŠ å…¥äº† â€˜AuthGuardâ€™ é€™å€‹æ””æˆªå™¨ä¾†èµ·åˆ°ä¿è­·é€™å€‹è·¯ç”±çš„ä½œç”¨ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  // app-routing.module.ts import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { RouterModule, Routes } from \u0026#39;@angular/router\u0026#39;; import { BoardAdminComponent } from \u0026#39;./pages/board-admin/board-admin.component\u0026#39;; import { BoardModeratorComponent } from \u0026#39;./pages/board-moderator/board-moderator.component\u0026#39;; import { BoardUserComponent } from \u0026#39;./pages/board-user/board-user.component\u0026#39;; import { HomeComponent } from \u0026#39;./pages/home/home.component\u0026#39;; import { LoginComponent } from \u0026#39;./pages/login/login.component\u0026#39;; import { ProfileComponent } from \u0026#39;./pages/profile/profile.component\u0026#39;; import { RegisterComponent } from \u0026#39;./pages/register/register.component\u0026#39;; import { AuthGuard } from \u0026#39;./shared/guard/auth.guard\u0026#39;; import { RoleGuard } from \u0026#39;./shared/guard/role.guard\u0026#39;;  const routes: Routes = [ { path: \u0026#39;home\u0026#39;, component: HomeComponent }, { path: \u0026#39;login\u0026#39;, component: LoginComponent }, { path: \u0026#39;register\u0026#39;, component: RegisterComponent }, { path: \u0026#39;profile\u0026#39;, component: ProfileComponent }, { path: \u0026#39;user\u0026#39;, component: BoardUserComponent, canActivate:[AuthGuard] }, { path: \u0026#39;moderator\u0026#39;, component: BoardModeratorComponent, canActivate:[AuthGuard, RoleGuard], data: {roles: [\u0026#39;moderator\u0026#39;]} },  { path: \u0026#39;admin\u0026#39;, component: BoardAdminComponent, canActivate:[AuthGuard, RoleGuard], data: {roles: [\u0026#39;admin\u0026#39;]} }, { path: \u0026#39;\u0026#39;, redirectTo: \u0026#39;home\u0026#39;, pathMatch: \u0026#39;full\u0026#39;} ]; @NgModule({ imports: [RouterModule.forRoot(routes)], exports: [RouterModule] }) export class AppRoutingModule { }   ","permalink":"https://calvinegs.github.io/posts/angular-auth-jwt/","summary":"github Source code\næœ¬æ–‡è¨˜éŒ„å¦‚ä½•ä¸€æ­¥æ­¥å¾ç„¡åˆ°æœ‰ä½¿ç”¨ Angular 14 Reactive Form è¡¨å–®é©—è­‰ èˆ‡ Bootstrap 5 å»ºç«‹ ä¸€å€‹ä½¿ç”¨è€…è³‡æ–™è¨»å†Šã€ç™»å…¥çš„è¡¨å–®åŠŸèƒ½é€£çµåˆ°å¾Œç«¯ API (node+postgresSQL)ï¼Œåœ¨é€™äº›è¡¨å–®ä¸­æŒ‰ä¸‹é€å‡ºæ™‚æœƒè‡ªå‹•æª¢æ ¸ä½¿ç”¨è€…æ‰€è¼¸å…¥çš„è³‡æ–™æ˜¯å¦åˆä¹ç¨‹å¼ä¸­æ‰€è¨­å®šçš„æª¢æ ¸é‚è¼¯ï¼Œä¸¦é¡¯ç¤ºåˆé©çš„è¨Šæ¯åæ‡‰çµ¦ä½¿ç”¨è€…ã€‚å…¶ä¸­å°‡æœƒä½¿ç”¨åˆ°ä¸‹åˆ—æŠ€è¡“:\n Angular CLI 14 Bootstrap 5 (UI Framework) Angular  Reactive Form Custome Validator Interceptor JWT Session Storage Router Services Guard \u0026amp; Router Data    å®‰è£ Angular/CLI æª¢è¦–ç›®å‰ç’°å¢ƒç‚º node v16.14.0ï¼Œ global å®‰è£çš„æ˜¯ Angular CLI 13.3.6\n$ node --version v16.14.0 $ ng version _ _ ____ _ ___ / \\  _ __ __ _ _ _| | __ _ _ __ / ___| | |_ _| / â–³ \\ | \u0026#39;_ \\ / _` | | | | |/ _` | \u0026#39;__| | | | | | | / ___ \\| | | | (_| | |_| | | (_| | | | |___| |___ | | /_/ \\_\\_| |_|\\__, |\\__,_|_|\\__,_|_| \\____|_____|___| |___/ Angular CLI: 13.","title":"ä½¿ç”¨ Angular 14 å»ºç«‹ Reactive Form è¡¨å–®é©—è­‰ç¯„ä¾‹"},{"content":"github Source code\nTechnology:\n NodeJs 17.6.0 Express 4.17.1 cors 2.8.5 crypto-js 4.1.1 # åŠ è§£å¯†å¥—ä»¶ jsonwebtoken 8.5.1 # Json Web Token çš„åŠŸèƒ½å¥—ä»¶ Sequelize 6.20.1 # ORM å¥—ä»¶ pg 8.7.3 # PostgreSQL client for Node.js pg-hstore 2.3.4 # serializing and deserializing JSON data to hstore format PostgreSQL 14.3 # ä½¿ç”¨çš„è³‡æ–™åº«  å°ˆæ¡ˆå®Œæˆå¾Œçš„æª”æ¡ˆçµæ§‹ ./å°ˆæ¡ˆç›®éŒ„ â”œâ”€â”€ app/ â”‚ â”œâ”€â”€ config/ â”‚ â”‚ â””â”€â”€ db.config.js â”‚ â”œâ”€â”€ middleware/ â”‚ â”‚ â”œâ”€â”€ auth.jwt.js â”‚ â”‚ â”œâ”€â”€ index.js â”‚ â”‚ â””â”€â”€ verify.signup.js â”‚ â”œâ”€â”€ models/ â”‚ â”‚ â”œâ”€â”€ index.js â”‚ â”‚ â”œâ”€â”€ role.model.js â”‚ â”‚ â””â”€â”€ user.model.js â”‚ â”œâ”€â”€ routes/ â”‚ â”‚ â”œâ”€â”€ auth.routes.js â”‚ â”‚ â””â”€â”€ user.routes.js â”‚ â””â”€â”€ services/ â”‚ â”œâ”€â”€ auth.service.js â”‚ â””â”€â”€ user.service.js â”œâ”€â”€ node_modules/ â”œâ”€â”€ .env â”œâ”€â”€ .gitignore â”œâ”€â”€ package.json â”œâ”€â”€ README.md â”œâ”€â”€ server.js â””â”€â”€ yarn-lock å°ˆæ¡ˆå®Œæˆå¾Œæ‰€æä¾›çš„ API ç«¯é»    Methods Urls Actions     POST /api/auth/signup è¨»å†Šæ–°ä½¿ç”¨è€…å¸³è™Ÿ   POST /api/auth/signin ä½¿ç”¨è€…å¸³è™Ÿç™»å…¥   GET /api/users/test/all é€ è¨ªå…¬é–‹å…§å®¹å€   GET /api/users/test/user é€ è¨ªï½€ä¸€èˆ¬ä½¿ç”¨è€…ï½€å…§å®¹å€   GET /api/users/test/moderator é€ è¨ªï½€ç‰ˆä¸»ï½€å…§å®¹å€   GET /api/users/test/admin é€ è¨ªä¸€èˆ¬ï½€ç®¡ç†è€…ï½€å…§å®¹å€    è¨­ç½®å°ˆæ¡ˆç’°å¢ƒ $ node --version # æª¢æ¸¬ç’°å¢ƒå·²è£å¦¥ node.js (è‹¥å·²å®‰è£æœƒé¡¯ç¤ºç›®å‰å®‰è£çš„ç‰ˆæœ¬ï¼‰ v17.6.0 $ mkdir nodejs-webapi-jwt-postgre \u0026amp;\u0026amp; cd nodejs-webapi-jwt-postgre ï¼ƒ å»ºç«‹ä¸€å€‹å°ˆæ¡ˆç›®éŒ„ $ npm init\tï¼ƒ ç”£ç”Ÿä¸€å°ˆæ¡ˆè¨­å®šæª” package.json $ touch server.js\tï¼ƒ ç”£ç”Ÿä¸€å€‹æ–°æª”æ¡ˆ  package.json é è¨­çš„å…§å®¹\n { \u0026#34;name\u0026#34;: \u0026#34;nodejs-webapi-jwt-postgres\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Node.js + exporess + JWT + PostgresSQL\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;server.js\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;test\u0026#34;: \u0026#34;echo \\\u0026#34;Error: no test specified\\\u0026#34; \u0026amp;\u0026amp; exit 1\u0026#34; }, \u0026#34;keywords\u0026#34;: [ \u0026#34;node.js\u0026#34;, \u0026#34;express\u0026#34;, \u0026#34;jwt\u0026#34;, \u0026#34;postgres\u0026#34; ], \u0026#34;author\u0026#34;: \u0026#34;calvin\u0026#34;, \u0026#34;license\u0026#34;: \u0026#34;ISC\u0026#34; }  å®‰è£ç›¸ä¾å¥—ä»¶\n $ yarn add express dotenv sequelize pg pg-hstore # åŠ å…¥ç›¸ä¾å¥—ä»¶ $ yarn add --dev nodemon # åŠ å…¥é–‹ç™¼æ™‚æœŸç›¸ä¾å¥—ä»¶  å»ºç«‹ git åˆå§‹ç‰ˆæœ¬\n $ git init $ echo 'node_modules/' \u0026gt; .gitignore # æ–°å¢ git ignore è¨­å®šæª”ï¼Œä¸¦è¨­å®š node_modules/ ç›®éŒ„ä¸åŠ å…¥ç‰ˆæ§ $ echo 'yarn.lock' \u0026gt;\u0026gt; .gitignore $ git add . \u0026amp;\u0026amp; git commit -m \u0026quot;Initial commit\u0026quot; å»ºç«‹ git åˆå§‹ç‰ˆæœ¬çš„è³‡è¨Š  è¨­å®šå°ˆæ¡ˆå•Ÿå‹•æŒ‡ä»¤ï¼ˆå¦‚ç¬¬ä¸ƒè¡Œçš„æŒ‡ä»¤è¨­å®šï¼‰ï¼Œç•¶è¼¸å…¥ npm start æ™‚ç³»çµ±è‡ªå‹•ä»¥ node ä¾†åŸ·è¡Œ server.js ç¨‹å¼ï¼Œä¸¦å³æ™‚ç›£æ¸¬ server.js æª”æ¡ˆæœ‰è®ŠåŒ–å­˜æª”æ™‚é¦¬ä¸Šé‡æ–°å•Ÿå‹• node server.js ä¾†åŸ·è¡Œè©²ç¨‹å¼ã€‚\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  { \u0026#34;name\u0026#34;: \u0026#34;nodejs-webapi-jwt-postgres\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;Node.js + exporess + JWT + PostgresSQL\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;server.js\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;nodemon server.js\u0026#34;  }, \u0026#34;keywords\u0026#34;: [ \u0026#34;node.js\u0026#34;, \u0026#34;express\u0026#34;, \u0026#34;jwt\u0026#34;, \u0026#34;postgres\u0026#34; ], \u0026#34;author\u0026#34;: \u0026#34;calvin\u0026#34;, \u0026#34;license\u0026#34;: \u0026#34;ISC\u0026#34;, \u0026#34;dependencies\u0026#34;: { \u0026#34;dotenv\u0026#34;: \u0026#34;^16.0.1\u0026#34;, \u0026#34;express\u0026#34;: \u0026#34;^4.18.1\u0026#34;, \u0026#34;pg\u0026#34;: \u0026#34;^8.7.3\u0026#34;, \u0026#34;pg-hstore\u0026#34;: \u0026#34;^2.3.4\u0026#34;, \u0026#34;sequelize\u0026#34;: \u0026#34;^6.20.1\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;nodemon\u0026#34;: \u0026#34;^2.0.16\u0026#34; } }    åœ¨ server.js ä¸­åŠ å…¥æ­¤è¡Œç¨‹å¼ï¼Œä¸¦åœ¨ vscode Terminal ä¸­è¼¸å…¥ npm start\n console.log(\u0026#34;Hi NodeJS...\u0026#34;)\t é¡¯ç¤ºçµæœå¦‚ä¸‹\n Hi NodeJS... å»ºç«‹ä¸€å€‹ Express æ‡‰ç”¨ç¨‹å¼  ä½¿ç”¨ä»¥ä¸‹ç¨‹å¼è¦†è“‹ server.js æª”æ¡ˆ\n const express = require(\u0026#34;express\u0026#34;); const app = express(); app.get(\u0026#39;/\u0026#39;, function (req, res) { res.send(\u0026#39;Hello World\u0026#39;) }); app.get(\u0026#34;/api/test\u0026#34;, (req, res) =\u0026gt; { console.log(\u0026#34;test is successful\u0026#34;); res.send(\u0026#34;test is successful\u0026#34;); }); const PORT = process.env.PORT || 5000; app.listen(PORT, () =\u0026gt; { console.log(`Backend server is running on port ${PORT}`); })  å­˜æª”å¾Œï¼Œé–‹å•Ÿ ç€è¦½å™¨ï¼Œè¼¸å…¥ localhost:5000/api/testï¼Œåœ¨ vscode terminal è¦–çª—ä¸­æœƒé¡¯ç¤ºï¼š\n Backend server is running on port 5000 test is successful ä½¿ç”¨ Node.js é€£çµ PostgresSQL è‹¥ä½ é‚„æ²’æœ‰å®‰è£ PostgresSQL å¯ä»¥åƒè€ƒé€™ç­†è¨˜å…ˆå°‡è³‡æ–™åº«ç®¡ç†ç³»çµ±å‚™å¦¥ ä½¿ç”¨ Docker åŸ·è¡Œ PostgresSQL èˆ‡ pgAdmin\nåœ¨ç¨‹å¼ä¸­ä½¿ç”¨äº† sequelize é€™å€‹å¥—ä»¶çš„åŠŸèƒ½ä¾†é€£çµ Postgres è³‡æ–™åº«ï¼Œç›´æ¥é€é Sequelize constructor ä¾†çµ¦å®šé€£çµè³‡æ–™åº«çš„åƒæ•¸ï¼ŒåŒ…å« â€œè³‡æ–™åº«åç¨±â€œã€â€User Id\u0026quot;ã€\u0026ldquo;Password\u0026rdquo;ã€â€œHost Name\u0026quot;ã€\u0026ldquo;è³‡æ–™åº«é¡åˆ¥â€œ(dialect)ç­‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24  const express = require(\u0026#34;express\u0026#34;); const app = express(); const { Sequelize } = require(\u0026#39;sequelize\u0026#39;); const sequelize = new Sequelize(\u0026#39;testdb\u0026#39;, \u0026#39;postgres\u0026#39;, \u0026#39;12345\u0026#39;, { host: \u0026#39;localhost\u0026#39;, dialect: \u0026#39;postgres\u0026#39; }); try { sequelize.authenticate(); console.log(\u0026#39;Connection has been established successfully.\u0026#39;); } catch (error) { console.error(\u0026#39;Unable to connect to the database:\u0026#39;, error); } app.get(\u0026#34;/api/test\u0026#34;, (req, res) =\u0026gt; { console.log(\u0026#34;test is successful\u0026#34;); res.send(\u0026#34;test is successful\u0026#34;); }); const PORT = process.env.PORT || 5000; app.listen(PORT, () =\u0026gt; { console.log(`Backend server is running on port ${PORT}`); })    å­˜æª”å¾Œï¼Œåœ¨ vscode terminal è¦–çª—ä¸­æœƒé¡¯ç¤ºï¼š\n Connection has been established successfully. Backend server is running on port 5000  è¡¨ç¤ºé€£çµæˆåŠŸã€‚\n å°ˆæ¡ˆç›®éŒ„ æ¥ä¸‹ä¾†è¦é™¸çºŒå®Œæˆç›¸é—œç¨‹å¼ï¼Œç‚ºä½¿ç¨‹å¼æ¶æ§‹æ›´é¡¯æ¸…æ™°ï¼Œå°ˆæ¡ˆç›®éŒ„è¦åŠƒå¦‚ä¸‹ï¼š\n./å°ˆæ¡ˆç›®éŒ„ â”œâ”€â”€ app/ ï¼ƒ ç¨‹å¼ç›®éŒ„ â”‚ â”œâ”€â”€ config/ ï¼ƒ è¨­ç½®é€£çµ PostgresSQL è³‡æ–™åº«çš„åƒæ•¸ â”‚ â”œâ”€â”€ middleware/ â”‚ â”œâ”€â”€ models/ â”‚ â”œâ”€â”€ routes/ â”‚ â””â”€â”€ services/ ï¼ƒ æ¥­å‹™é‚è¼¯ â”œâ”€â”€ node_modules/ â”œâ”€â”€ .env ï¼ƒ ç¨‹å¼ä¸­çš„ç›¸é—œâ€œè¨­å®šå€¼â€ â”œâ”€â”€ .gitignore â”œâ”€â”€ package-lock.json â”œâ”€â”€ package.json â”œâ”€â”€ README.md â”œâ”€â”€ server.js # ä¸»ç¨‹å¼ â””â”€â”€ yarn.loc å½ˆæ€§ç®¡ç†åƒæ•¸å€¼ ç®¡ç†ç¨‹å¼ä¸­çš„â€œè³‡æ–™åº«é€£çµè¨­å®šå€¼â€ åœ¨ app/config/ç›®éŒ„ä¸­æ–°å¢ä¸€æ”¯ db.config.js ç¨‹å¼å…§å®¹å¦‚ä¸‹ï¼š\nmodule.exports = { HOST: \u0026#34;localhost\u0026#34;, // Host Name  USER: \u0026#34;postgres\u0026#34;, // User Name  PASSWORD: \u0026#34;12345\u0026#34;, // Password  DB: \u0026#34;testdb\u0026#34;, // Database Name  dialect: \u0026#34;postgres\u0026#34;, // è³‡æ–™åº«é¡åˆ¥  pool: { max: 5, //ã€€é€£çµæ± ä¸­æœ€å¤§çš„ connection æ•¸  min: 0, acquire: 30000, //ã€€é€£çµ Timeout æ™‚é–“(æ¯«ç§’)  idle: 10000 //ã€€é€£çµè¢«é‡‹æ”¾çš„ idle æ™‚é–“(æ¯«ç§’)  } }; ç®¡ç†ç¨‹å¼ä¸­çš„â€œè¨­å®šå€¼â€  ä½¿ç”¨ dotenv å¥—ä»¶çš„åŠŸèƒ½ä¾†ç®¡ç†ç¨‹å¼ä¸­ç›¸é—œçš„è¨­å®šå€¼\n  é¦–å…ˆåœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹å»ºç«‹ä¸€å€‹åç‚º \u0026ldquo;.env\u0026rdquo; çš„æª”æ¡ˆ  JWT_SEC=Jason-Web-Token-Secret-key-jaslkdjfhjwkej01kd1954  åœ¨ç¨‹å¼ä¸­å…ˆåŒ¯å…¥ dotenv å¥—ä»¶(ç¬¬1è¡Œï¼‰ï¼Œå†â€œå•Ÿå‹•å®ƒâ€(ç¬¬2è¡Œï¼‰ï¼Œä½¿ç”¨æ™‚é€é â€œprocess.env.JWT_SEC\u0026rdquo; èªæ³•å–å¾— JWT_SECçš„è¨­å®šå€¼ ç¬¬å››è¡Œç¨‹å¼ç¢¼ä¸­çš„ process.env.PORT ç‚ºç›¸åŒçš„åŸå‰‡å¯åœ¨ .evn æª”æ¡ˆä¸­åŠ å…¥ PORT çš„è¨­å®šå€¼èª¿æ•´  const dotenv = require(\u0026#34;dotenv\u0026#34;); dotenv.config(); // ... const PORT = process.env.PORT || 5000; // port é è¨­ç‚º 5000 ï¼Œä¸¦å¯ä»¥åœ¨ .env æª”æ¡ˆä¸­é€²è¡Œå®¢è£½åŒ– ï¼ˆå¦‚ï¼šPORTï¼5001ï¼‰ app.listen(PORT, () =\u0026gt; { console.log(`Backend server is running on port ${PORT}`); }) å®šç¾© Sequelize æ¨¡å‹ åœ¨ app/models/ç›®éŒ„ä¸­æ–°å¢ä¸€æ”¯ user.model.js ç¨‹å¼å…§å®¹å¦‚ä¸‹ï¼Œé€™å€‹è¨­å®šè³‡æ–™å¯æ­åˆ sequelize.sync() åŠŸèƒ½è‡ªå‹•åœ¨ PostgresSQL è³‡æ–™åº«ä¸­å»ºç«‹ä¸€å€‹åç‚º users çš„è³‡æ–™è¡¨(table)ï¼Œå…±æœ‰ä¸‰å€‹çš†ç‚º string å‹æ…‹çš„æ¬„ä½ï¼Œåˆ†åˆ¥ç‚º usernameã€emailã€passwordã€‚\nmodule.exports = (sequelize, Sequelize) =\u0026gt; { const User = sequelize.define(\u0026#34;users\u0026#34;, { username: { type: Sequelize.STRING }, email: { type: Sequelize.STRING }, password: { type: Sequelize.STRING } }); return User; }; åŒæ™‚åœ¨ initial Sequelize å¾Œï¼Œæˆ‘å€‘ä¸éœ€è¦ç·¨å¯« CRUD å‡½æ•¸ï¼ŒSequelize æ”¯æŒæ‰€æœ‰é€™äº›å‡½æ•¸\n å»ºç«‹ä¸€å€‹æ–°çš„ user: create(object) é€é id æ‰¾åˆ°ä¸€å€‹ã€€user: findByPk(id) é€é email æ‰¾åˆ°ä¸€å€‹ã€€user: findOne({ where: { email: \u0026hellip; } }) å–å¾—æ‰€æœ‰ä½¿ç”¨è€…: findAll() é€é username æ‰¾åˆ°ç¬¦åˆçš„ã€€user: findAll({ where: { username: \u0026hellip; } })  åœ¨ app/models/ç›®éŒ„ä¸­æ–°å¢ä¸€æ”¯ role.model.js ç¨‹å¼å…§å®¹å¦‚ä¸‹\nmodule.exports = (sequelize, Sequelize) =\u0026gt; { const Role = sequelize.define(\u0026#34;roles\u0026#34;, { id: { type: Sequelize.INTEGER, primaryKey: true }, name: { type: Sequelize.STRING } }); return Role; }; åˆå§‹åŒ– Sequelize åœ¨ app/models/ç›®éŒ„ä¸­æ–°å¢ä¸€æ”¯ index.js ç¨‹å¼å…§å®¹å¦‚ä¸‹\nconst config = require(\u0026#34;../config/db.config.js\u0026#34;); // å¼•å…¥è³‡æ–™åº«é€£çµè¨­å®šæª” const Sequelize = require(\u0026#34;sequelize\u0026#34;); const sequelize = new Sequelize( // ç”±è³‡æ–™åº«é€£çµè¨­å®šæª”çš„è¨­å®šå€¼ä¾†å‚™ç½® Sequelize  config.DB, config.USER, config.PASSWORD, { host: config.HOST, dialect: config.dialect, operatorsAliases: false, pool: { max: config.pool.max, min: config.pool.min, acquire: config.pool.acquire, idle: config.pool.idle } } ); const db = {}; db.Sequelize = Sequelize; db.sequelize = sequelize; db.user = require(\u0026#34;../models/user.model.js\u0026#34;)(sequelize, Sequelize); db.role = require(\u0026#34;../models/role.model.js\u0026#34;)(sequelize, Sequelize); // è¨­å®šå…©è³‡æ–™è¡¨çš„å°æ‡‰é—œä¿‚ï¼ˆå¤šå°å¤šï¼Œæ‰€ä»¥æœƒå¤šå‡ºä¸€å€‹æ–°çš„è¡¨ user_rolesï¼‰ // ä¸€å€‹ä½¿ç”¨è€…å¯èƒ½æœ‰å¤šå€‹è§’è‰² // ä¸€å€‹è§’è‰²ä¹Ÿå¯èƒ½æœ‰å¤šå€‹ä½¿ç”¨è€… db.role.belongsToMany(db.user, { through: \u0026#34;user_roles\u0026#34;, foreignKey: \u0026#34;roleId\u0026#34;, otherKey: \u0026#34;userId\u0026#34; }); db.user.belongsToMany(db.role, { through: \u0026#34;user_roles\u0026#34;, foreignKey: \u0026#34;userId\u0026#34;, otherKey: \u0026#34;roleId\u0026#34; }); db.ROLES = [\u0026#34;user\u0026#34;, \u0026#34;admin\u0026#34;, \u0026#34;moderator\u0026#34;]; module.exports = db; åŸ·è¡Œç¨‹å¼ç”£ç”Ÿè³‡æ–™è¡¨èˆ‡è³‡æ–™ åœ¨ server.js ä¸»ç¨‹å¼ä¸­åŠ å…¥ä»¥ä¸‹ç¨‹å¼ const db = require(\u0026#34;./app/models\u0026#34;); // å¼•å…¥ app/models/index.js åŒ¯å‡ºçš„ç¨‹å¼ç¢¼(å³ sequelize model å®šç¾©æª”) const Role = db.role; // å‘¼å« sync function å°‡æœƒä¾ model å®šç¾©å…§å®¹ç”£ç”Ÿè³‡æ–™è¡¨ï¼Œforce åƒæ•¸å€¼ç‚º true å°‡æœƒé‡å»ºå·²å­˜åœ¨çš„è³‡æ–™è¡¨ db.sequelize.sync({ force: true }).then(() =\u0026gt; { console.log(\u0026#39;Drop and Resync Database with { force: true }\u0026#39;); initial(); // ç”£ç”Ÿè³‡æ–™è¡¨å¾Œï¼Œå‘¼å« initial function ç‚º roles table æ–°å¢ä¸‰ç­†åˆå§‹è³‡æ–™ }).catch((err) =\u0026gt; { console.log(err); }); const PORT = process.env.PORT || 5000; // port é è¨­ç‚º 5000 ï¼Œä¸¦å¯ä»¥åœ¨ .env æª”æ¡ˆä¸­é€²è¡Œå®¢è£½åŒ– ï¼ˆå¦‚ï¼šPORTï¼5001ï¼‰ app.listen(PORT, () =\u0026gt; { console.log(`Backend server is running on port ${PORT}`); }) // ç‚º roles table æ–°å¢ä¸‰ç­†åˆå§‹è³‡æ–™ function initial() { Role.create({ id: 1, name: \u0026#34;user\u0026#34; }); Role.create({ id: 2, name: \u0026#34;moderator\u0026#34; }); Role.create({ id: 3, name: \u0026#34;admin\u0026#34; }); } åŸ·è¡Œç¨‹å¼ç”£ç”Ÿè³‡æ–™è¡¨ ç¨‹å¼åŸ·è¡ŒæˆåŠŸå¾Œå¯ä»¥æŸ¥çœ‹è³‡æ–™åº«å·²é †åˆ©ç”£ç”Ÿä¸‰å€‹è³‡æ–™è¡¨ä»¥åŠ roles table ä¸­çš„ä¸‰ç­†åˆå§‹è³‡æ–™\näº†è§£ Node.js è·¯ç”± å»ºç«‹ user.routes.js router file æ–°å¢ routes ç›®éŒ„ï¼Œåœ¨æ­¤ç›®éŒ„ä¸‹æ–°å¢ user.routes.js æª”æ¡ˆ\n routes/user.routes.js\n const router = require(\u0026#34;express\u0026#34;).Router(); router.get(\u0026#34;/usertest\u0026#34;, (req, res) =\u0026gt; { res.send(\u0026#34;user test is successful\u0026#34;); }); module.exports = router; åœ¨ server.js ç¨‹å¼ä¸­å…ˆåŒ¯å…¥ \u0026ldquo;./app/routes/user.routes\u0026rdquo; é€™å€‹ router è¨­å®šæª”ï¼Œå†é€é app.use èªæ³•ä¾†ä½¿ç”¨é€™å€‹ router(ç¬¬9è¡Œ)ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13  const express = require(\u0026#34;express\u0026#34;); const app = express(); const dotenv = require(\u0026#34;dotenv\u0026#34;); const userRoute = require(\u0026#34;./app/routes/user.routes\u0026#34;);  dotenv.config(); app.use(\u0026#34;/api/users\u0026#34;, userRoute);  app.listen(process.env.PORT || 5000, ()=\u0026gt;{ console.log(\u0026#34;Backend server is running...\u0026#34;); });   é–‹å•Ÿç€è¦§å™¨ï¼Œè¼¸å…¥ http:5000/api/users/usertestï¼Œç€è¦§å™¨å°‡å‘ˆç¾æˆåŠŸè¨Šæ¯\nuser test is successfull ç‚º routes/user.routes.js å†æ–°å¢ä¸€å€‹ post method\n1 2 3 4 5 6 7 8 9 10 11  const router = require(\u0026#34;express\u0026#34;).Router(); router.get(\u0026#34;/usertest\u0026#34;, (req, res) =\u0026gt; { res.send(\u0026#34;user test is successful\u0026#34;); }); router.post(\u0026#34;/userposttest\u0026#34;, (req, res) =\u0026gt; { const username = req.body.username; res.send(\u0026#34;your username is: \u0026#34; + username) })  module.exports = router;   ä½¿ç”¨ postman ä¾†æ¸¬è©¦ postï¼Œçµæœå›å‚³çš„æ˜¯ Server Errorï¼ŒåŸå› æ˜¯ express é è¨­æ˜¯ä¸æ¥å— json æ ¼å¼çš„è³‡æ–™ã€‚\nåœ¨ server.js ç¨‹å¼ä¸­åŠ å…¥å¦‚ç¬¬ä¸€è¡Œçš„è¨­å®š\n1 2  app.use(express.json()); app.use(\u0026#34;/api/users\u0026#34;, userRoute);   è¨­å®šå®Œæˆå¾Œå°±å¯æ­£å¸¸äº†\nå»ºç«‹ auth.routes.js router file å°‡ä½¿ç”¨è€…è³‡æ–™è¨»å†Šå’Œè³‡ç”¨è€…å¸³è™Ÿé©—è­‰çš„æ©Ÿåˆ¶ç¨ç«‹åœ¨é€™å€‹ route file ä¸­ï¼Œè®“ç¨‹å¼çµæ§‹æ›´æ¸…æ™°ã€‚å…§å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10  // routes/auth.routes.js const router = require(\u0026#34;express\u0026#34;).Router(); const authService = require(\u0026#34;../services/auth.service\u0026#34;);  // å¸³è™Ÿè¨»å†Š router.post(\u0026#34;/signup\u0026#34;, authService.signup); // ç™»å…¥ router.post(\u0026#34;/signin\u0026#34;, authService.signin);  module.exports = router;    åœ¨ auth.routes.js route ç¨‹å¼ä¸­åŸºæ–¼ï½€é—œæ³¨é»åˆ†é›¢åŸå‰‡ï½€æŠŠï½€å•†æ¥­é‚è¼¯ï½€çš„éƒ¨ä»½å†åˆ†é›¢è‡³ services ä¸­ã€‚\n  åœ¨ ./app ç›®éŒ„ä¸‹æ–°å¢ services å­ç›®éŒ„ï¼Œä¸¦æ–°å¢ä¸€æ”¯ auth.service.js ç¨‹å¼ï¼Œå°‡ä½¿ç”¨è€…è¨»å†ŠåŠç™»å…¥é‚è¼¯æ”¾åœ¨é€™æ”¯ service ç¨‹å¼ä¸­ï¼Œå…§å®¹å¦‚ä¸‹ï¼š\n  åœ¨é€™æ”¯ç¨‹å¼ä¸­æœƒä½¿ç”¨åˆ°é¡å¤–çš„å¥—ä»¶ï¼Œå¿…é ˆå…ˆé€²è¡Œå®‰è£ã€‚$ yarn add crypto-js jsonwebtokenã€‚å…¶ä¸­ crypto-js ç”¨ä¾†é€²è¡Œä½¿ç”¨è€…å¯†ç¢¼åŠ è§£å¯†(ç¨‹å¼ç¬¬2ã€15ã€50ã€51è¡Œ)ï¼Œè€Œ jsonwebtoken å¥—ä»¶å‰‡æ˜¯æ”¯æ´ Json Web Token åŠŸèƒ½(ç¨‹å¼ç¬¬55è¡Œä½¿ç”¨ jwt.sign ç”£ç”Ÿåˆæ³• Token)ã€‚\n // auth.service.js const db = require(\u0026quot;../models\u0026quot;); const CryptoJS = require(\u0026quot;crypto-js\u0026quot;); const jwt = require(\u0026quot;jsonwebtoken\u0026quot;); const User = db.user; const Role = db.role; const Op = db.Sequelize.Op; const signup = (req, res) =\u0026gt; { // Save User to Database User.create({ username: req.body.username, email: req.body.email, password: CryptoJS.AES.encrypt(req.body.password, process.env.PASS_SEC).toString(), }).then(user =\u0026gt; { if (req.body.roles) { Role.findAll({ where: { name: { [Op.or]: req.body.roles } } }).then(roles =\u0026gt; { user.setRoles(roles).then(() =\u0026gt; { res.send({ message: \u0026quot;User registered successfully!\u0026quot; }); }); }); } else { // user role = 1 user.setRoles([1]).then(() =\u0026gt; { res.send({ message: \u0026quot;User registered successfully!\u0026quot; }); }); } }).catch(err =\u0026gt; { res.status(500).send({ message: err.message }); }); }; const signin = (req, res) =\u0026gt; { User.findOne({ where: { username: req.body.username } }).then(user =\u0026gt; { if (!user) { return res.status(404).send({ message: \u0026quot;Wrong Credentials.\u0026quot; }); } const hashedPassword = CryptoJS.AES.decrypt(user.password, process.env.PASS_SEC); const orginalPassword = hashedPassword.toString(CryptoJS.enc.Utf8); orginalPassword !== req.body.password \u0026amp;\u0026amp; res.status(401).json(\u0026quot;Wrong Credentials\u0026quot;); const accessToken = jwt.sign( {id: user.id}, process.env.JWT_SEC, { expiresIn: \u0026quot;3d\u0026quot; } ); var authorities = []; user.getRoles().then(roles =\u0026gt; { for (let i = 0; i \u0026lt; roles.length; i++) { authorities.push(\u0026quot;ROLE_\u0026quot; + roles[i].name.toUpperCase()); } res.status(200).send({ id: user.id, username: user.username, email: user.email, roles: authorities, accessToken: accessToken }); }); }).catch(err =\u0026gt; { res.status(500).send({ message: err.message }); }); }; module.exports = { signup, signin };  åœ¨ server.js å¼•ç”¨é€™å€‹æ–°çš„ router\n 1 2 3 4 5 6 7 8 9 10 11 12  // ... const userRoute = require(\u0026#34;./app/routes/user.routes\u0026#34;); const authRoute = require(\u0026#34;./app/routes/auth.routes\u0026#34;); app.use(express.json()); app.use(\u0026#34;/api/users\u0026#34;, userRoute); app.use(\u0026#34;/api/auth\u0026#34;, authRoute);  const PORT = process.env.PORT || 5000; // port é è¨­ç‚º 5000 ï¼Œä¸¦å¯ä»¥åœ¨ .env æª”æ¡ˆä¸­é€²è¡Œå®¢è£½åŒ– ï¼ˆå¦‚ï¼šPORTï¼5001ï¼‰ app.listen(PORT, () =\u0026gt; { console.log(`Backend server is running on port ${PORT}`); })   æ¸¬è©¦ä½¿ç”¨è€…è¨»å†ŠåŠç™»å…¥åŠŸèƒ½ ä½¿ç”¨ postman é€²è¡Œä½¿ç”¨è€…è¨»å†ŠåŠŸèƒ½æ¸¬è©¦\n è¨»å†ŠæˆåŠŸå¾Œï¼Œåœ¨è³‡æ–™åº«ä¸­å·²æ–°å¢ä¸€ç­†ä½¿ç”¨è€…è³‡æ–™\n ä½¿ç”¨ postman é€²è¡Œä½¿ç”¨è€…ç™»å…¥åŠŸèƒ½æ¸¬è©¦\n ç™»å…¥æˆåŠŸå¾Œæœƒå›å‚³ä¸€å€‹ Token\n åœ¨ Node.js ä¸­ä½¿ç”¨ JWT ä¾†é€²è¡Œ Token-Based çš„ä½¿ç”¨è€…æˆæ¬Šé©—è­‰ ä½¿ç”¨ jsonwebtokenå¥—ä»¶å¯ä»¥å¯¦ç¾ Token-base çš„èº«ä»½é©—è­‰èˆ‡æˆæ¬Šè®“æˆ‘å€‘çš„ API ç¨‹å¼æ›´å®‰å…¨\nJWT å¯¦ä½œçš„éç¨‹å¤§è‡´å¯ä»¥åˆ†æˆä¸‰å€‹éƒ¨åˆ†:\n åœ¨ç™»å…¥æˆåŠŸå¾Œç”£ç”Ÿåˆæ³•çš„ JWT Token æ¯æ¬¡æ”¶åˆ° request æ™‚é©—è­‰æ˜¯å¦ç‚ºåˆæ³•æœ‰æ•ˆçš„ JWT Token åœ¨ç‰¹å®š API Endpoint ä¸Šé©—è­‰æ˜¯å¦å¸¶æœ‰ â€œåˆæ³•æœ‰æ•ˆçš„ JWT Tokenâ€ï¼Œä»¥é”åˆ°æ¬Šé™ç®¡ç†çš„éœ€æ±‚  ç”£ç”Ÿåˆæ³• JWT åœ¨ç™»å…¥è­‰é©—ä¸­åŠ å…¥ç”£ç”Ÿ Token çš„é‚è¼¯ï¼Œåœ¨æª¢æ ¸ä½¿ç”¨è€…è¼¸å…¥çš„å¯†ç¢¼æ­£ç¢ºå¾Œï¼Œå°‡ User ID (_idé€™å€‹å…§éƒ¨ Key)é€™å€‹å±¬æ€§å€¼é€é sign function ä¾†ç”£ç”Ÿ access tokenï¼Œä¸¦å›å‚³çµ¦å‰ç«¯ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  const jwt = require(\u0026#34;jsonwebtoken\u0026#34;); // åŒ¯å…¥ JsonWebTokenå¥—ä»¶ //...  const accessToken = jwt.sign({  id: user._id }, process.env.JWT_SEC,  { expiresIn: \u0026#34;3d\u0026#34; } ); var authorities = []; user.getRoles().then(roles =\u0026gt; { for (let i = 0; i \u0026lt; roles.length; i++) { authorities.push(\u0026#34;ROLE_\u0026#34; + roles[i].name.toUpperCase()); } res.status(200).send({ id: user.id, username: user.username, email: user.email, roles: authorities, accessToken: accessToken }); });    encrypt function åƒæ•¸é™¤äº†è¦åŠ å¯†çš„å­—ä¸²å¤–ï¼Œéœ€è¦ä¸€å€‹åŠ å¯† Keyï¼Œç‚ºå½ˆæ€§èµ·è¦‹ï¼ŒæŠŠå®ƒå¯«åœ¨ .env æª”æ¡ˆä¸­ (PASS_SEC)\n 1 2 3  # .env JWT_SEC=Jason-Web-Token-Secret-key-jaslkdjfhjwkej01kd1954 PASS_SEC=cal   ä½¿ç”¨ JWT ä¾†é©—è­‰ Token åœ¨å‰ç«¯å–å¾—åˆæ³•çš„ JWT Tokenå¾Œï¼Œä¾†çœ‹çœ‹ç•¶ä½¿ç”¨è€…åœ¨å‘¼å«å…¶ä»– API æ™‚ä¸€ä½µå›å‚³çš„ Tokenã€€å¦‚ä½•åœ¨ server ç«¯ä¾†é€²è¡Œé©—è­‰ã€‚\né¦–å…ˆï¼Œæˆ‘å€‘è¦åœ¨ app/ ç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹ middleware/ çš„å­ç›®éŒ„ï¼Œä¸¦åœ¨å…¶ä¸­æ–°å¢ä¸€å€‹åç‚º auth.jwt.js çš„ express Middlewareï¼Œç¨‹å¼å…§å®¹å¦‚ä¸‹\nåœ¨ç¨‹å¼ç¬¬14è¡Œä¸­ä½¿ç”¨ jsonwebtoken å¥—ä»¶çš„ verify function å°±æ˜¯ç”¨ä¾†é©—è­‰ request ä¸­çš„ Token æ˜¯å¦ç‚ºåˆæ³• Tokenã€‚é©—è­‰æ™‚ä¸€æ¨£éœ€è¦ï½€åŠ å¯† Keyï½€ä¾†ç•¶åƒæ•¸ã€‚\nåœ¨é€™ç¨‹å¼ä¸­é™¤äº†é©—è­‰ request ä¸­æ˜¯å¦æœ‰åˆæ³•çš„ Token å¤–ï¼Œé‚„æœ‰å…¶ä»–æˆæ¬Šæª¢æ ¸çš„é‚è¼¯ï¼šé©—è­‰æ˜¯å¦ç‚ºç®¡ç†è€…ã€é©—è­‰æ˜¯å¦ç‚ºç‰ˆä¸»ã€é©—è­‰æ˜¯å¦ç‚ºç®¡ç†è€…æˆ–æ˜¯ç‰ˆä¸»ç­‰ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88  const jwt = require(\u0026#34;jsonwebtoken\u0026#34;); const db = require(\u0026#34;../models\u0026#34;); const User = db.user; const verifyToken = (req, res, next) =\u0026gt; {  let authHeader = req.headers.authorization; if (!authHeader) { return res.status(403).send({ message: \u0026#34;Your are not authenticated!\u0026#34; }); } const token = authHeader.split(\u0026#34; \u0026#34;)[1]; jwt.verify(token, process.env.JWT_SEC, (err, decoded) =\u0026gt; {  if (err) { return res.status(401).send({ message: \u0026#34;Token is not valid!\u0026#34; }); } req.userId = decoded.id; next(); }); }; isAdmin = (req, res, next) =\u0026gt; {  User.findByPk(req.userId).then(user =\u0026gt; { user.getRoles().then(roles =\u0026gt; { for (let i = 0; i \u0026lt; roles.length; i++) { if (roles[i].name === \u0026#34;admin\u0026#34;) { next(); return; } } res.status(403).send({ message: \u0026#34;Require Admin Role!\u0026#34; }); return; }); }); }; const isModerator = (req, res, next) =\u0026gt; {  User.findByPk(req.userId).then(user =\u0026gt; { user.getRoles().then(roles =\u0026gt; { for (let i = 0; i \u0026lt; roles.length; i++) { if (roles[i].name === \u0026#34;moderator\u0026#34;) { next(); return; } } res.status(403).send({ message: \u0026#34;Require Moderator Role!\u0026#34; }); }); }); }; const isModeratorOrAdmin = (req, res, next) =\u0026gt; {  User.findByPk(req.userId).then(user =\u0026gt; { user.getRoles().then(roles =\u0026gt; { for (let i = 0; i \u0026lt; roles.length; i++) { if (roles[i].name === \u0026#34;moderator\u0026#34;) { next(); return; } if (roles[i].name === \u0026#34;admin\u0026#34;) { next(); return; } } res.status(403).send({ message: \u0026#34;Require Moderator or Admin Role!\u0026#34; }); }); }); }; const authJwt = { verifyToken: verifyToken, isAdmin: isAdmin, isModerator: isModerator, isModeratorOrAdmin: isModeratorOrAdmin }; module.exports = authJwt;   ç‚ºç°¡åŒ– middleware ä½¿ç”¨æ™‚çš„åŒ¯å…¥è·¯å¾‘ï¼Œæˆ‘å€‘åœ¨ã€€middleware/ çš„å­ç›®éŒ„ï¼Œå†æ–°å¢ä¸€å€‹åç‚º index.js çš„ç¨‹å¼ï¼Œå…§å®¹å¦‚ä¸‹\nconst authJwt = require(\u0026#34;./auth.jwt\u0026#34;); module.exports = { authJwt }; åœ¨ç‰¹å®š API Endpoint ä¸Šé©—è­‰æ˜¯å¦å¸¶æœ‰ â€œåˆæ³•æœ‰æ•ˆçš„ JWT Tokenâ€ åœ¨å‰é¢å®Œæˆäº†é©—è­‰ Token çš„ Middleware å¾Œï¼Œæˆ‘å€‘ä¾†çœ‹çœ‹å¦‚ä½•åœ¨ router ä¸­å¥—ç”¨é€™äº› middlewareï¼Œ æ‰“é–‹ã€€routers/userroutes.js ç¨‹å¼æª”ï¼Œä¸¦å°‡å…§å®¹ä¿®æ”¹å¦‚ä¸‹ï¼š\nåœ¨ç¨‹å¼ç¬¬ä¹è¡Œ post çš„ç¬¬äºŒå€‹åƒæ•¸ï¼ŒåŠ å…¥å‘¼å« authJwt.verifyToken é€™å€‹ middleware é©—è­‰ token çš„ functionã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  const router = require(\u0026#34;express\u0026#34;).Router(); const { authJwt } = require(\u0026#34;../middleware\u0026#34;);  router.get(\u0026#34;/usertest\u0026#34;, (req, res) =\u0026gt; { res.send(\u0026#34;user test is successful\u0026#34;); }); router.post(\u0026#34;/userposttest\u0026#34;, authJwt.verifyToken,  (req, res) =\u0026gt; { const username = req.body.username; res.send(\u0026#34;your username is: \u0026#34; + username) } ) module.exports = router;   å†æ¬¡åŸ·è¡Œå‰é¢å·²åŸ·è¡Œéçš„ Postman çš„ postusertest é€™å€‹ requestï¼Œçµæœé€™æ¬¡æœƒå›å‚³ ï½€æœªæˆæ¬Šï½€çš„è­¦å‘Šè¨Šæ¯ã€‚\nå°‡ç™»å…¥æˆåŠŸæ™‚å›å‚³çš„ tokenï¼ŒåŠ å…¥åˆ° Header ä¸­ï¼Œå†åŸ·è¡Œä¸€æ¬¡ postusertest å³å¯åŸ·è¡ŒæˆåŠŸã€‚\n è‹¥é€å‡º request ä¸­æœªåŒ…å« Token å‰‡æœƒå›å‚³â€œæœªè¢«æˆæ¬ŠåŸ·è¡Œæœ¬åŠŸèƒ½â€ã€‚\n  è‹¥é€å‡º request ä¸­åŒ…å«çš„æ˜¯ä¸åˆæ³•çš„ Token å‰‡æœƒå›å‚³â€œTokenä¸åˆæ³•â€œã€‚\n ä½¿ç”¨ middleware ä¾†é€²è¡Œæª¢æ ¸ä½¿ç”¨è€…è§’è‰² å°‡ app/routes/user.routes.js å…§å®¹ä¿®æ”¹æˆå¦‚ä¸‹ï¼š\nconst router = require(\u0026#34;express\u0026#34;).Router(); const { authJwt } = require(\u0026#34;../middleware\u0026#34;); const userService = require(\u0026#34;../services/user.service\u0026#34;); // router.get(\u0026#34;/usertest\u0026#34;, (req, res) =\u0026gt; { // res.send(\u0026#34;user test is successful\u0026#34;); // });  // router.post(\u0026#34;/userposttest\u0026#34;, // authJwt.verifyToken, // (req, res) =\u0026gt; { // const username = req.body.username; // res.send(\u0026#34;your username is: \u0026#34; + username) // } // )  router.get(\u0026#34;/test/all\u0026#34;, userService.allAccess); router.get( \u0026#34;/test/user\u0026#34;, [authJwt.verifyToken], userService.userBoard ); router.get( \u0026#34;/test/moderator\u0026#34;, [authJwt.verifyToken, authJwt.isModerator], userService.moderatorBoard ); router.get( \u0026#34;/test/admin\u0026#34;, [authJwt.verifyToken, authJwt.isAdmin], userService.adminBoard ); module.exports = router;  ä¸Šè¿°ç¨‹å¼ä¸­å¯ä»¥çœ‹åˆ°ä¸åŒ api ç«¯é»ç”±ä¸åŒè§’è‰²ä½¿ç”¨è€…å¯ä»¥é€ è¨ªï¼Œ\u0026ldquo;api/users/test/all\u0026rdquo; æ˜¯å€‹é–‹æ”¾å¼çš„ç«¯é»æ‰€æœ‰äººçš†å¯é€ è¨ªã€\u0026ldquo;api/users/test/user\u0026rdquo; æ˜¯æ‰€æœ‰å·²è¨»å†Šçš„ï½€ä½¿ç”¨è€…ï½€å¯é€ è¨ªã€\u0026ldquo;api/users/test/moderator\u0026rdquo; æ˜¯è§’è‰²ç‚ºï½€ç‰ˆä¸»ï½€çš„ä½¿ç”¨è€…å¯é€ è¨ªã€ \u0026ldquo;api/users/test/admin\u0026rdquo; æ˜¯è§’è‰²ç‚ºï½€ç®¡ç†è€…ï½€çš„ï½€ä½¿ç”¨çš†ï½€å¯é€ è¨ª\n åœ¨ app/services/ ç›®éŒ„ä¸‹æ–°å¢ä¸€æ”¯ service user.service.jsï¼Œå…§å®¹å¦‚ä¸‹\nconst allAccess = (req, res) =\u0026gt; { res.status(200).send(\u0026#34;Public Content.\u0026#34;); }; const userBoard = (req, res) =\u0026gt; { res.status(200).send(\u0026#34;User Content.\u0026#34;); }; const adminBoard = (req, res) =\u0026gt; { res.status(200).send(\u0026#34;Admin Content.\u0026#34;); }; const moderatorBoard = (req, res) =\u0026gt; { res.status(200).send(\u0026#34;Moderator Content.\u0026#34;); }; module.exports = { allAccess, userBoard, adminBoard, moderatorBoard }; è¨»å†Šä¸€å€‹æ–°ä½¿ç”¨è€…ä¸”å…·å‚™æœ‰äºŒå€‹è§’è‰²ï¼šmoderator åŠ admin\næ‰“é–‹ç€è¦½å™¨ï¼Œè¼¸å…¥ã€€http://localhost:5000/api/users/test/allï¼Œå¯ä»¥ç™¼ç¾é€™å€‹é–‹æ”¾å¼çš„ç«¯é»ä»»ä½•äººçš†å¯é€ è¨ª(æœªè¨»å†Šçš„äººä¹Ÿå¯ä»¥)ã€‚\nåœ¨ç€è¦½å™¨ï¼Œé‡æ–°è¼¸å…¥ã€€http://localhost:5000/api/users/test/userï¼Œç™¼ç¾é€™å€‹ç«¯é»æœªè¨»å†Šçš„äººä¸èƒ½é€ è¨ªã€‚ æ‰“é–‹ Postman å…ˆä½¿ç”¨å·²è¨»å†Šçš„ä½¿ç”¨è€…å¸³è™Ÿç™»å…¥ï¼Œå–å¾— token\nå†å°‡é€™å€‹ token (ä½¿è¡¨ä½¿ç”¨è€…æ˜¯ tom) åŠ å…¥ request authorization header ä¸­ï¼Œå†æ¬¡é€ è¨ª http://localhost:5000/api/users/test/userï¼Œçµæœæ˜¯å¯æ­£å¸¸é€ è¨ª\nå†ä»¥ç›¸åŒ token (ä»£è¡¨ä½¿ç”¨è€…æ˜¯ tom) é€ è¨ª http://localhost:5000/api/users/test/moderator ï¼Œçµæœå›å‚³ \u0026ldquo;é ˆç‚ºç‰ˆä¸»è§’è‰²è€…\u0026quot;ï½€\u0026quot;æ‰èƒ½é€ è¨ªã€‚ æ”¹ç”¨æ–°è¨»å†Šçš„ä½¿ç”¨è€… Jeff ä¾†é‡æ–°ç™»å…¥ï¼Œä¸¦å–å¾—å›å‚³çš„ token\næ”¹æ¡æ­¤ token (ä»£è¡¨ä½¿ç”¨è€…æ˜¯ jeff) é€ è¨ª http://localhost:5000/api/users/test/moderator ï¼Œçµæœé¡¯ç¤ºå¯æ­£å¸¸é€ è¨ªã€‚\nä½¿ç”¨ middleware ä¾†é€²è¡Œå…¶ä»–è³‡æ–™æª¢æ ¸ ç¨‹å¼è‡³æ­¤å·²ç¶“å¯ä»¥é€é JWT ç›¸é—œåŠŸèƒ½æŸ¥æ ¸ä½¿ç”¨è€…æ˜¯å¦å·²æ­£ç¢ºç™»å…¥ç³»çµ±ã€æ˜¯ä»¥ä½•ç¨®èº«ä»½ï¼ˆè§’è‰²ï¼‰ç™»å…¥çš„ã€‚\næœ€å¾Œè¦å†å‘ˆç¾çš„æ˜¯ä½¿ç”¨ middleware åŠŸèƒ½ä¾†æŸ¥æ ¸å…¶ä»–è³‡æ–™æ­£ç¢ºæ€§ï¼Œå¦‚ï¼šä½¿ç”¨è€…è¨»å†Šæ™‚æ˜¯å¦ä½¿ç”¨äº†ç›¸åŒçš„ä½¿ç”¨è€…åç¨±ï¼Ÿæ˜¯å¦ email å·²ç¶“è¢«å…¶ä»–ä½¿ç”¨è€…ä½¿ç”¨éï¼Ÿ\nåœ¨ app/middleware ç›®éŒ„ä¸‹æ–°å¢ verify.signup.jsï¼Œå…§å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57  const db = require(\u0026#34;../models\u0026#34;); const ROLES = db.ROLES; const User = db.user; checkDuplicateUsernameOrEmail = (req, res, next) =\u0026gt; {  // Username  User.findOne({ where: { username: req.body.username } }).then(user =\u0026gt; { if (user) { res.status(400).send({ message: \u0026#34;Failed! Username is already in use!\u0026#34; }); return; } // Email  User.findOne({ where: { email: req.body.email } }).then(user =\u0026gt; { if (user) { res.status(400).send({ message: \u0026#34;Failed! Email is already in use!\u0026#34; }); return; } next(); }); }); }; checkRolesExisted = (req, res, next) =\u0026gt; {  if (req.body.roles) { for (let i = 0; i \u0026lt; req.body.roles.length; i++) { if (!ROLES.includes(req.body.roles[i])) { res.status(400).send({ message: \u0026#34;Failed! Role does not exist = \u0026#34; + req.body.roles[i] }); return; } } } next(); }; const verifySignUp = { checkDuplicateUsernameOrEmail: checkDuplicateUsernameOrEmail, checkRolesExisted: checkRolesExisted }; module.exports = verifySignUp;   ä¿®æ”¹ app/middleware/index.js æª”æ¡ˆå¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7  const authJwt = require(\u0026#34;./auth.jwt\u0026#34;); const verifySignUp = require(\u0026#34;./verify.signup\u0026#34;);  module.exports = { authJwt, verifySignUp };   å°‡æ–°çš„ middlewareã€€åŠŸèƒ½æ”¾å…¥åˆ° SignUp åŠŸèƒ½ä¸­ã€‚ æ‰“é–‹ã€€app/routes/auth.routes.js ç¨‹å¼æª”ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  const router = require(\u0026#34;express\u0026#34;).Router(); const authService = require(\u0026#34;../services/auth.service\u0026#34;); const { verifySignUp } = require(\u0026#34;../middleware\u0026#34;) // å¸³è™Ÿè¨»å†Š router.post(\u0026#34;/signup\u0026#34;, [ verifySignUp.checkDuplicateUsernameOrEmail, verifySignUp.checkRolesExisted ], authService.signup); // ç™»å…¥ router.post(\u0026#34;/signin\u0026#34;, authService.signin); module.exports = router;   å…ˆä½¿ç”¨å·²ç¶“è¢«è¨»å†Šéçš„ EMailä¾†é€²è¡Œæ¸¬è©¦ï¼Œçµæœå›å‚³ EMail å·²è¢«ä½¿ç”¨ã€‚\nå†ä½¿ç”¨å·²è¢«è¨»å†Šéçš„ UserName ä¾†é€²è¡Œè¨»å†Šï¼Œçµæœå›å‚³ï¼š\ncors é€™å€‹å¾Œç«¯å°ˆæ¡ˆé è¨ˆè¦çµ¦å‰ç«¯ Angular ä¾†ä½¿ç”¨ï¼Œè·¨åŸŸå­˜å–å•é¡Œå°±ç”¨ cors è¨­å®šä¾†è§£æ±ºã€‚\nå…ˆå®‰è£ cors å¥—ä»¶\n$ yarn add cors yarn add v1.22.19 [1/4] Resolving packages... [2/4] Fetching packages... [3/4] Linking dependencies... [4/4] Building fresh packages... success Saved lockfile. success Saved 2 new dependencies. info Direct dependencies â””â”€ cors@2.8.5 info All dependencies â”œâ”€ cors@2.8.5 â””â”€ object-assign@4.1.1 Done in 0.86s. æ‰“é–‹ server.jsï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11  const express = require(\u0026#34;express\u0026#34;); const dotenv = require(\u0026#34;dotenv\u0026#34;); const cors = require(\u0026#34;cors\u0026#34;); dotenv.config(); const app = express(); var corsOptions = { origin: \u0026#34;http://localhost:4200\u0026#34; }; app.use(cors(corsOptions)); //...   ","permalink":"https://calvinegs.github.io/posts/nodejs-restapi-postgres/","summary":"github Source code\nTechnology:\n NodeJs 17.6.0 Express 4.17.1 cors 2.8.5 crypto-js 4.1.1 # åŠ è§£å¯†å¥—ä»¶ jsonwebtoken 8.5.1 # Json Web Token çš„åŠŸèƒ½å¥—ä»¶ Sequelize 6.20.1 # ORM å¥—ä»¶ pg 8.7.3 # PostgreSQL client for Node.js pg-hstore 2.3.4 # serializing and deserializing JSON data to hstore format PostgreSQL 14.3 # ä½¿ç”¨çš„è³‡æ–™åº«  å°ˆæ¡ˆå®Œæˆå¾Œçš„æª”æ¡ˆçµæ§‹ ./å°ˆæ¡ˆç›®éŒ„ â”œâ”€â”€ app/ â”‚ â”œâ”€â”€ config/ â”‚ â”‚ â””â”€â”€ db.config.js â”‚ â”œâ”€â”€ middleware/ â”‚ â”‚ â”œâ”€â”€ auth.jwt.js â”‚ â”‚ â”œâ”€â”€ index.","title":"ä½¿ç”¨ Node.js + express + postgres å»ºç«‹ä¸€å€‹å¾Œç«¯æœå‹™ REST API"},{"content":"github Source code\nåœ¨ä¹‹å‰çš„ç­†è¨˜ä¸­ ä½¿ç”¨ .NET 6.0 é€²è¡Œ JWT èº«ä»½é©—è­‰çš„ ASP.NET Web Apiã€‚ä¸¦ä½¿ç”¨ Microsoft Identity æ¡†æ¶ä¾†å­˜å„²ä½¿ç”¨è€…å’Œè§’è‰²ç­‰è³‡æ–™ å·²ä»”ç´°çš„ç´€éŒ„å¦‚ä½•ä½¿ç”¨ .Net 6.0 ä¾†å»ºç½®ä¸€å€‹æ”¯æ´ JWT ï¼† Identity framework çš„ WebApi ç¶²ç«™æ‡‰ç”¨ç¨‹å¼ï¼Œåœ¨è©²ç¯‡ç­†è¨˜ä¸­æ‰€ä½¿ç”¨çš„è³‡æ–™åº«æ˜¯ MS SQL 2019ï¼Œè€Œé€™ç¯‡ç­†è¨˜è£¡å°‡ç´€éŒ„å¦‚ä½•å°‡å®ƒæ”¹æˆæ”¯æ´ PostgresSQLã€‚\nè‹¥ä½ é‚„æ²’æœ‰å®‰è£ PostgresSQL å¯ä»¥åƒè€ƒé€™ç­†è¨˜å…ˆå°‡è³‡æ–™åº«ç®¡ç†ç³»çµ±å‚™å¦¥ ä½¿ç”¨ Docker åŸ·è¡Œ PostgresSQL èˆ‡ pgAdmin\nå°ˆæ¡ˆå®Œæˆå¾Œçš„æª”æ¡ˆçµæ§‹ ./å°ˆæ¡ˆç›®éŒ„ â”œâ”€â”€ .config/ â”‚ â””â”€â”€ dotnet-tools.json â”œâ”€â”€ .vscode/ â”‚ â”œâ”€â”€ launch.js â”‚ â””â”€â”€ tasks.json â”œâ”€â”€ Controller/ â”‚ â”œâ”€â”€ AuthenticateController.cs â”‚ â”œâ”€â”€ TodoController.cs â”‚ â””â”€â”€ WeatherForecast.cs â”œâ”€â”€ Data/ â”‚ â””â”€â”€ ApiDbContext.cs â”œâ”€â”€ Migrations/ â”œâ”€â”€ Models/ â”‚ â”œâ”€â”€ AuthenticateData.cs â”‚ â””â”€â”€ ItemData.cs â”œâ”€â”€ obj/ â”œâ”€â”€ Properties/ â”‚ â””â”€â”€ launchSettings.json â”œâ”€â”€ .gitignore â”œâ”€â”€ appsettings.Development.json â”œâ”€â”€ appsettings.json â”œâ”€â”€ dotnet6-webapi-jwt.csproj â”œâ”€â”€ global.json â”œâ”€â”€ Program.cs â”œâ”€â”€ README.md â””â”€â”€ WeatherForecast.cs å°ˆæ¡ˆå®Œæˆå¾Œæ‰€æä¾›çš„ API ç«¯é»    Methods Urls Actions     POST /api/Authenticate/login è¨»å†Šæ–°ä½¿ç”¨è€…å¸³è™Ÿ   POST /api/Authenticate/register ä½¿ç”¨è€…å¸³è™Ÿç™»å…¥   POST /api/Authenticate/register-admin ç®¡ç†è€…å¸³è™Ÿç™»å…¥   GET /api/Todos get all Todos   POST /api/Todos add New Todo   GET /api/Todos/:id get Todo by id   PUT /api/todos/:id update Todo by id   DELETE /api/todos/:id remove Todo by id    git clone Example Code å…ˆ git clone ï½€ä½¿ç”¨ .NET 6.0 é€²è¡Œ JWT èº«ä»½é©—è­‰çš„ ASP.NET Web Apiã€‚ä¸¦ä½¿ç”¨ Microsoft Identity æ¡†æ¶ä¾†å­˜å„²ä½¿ç”¨è€…å’Œè§’è‰²ç­‰è³‡æ–™ï½€ é€™ç¯‡ç­†è¨˜çš„ Source code\n$ git clone https://github.com/calvinegs/dotnet6-webapi-jwt.git dotnet6-webapi-postgress restore ç›¸ä¾çš„å¥—ä»¶ $ cd dotnet6-webapi-postgress $ dotnet restore æ­£åœ¨åˆ¤æ–·è¦é‚„åŸçš„å°ˆæ¡ˆ... å·²é‚„åŸ /home/egs/cal-data/tech-test/webapi/test/dotnet6-webapi-postgress/dotnet6-webapi-jwt.csproj (1.12 sec å…§)ã€‚ å®‰è£åŠä½¿ç”¨ Postgres ç›¸é—œå¥—ä»¶ $ dotnet remove package Microsoft.EntityFrameworkCore.SqlServer info : æ­£åœ¨å¾å°ˆæ¡ˆ \u0026#39;/home/egs/cal-data/tech-test/webapi/test/dotnet6-webapi-postgress/dotnet6-webapi-jwt.csproj\u0026#39; ä¸­ç§»é™¤å¥—ä»¶ \u0026#39;Microsoft.EntityFrameworkCore.SqlServer\u0026#39; çš„ PackageReferenceã€‚ $ dotnet add package Npgsql.EntityFrameworkCore.PostgreSQL æ­£åœ¨åˆ¤æ–·è¦é‚„åŸçš„å°ˆæ¡ˆ... Writing /tmp/tmpU1vZfj.tmp info : æ­£åœ¨å°‡å¥—ä»¶ \u0026#39;Npgsql.EntityFrameworkCore.PostgreSQL\u0026#39; çš„ PackageReference æ–°å¢è‡³å°ˆæ¡ˆ \u0026#39;/home/egs/cal-data/tech-test/webapi/test/dotnet6-webapi-postgress/dotnet6-webapi-jwt.csproj\u0026#39;ã€‚ info : GET https://api.nuget.org/v3/registration5-gz-semver2/npgsql.entityframeworkcore.postgresql/index.json info : OK https://api.nuget.org/v3/registration5-gz-semver2/npgsql.entityframeworkcore.postgresql/index.json 858 æ¯«ç§’ info : æ­£åœ¨é‚„åŸ /home/egs/cal-data/tech-test/webapi/test/dotnet6-webapi-postgress/dotnet6-webapi-jwt.csproj çš„å°è£... info : å¥—ä»¶ \u0026#39;Npgsql.EntityFrameworkCore.PostgreSQL\u0026#39; èˆ‡å°ˆæ¡ˆ \u0026#39;/home/egs/cal-data/tech-test/webapi/test/dotnet6-webapi-postgress/dotnet6-webapi-jwt.csproj\u0026#39; ä¸­çš„æ‰€æœ‰æ¶æ§‹ç›¸å®¹ã€‚ info : å·²å°‡å¥—ä»¶ \u0026#39;Npgsql.EntityFrameworkCore.PostgreSQL\u0026#39; ç‰ˆæœ¬ \u0026#39;6.0.4\u0026#39; çš„ PackageReference æ–°å¢è‡³æª”æ¡ˆ \u0026#39;/home/egs/cal-data/tech-test/webapi/test/dotnet6-webapi-postgress/dotnet6-webapi-jwt.csproj\u0026#39;ã€‚ info : æ­£åœ¨å°‡è³‡ç”¢æª”æ¡ˆå¯«å…¥ç£ç¢Ÿã€‚è·¯å¾‘: /home/egs/cal-data/tech-test/webapi/test/dotnet6-webapi-postgress/obj/project.assets.json log : å·²é‚„åŸ /home/egs/cal-data/tech-test/webapi/test/dotnet6-webapi-postgress/dotnet6-webapi-jwt.csproj (371 ms å…§)ã€‚ ä½¿ç”¨ VSCode é–‹å•Ÿå°ˆæ¡ˆ $ code . é–‹å•Ÿ dotnet6-webapi-jwt.csproj å°ˆæ¡ˆæª”å¯ç™¼ç¾å·²æ¡ç”¨ ï½€Npgsql.EntityFrameworkCore.PostgreSQLï½€å¥—ä»¶ã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26  \u0026lt;Project Sdk=\u0026#34;Microsoft.NET.Sdk.Web\u0026#34;\u0026gt; \u0026lt;PropertyGroup\u0026gt; \u0026lt;TargetFramework\u0026gt;net6.0\u0026lt;/TargetFramework\u0026gt; \u0026lt;Nullable\u0026gt;enable\u0026lt;/Nullable\u0026gt; \u0026lt;ImplicitUsings\u0026gt;enable\u0026lt;/ImplicitUsings\u0026gt; \u0026lt;RootNamespace\u0026gt;dotnet6_webapi_jwt\u0026lt;/RootNamespace\u0026gt; \u0026lt;/PropertyGroup\u0026gt; \u0026lt;ItemGroup\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Microsoft.AspNetCore.Authentication.JwtBearer\u0026#34; Version=\u0026#34;6.0.5\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Microsoft.AspNetCore.Identity.EntityFrameworkCore\u0026#34; Version=\u0026#34;6.0.5\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Microsoft.EntityFrameworkCore.Design\u0026#34; Version=\u0026#34;6.0.5\u0026#34;\u0026gt; \u0026lt;IncludeAssets\u0026gt;runtime; build; native; contentfiles; analyzers; buildtransitive\u0026lt;/IncludeAssets\u0026gt; \u0026lt;PrivateAssets\u0026gt;all\u0026lt;/PrivateAssets\u0026gt; \u0026lt;/PackageReference\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Microsoft.EntityFrameworkCore.Tools\u0026#34; Version=\u0026#34;6.0.5\u0026#34;\u0026gt; \u0026lt;IncludeAssets\u0026gt;runtime; build; native; contentfiles; analyzers; buildtransitive\u0026lt;/IncludeAssets\u0026gt; \u0026lt;PrivateAssets\u0026gt;all\u0026lt;/PrivateAssets\u0026gt; \u0026lt;/PackageReference\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Microsoft.VisualStudio.Web.CodeGeneration.Design\u0026#34; Version=\u0026#34;6.0.5\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Npgsql.EntityFrameworkCore.PostgreSQL\u0026#34; Version=\u0026#34;6.0.4\u0026#34; /\u0026gt;  \u0026lt;PackageReference Include=\u0026#34;Swashbuckle.AspNetCore\u0026#34; Version=\u0026#34;6.2.3\u0026#34; /\u0026gt; \u0026lt;/ItemGroup\u0026gt; \u0026lt;/Project\u0026gt;   ä¿®æ”¹ DbContext åƒæ•¸ ä¿®æ”¹ Program.cs ä¸­ DbContext çš„åƒæ•¸è¨­å®š\nbuilder.Services.AddDbContext\u0026lt;ApiDbContext\u0026gt;( options =\u0026gt; options.UseSqlServer( _configuration.GetConnectionString(\u0026#34;ConnStr\u0026#34;) ) ); æ”¹æˆ\nbuilder.Services.AddDbContext\u0026lt;ApiDbContext\u0026gt;( options =\u0026gt; options.UseNpgsql( _configuration.GetConnectionString(\u0026#34;ConnStr\u0026#34;) ) ); ä¿®æ”¹ appsettings.json ä¸­çš„ Conection String \u0026#34;ConnectionStrings\u0026#34;: { \u0026#34;ConnStr\u0026#34;: \u0026#34;Data Source=localhost;Initial Catalog=TestDB;User ID=SA;Password=Sql@12345\u0026#34; }, æ”¹æˆ\n\u0026#34;ConnectionStrings\u0026#34;: { \u0026#34;ConnStr\u0026#34;: \u0026#34;User ID =docker;Password=docker;Server=localhost;Port=5432;Database=pg_testdb; Integrated Security=true;Pooling=true\u0026#34; }, å°‡åŸæœ‰å°ˆæ¡ˆçš„ Migrations å­ç›®éŒ„ç§»é™¤ $ rm -f ./Migrations $ dotnet build # é‡æ–°å»ºç½®ç¨‹å¼ Microsoft (R) Build Engine for .NET 17.2.0+41abc5629 ç‰ˆ Copyright (C) Microsoft Corporation. è‘—ä½œæ¬Šæ‰€æœ‰ï¼Œä¸¦ä¿ç•™ä¸€åˆ‡æ¬Šåˆ©ã€‚ æ­£åœ¨åˆ¤æ–·è¦é‚„åŸçš„å°ˆæ¡ˆ... æ‰€æœ‰å°ˆæ¡ˆéƒ½åœ¨æœ€æ–°ç‹€æ…‹ï¼Œå¯é€²è¡Œé‚„åŸã€‚ dotnet6-webapi-jwt -\u0026gt; /home/egs/cal-data/tech-test/webapi/test/dotnet6-webapi-postgress/bin/Debug/net6.0/dotnet6-webapi-jwt.dll å»ºç½®æˆåŠŸã€‚ 0 å€‹è­¦å‘Š 0 å€‹éŒ¯èª¤ ç¶“éæ™‚é–“ 00:00:02.21 æ–°å¢ä¸€å€‹è³‡æ–™é·ç§» $ dotnet ef Migrations add \u0026#34;Initial Migrations\u0026#34; Build started... Build succeeded. info: Microsoft.EntityFrameworkCore.Infrastructure[10403] Entity Framework Core 6.0.5 initialized \u0026#39;ApiDbContext\u0026#39; using provider \u0026#39;Npgsql.EntityFrameworkCore.PostgreSQL:6.0.4+6cb649128e3e7aa8eddd77dfa75b34bad51e6e94\u0026#39; with options: None Done. To undo this action, use \u0026#39;ef migrations remove\u0026#39; å°‡è³‡æ–™é·ç§»æ›´æ–°è‡³è³‡æ–™åº« $ dotnet ef database update ![2022-06-02 18-07-55](https://user-images.githubusercontent.com/21993717/171607590-cd6e06ad-7ae7-47d2-bfba-afe9aab0d11e.png) è³‡æ–™é·ç§»æˆåŠŸå¾Œæœƒåœ¨è³‡æ–™åº«ä¸­è‡ªå‹•ç”£ç”Ÿ Identity Framework æ‰€ä½¿ç”¨çš„è³‡æ–™è¡¨ï¼Œè€Œè‡ªå®šçš„ Model ä¹Ÿæœƒä¸€ä½µç”£ç”Ÿæ–°è³‡æ–™è¡¨\nåŸ·è¡Œçµæœ ","permalink":"https://calvinegs.github.io/posts/dotnet6-webapi-jwt-postgres/","summary":"github Source code\nåœ¨ä¹‹å‰çš„ç­†è¨˜ä¸­ ä½¿ç”¨ .NET 6.0 é€²è¡Œ JWT èº«ä»½é©—è­‰çš„ ASP.NET Web Apiã€‚ä¸¦ä½¿ç”¨ Microsoft Identity æ¡†æ¶ä¾†å­˜å„²ä½¿ç”¨è€…å’Œè§’è‰²ç­‰è³‡æ–™ å·²ä»”ç´°çš„ç´€éŒ„å¦‚ä½•ä½¿ç”¨ .Net 6.0 ä¾†å»ºç½®ä¸€å€‹æ”¯æ´ JWT ï¼† Identity framework çš„ WebApi ç¶²ç«™æ‡‰ç”¨ç¨‹å¼ï¼Œåœ¨è©²ç¯‡ç­†è¨˜ä¸­æ‰€ä½¿ç”¨çš„è³‡æ–™åº«æ˜¯ MS SQL 2019ï¼Œè€Œé€™ç¯‡ç­†è¨˜è£¡å°‡ç´€éŒ„å¦‚ä½•å°‡å®ƒæ”¹æˆæ”¯æ´ PostgresSQLã€‚\nè‹¥ä½ é‚„æ²’æœ‰å®‰è£ PostgresSQL å¯ä»¥åƒè€ƒé€™ç­†è¨˜å…ˆå°‡è³‡æ–™åº«ç®¡ç†ç³»çµ±å‚™å¦¥ ä½¿ç”¨ Docker åŸ·è¡Œ PostgresSQL èˆ‡ pgAdmin\nå°ˆæ¡ˆå®Œæˆå¾Œçš„æª”æ¡ˆçµæ§‹ ./å°ˆæ¡ˆç›®éŒ„ â”œâ”€â”€ .config/ â”‚ â””â”€â”€ dotnet-tools.json â”œâ”€â”€ .vscode/ â”‚ â”œâ”€â”€ launch.js â”‚ â””â”€â”€ tasks.json â”œâ”€â”€ Controller/ â”‚ â”œâ”€â”€ AuthenticateController.cs â”‚ â”œâ”€â”€ TodoController.cs â”‚ â””â”€â”€ WeatherForecast.cs â”œâ”€â”€ Data/ â”‚ â””â”€â”€ ApiDbContext.","title":"ä½¿ç”¨ .NET 6.0 é€²è¡Œ JWT èº«ä»½é©—è­‰çš„ ASP.NET Web Apiã€‚ä¸¦ä½¿ç”¨ Microsoft Identity æ¡†æ¶ä¾†å­˜å„²ä½¿ç”¨è€…å’Œè§’è‰²ç­‰è³‡æ–™ï¼ˆä½¿ç”¨ PostgresSQLï¼‰"},{"content":"github Source code\nä½¿ç”¨ Docker åŸ·è¡Œ PostgresSQL èˆ‡ pgAdmin å°é–‹ç™¼äººå“¡è€Œè¨€ï¼Œä½¿ç”¨å„å¼çš„è³‡æ–™åº«ç®¡ç†ç³»çµ±ä¾†ç•¶æ‡‰ç”¨ç¨‹å¼çš„å¾Œç«¯è³‡æ–™å­˜å–å±¤æ˜¯å®¶å¸¸ä¾¿é£¯ã€‚è‹¥å†è€ƒæ…®ä¸Šæ¯ç¨®è³‡æ–™åº«ç®¡ç†ç³»çµ±æœ‰ä¸åŒçš„ç‰ˆæœ¬ï¼Œè‚¯å®šæœƒè®“ä½ çš„é–‹ç™¼ç’°å¢ƒè² æ“”éé‡ã€éæ–¼è¤‡é›œã€‚ä½¿ç”¨ Docker ä¾†æ–¼é©ç•¶çš„æ™‚æ©Ÿé–‹å•Ÿé©ç”¨çš„è³‡æ–™åº«ç®¡ç†ç³»çµ±æœƒæ˜¯ä¸€å€‹ä¸éŒ¯çš„é¸æ“‡ã€‚\næœ¬ç¯‡ç­†è¨˜ç´€éŒ„ä½¿ç”¨ docker (docker compose) ä¾†å¿«é€Ÿçš„è¨­ç½® postgresSQL åŠå…¶ç®¡ç†å·¥å…· pgAdminã€‚\næª¢æŸ¥æ˜¯å¦å·²å®‰è£äº† Docker (docker version) $ docker version Client: Docker Engine - Community Version: 20.10.16 API version: 1.41 Go version: go1.17.10 Git commit: aa7e414 Built: Thu May 12 09:17:23 2022 OS/Arch: linux/amd64 Context: default Experimental: true Server: Docker Engine - Community Engine: Version: 20.10.16 API version: 1.41 (minimum version 1.12) Go version: go1.17.10 Git commit: f756502 Built: Thu May 12 09:15:28 2022 OS/Arch: linux/amd64 Experimental: false containerd: Version: 1.6.4 GitCommit: 212e8b6fa2f44b9c21b2798135fc6fb7c53efc16 runc: Version: 1.1.1 GitCommit: v1.1.1-0-g52de29d docker-init: Version: 0.19.0 GitCommit: de40ad0 æª¢æŸ¥æ˜¯å¦å·²å®‰è£äº† docker compose $ docker compose version Docker Compose version v2.5.0 å»ºç½®å°ˆæ¡ˆ ç›®éŒ„çµæ§‹ $ mkdir postgres-pgadmin \u0026amp;\u0026amp; cd postgres-pgadmin $ touch docker-compose.yml README.md $ mkdir pgadmin pgdbdata sql $ touch ./pgadmin/pgdb_servers.json $ touch ./sql/initdb.sql ./postgres-pgadmin â”œâ”€â”€ docker-compose.yml â”œâ”€â”€ README.md â”œâ”€â”€ pgadmin â”‚ â””â”€â”€ pgdb_servers.json â”œâ”€â”€ pgdbdata â””â”€â”€ sql â””â”€â”€ initdb.sql å»ºç«‹ docker-compose.yml åœ¨é€™å€‹ compse command file ä¸­åˆ†åˆ¥å»ºç«‹äº†äºŒå€‹ servicesï¼Œç”¨ä¾†å•Ÿå‹• postgres èˆ‡ pgadminã€‚æŒ‡ä»¤èˆ‡èªªæ˜å¦‚ä¸‹\nversion: \u0026#39;3\u0026#39; services: postgres: container_name: pg_server # è‡ªå®š container åç¨± image: postgres:14.3  # ä½¿ç”¨ postgres@14.3 docker image æª” restart: always ports: - \u0026#34;5432:5432\u0026#34; environment: - POSTGRES_USER=docker  # å»ºç«‹ä¸€å€‹ postgres user  - POSTGRES_PASSWORD=docker # é€™å€‹ user çš„å¯†ç¢¼ volumes: # å°‡ local çš„ ./sql/initdb.sql æ›è¼‰åˆ° postgres docker /docker-entrypoint-initdb.d/init.sqlï¼Œç›®çš„æ˜¯å»ºç«‹ä¸€å€‹åç‚º pg_testdb è³‡æ–™åº« - ./sql/initdb.sql:/docker-entrypoint-initdb.d/init.sql  healthcheck: test: [\u0026#34;CMD-SHELL\u0026#34;, \u0026#34;pg_isready -U docker\u0026#34;] interval: 10s timeout: 5s retries: 5 pgadmin: container_name: pg_admin  # è‡ªå®š container åç¨± image: dpage/pgadmin4:6.9  # ä½¿ç”¨ pgadmin4ï¼ 6.9 docker image æª” depends_on: postgres: condition: service_healthy environment: PGADMIN_DEFAULT_EMAIL: ${PGADMIN_DEFAULT_EMAIL:-user@domain.org} PGADMIN_DEFAULT_PASSWORD: ${PGADMIN_DEFAULT_PASSWORD:-docker} PGADMIN_CONFIG_SERVER_MODE: \u0026#39;False\u0026#39; PGADMIN_SERVER_JSON_FILE: \u0026#39;/config/pgdb_servers.json\u0026#39; # ä½¿ç”¨é€™å€‹ Json æª”æ¡ˆä¾†è¨­å®š pgadmin  volumes: - ./pgadmin:/config  # å°‡ local çš„ ./pgadmin ç›®éŒ„æ›è¼‰åˆ° pgadmin4 docker ä¸­ ports: - \u0026#34;5431:80\u0026#34; # å°‡ pgadmin4 docker ä¸­çš„ 80 Port æ˜ å°„åˆ° local ç«¯çš„ 5431 Port restart: always å»ºç«‹ pgdb_servers.json é€™ç”¨æª”æ¡ˆçš„ç”¨é€”æ˜¯çµ¦ pgAdmin docker å•Ÿå‹•æ™‚è¨­ç½®ç’°å¢ƒç”¨ã€‚\n{ \u0026#34;Servers\u0026#34;: { \u0026#34;1\u0026#34;: { \u0026#34;Name\u0026#34;: \u0026#34;pg-test\u0026#34;, \u0026#34;Group\u0026#34;: \u0026#34;Servers\u0026#34;, \u0026#34;Port\u0026#34;: 5432, \u0026#34;Username\u0026#34;: \u0026#34;docker\u0026#34;, \u0026#34;Host\u0026#34;: \u0026#34;postgres\u0026#34;, \u0026#34;SSLMode\u0026#34;: \u0026#34;prefer\u0026#34;, \u0026#34;MaintenanceDB\u0026#34;: \u0026#34;postgres\u0026#34; } } } å»ºç«‹ initdb.sql é€™ç”¨æª”æ¡ˆçš„ç”¨é€”æ˜¯çµ¦ postgres docker å•Ÿå‹•æ™‚é€é volumn æŒ‡ä»¤æ›æˆ´å°‡æ­¤ SQL æª”æ¡ˆæ˜ å°„åˆ° docker å…§çš„ /docker-entrypoint-initdb.d/init.sql æª”ï¼Œä½¿å¾— docker initial æ™‚æœƒè‡ªå‹•å»ºç«‹ä¸€å€‹åç‚º pg_testdb çš„è³‡æ–™åº«ã€‚\nCREATE DATABASE pg_testdb; åŸ·è¡Œ docker compose ä¸Šè¿°çš„ç›®éŒ„èˆ‡æª”æ¡ˆå…§å®¹æº–å‚™å®Œæˆå¾Œï¼Œåœ¨èˆ‡ docker-compose.yml çš„ç›¸åŒç›®éŒ„ä¸­åŸ·è¡Œ docker compose upä¾†å•Ÿå‹•é€™å€‹äºŒ Servicesï¼Œå•Ÿå‹•æˆåŠŸå¾Œé–‹å•Ÿå¦ä¸€å€‹ terminal ä½¿ç”¨ ï½€$ docker psï½€ æŒ‡ä»¤æŸ¥çœ‹å®¹å™¨å•Ÿå‹•ç‹€æ³\n$ docker compose up # ... pg_server | 2022-06-01 13:39:11.333 UTC [1] LOG: listening on IPv4 address \u0026#34;0.0.0.0\u0026#34;, port 5432 pg_server | 2022-06-01 13:39:11.333 UTC [1] LOG: listening on IPv6 address \u0026#34;::\u0026#34;, port 5432 pg_server | 2022-06-01 13:39:11.335 UTC [1] LOG: listening on Unix socket \u0026#34;/var/run/postgresql/.s.PGSQL.5432\u0026#34; pg_server | 2022-06-01 13:39:11.340 UTC [64] LOG: database system was shut down at 2022-06-01 13:39:11 UTC pg_server | 2022-06-01 13:39:11.346 UTC [1] LOG: database system is ready to accept connections pg_admin | NOTE: Configuring authentication for DESKTOP mode. pg_admin | ---------- pg_admin | Loading servers with: pg_admin | User: pgadmin4@pgadmin.org pg_admin | SQLite pgAdmin config: /var/lib/pgadmin/pgadmin4.db pg_admin | ---------- pg_admin | Added 0 Server Group(s) and 1 Server(s). pg_admin | [2022-06-01 13:39:48 +0000] [1] [INFO] Starting gunicorn 20.1.0 pg_admin | [2022-06-01 13:39:48 +0000] [1] [INFO] Listening at: http://[::]:80 (1) pg_admin | [2022-06-01 13:39:48 +0000] [1] [INFO] Using worker: gthread pg_admin | [2022-06-01 13:39:48 +0000] [91] [INFO] Booting worker with pid: 91  æŸ¥çœ‹ docker åŸ·è¡Œçš„æƒ…æ³\n $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 11bb5b91463c dpage/pgadmin4:6.9 \u0026#34;/entrypoint.sh\u0026#34; 17 seconds ago Up 5 seconds 443/tcp, 0.0.0.0:5431-\u0026gt;80/tcp, :::5431-\u0026gt;80/tcp pg_admin 1dbca769db67 postgres:14.3 \u0026#34;docker-entrypoint.sâ€¦\u0026#34; 17 seconds ago Up 16 seconds (healthy) 0.0.0.0:5432-\u0026gt;5432/tcp, :::5432-\u0026gt;5432/tcp pg_serve ä½¿ç”¨ PgAdmin é€£çµåˆ° Postgres DB æ‰“é–‹ç€è¦§å™¨è¼¸å…¥ï¼š localhost:5431\nç¬¬ä¸€æ¬¡é–‹å•Ÿæ™‚è¦å…ˆè¨­å®š pgAdmin çš„å¯†ç¢¼ï¼Œè¼¸å…¥ pgAdmin çš„å¯†ç¢¼å¾ŒæŒ‰ä¸‹ OK æŒ‰éˆ•ã€‚\næ¥ä¸‹ä¾†æœƒé¡¯ç¤ºè¦é€£çµåˆ° pg-test è³‡æ–™åº«çš„ä½¿ç”¨è€…(æœ¬ä¾‹ä¸­æ˜¯ docker)çš„å¯†ç¢¼è¼¸å…¥ç•«é¢ï¼Œè¼¸å…¥å¯†ç¢¼å¾ŒæŒ‰ä¸‹ OK æŒ‰éˆ•ã€‚\nè¼¸å…¥å¯†ç¢¼å®Œæˆå¾Œï¼Œå³å¯é¡¯ç¤ºè³‡æ–™åº«çš„ç›¸é—œè³‡è¨Šï¼š\næœ‰é—œ pgadmin æ›´è©³ç´°è³‡è¨Šè«‹ æ‰“é–‹\nä½¿ç”¨ dbeaver-cd é€£çµåˆ° Postgres DB é–‹å•Ÿ dbeaver-cd ç¨‹å¼ï¼ŒæŒ‰ä¸‹ ï½€New Database Connection` æŒ‰éˆ•\né–‹å§‹è¨­ç½®é€£ç·šè³‡æ–™è¨­å®šï¼Œé¸æ“‡è³‡æ–™åº« - PostgreSQL æŒ‰ä¸‹ ï½€Next`\nè¼¸å…¥ç›¸é—œè³‡è¨Šï¼Œå¦‚ Database nameã€Usernameã€Password\u0026hellip;ç­‰ï¼ŒæŒ‰ä¸‹ï½€Test Connectiono\u0026hellip;ï½€ä¾†æ¸¬è©¦è¨­å®šæ˜¯å¦æˆåŠŸã€‚\nè¨­å®šç„¡èª¤æœƒé¡¯ç¤º ï½€å·²é€£çµçš„è¨Šæ¯è¦–çª—ï½€ã€‚æŒ‰ä¸‹ï½€OKï½€å›åˆ°è¨­ç½®ç•«é¢ï¼Œå†æŒ‰ä¸‹ \u0026ldquo;Finish\u0026rdquo; å³å¯é€²å…¥ DBeaver è³‡æ–™åº«ç®¡ç†åŠŸèƒ½ä¸­ã€‚\nè³‡æ–™åº«çš„å¯¦éš›æª”æ¡ˆå­˜æ”¾åœ¨ Local çš„ ./pgdbdata ç›®éŒ„ä¸­ ä½¿ç”¨ä½œæ¥­ç³»çµ±ç®¡ç†è€…æ¬Šé™ä¾†æŸ¥çœ‹æ­¤ç›®éŒ„\n$ sudo ls -al ./pgdbdata/ [sudo] egs çš„å¯†ç¢¼ï¼š ç¸½ç”¨é‡ 132 drwx------ 19 systemd-coredump egs 4096 å…­ 2 11:26 . drwxrwxr-x 6 egs egs 4096 å…­ 2 10:23 .. drwx------ 7 systemd-coredump systemd-coredump 4096 å…­ 2 10:27 base drwx------ 2 systemd-coredump systemd-coredump 4096 å…­ 2 10:28 global drwx------ 2 systemd-coredump systemd-coredump 4096 å…­ 2 10:27 pg_commit_ts drwx------ 2 systemd-coredump systemd-coredump 4096 å…­ 2 10:27 pg_dynshmem -rw------- 1 systemd-coredump systemd-coredump 4821 å…­ 2 10:27 pg_hba.conf -rw------- 1 systemd-coredump systemd-coredump 1636 å…­ 2 10:27 pg_ident.conf drwx------ 4 systemd-coredump systemd-coredump 4096 å…­ 2 11:26 pg_logical drwx------ 4 systemd-coredump systemd-coredump 4096 å…­ 2 10:27 pg_multixact drwx------ 2 systemd-coredump systemd-coredump 4096 å…­ 2 10:27 pg_notify drwx------ 2 systemd-coredump systemd-coredump 4096 å…­ 2 10:27 pg_replslot drwx------ 2 systemd-coredump systemd-coredump 4096 å…­ 2 10:27 pg_serial drwx------ 2 systemd-coredump systemd-coredump 4096 å…­ 2 10:27 pg_snapshots drwx------ 2 systemd-coredump systemd-coredump 4096 å…­ 2 11:26 pg_stat drwx------ 2 systemd-coredump systemd-coredump 4096 å…­ 2 11:26 pg_stat_tmp drwx------ 2 systemd-coredump systemd-coredump 4096 å…­ 2 10:27 pg_subtrans drwx------ 2 systemd-coredump systemd-coredump 4096 å…­ 2 10:27 pg_tblspc drwx------ 2 systemd-coredump systemd-coredump 4096 å…­ 2 10:27 pg_twophase -rw------- 1 systemd-coredump systemd-coredump 3 å…­ 2 10:27 PG_VERSION drwx------ 3 systemd-coredump systemd-coredump 4096 å…­ 2 10:27 pg_wal drwx------ 2 systemd-coredump systemd-coredump 4096 å…­ 2 10:27 pg_xact -rw------- 1 systemd-coredump systemd-coredump 88 å…­ 2 10:27 postgresql.auto.conf -rw------- 1 systemd-coredump systemd-coredump 28835 å…­ 2 10:27 postgresql.conf -rw------- 1 systemd-coredump systemd-coredump 36 å…­ 2 10:27 postmaster.opts ","permalink":"https://calvinegs.github.io/posts/docker-postgres-pgadmin/","summary":"github Source code\nä½¿ç”¨ Docker åŸ·è¡Œ PostgresSQL èˆ‡ pgAdmin å°é–‹ç™¼äººå“¡è€Œè¨€ï¼Œä½¿ç”¨å„å¼çš„è³‡æ–™åº«ç®¡ç†ç³»çµ±ä¾†ç•¶æ‡‰ç”¨ç¨‹å¼çš„å¾Œç«¯è³‡æ–™å­˜å–å±¤æ˜¯å®¶å¸¸ä¾¿é£¯ã€‚è‹¥å†è€ƒæ…®ä¸Šæ¯ç¨®è³‡æ–™åº«ç®¡ç†ç³»çµ±æœ‰ä¸åŒçš„ç‰ˆæœ¬ï¼Œè‚¯å®šæœƒè®“ä½ çš„é–‹ç™¼ç’°å¢ƒè² æ“”éé‡ã€éæ–¼è¤‡é›œã€‚ä½¿ç”¨ Docker ä¾†æ–¼é©ç•¶çš„æ™‚æ©Ÿé–‹å•Ÿé©ç”¨çš„è³‡æ–™åº«ç®¡ç†ç³»çµ±æœƒæ˜¯ä¸€å€‹ä¸éŒ¯çš„é¸æ“‡ã€‚\næœ¬ç¯‡ç­†è¨˜ç´€éŒ„ä½¿ç”¨ docker (docker compose) ä¾†å¿«é€Ÿçš„è¨­ç½® postgresSQL åŠå…¶ç®¡ç†å·¥å…· pgAdminã€‚\næª¢æŸ¥æ˜¯å¦å·²å®‰è£äº† Docker (docker version) $ docker version Client: Docker Engine - Community Version: 20.10.16 API version: 1.41 Go version: go1.17.10 Git commit: aa7e414 Built: Thu May 12 09:17:23 2022 OS/Arch: linux/amd64 Context: default Experimental: true Server: Docker Engine - Community Engine: Version: 20.10.16 API version: 1.41 (minimum version 1.12) Go version: go1.","title":"ä½¿ç”¨ Docker åŸ·è¡Œ PostgresSQL èˆ‡ pgAdmin"},{"content":"github Source code\næœ¬æ–‡å°‡è¨˜éŒ„å¦‚ä½•ä¸€æ­¥æ­¥å¾ç„¡åˆ°æœ‰ä½¿ç”¨ Angular 13 Reactive Form è¡¨å–®é©—è­‰ èˆ‡ Bootstrap å»ºç«‹ ä¸€å€‹ä½¿ç”¨è€…è³‡æ–™è¨»å†Šçš„è¡¨å–®ã€€åŠŸèƒ½ï¼Œåœ¨é€™å€‹è¡¨å–®ä¸­ç•¶æŒ‰ä¸‹é€å‡ºæ™‚æœƒè‡ªå‹•æª¢æ ¸ä½¿ç”¨è€…æ‰€è¼¸å…¥çš„è³‡æ–™æ˜¯å¦åˆä¹ç¨‹å¼ä¸­æ‰€è¨­å®šçš„æª¢æ ¸é‚è¼¯ï¼Œä¸¦é¡¯ç¤ºåˆé©çš„è¨Šæ¯åæ‡‰çµ¦ä½¿ç”¨è€…ã€‚å…¶ä¸­å°‡æœƒä½¿ç”¨åˆ°ä¸‹åˆ—æŠ€è¡“:\n Angular CLI Bootstrap 4 \u0026amp; 5 (UI Framework) Angular Reactive Form Custome Validator  å»ºç«‹æ–°å°ˆæ¡ˆ $ ng version Angular CLI: 13.3.6 Node: 16.14.0 Package Manager: npm 8.3.1 OS: linux x64 Angular: 13.3.9 ... animations, common, compiler, compiler-cli, core, forms ... platform-browser, platform-browser-dynamic, router Package Version --------------------------------------------------------- @angular-devkit/architect 0.1303.6 @angular-devkit/build-angular 13.3.6 @angular-devkit/core 13.3.6 @angular-devkit/schematics 13.3.6 @angular/cli 13.3.6 @schematics/angular 13.3.6 rxjs 7.5.5 typescript 4.6.4 $ ng new form-validation # ä½¿ç”¨ ng cli ä¾†å»ºç«‹å°ˆæ¡ˆ ? Would you like to add Angular routing? (y/N) N # é¸æ“‡ N ä¸ä½¿ç”¨ routing åŠŸèƒ½ ? Which stylesheet format would you like to use? # é¸æ“‡ SCSS  CSS â¯ SCSS [ https://sass-lang.com/documentation/syntax#scss ] Sass [ https://sass-lang.com/documentation/syntax#the-indented-syntax ] Less [ http://lesscss.org ] ... Packages installed successfully. Successfully initialized git. $ cd form-validation/ $ ls -al ç¸½ç”¨é‡ 844 drwxrwxr-x 6 egs egs 4096 äº” 28 15:08 . drwxrwxr-x 3 egs egs 4096 äº” 28 15:07 .. -rw-rw-r-- 1 egs egs 3261 äº” 28 15:07 angular.json -rw-rw-r-- 1 egs egs 600 äº” 28 15:07 .browserslistrc -rw-rw-r-- 1 egs egs 274 äº” 28 15:07 .editorconfig drwxrwxr-x 8 egs egs 4096 äº” 28 15:08 .git -rw-rw-r-- 1 egs egs 548 äº” 28 15:07 .gitignore -rw-rw-r-- 1 egs egs 1432 äº” 28 15:07 karma.conf.js drwxrwxr-x 599 egs egs 20480 äº” 28 15:08 node_modules -rw-rw-r-- 1 egs egs 1078 äº” 28 15:07 package.json -rw-rw-r-- 1 egs egs 778846 äº” 28 15:08 package-lock.json -rw-rw-r-- 1 egs egs 1068 äº” 28 15:07 README.md drwxrwxr-x 5 egs egs 4096 äº” 28 15:07 src -rw-rw-r-- 1 egs egs 287 äº” 28 15:07 tsconfig.app.json -rw-rw-r-- 1 egs egs 863 äº” 28 15:07 tsconfig.json -rw-rw-r-- 1 egs egs 333 äº” 28 15:07 tsconfig.spec.json drwxrwxr-x 2 egs egs 4096 äº” 28 15:07 .vscode $ code .ã€€# æ‰“é–‹ vscode è¨­ç½®å°ˆæ¡ˆ åŒ¯å…¥ ReactiveFormModule æ¨¡çµ„ é–‹å•Ÿ src/app/app.module.ts ä¸¦ç”± @angular/forms åŒ¯å…¥ ReactiveFormModule\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  import { NgModule } from \u0026#39;@angular/core\u0026#39;; import { BrowserModule } from \u0026#39;@angular/platform-browser\u0026#39;; import { ReactiveFormsModule } from \u0026#39;@angular/forms\u0026#39;; import { AppComponent } from \u0026#39;./app.component\u0026#39;; @NgModule({ declarations: [ AppComponent ], imports: [ BrowserModule, ReactiveFormsModule  ], providers: [], bootstrap: [AppComponent] }) export class AppModule { }   ä½¿ç”¨ Bootstrap æ–¹æ³•ä¸€: é–‹å•Ÿ src/index.html åœ¨  åŠ å…¥ link tag\n ä½¿ç”¨ bootstrap 4 æ™‚ä½¿ç”¨ç¬¬ 9 è¡ŒåŒ¯å…¥èªæ³• ä½¿ç”¨ bootstrap 5 æ™‚ä½¿ç”¨ç¬¬ 10 è¡ŒåŒ¯å…¥èªæ³•ã€€ä¸Šè¿°èªæ³•äºŒæ“‡ä¸€  ç”±æ–¼ bootstrap 4 \u0026amp; 5 å…©å€‹ç‰ˆæœ¬èªæ³•æœ‰ç›¸ç•°è™•ï¼Œåœ¨ç¯„ä¾‹ä¸­å°‡å±•ç¤ºä¸åŒçš„å¯«æ³•\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;FormValidation\u0026lt;/title\u0026gt; \u0026lt;base href=\u0026#34;/\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;icon\u0026#34; type=\u0026#34;image/x-icon\u0026#34; href=\u0026#34;favicon.ico\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css\u0026#34; integrity=\u0026#34;sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34;\u0026gt; \u0026lt;!-- \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\u0026#34; integrity=\u0026#34;sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34;\u0026gt; --\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;app-root\u0026gt;\u0026lt;/app-root\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;   æ–¹æ³•äºŒ: ä½¿ç”¨ npm install ä¾†é€²è¡Œå®‰è£\n1.1 å…ˆä½¿ç”¨ npm install å°‡ bootstrap å®‰è£åˆ°å°ˆæ¡ˆçš„ node_modules ç›®éŒ„ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  # ä¸Šè¿°ç‰ˆæœ¬äºŒæ“‡ä¸€ $ npm install bootstarp@4.6.1 npm WARN deprecated popper.js@1.16.1: You can find the new Popper v2 at @popperjs/core, this package is dedicated to the legacy v1 added 3 packages, and audited 928 packages in 1s 108 packages are looking for funding run `npm fund` for details found 0 vulnerabilities  $ npm install bootstrap@5.1.3 added 2 packages, and audited 927 packages in 2s 108 packages are looking for funding run `npm fund` for details found 0 vulnerabilities   npm install æˆåŠŸå¾Œï¼Œå¯ä»¥åœ¨ package.json ä¸­æŸ¥çœ‹åˆ°å·²è£ bootstrap çš„è³‡è¨Š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14  \u0026#34;dependencies\u0026#34;: { \u0026#34;@angular/animations\u0026#34;: \u0026#34;~13.3.0\u0026#34;, \u0026#34;@angular/common\u0026#34;: \u0026#34;~13.3.0\u0026#34;, \u0026#34;@angular/compiler\u0026#34;: \u0026#34;~13.3.0\u0026#34;, \u0026#34;@angular/core\u0026#34;: \u0026#34;~13.3.0\u0026#34;, \u0026#34;@angular/forms\u0026#34;: \u0026#34;~13.3.0\u0026#34;, \u0026#34;@angular/platform-browser\u0026#34;: \u0026#34;~13.3.0\u0026#34;, \u0026#34;@angular/platform-browser-dynamic\u0026#34;: \u0026#34;~13.3.0\u0026#34;, \u0026#34;@angular/router\u0026#34;: \u0026#34;~13.3.0\u0026#34;, \u0026#34;bootstrap\u0026#34;: \u0026#34;^4.6.1\u0026#34;,  \u0026#34;rxjs\u0026#34;: \u0026#34;~7.5.0\u0026#34;, \u0026#34;tslib\u0026#34;: \u0026#34;^2.3.0\u0026#34;, \u0026#34;zone.js\u0026#34;: \u0026#34;~0.11.4\u0026#34; },   1.2 npm install æˆåŠŸå¾Œï¼Œé‚„å¿…é ˆåœ¨ angular.json architect/build/options/styles ä¸­åŒ¯å…¥å·²å®‰è£çš„ bootstrap\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40  { \u0026#34;$schema\u0026#34;: \u0026#34;./node_modules/@angular/cli/lib/config/schema.json\u0026#34;, \u0026#34;version\u0026#34;: 1, \u0026#34;newProjectRoot\u0026#34;: \u0026#34;projects\u0026#34;, \u0026#34;projects\u0026#34;: { \u0026#34;form-validation\u0026#34;: { \u0026#34;projectType\u0026#34;: \u0026#34;application\u0026#34;, \u0026#34;schematics\u0026#34;: { \u0026#34;@schematics/angular:component\u0026#34;: { \u0026#34;style\u0026#34;: \u0026#34;css\u0026#34; } }, \u0026#34;root\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;sourceRoot\u0026#34;: \u0026#34;src\u0026#34;, \u0026#34;prefix\u0026#34;: \u0026#34;app\u0026#34;, \u0026#34;architect\u0026#34;: { \u0026#34;build\u0026#34;: { \u0026#34;builder\u0026#34;: \u0026#34;@angular-devkit/build-angular:browser\u0026#34;, \u0026#34;options\u0026#34;: { \u0026#34;outputPath\u0026#34;: \u0026#34;dist/form-validation\u0026#34;, \u0026#34;index\u0026#34;: \u0026#34;src/index.html\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;src/main.ts\u0026#34;, \u0026#34;polyfills\u0026#34;: \u0026#34;src/polyfills.ts\u0026#34;, \u0026#34;tsConfig\u0026#34;: \u0026#34;tsconfig.app.json\u0026#34;, \u0026#34;assets\u0026#34;: [ \u0026#34;src/favicon.ico\u0026#34;, \u0026#34;src/assets\u0026#34; ], \u0026#34;styles\u0026#34;: [ \u0026#34;src/styles.scss\u0026#34;, \u0026#34;node_modules/bootstrap/scss/bootstrap.scss\u0026#34;  ], \u0026#34;scripts\u0026#34;: [] ... }, } } } } }   é–‹å§‹æ’°å¯«ç¨‹å¼ é–‹å•Ÿ app.component.ts ç¨‹å¼æª”æ¡ˆï¼Œä¸¦å…ˆ import @angular/form module ä¸­çš„ã€€AbstractControl, FormBuilder, FormGroup, Validatorsã€‚æˆ‘å€‘æœƒä½¿ç”¨ Angular FormBuilder å»ºç«‹ä¸€å€‹ FormGroup ç‰©ä»¶ï¼ˆè¡¨å–®å±¬æ€§ï¼‰ï¼Œç„¶å¾Œç¶å®šåˆ°æ¨¡æ¿\u0026lt;form\u0026gt;å…ƒç´ ï¼ˆç¨å¾Œä½¿ç”¨ [formGroup]æŒ‡ä»¤ï¼‰ã€‚ Validators æä¾›äº†ä¸€çµ„å…§ç½®çš„é©—è­‰å™¨ï¼ˆrequiredã€minLengthã€maxLengthâ€¦ï¼‰ï¼Œå¯ä¾›è¡¨å–®æ§ä»¶(control)æ‰€ä½¿ç”¨ã€‚\n1 2  import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { AbstractControl, FormBuilder, FormGroup, Validators } from \u0026#39;@angular/forms\u0026#39;;   å®Œæˆå¾Œç¨‹å¼å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69  import { Component, OnInit } from \u0026#39;@angular/core\u0026#39;; import { AbstractControl, FormBuilder, FormControl, FormGroup, Validators } from \u0026#39;@angular/forms\u0026#39;; @Component({ selector: \u0026#39;app-root\u0026#39;, templateUrl: \u0026#39;./app.component.html\u0026#39;, styleUrls: [\u0026#39;./app.component.scss\u0026#39;] }) export class AppComponent implements OnInit { form: FormGroup = new FormGroup({ fullname: new FormControl(\u0026#39;\u0026#39;), username: new FormControl(\u0026#39;\u0026#39;), email: new FormControl(\u0026#39;\u0026#39;), password: new FormControl(\u0026#39;\u0026#39;), confirmPassword: new FormControl(\u0026#39;\u0026#39;), acceptTerms: new FormControl(false),  }); submitted = false;  constructor(private formBuilder: FormBuilder) {} ngOnInit(): void { this.form = this.formBuilder.group( { fullname: [\u0026#39;\u0026#39;, Validators.required], username: [ \u0026#39;\u0026#39;, [ Validators.required, Validators.minLength(6), Validators.maxLength(20) ] ], email: [\u0026#39;\u0026#39;, [Validators.required, Validators.email]], password: [ \u0026#39;\u0026#39;, [ Validators.required, Validators.minLength(6), Validators.maxLength(40) ] ], confirmPassword: [\u0026#39;\u0026#39;,Validators.required], acceptTerms: [false, Validators.requiredTrue] }, { validators: [Validation.match(\u0026#39;password\u0026#39;, \u0026#39;confirmPassword\u0026#39;)] } )  } get f(): { [key: string]: AbstractControl } { return this.form.controls; }  onSubmit(): void { this.submitted = true; if (this.form.invalid) { return; } console.log(JSON.stringify(this.form.value, null, 2)); } onReset(): void { this.submitted = false; this.form.reset(); } }   åœ¨ä¸Šè¿°ç¨‹å¼è£¡ï¼Œæˆ‘å€‘æ‰€å»ºç«‹çš„ this.form (ç¨‹å¼ 24-50 è¡Œ)é€™å€‹ FormGroup ç‰©ä»¶ä¸­ä½¿ç”¨åˆ°äº†è¨±å¤šå…§å»ºçš„è¡¨å–®é©—è­‰å™¨ï¼Œå¦‚ï¼šValidators.requiredï¼ˆå¿…å¡«ï¼‰ã€Validators.minLengthï¼ˆæœ€å°é•·åº¦ï¼‰ã€Validators.maxLengthï¼ˆæœ€å¤§é•·åº¦ï¼‰ã€Validators.requiredTrueï¼ˆå¿…é ˆç‚º trueï¼‰ç­‰ï¼ŒåŒæ™‚åœ¨ç¨‹å¼ç¬¬ 48 è¡Œä¹Ÿæœƒä½¿ç”¨åˆ°ï½€è‡ªå®šé©—è­‰å™¨ï½€(ç¨å¾Œæœƒé€²è¡Œå¦‚ä½•æ’°å¯«ä¸€å€‹è‡ªå®šé©—è­‰å™¨)\nåœ¨ç¨‹å¼ç¬¬51è¡Œæˆ‘å€‘å®šç¾©äº†ä¸€å€‹ getter ä»¥æ–¹ä¾¿æˆ‘å€‘åœ¨ template ä¸­å­˜å– form ä¸­çš„æ§ä»¶ï¼ˆcontolï¼‰ã€‚é€éé€™å€‹ getter function ä½ å¯ä»¥ä½¿ç”¨ï½€f.usernameï½€ ä¾†å–ä»£ ï½€form.controls.usernameï½€ï¼Œä½¿ templateï¼ˆè¡¨å–®æ¨£ç‰ˆï¼‰ çœ‹èµ·ç°¡æ½”äº›ã€‚\nè‡ªå®š CSS è¨­å®š ç‚ºæ§åˆ¶æ•´å¼µ form çš„å¯¬åº¦ï¼Œæˆ‘å€‘åœ¨ app.component.scss ä¸­å®šç¾©äº†ä¸€å€‹ class - register-formï¼Œå®šç¾©å®ƒæœ€å¤§å¯¬åº¦ï¼Œä¸¦å¥—ç”¨åœ¨ html æª”æ¡ˆä¸­ã€‚\n.register-form { max-width: 350px; margin: auto; } è‡ªå®šè¡¨å–®é©—è­‰å™¨ åœ¨å‰è¿° reactive è¡¨å–®å®šç¾©ä¸­æˆ‘å€‘å¸Œæœ›åœ¨ â€œConfirm Passwordâ€ æ¬„ä½é™¤äº†â€œå¿…å¡«â€çš„æª¢æ ¸é‚è¼¯å¤–ï¼Œé‚„è¦æœ‰ä¸€å€‹é©—è­‰çš„æ©Ÿåˆ¶æ˜¯ï½€æ¯”å° â€œPasswordâ€ èˆ‡ â€œConfirm Passwordâ€ é€™å…©å€‹æ¬„ä½å€¼å¿…é ˆä¸€è‡´\u0026quot;ï¼Œé€™å€‹é‚è¼¯åœ¨å…§å»ºçš„è¡¨å–®æ¬„ä½é©—è­‰å™¨ä¸­ä¸¦æ²’æœ‰æä¾›ï¼Œæ‰€ä»¥æˆ‘å€‘è¦è‡ªè¡Œæ’°å¯«é€™å€‹é©—è­‰å™¨ã€‚\nè‡ªå®šé©—è­‰å™¨å°±åƒæˆ‘å€‘åœ¨æ—¥å¸¸ç¨‹å¼ä¸­ç¶“å¸¸ä½¿ç”¨çš„å‡½æ•¸ä¸€æ¨£ã€‚ä½ å¯ä»¥ç‚ºä»»ä½•çµ¦å®šå ´æ™¯å‰µç«‹è‡ªå®šé©—è­‰å™¨ã€‚åœ¨ Angular ä¸­å»ºç«‹è‡ªå®šé©—è­‰éå¸¸ç°¡å–®ï¼Œå°±åƒå»ºç«‹å…¶ä»–å‡½æ•¸ä¸€æ¨£ã€‚è‡ªå®šé©—è­‰å™¨å°‡ AbstractControl ä½œç‚ºåƒæ•¸ï¼Œå¦‚æœé©—è­‰å¤±æ•—ï¼Œå‰‡ä»¥ key: value å°çš„å½¢å¼å›å‚³ä¸€å€‹ç‰©ä»¶ã€‚\nå…ˆå»ºç«‹ä¸€å€‹å­ç›®éŒ„ utilsï¼Œæ–°å¢ä¸€å€‹ validation.ts ç¨‹å¼æª”ï¼Œä¸»è¦çš„é‚è¼¯æœ‰\n é¦–å…ˆï¼Œè‹¥æª¢æŸ¥æœ‰ä»»ä½•èª¤å‰‡å›å‚³ null å†å‰‡ï¼Œè‹¥å…©å€‹è¢«æª¢æ ¸çš„æ¬„ä½å€¼ä¸ç›¸åŒï¼Œå‰‡å›å‚³  import { AbstractControl, ValidatorFn } from \u0026#34;@angular/forms\u0026#34;; export default class Validation { static match(controlName: string, checkControlName: string): ValidatorFn { return (controls: AbstractControl) =\u0026gt; { const control = controls.get(controlName); const checkControl = controls.get(checkControlName); if (checkControl?.errors \u0026amp;\u0026amp; !checkControl.errors[\u0026#39;matching\u0026#39;]) { return null; } if (control?.value !== checkControl?.value) { controls.get(checkControlName)?.setErrors({ matching: true }); return { match: true }; } else { return null; } } } } å®Œæˆå¾Œçš„é©—è­‰å™¨æœƒè¢«ä½¿ç”¨åœ¨ app.component.ts form çš„å®šç¾©ä¸­ï¼Œè¦‹ä¸‹ç¨‹å¼ç¬¬26è¡Œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  ngOnInit(): void { this.form = this.formBuilder.group( { fullname: [\u0026#39;\u0026#39;, Validators.required], username: [ \u0026#39;\u0026#39;, [ Validators.required, Validators.minLength(6), Validators.maxLength(20) ] ], email: [\u0026#39;\u0026#39;, [Validators.required, Validators.email]], password: [ \u0026#39;\u0026#39;, [ Validators.required, Validators.minLength(6), Validators.maxLength(40) ] ], confirmPassword: [\u0026#39;\u0026#39;,Validators.required], acceptTerms: [false, Validators.requiredTrue] }, { validators: [Validation.match(\u0026#39;password\u0026#39;, \u0026#39;confirmPassword\u0026#39;)]  } ) }   åŸ·è¡Œç¨‹å¼ çµè¡Œçµæœï¼š\næŒ‰ä¸‹ï½€é€å‡ºï½€æŒ‰éˆ•å°‡æ‰€æœ‰æª¢æ ¸ä¸åˆå¯è¨Šæ¯é¡¯ç¤ºåœ¨æ¬„ä½ä¸‹æ–¹\nemail æ ¼å¼ä¸ç¬¦çš„é©—è­‰\npassword é•·åº¦çš„é©—è­‰\nconfirm password è‡ªå®šé©—è­‰å–Œå³çš„æª¢æ ¸\næª¢æ ¸å®Œæˆ\nå¥—ç”¨ bootstrap 5 çš„ html index.html ä¸­ link åˆ° bootstrp@5.1.3 çš„ç‰ˆæœ¬\n\u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;FormValidation\u0026lt;/title\u0026gt; \u0026lt;base href=\u0026#34;/\u0026#34;\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1\u0026#34;\u0026gt; \u0026lt;link rel=\u0026#34;icon\u0026#34; type=\u0026#34;image/x-icon\u0026#34; href=\u0026#34;favicon.ico\u0026#34;\u0026gt; \u0026lt;!-- \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css\u0026#34; integrity=\u0026#34;sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34;\u0026gt; --\u0026gt; \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\u0026#34; integrity=\u0026#34;sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3\u0026#34; crossorigin=\u0026#34;anonymous\u0026#34;\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;app-root\u0026gt;\u0026lt;/app-root\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; app.component.html å¥—ç”¨çš„ bootstrp class éœ€è¦å¾®èª¿\n\u0026lt;div class=\u0026#34;container-fluid register-form\u0026#34;\u0026gt; \u0026lt;form needs-validation [formGroup]=\u0026#34;form\u0026#34; (ngSubmit)=\u0026#34;onSubmit()\u0026#34;\u0026gt; \u0026lt;div class=\u0026#34;note\u0026#34;\u0026gt; \u0026lt;h1\u0026gt; ä½¿ç”¨è€…è³‡æ–™è¨»å†Š \u0026lt;/h1\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;fullname\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Full Name\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; formControlName=\u0026#34;fullname\u0026#34; id=\u0026#34;fullname\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;fullname\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;fullname\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; Full Name ç‚ºå¿…å¡« \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;username\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Username\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; formControlName=\u0026#34;username\u0026#34; id=\u0026#34;username\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;username\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;username\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;username\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;username\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Username ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;username\u0026#39;].errors[\u0026#39;minlength\u0026#39;]\u0026#34;\u0026gt; Username å¿…é ˆè‡³å°‘ç‚ºå…­å€‹å­—å…ƒ \u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;username\u0026#39;].errors[\u0026#39;maxlength\u0026#39;]\u0026#34;\u0026gt; Username å¿…é ˆè‡³å¤šç‚ºäºŒåå€‹å­—å…ƒ \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;email\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Email\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; formControlName=\u0026#34;email\u0026#34; id=\u0026#34;email\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;email\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;email\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;email\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;email\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Email ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;email\u0026#39;].errors[\u0026#39;email\u0026#39;]\u0026#34;\u0026gt;Email æ ¼å¼ä¸ç¬¦\u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;password\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Password\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;password\u0026#34; formControlName=\u0026#34;password\u0026#34; id=\u0026#34;password\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;password\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;password\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;password\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;password\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Password ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;password\u0026#39;].errors[\u0026#39;minlength\u0026#39;]\u0026#34;\u0026gt; Password å¿…é ˆè‡³å°‘ç‚ºå…­å€‹å­—å…ƒ \u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;password\u0026#39;].errors[\u0026#39;maxlength\u0026#39;]\u0026#34;\u0026gt; Password å¿…é ˆè‡³å¤šç‚ºå››åå€‹å­—å…ƒ \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;label for=\u0026#34;confirmPassword\u0026#34; class=\u0026#34;form-label\u0026#34;\u0026gt;Confirm Password\u0026lt;/label\u0026gt; \u0026lt;input type=\u0026#34;password\u0026#34; formControlName=\u0026#34;confirmPassword\u0026#34; id=\u0026#34;confirmPassword\u0026#34; class=\u0026#34;form-control\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;confirmPassword\u0026#39;].errors, \u0026#39;is-valid\u0026#39;: submitted \u0026amp;\u0026amp; !f[\u0026#39;confirmPassword\u0026#39;].errors }\u0026#34; /\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;confirmPassword\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;confirmPassword\u0026#39;].errors[\u0026#39;required\u0026#39;]\u0026#34;\u0026gt;Confirm Password ç‚ºå¿…å¡«\u0026lt;/div\u0026gt; \u0026lt;div *ngIf=\u0026#34;f[\u0026#39;confirmPassword\u0026#39;].errors[\u0026#39;matching\u0026#39;]\u0026#34;\u0026gt; Confirm Password ä¸ç¬¦ \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;valid-feedback\u0026#34;\u0026gt; å¡«å¯«æ­£ç¢º \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4 form-check\u0026#34;\u0026gt; \u0026lt;input type=\u0026#34;checkbox\u0026#34; formControlName=\u0026#34;acceptTerms\u0026#34; id=\u0026#34;acceptTerms\u0026#34; class=\u0026#34;form-check-input\u0026#34; [ngClass]=\u0026#34;{ \u0026#39;is-invalid\u0026#39;: submitted \u0026amp;\u0026amp; f[\u0026#39;acceptTerms\u0026#39;].errors }\u0026#34;/\u0026gt; \u0026lt;label for=\u0026#34;acceptTerms\u0026#34; class=\u0026#34;form-check-label\u0026#34;\u0026gt; æˆ‘å·²é–±è®€ä¸¦åŒæ„æ¢æ¬¾ \u0026lt;/label\u0026gt; \u0026lt;div *ngIf=\u0026#34;submitted \u0026amp;\u0026amp; f[\u0026#39;acceptTerms\u0026#39;].errors\u0026#34; class=\u0026#34;invalid-feedback\u0026#34;\u0026gt; åŒæ„æ¢æ¬¾ ç‚ºå¿…å¡« \u0026lt;/div\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;div class=\u0026#34;mb-4\u0026#34;\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34; class=\u0026#34;btn btn-primary\u0026#34;\u0026gt;é€å‡º\u0026lt;/button\u0026gt; \u0026lt;button type=\u0026#34;button\u0026#34; (click)=\u0026#34;onReset()\u0026#34; class=\u0026#34;btn btn-warning float-end\u0026#34;\u0026gt; é‡ç½® \u0026lt;/button\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;/div\u0026gt; ","permalink":"https://calvinegs.github.io/posts/angular-formvalidate/","summary":"github Source code\næœ¬æ–‡å°‡è¨˜éŒ„å¦‚ä½•ä¸€æ­¥æ­¥å¾ç„¡åˆ°æœ‰ä½¿ç”¨ Angular 13 Reactive Form è¡¨å–®é©—è­‰ èˆ‡ Bootstrap å»ºç«‹ ä¸€å€‹ä½¿ç”¨è€…è³‡æ–™è¨»å†Šçš„è¡¨å–®ã€€åŠŸèƒ½ï¼Œåœ¨é€™å€‹è¡¨å–®ä¸­ç•¶æŒ‰ä¸‹é€å‡ºæ™‚æœƒè‡ªå‹•æª¢æ ¸ä½¿ç”¨è€…æ‰€è¼¸å…¥çš„è³‡æ–™æ˜¯å¦åˆä¹ç¨‹å¼ä¸­æ‰€è¨­å®šçš„æª¢æ ¸é‚è¼¯ï¼Œä¸¦é¡¯ç¤ºåˆé©çš„è¨Šæ¯åæ‡‰çµ¦ä½¿ç”¨è€…ã€‚å…¶ä¸­å°‡æœƒä½¿ç”¨åˆ°ä¸‹åˆ—æŠ€è¡“:\n Angular CLI Bootstrap 4 \u0026amp; 5 (UI Framework) Angular Reactive Form Custome Validator  å»ºç«‹æ–°å°ˆæ¡ˆ $ ng version Angular CLI: 13.3.6 Node: 16.14.0 Package Manager: npm 8.3.1 OS: linux x64 Angular: 13.3.9 ... animations, common, compiler, compiler-cli, core, forms ... platform-browser, platform-browser-dynamic, router Package Version --------------------------------------------------------- @angular-devkit/architect 0.1303.6 @angular-devkit/build-angular 13.3.6 @angular-devkit/core 13.3.6 @angular-devkit/schematics 13.3.6 @angular/cli 13.","title":"ä½¿ç”¨ Angular 13 å»ºç«‹ Reactive Form è¡¨å–®é©—è­‰ç¯„ä¾‹"},{"content":"github Source code\næœ¬æ–‡å°‡è¨˜éŒ„å¦‚ä½•ä¸€æ­¥æ­¥å¾ç„¡åˆ°æœ‰ä½¿ç”¨ Dotnet Core 6.0 å»ºç«‹ ASP.NET Core Web APIï¼Œå…¶ä¸­å°‡æœƒä½¿ç”¨åˆ°ä¸‹åˆ—æŠ€è¡“:\n Dotnet CLI Entity Framework Json Web Token SQL Server (Docker Version) ASP.NET Core Generator  å°ˆæ¡ˆå®Œæˆå¾Œçš„æª”æ¡ˆçµæ§‹ ./å°ˆæ¡ˆç›®éŒ„ â”œâ”€â”€ .config/ â”‚ â””â”€â”€ dotnet-tools.json â”œâ”€â”€ .vscode/ â”‚ â”œâ”€â”€ launch.js â”‚ â””â”€â”€ tasks.json â”œâ”€â”€ Controller/ â”‚ â”œâ”€â”€ AuthenticateController.cs â”‚ â”œâ”€â”€ TodoController.cs â”‚ â””â”€â”€ WeatherForecast.cs â”œâ”€â”€ Data/ â”‚ â””â”€â”€ ApiDbContext.cs â”œâ”€â”€ Migrations/ â”œâ”€â”€ Models/ â”‚ â”œâ”€â”€ AuthenticateData.cs â”‚ â””â”€â”€ ItemData.cs â”œâ”€â”€ obj/ â”œâ”€â”€ Properties/ â”‚ â””â”€â”€ launchSettings.json â”œâ”€â”€ .gitignore â”œâ”€â”€ appsettings.Development.json â”œâ”€â”€ appsettings.json â”œâ”€â”€ dotnet6-webapi-jwt.csproj â”œâ”€â”€ global.json â”œâ”€â”€ Program.cs â”œâ”€â”€ README.md â””â”€â”€ WeatherForecast.cs å°ˆæ¡ˆå®Œæˆå¾Œæ‰€æä¾›çš„ API ç«¯é»    Methods Urls Actions     POST /api/Authenticate/login è¨»å†Šæ–°ä½¿ç”¨è€…å¸³è™Ÿ   POST /api/Authenticate/register ä½¿ç”¨è€…å¸³è™Ÿç™»å…¥   POST /api/Authenticate/register-admin ç®¡ç†è€…å¸³è™Ÿç™»å…¥   GET /api/Todos get all Todos   POST /api/Todos add New Todo   GET /api/Todos/:id get Todo by id   PUT /api/todos/:id update Todo by id   DELETE /api/todos/:id remove Todo by id    å»ºç½®æ–°å°ˆæ¡ˆ $ dotnet new webapi -o dotnet6-webapi-jwt ç¯„æœ¬ã€ŒASP.NET Core Web APIã€å·²æˆåŠŸå»ºç«‹ã€‚ æ­£åœ¨è™•ç†å»ºç«‹å¾Œçš„å‹•ä½œ... æ­£åœ¨ /home/egs/cal-data/tech-test/webapi/dotnet6-webapi-jwt/dotnet6-webapi-jwt.csproj ä¸ŠåŸ·è¡Œ \u0026#39;dotnet restore\u0026#39;... æ­£åœ¨åˆ¤æ–·è¦é‚„åŸçš„å°ˆæ¡ˆ... å·²é‚„åŸ /home/egs/cal-data/tech-test/webapi/dotnet6-webapi-jwt/dotnet6-webapi-jwt.csproj (238 ms å…§)ã€‚ é‚„åŸæˆåŠŸã€‚ $ cd dotnet6-webapi-jwt $ ls -al ç¸½ç”¨é‡ 40 drwxrwxr-x 5 egs egs 4096 äº” 20 09:38 . drwxrwxr-x 12 egs egs 4096 äº” 20 09:38 .. -rw-rw-r-- 1 egs egs 127 äº” 20 09:38 appsettings.Development.json -rw-rw-r-- 1 egs egs 151 äº” 20 09:38 appsettings.json drwxrwxr-x 2 egs egs 4096 äº” 20 09:38 Controllers -rw-rw-r-- 1 egs egs 382 äº” 20 09:38 dotnet6-webapi-jwt.csproj drwxrwxr-x 2 egs egs 4096 äº” 20 09:38 obj -rw-rw-r-- 1 egs egs 557 äº” 20 09:38 Program.cs drwxrwxr-x 2 egs egs 4096 äº” 20 09:38 Properties -rw-rw-r-- 1 egs egs 267 äº” 20 09:38 WeatherForecast.cs  dotnet code ç‰ˆæœ¬å®‰è£èˆ‡ç®¡ç†\n $ dotnet --list-sdks # é¡¯ç¤ºå·²å®‰è£çš„ sdk ç‰ˆæœ¬è³‡è¨Š 5.0.408 [/usr/share/dotnet/sdk] 6.0.300 [/usr/share/dotnet/sdk] $ dotnet --version # é¡¯ç¤ºç›®å‰æ‰€ä½¿ç”¨çš„ç‰ˆæœ¬ 6.0.300 # é è¨­æ˜¯æœ€æ–°çš„ç‰ˆæœ¬  ç”±æ–¼ dotnet ç‰ˆæœ¬æ¼”åŒ–æ»¿å¿«çš„ï¼Œæ‰€ä»¥æœƒå»ºè­°åœ¨å°ˆæ¡ˆç›®éŒ„ä¸­è¦æŒ‡å®šä½¿ç”¨ SDK çš„ç‰ˆæœ¬ï¼Œä»¥å…ç•¶ä½ åˆå®‰è£äº†æ›´æ–°ç‰ˆæœ¬ï¼ˆå¦‚7.0ï¼‰å¾Œç¨‹å¼åŸ·è¡Œå‡ºå•é¡Œã€‚\n $ dotnet new globaljson --sdk-version 6.0.300 ç¯„æœ¬ã€Œglobal.json æª”æ¡ˆã€å·²æˆåŠŸå»ºç«‹ã€‚ $ cat global.json { \u0026#34;sdk\u0026#34;: { \u0026#34;version\u0026#34;: \u0026#34;6.0.300\u0026#34; } }  ä½¿ç”¨ dotnet cli ä¾†ç”¢ç”Ÿé è¨­çš„ git ignore æª”æ¡ˆ\n $ dotnet new gitignore  å»ºç«‹ git åˆå§‹ç‰ˆæœ¬\n $ git init \u0026amp;\u0026amp; git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Initial commit\u0026#34; å®‰è£æœ¬æ©Ÿå·¥å…· æ­¤æ–¹å¼å®‰è£çš„å·¥å…·ï¼Œåƒ…é™æœ¬æ©Ÿå­˜å–(åªé‡å°ç›®å‰çš„ç›®éŒ„å’Œå­ç›®éŒ„)ï¼Œ é¦–å…ˆé€é dotnet new tool-manifest å‘½ä»¤ä¾†ç”¢ç”Ÿå·¥å…·è³‡è¨Šæ¸…å–®æª”ï¼Œå†ä½¿ç”¨ dotnet tool install ä¾†å®‰è£å„å¼å·¥å…·ç¨‹å¼ã€‚é€™æ¨£çš„æ–¹å¼å¥½è™•æ˜¯åœ¨å°ˆæ¡ˆè‹¥å¤šäººå”åŠ©æ–¹å¼æ™‚ï¼Œå‰‡å¯åˆ©ç”¨ dotnet tool restore å‘½ä»¤å°‡ç´€éŒ„åœ¨ .config/dotnet-tools.json çš„å·¥å…·è³‡è¨Šæ¸…å–®æª”é‡å»ºåœ¨ä¸åŒå”åŠ©äººå“¡çš„é›»è…¦ä¸­ã€‚\n$ dotnet new tool-manifest #æœƒç”¢ç”Ÿ .config/dotnet-tools.json æª”æ¡ˆ $ dotnet tool install --local dotnet-ef #ä½¿ç”¨ local å®‰è£æ–¹å¼ä¾†å®‰è£ Entity Framework å·¥å…· æ‚¨å¯ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤ï¼Œå¾æ­¤ç›®éŒ„å«ç”¨å·¥å…·: \u0026#39;dotnet tool run dotnet-ef\u0026#39; æˆ– \u0026#39;dotnet dotnet-ef\u0026#39;ã€‚ å·²æˆåŠŸå®‰è£å·¥å…· \u0026#39;dotnet-ef\u0026#39; (ç‰ˆæœ¬ \u0026#39;6.0.5\u0026#39;)ã€‚é …ç›®å·²æ–°å¢è‡³è³‡è¨Šæ¸…å–®æª” /home/egs/cal-data/tech-test/webapi/dotnet6-webapi-jwt/.config/dotnet-tools.jsonã€‚ $ dotnet tool install --local dotnet-aspnet-codegenerator #ä½¿ç”¨ local å®‰è£æ–¹å¼ä¾†å®‰è£ Code Generator å·¥å…· æ‚¨å¯ä½¿ç”¨ä¸‹åˆ—å‘½ä»¤ï¼Œå¾æ­¤ç›®éŒ„å«ç”¨å·¥å…·: \u0026#39;dotnet tool run dotnet-aspnet-codegenerator\u0026#39; æˆ– \u0026#39;dotnet dotnet-aspnet-codegenerator\u0026#39;ã€‚ å·²æˆåŠŸå®‰è£å·¥å…· \u0026#39;dotnet-aspnet-codegenerator\u0026#39; (ç‰ˆæœ¬ \u0026#39;6.0.5\u0026#39;)ã€‚é …ç›®å·²æ–°å¢è‡³è³‡è¨Šæ¸…å–®æª” /home/egs/cal-data/tech-test/webapi/dotnet6-webapi-jwt/.config/dotnet-tools.jsonã€‚ $ cat .\\.config\\dotnet-tools.json # æŸ¥çœ‹å®‰è£ä¸Šè¿°äºŒé …å·¥å…·å¾Œçš„è¨­å®šè³‡è¨Š 1 2 3 4 5 6 7 8 9 10 11 12 13 14  { \u0026#34;version\u0026#34;: 1, \u0026#34;isRoot\u0026#34;: true, \u0026#34;tools\u0026#34;: { \u0026#34;dotnet-ef\u0026#34;: {  \u0026#34;version\u0026#34;: \u0026#34;6.0.5\u0026#34;, \u0026#34;commands\u0026#34;: [\u0026#34;dotnet-ef\u0026#34;] }, \u0026#34;dotnet-aspnet-codegenerator\u0026#34;: {  \u0026#34;version\u0026#34;: \u0026#34;6.0.5\u0026#34;, \u0026#34;commands\u0026#34;: [\u0026#34;dotnet-aspnet-codegenerator\u0026#34;] } } }   å®‰è£ç¨‹å¼ä½¿ç”¨çš„ç›¸é—œå¥—ä»¶ $ dotnet add package Microsoft.EntityFrameworkCore.Tools #ä½¿ç”¨ dotnet Entity Frameworkæ™‚å¿…é ˆå®‰è£æ­¤å¥—ä»¶ $ dotnet add package Microsoft.EntityFrameworkCore.Design #ä½¿ç”¨ dotnet Entity Frameworkæ™‚å¿…é ˆå®‰è£æ­¤å¥—ä»¶ $ dotnet add package Microsoft.EntityFrameworkCore.SqlServer #ä½¿ç”¨ dotnet Entity Frameworkæ™‚å¿…é ˆå®‰è£æ­¤å¥—ä»¶ $ dotnet add package Microsoft.AspNetCore.Identity.EntityFrameworkCore #ä½¿ç”¨ Identity Frameworkæ™‚å¿…é ˆå®‰è£æ­¤å¥—ä»¶ $ dotnet add package Microsoft.AspNetCore.Authentication.JwtBearer # $ dotnet add package Microsoft.VisualStudio.Web.CodeGeneration.Design #æ­é… dotnet-aspnet-codegenerator ä½¿ç”¨ $ dotnet add package System.Configuration.ConfigurationManager #æ­é… dotnet-aspnet-codegenerator ä½¿ç”¨ å®‰è£çš„ç¨‹å¼å¥—ä»¶è³‡è¨Šç´€éŒ„åœ¨ \u0026ldquo;å°ˆæ¡ˆ\u0026rdquo;.csproj æª”æ¡ˆä¸­\n$ cat dotnet6-webapi-jwt.csproj #æŸ¥çœ‹ å®‰è£å¥—ä»¶çš„ç›¸é—œè¨­å®šå€¼ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  \u0026lt;Project Sdk=\u0026#34;Microsoft.NET.Sdk.Web\u0026#34;\u0026gt; \u0026lt;PropertyGroup\u0026gt; \u0026lt;TargetFramework\u0026gt;net6.0\u0026lt;/TargetFramework\u0026gt; \u0026lt;Nullable\u0026gt;enable\u0026lt;/Nullable\u0026gt; \u0026lt;ImplicitUsings\u0026gt;enable\u0026lt;/ImplicitUsings\u0026gt; \u0026lt;RootNamespace\u0026gt;dotnet6_webapi_jwt\u0026lt;/RootNamespace\u0026gt; \u0026lt;/PropertyGroup\u0026gt; \u0026lt;ItemGroup\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Microsoft.AspNetCore.Authentication.JwtBearer\u0026#34; Version=\u0026#34;6.0.5\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Microsoft.AspNetCore.Identity.EntityFrameworkCore\u0026#34; Version=\u0026#34;6.0.5\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Microsoft.EntityFrameworkCore.Design\u0026#34; Version=\u0026#34;6.0.5\u0026#34;\u0026gt;  \u0026lt;IncludeAssets\u0026gt;runtime; build; native; contentfiles; analyzers; buildtransitive\u0026lt;/IncludeAssets\u0026gt; \u0026lt;PrivateAssets\u0026gt;all\u0026lt;/PrivateAssets\u0026gt; \u0026lt;/PackageReference\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Microsoft.EntityFrameworkCore.SqlServer\u0026#34; Version=\u0026#34;6.0.5\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Microsoft.EntityFrameworkCore.Tools\u0026#34; Version=\u0026#34;6.0.5\u0026#34;\u0026gt;  \u0026lt;IncludeAssets\u0026gt;runtime; build; native; contentfiles; analyzers; buildtransitive\u0026lt;/IncludeAssets\u0026gt; \u0026lt;PrivateAssets\u0026gt;all\u0026lt;/PrivateAssets\u0026gt; \u0026lt;/PackageReference\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Swashbuckle.AspNetCore\u0026#34; Version=\u0026#34;6.2.3\u0026#34; /\u0026gt; \u0026lt;/ItemGroup\u0026gt; \u0026lt;/Project\u0026gt;   å»ºç«‹ git æ–°ç‰ˆæœ¬ $ git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Add EFCore NuGet packages\u0026#34; åŸ·è¡Œç¨‹å¼ $ dotnet watch  æ‰“é–‹ VS Code\n $ code .  ç›®å‰ç”£ç”Ÿçš„ç¨‹å¼æ¶æ§‹\n è¨­ç½®ä½¿ç”¨ Entity Frameworkç›¸é—œè¨­å®š æ–°å¢ database context (è‡ªå‹•ç”¢ç”Ÿ)  ä½¿ç”¨ dotnet ef å·¥å…·åœ¨å°ˆæ¡ˆç›®éŒ„ ./Data å­ç›®éŒ„ä¸‹æ–°å»ºç«‹ä¸€å€‹ ApiDbContext.cs çš„ DB Context file\n è¨»ï¼šåœ¨ä½¿ç”¨å‰å…ˆæŠŠ SQL Server ç’°å¢ƒå‚‹å¦¥ï¼Œå®‰è£ SQL Server å¯åƒè€ƒæ­¤ç¯‡ç­†ç´€ã€€Run SQL Server container images with Docker\n$ dotnet ef dbcontext scaffold \u0026#34;Data Source=localhost;Initial Catalog=TestDB;User ID=SA;Password=Sql@12345\u0026#34; Microsoft.EntityFrameworkCore.SqlServer -c ApiDbContext -o Data Build started... Build succeeded. To protect potentially sensitive information in your connection string, you should move it out of source code. You can avoid scaffolding the connection string by using the Name= syntax to read it from configuration - see https://go.microsoft.com/fwlink/?linkid=2131148. For more guidance on storing connection strings, see http://go.microsoft.com/fwlink/?LinkId=723263. using System; using System.Collections.Generic; using Microsoft.EntityFrameworkCore; using Microsoft.EntityFrameworkCore.Metadata; namespace dotnet6_webapi_jwt.Data { public partial class ApiDbContext : DbContext { public ApiDbContext() { } public ApiDbContext(DbContextOptions\u0026lt;ApiDbContext\u0026gt; options) : base(options) { } public virtual DbSet\u0026lt;Inventory\u0026gt; Inventories { get; set; } = null!; protected override void OnConfiguring(DbContextOptionsBuilder optionsBuilder) { if (!optionsBuilder.IsConfigured) { // optionsBuilder.UseSqlServer(\u0026#34;Data Source=localhost;Initial Catalog=TestDB;User ID=SA;Password=Sql@12345\u0026#34;);  } } protected override void OnModelCreating(ModelBuilder modelBuilder) { modelBuilder.Entity\u0026lt;Inventory\u0026gt;(entity =\u0026gt; { entity.HasNoKey(); entity.ToTable(\u0026#34;Inventory\u0026#34;); entity.Property(e =\u0026gt; e.Id).HasColumnName(\u0026#34;id\u0026#34;); entity.Property(e =\u0026gt; e.Name) .HasMaxLength(50) .HasColumnName(\u0026#34;name\u0026#34;); entity.Property(e =\u0026gt; e.Quantity).HasColumnName(\u0026#34;quantity\u0026#34;); }); OnModelCreatingPartial(modelBuilder); } partial void OnModelCreatingPartial(ModelBuilder modelBuilder); } }  åœ¨ appsettings.json æª”æ¡ˆä¸­åŠ å…¥ Connection String\n { \u0026#34;Logging\u0026#34;: { \u0026#34;LogLevel\u0026#34;: { \u0026#34;Default\u0026#34;: \u0026#34;Information\u0026#34;, \u0026#34;Microsoft.AspNetCore\u0026#34;: \u0026#34;Warning\u0026#34; } }, \u0026#34;AllowedHosts\u0026#34;: \u0026#34;*\u0026#34;, \u0026#34;ConnectionStrings\u0026#34;: { \u0026#34;ConnStr\u0026#34;: \u0026#34;Data Source=localhost;Initial Catalog=TestDB;User ID=SA;Password=Sql@12345\u0026#34; } } ä½¿ç”¨ Asp.Net Core Identity framework ä¾†ç®¡ç†ä½¿ç”¨è€…ä½¿ç”¨æ¬Šé™ ASP.NET Core Identity:\n æ”¯æ´ä½¿ç”¨è€…ä»‹é¢ (UI) ç™»å…¥åŠŸèƒ½çš„ APIã€‚ ç®¡ç†ä½¿ç”¨è€…ã€å¯†ç¢¼ã€è¨­å®šæª”è³‡æ–™ã€è§’è‰²ã€å®£å‘Šã€æ¬Šæ–ã€é›»å­éƒµä»¶ç¢ºèªç­‰ã€‚  ASP.Net Core Identity Framework æ˜¯ä¸€å€‹æ–¹ä¾¿ä¸”é‚„å®Œå–„çš„ä½¿ç”¨æ¬Šé™ç®¡ç†æ¶æ§‹ã€‚\nå°‡ç›¸é—œ Asp.Net Core Identity framework åŠŸèƒ½æ³¨å…¥åˆ° container ä¸­ é™¤äº†å®‰è£ç›¸é—œå¥—ä»¶å¤–ï¼Œé‚„è¦èª¿æ•´ç›¸é—œç¨‹å¼:\n åœ¨ Program.cs æª”æ¡ˆä¸­å°‡åŠ å…¥ä»¥ä¸‹ç¨‹å¼ç¢¼ (before services.AddControllers())  ConfigurationManager _configuration = builder.Configuration; // Add services to the container. builder.Services.AddDbContext\u0026lt;ApiDbContext\u0026gt;( options =\u0026gt; options.UseSqlServer( _configuration.GetConnectionString(\u0026#34;ConnStr\u0026#34;) ) ); builder.Services.AddIdentity\u0026lt;IdentityUser, IdentityRole\u0026gt;() .AddEntityFrameworkStores\u0026lt;ApiDbContext\u0026gt;() .AddDefaultTokenProviders();  ä½¿ç”¨ AspNetCore Identityï¼Œå‰‡ DataContext (ApiDbContext.cs ä¸­) å¿…é ˆè¦ç¹¼æ‰¿ IdentityDbContextï¼Œ åŒæ™‚ Model creationg æ™‚è¦æ”¹æˆå‘¼å« base.OnModelCreation  1 2 3 4 5 6 7 8 9 10 11 12 13 14  public partial class ApiDbContext : IdentityDbContext\u0026lt;IdentityUser\u0026gt; { public ApiDbContext() { } // ...  protected override void OnModelCreating(ModelBuilder modelBuilder) { // OnModelCreatingPartial(modelBuilder);  base.OnModelCreating(modelBuilder);  } }   æ–°å¢ä¸€å€‹ entity framework é·ç§» ä¸¦ æ›´æ–°è³‡æ–™åº« å®Œæˆä¸Šè¿°ç¨‹å¼èª¿æ•´å¾Œï¼Œä¾†åŸ·è¡Œè³‡æ–™åº«é·ç§»(migrations)\n$ dotnet build $ dotnet ef migrations add \u0026#34;Add Identity Framework\u0026#34; Build started... Build succeeded. info: Microsoft.EntityFrameworkCore.Infrastructure[10403] Entity Framework Core 6.0.5 initialized \u0026#39;ApiDbContext\u0026#39; using provider \u0026#39;Microsoft.EntityFrameworkCore.SqlServer:6.0.5\u0026#39; with options: None Done. To undo this action, use \u0026#39;ef migrations remove\u0026#39; $ dotnet ef database update  åœ¨ã€€dotnet ef migrations add \u0026ldquo;Add Identity Framework\u0026rdquo; æŒ‡ä»¤å®Œæˆå¾Œï¼Œå¯ä»¥åœ¨å°ˆæ¡ˆç›®éŒ„ä¸‹ç™¼ç”Ÿç”£ç”Ÿæ–°çš„å­ç›®éŒ„ Migrationsï¼Œä¸¦æœ‰ä¸‰å€‹æ–°æª”æ¡ˆ\n  åœ¨ dotnet ef database update æŒ‡ä»¤å®Œæˆå¾Œï¼ŒSQL Server TestDB è³‡æ–™åº«ä¸­ç”¢ç”Ÿ Identity Framework æœƒä½¿ç”¨åˆ°çš„è³‡æ–™è¡¨\n å»ºç«‹ git æ–°ç‰ˆæœ¬ $ git add . \u0026amp;\u0026amp; git commit -m \u0026#34;æ–°å¢ä¸€å€‹ entity framework é·ç§» ä¸¦ æ›´æ–°è³‡æ–™åº«\u0026#34; ä½¿ç”¨ Jason Web Token åœ¨ appsettings.json ä¸­è‡ªå®šJWTå¯¦ä½œæœƒä½¿ç”¨åˆ°çš„è¨­å®šå€¼ { // ...  \u0026#34;ConnectionStrings\u0026#34;: { \u0026#34;ConnStr\u0026#34;: \u0026#34;Data Source=localhost;Initial Catalog=TestDB;User ID=SA;Password=Sql@12345\u0026#34; }, \u0026#34;JwtSettings\u0026#34;: { \u0026#34;ValidIssuer\u0026#34;: \u0026#34;Dotnet6WebApiDemo\u0026#34;, \u0026#34;ValidAudience\u0026#34;: \u0026#34;Dotnet6WebApiDemo\u0026#34;, \u0026#34;Secret\u0026#34;: \u0026#34;Dotnet6 WebApi Demo. Using Json Web Token Technology to keep user info.\u0026#34; } } æ–°å¢ ä½¿ç”¨è€…è¨»å†Šå’Œç™»å…¥æ™‚ä½¿ç”¨çš„ Data model class (Models/AuthenticateData.cs) using System.ComponentModel.DataAnnotations; namespace dotnet6_webapi_jwt.Models; public class Response { public string? Status { get; set; } public string? Message { get; set; } } public class LoginModel { [EmailAddress] [Required(ErrorMessage = \u0026#34;Eamil Address is required\u0026#34;)] public string? Email { get; set; } [Required(ErrorMessage = \u0026#34;Password is required\u0026#34;)] public string? Password { get; set; } } public class RegisterModel { [Required(ErrorMessage = \u0026#34;User Name is required\u0026#34;)] public string? Username { get; set; } [EmailAddress] [Required(ErrorMessage = \u0026#34;Email Address is required\u0026#34;)] public string? Email { get; set; } [Required(ErrorMessage = \u0026#34;Password is required\u0026#34;)] public string? Password { get; set; } } public static class UserRoles { public const string Admin = \u0026#34;Admin\u0026#34;; public const string User = \u0026#34;User\u0026#34;; } æ–°å¢ è¨»å†Šå’Œç™»å…¥é‚è¼¯ (Controllers/AuthenticateControll.cs) using System.IdentityModel.Tokens.Jwt; using System.Security.Claims; using System.Text; using dotnet6_webapi_jwt.Models; using Microsoft.AspNetCore.Identity; using Microsoft.AspNetCore.Mvc; using Microsoft.IdentityModel.Tokens; namespace dotnet6_webapi_jwt.Controllers; [Route(\u0026#34;api/[controller]\u0026#34;)] [ApiController] public class AuthenticateController : ControllerBase { private readonly UserManager\u0026lt;IdentityUser\u0026gt; _userManager; private readonly RoleManager\u0026lt;IdentityRole\u0026gt; _roleManager; private readonly IConfiguration _configuration; public AuthenticateController( UserManager\u0026lt;IdentityUser\u0026gt; userManager, RoleManager\u0026lt;IdentityRole\u0026gt; roleManager, IConfiguration configuration) { _userManager = userManager; _roleManager = roleManager; _configuration = configuration; } [HttpPost] [Route(\u0026#34;login\u0026#34;)] public async Task\u0026lt;IActionResult\u0026gt; Login([FromBody] LoginModel userModel) { var user = await _userManager.FindByEmailAsync(userModel.Email); if (user != null \u0026amp;\u0026amp; await _userManager.CheckPasswordAsync(user, userModel.Password)) { var userRoles = await _userManager.GetRolesAsync(user); var claims = new List\u0026lt;Claim\u0026gt; { new Claim(ClaimTypes.Name, user.UserName), new Claim(JwtRegisteredClaimNames.Jti, Guid.NewGuid().ToString()), }; foreach (var userRole in userRoles) { claims.Add(new Claim(ClaimTypes.Role, userRole)); } var token = CreateToken(claims); return Ok(new { token = new JwtSecurityTokenHandler().WriteToken(token), expiration = token.ValidTo }); } return Unauthorized(); } [HttpPost] [Route(\u0026#34;register\u0026#34;)] public async Task\u0026lt;IActionResult\u0026gt; Register([FromBody] RegisterModel model) { var userExists = await _userManager.FindByEmailAsync(model.Email); if (userExists != null) return StatusCode(StatusCodes.Status500InternalServerError, new Response { Status = \u0026#34;Error\u0026#34;, Message = \u0026#34;User already exists!\u0026#34; }); IdentityUser user = new() { Email = model.Email, SecurityStamp = Guid.NewGuid().ToString(), UserName = model.Username }; var result = await _userManager.CreateAsync(user, model.Password); if (!result.Succeeded) return StatusCode(StatusCodes.Status500InternalServerError, new Response { Status = \u0026#34;Error\u0026#34;, Message = \u0026#34;User creation failed! Please check user details and try again.\u0026#34; }); return Ok(new Response { Status = \u0026#34;Success\u0026#34;, Message = \u0026#34;User created successfully!\u0026#34; }); } [HttpPost] [Route(\u0026#34;register-admin\u0026#34;)] public async Task\u0026lt;IActionResult\u0026gt; RegisterAdmin([FromBody] RegisterModel model) { var userExists = await _userManager.FindByEmailAsync(model.Email); if (userExists != null) return StatusCode(StatusCodes.Status500InternalServerError, new Response { Status = \u0026#34;Error\u0026#34;, Message = \u0026#34;User already exists!\u0026#34; }); IdentityUser user = new() { Email = model.Email, SecurityStamp = Guid.NewGuid().ToString(), UserName = model.Username }; var result = await _userManager.CreateAsync(user, model.Password); if (!result.Succeeded) return StatusCode(StatusCodes.Status500InternalServerError, new Response { Status = \u0026#34;Error\u0026#34;, Message = \u0026#34;User creation failed! Please check user details and try again.\u0026#34; }); if (!await _roleManager.RoleExistsAsync(UserRoles.Admin)) await _roleManager.CreateAsync(new IdentityRole(UserRoles.Admin)); if (!await _roleManager.RoleExistsAsync(UserRoles.User)) await _roleManager.CreateAsync(new IdentityRole(UserRoles.User)); if (await _roleManager.RoleExistsAsync(UserRoles.Admin)) { await _userManager.AddToRoleAsync(user, UserRoles.Admin); } if (await _roleManager.RoleExistsAsync(UserRoles.Admin)) { await _userManager.AddToRoleAsync(user, UserRoles.User); } return Ok(new Response { Status = \u0026#34;Success\u0026#34;, Message = \u0026#34;User created successfully!\u0026#34; }); } private JwtSecurityToken CreateToken(List\u0026lt;Claim\u0026gt; claims) { var secretkey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes( _configuration.GetValue\u0026lt;string\u0026gt;(\u0026#34;JwtSettings:Secret\u0026#34;))); // _configuration.GetSection(\u0026#34;JwtSettings:Secret\u0026#34;).Value)  var credentials = new SigningCredentials(secretkey, SecurityAlgorithms.HmacSha512Signature); var token = new JwtSecurityToken( // äº¦å¯ä½¿ç”¨ã€€SecurityTokenDescriptorã€€ä¾†ç”£ç”Ÿ Token  issuer: _configuration.GetValue\u0026lt;string\u0026gt;(\u0026#34;JwtSettings:ValidIssuer\u0026#34;), audience: _configuration.GetValue\u0026lt;string\u0026gt;(\u0026#34;JwtSettings:ValidAudience\u0026#34;), expires: DateTime.Now.AddDays(1), claims: claims, signingCredentials: credentials); return token; } } æœ‰é—œå¯¦ä½œ JWT çš„æµç¨‹ é€é JWT çš„å¯¦ä½œå¯ä»¥è®“ä½ çš„å°ˆæ¡ˆå¯¦ç¾ Token-base çš„èº«ä»½é©—è­‰èˆ‡æˆæ¬Šã€‚ ï¼ˆJson Web Token) å¯¦ä½œçš„éç¨‹å¤§è‡´å¯ä»¥åˆ†æˆä¸‰å€‹éƒ¨åˆ†:\n åœ¨ç™»å…¥æˆåŠŸå¾Œç”£ç”Ÿåˆæ³•çš„ JWT Token æ¯æ¬¡æ”¶åˆ° request æ™‚é©—è­‰æ˜¯å¦ç‚ºåˆæ³•æœ‰æ•ˆçš„ JWT Token åœ¨ç‰¹å®š API Endpoint ä¸Šé©—è­‰æ˜¯å¦å¸¶æœ‰ â€œåˆæ³•æœ‰æ•ˆçš„ JWT Tokenâ€ï¼Œä»¥é”åˆ°æ¬Šé™ç®¡ç†çš„éœ€æ±‚  ç”£ç”Ÿåˆæ³•çš„ Jason Web Token  åœ¨ä¸Šè¿° AuthenticateController.cs ç¨‹å¼ä¸­ï¼Œæˆ‘å€‘å»ºç«‹ä¸€å€‹ CreateToken() çš„ functionï¼Œä¸¦åœ¨ç™»å…¥æª¢æ ¸æˆåŠŸæ™‚ç”£ç”Ÿä¸€å€‹ token å›å‚³ã€‚\n è¨­ç½®é©—è­‰æ˜¯å¦ç‚ºåˆæ³•æœ‰æ•ˆçš„ JWT Token  ç¬¬ä¸€æ­¥ï¼Œé€é DI å°‡ JWT ç›¸é—œè¨­å®šè¨­ç½®å¥½\n builder.Services.AddAuthentication(options =\u0026gt; { options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme; options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme; options.DefaultScheme = JwtBearerDefaults.AuthenticationScheme; }) .AddJwtBearer(options =\u0026gt; { // ç•¶é©—è­‰å¤±æ•—æ™‚ï¼Œå›æ‡‰æ¨™é ­æœƒåŒ…å« WWW-Authenticate æ¨™é ­ï¼Œé€™è£¡æœƒé¡¯ç¤ºå¤±æ•—çš„è©³ç´°éŒ¯èª¤åŸå›   options.IncludeErrorDetails = true; // é è¨­å€¼ç‚º trueï¼Œæœ‰æ™‚æœƒç‰¹åˆ¥é—œé–‰  options.TokenValidationParameters = new TokenValidationParameters { // é€éé€™é …å®£å‘Šï¼Œå°±å¯ä»¥å¾ \u0026#34;NAME\u0026#34; å–å€¼  NameClaimType = \u0026#34;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier\u0026#34;, // é€éé€™é …å®£å‘Šï¼Œå°±å¯ä»¥å¾ \u0026#34;Role\u0026#34; å–å€¼ï¼Œä¸¦å¯è®“ [Authorize] åˆ¤æ–·è§’è‰²  RoleClaimType = \u0026#34;http://schemas.microsoft.com/ws/2008/06/identity/claims/role\u0026#34;, // é©—è­‰ Issuer (ä¸€èˆ¬éƒ½æœƒ)  ValidateIssuer = true, ValidIssuer = _configuration.GetValue\u0026lt;string\u0026gt;(\u0026#34;JwtSettings:ValidIssuer\u0026#34;), // é©—è­‰ Audience (é€šå¸¸ä¸å¤ªéœ€è¦)  ValidateAudience = false, //ValidAudience = = _configuration.GetValue\u0026lt;string\u0026gt;(\u0026#34;JwtSettings:ValidAudience\u0026#34;),  // é©—è­‰ Token çš„æœ‰æ•ˆæœŸé–“ (ä¸€èˆ¬éƒ½æœƒ)  ValidateLifetime = true, // å¦‚æœ Token ä¸­åŒ…å« key æ‰éœ€è¦é©—è­‰ï¼Œä¸€èˆ¬éƒ½åªæœ‰ç°½ç« è€Œå·²  ValidateIssuerSigningKey = false, // æ‡‰è©²å¾ IConfiguration å–å¾—  IssuerSigningKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(secret)) }; });  ç¬¬äºŒæ­¥ï¼Œè¦å•Ÿå‹• request pipeline ä¸­çš„ Middleware (UseAuthentication \u0026amp; UseAuthorization éƒ½éœ€è¦)\n app.UseAuthentication(); app.UseAuthorization(); åœ¨ç‰¹å®š API EndPoint ä¸Šé©—è­‰æ˜¯å¦å¸¶æœ‰åˆæ³•æœ‰æ•ˆçš„ JWT Token  åœ¨ WeatherForecastController.cs Get() function ä¸ŠåŠ å…¥[Authorize] å³å¯\n 1 2 3 4 5 6 7 8 9 10 11 12  [Authorize] [HttpGet(Name = \u0026#34;GetWeatherForecast\u0026#34;)] public IEnumerable\u0026lt;WeatherForecast\u0026gt; Get() { return Enumerable.Range(1, 5).Select(index =\u0026gt; new WeatherForecast { Date = DateTime.Now.AddDays(index), TemperatureC = Random.Shared.Next(-20, 55), Summary = Summaries[Random.Shared.Next(Summaries.Length)] }) .ToArray(); }    å¦‚ä¸Šç¨‹å¼åŠ å…¥[Authorize]å¾Œï¼Œå†é‡æ–°ç€è¦½ weatherforecast endpointï¼Œæœƒå›å‚³ Status: 401 Unauthorized çš„éŒ¯èª¤è¨Šæ¯ã€‚\n  å…ˆç™»å…¥å–å¾— Token\n  å…ˆåŠ å…¥ Authorization Headerï¼Œä¸¦å°‡ç™»å…¥æˆåŠŸå¾Œå›å‚³çš„ Token åŠ åˆ° Authorization Header ä¸­ã€‚å†æ¬¡é€å‡ºå°±å¯æ­£å¸¸çš„å–å¾—æ‰€æœ‰å¤©æ°£é æ¸¬è³‡æ–™äº†ã€‚\n ä½¿ç”¨ OpenApi Swagger ä¾†æ¸¬è©¦ API  OpenApi Swagger ä¾†æ¸¬è©¦ APIæ™‚, å› ç‚ºã€€Swagger æ¸¬è©¦ç¶²é é è¨­æ˜¯æ²’æœ‰è¨­å®š Token çš„åŠŸèƒ½,å¿…é ˆå°‡ç¨‹å¼ç¢¼ä¸­çš„ builder.Services.AddSwaggerGen();æ”¹æˆä»¥ä¸‹å…§å®¹\n builder.Services.AddSwaggerGen(c =\u0026gt; { c.SwaggerDoc(\u0026#34;v1\u0026#34;, new OpenApiInfo { Title = \u0026#34;JwtDemo\u0026#34;, Version = \u0026#34;v1\u0026#34; }); c.AddSecurityDefinition(\u0026#34;Bearer\u0026#34;, new OpenApiSecurityScheme { In = ParameterLocation.Header, Description = \u0026#34;Please enter JWT with Bearer into field\u0026#34;, Name = \u0026#34;Authorization\u0026#34;, Type = SecuritySchemeType.ApiKey }); c.AddSecurityRequirement(new OpenApiSecurityRequirement { { new OpenApiSecurityScheme { Reference = new OpenApiReference { Type = ReferenceType.SecurityScheme, Id = \u0026#34;Bearer\u0026#34;} }, new string[] {} } }); });  æœ‰äº†ä¸Šè¿°çš„ç¨‹å¼è¨­å®šï¼Œç•¶å†æ¬¡ dotnet run å•Ÿå‹•ç¨‹å¼å¾Œï¼Œç€è¦½å™¨å‘ˆç¾çš„ Swagger ç•«é¢å³ä¸Šè§’æœƒå¤šå‡ºäº†ï½€Authorizeï½€ çš„æŒ‰éˆ•ã€‚æŒ‰ä¸‹æŒ‰éˆ•å°±æ˜¯è®“ä½ å¡«å…¥ç™»å…¥æˆåŠŸå¾Œå›å‚³çš„ Token\n  åœ¨ Value: æ–‡å­—æ¡†å…§å¡«å…¥ \u0026ldquo;Bearer yJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTUxMiIsInR5cCI6IkpXVCJ9\u0026hellip;..\u0026quot;ï¼Œå†æŒ‰ä¸‹ Authorize æŒ‰éˆ•å³è¡¨ä¸‹åœ¨æ¥ä¸‹ä¾†çš„ Request ä¸­éƒ½æœƒè‡ªå‹•å¸¶å…¥ Token å‚³çµ¦ WebApi Serverã€‚ ï¼ˆè«‹æ³¨æ„ Bearerå¾Œå†å…ˆæ¥è‘—ä¸€å€‹ç©ºç™½å­—å…ƒå†åŠ ä¸Š Tokenå€¼ï¼‰\n  å†æ¬¡åŸ·è¡Œã€€\u0026ldquo;WeatherForecast\u0026rdquo; çš„æ¸¬è©¦(Execute)ã€€å°±å¯æ­£å¸¸çš„å–å¾—å›å‚³å€¼äº†\n  ã€€è‹¥è¦ä½¿ç”¨ \u0026ldquo;è§’è‰²\u0026rdquo; çš„æˆæ¬Šæª¢æ ¸ï¼Œåªé ˆå°‡ï½€[Authorize]ï½€æ”¹æˆï½€[Authorize(Roles = UserRoles.Admin)]ï½€å³å¯\n 1 2 3 4 5 6 7 8 9 10 11 12  [Authorize(Roles = UserRoles.Admin)] [HttpGet(Name = \u0026#34;GetWeatherForecast\u0026#34;)] public IEnumerable\u0026lt;WeatherForecast\u0026gt; Get() { return Enumerable.Range(1, 5).Select(index =\u0026gt; new WeatherForecast { Date = DateTime.Now.AddDays(index), TemperatureC = Random.Shared.Next(-20, 55), Summary = Summaries[Random.Shared.Next(Summaries.Length)] }) .ToArray(); }   åŠ å…¥ git ç‰ˆæœ¬æ§åˆ¶ $ git commit -m \u0026#34;finished JWT function\u0026#34; -a ä½¿ç”¨ã€€aspnet-codegeneratorã€€å·¥å…·ä¾†è‡ªå‹•ç”£ç”Ÿç¨‹å¼ç¢¼ æœ€å¾Œæˆ‘å€‘ä¾†çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å·¥å…·ä¾†è‡ªå‹•ç”£ç”Ÿç¨‹å¼å»ç¶­è­·ä¸€å€‹æ–°çš„è³‡æ–™è¡¨\nåœ¨ Models ç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹ model(æ¨¡å‹) class - ItemData  Models/ItemData.cs\n namespace dotnet6_webapi_jwt.Models; public class ItemData { public int Id { get; set; } public string? Title { get; set; } public string? Details { get; set; } public bool Done { get; set; } } åœ¨ ApiDbContext.cs ä¸­å®£å‘Šä¸€å€‹ ItemData table public DbSet\u0026lt;ItemData\u0026gt;? ItemData { get; set; } æ–°å¢ä¸€å€‹é·ç§»èˆ‡æ›´æ–°è³‡æ–™åº« $ dotnet build $ dotnet ef migrations add \u0026#34;Add New Table - ItemData\u0026#34; $ dotnet ef database update ä½¿ç”¨ ASPNET Codegenerator è‡ªå‹•ç”¢ç”Ÿ Todo Controller $ dotnet aspnet-codegenerator controller -name TodoController -async -api -m ItemData -dc ApiDbContext -outDir Controllers Building project ... Finding the generator \u0026#39;controller\u0026#39;... Running the generator \u0026#39;controller\u0026#39;... Minimal hosting scenario! Attempting to compile the application in memory with the modified DbContext. Attempting to figure out the EntityFramework metadata for the model and DbContext: \u0026#39;ItemData\u0026#39; info: Microsoft.EntityFrameworkCore.Infrastructure[10403] Entity Framework Core 6.0.5 initialized \u0026#39;ApiDbContext\u0026#39; using provider \u0026#39;Microsoft.EntityFrameworkCore.SqlServer:6.0.5\u0026#39; with options: None Added Controller : \u0026#39;/Controllers/TodoController.cs\u0026#39;. RunTime 00:00:10.90  TodoController.cs\n using System; using System.Collections.Generic; using System.Linq; using System.Threading.Tasks; using Microsoft.AspNetCore.Http; using Microsoft.AspNetCore.Mvc; using Microsoft.EntityFrameworkCore; using dotnet6_webapi_jwt.Data; using dotnet6_webapi_jwt.Models; namespace dotnet6_webapi_jwt.Controllers { [Route(\u0026#34;api/[controller]\u0026#34;)] [ApiController] public class TodoController : ControllerBase { private readonly ApiDbContext _context; public TodoController(ApiDbContext context) { _context = context; } // GET: api/Todo [HttpGet] public async Task\u0026lt;ActionResult\u0026lt;IEnumerable\u0026lt;ItemData\u0026gt;\u0026gt;\u0026gt; GetItemData() { if (_context.ItemData == null) { return NotFound(); } return await _context.ItemData.ToListAsync(); } // GET: api/Todo/5 [HttpGet(\u0026#34;{id}\u0026#34;)] public async Task\u0026lt;ActionResult\u0026lt;ItemData\u0026gt;\u0026gt; GetItemData(int id) { if (_context.ItemData == null) { return NotFound(); } var itemData = await _context.ItemData.FindAsync(id); if (itemData == null) { return NotFound(); } return itemData; } // PUT: api/Todo/5  // To protect from overposting attacks, see https://go.microsoft.com/fwlink/?linkid=2123754 [HttpPut(\u0026#34;{id}\u0026#34;)] public async Task\u0026lt;IActionResult\u0026gt; PutItemData(int id, ItemData itemData) { if (id != itemData.Id) { return BadRequest(); } _context.Entry(itemData).State = EntityState.Modified; try { await _context.SaveChangesAsync(); } catch (DbUpdateConcurrencyException) { if (!ItemDataExists(id)) { return NotFound(); } else { throw; } } return NoContent(); } // POST: api/Todo  // To protect from overposting attacks, see https://go.microsoft.com/fwlink/?linkid=2123754 [HttpPost] public async Task\u0026lt;ActionResult\u0026lt;ItemData\u0026gt;\u0026gt; PostItemData(ItemData itemData) { if (_context.ItemData == null) { return Problem(\u0026#34;Entity set \u0026#39;ApiDbContext.ItemData\u0026#39; is null.\u0026#34;); } _context.ItemData.Add(itemData); await _context.SaveChangesAsync(); return CreatedAtAction(\u0026#34;GetItemData\u0026#34;, new { id = itemData.Id }, itemData); } // DELETE: api/Todo/5 [HttpDelete(\u0026#34;{id}\u0026#34;)] public async Task\u0026lt;IActionResult\u0026gt; DeleteItemData(int id) { if (_context.ItemData == null) { return NotFound(); } var itemData = await _context.ItemData.FindAsync(id); if (itemData == null) { return NotFound(); } _context.ItemData.Remove(itemData); await _context.SaveChangesAsync(); return NoContent(); } private bool ItemDataExists(int id) { return (_context.ItemData?.Any(e =\u0026gt; e.Id == id)).GetValueOrDefault(); } } } æ¸¬è©¦æ–°åŠŸèƒ½  åœ¨ open api - swagger ç¶²é ä¸Šé€é POST çš„ EndPoint æ–°å¢ä¸€ç­† Toto list\n  é€å‡ºæ–°å¢çš„è³‡æ–™ï¼Œå›è¦†æ–°å¢æˆåŠŸ\n  ç”±è³‡æ–™åº«ä¸­å¯ä»¥æŸ¥è©¢åˆ°æ–°å»ºç«‹çš„ record\n  é€é GET çš„ EndPoint ä¹Ÿå¯ä»¥æŸ¥è©¢åˆ°æ–°å¢ Toto list\n ä»¥ä¸Šå¯ä»¥ç™¼ç¾ä½¿ç”¨ ASPNET Codegenerator è‡ªå‹•ç”£ç”Ÿçš„ç¨‹å¼å°±å¯ç°¡å–®çš„å®Œæˆè³‡æ–™è¡¨æ ¼çš„æ–°å¢ã€æŸ¥è©¢ã€ä¿®æ”¹ã€åˆªé™¤ç­‰æ—¥å¸¸åŠŸèƒ½ï¼ŒçœŸæ˜¯æ–¹ä¾¿å‘¢ï¼\n","permalink":"https://calvinegs.github.io/posts/dotnet6-webapi-jwt/","summary":"github Source code\næœ¬æ–‡å°‡è¨˜éŒ„å¦‚ä½•ä¸€æ­¥æ­¥å¾ç„¡åˆ°æœ‰ä½¿ç”¨ Dotnet Core 6.0 å»ºç«‹ ASP.NET Core Web APIï¼Œå…¶ä¸­å°‡æœƒä½¿ç”¨åˆ°ä¸‹åˆ—æŠ€è¡“:\n Dotnet CLI Entity Framework Json Web Token SQL Server (Docker Version) ASP.NET Core Generator  å°ˆæ¡ˆå®Œæˆå¾Œçš„æª”æ¡ˆçµæ§‹ ./å°ˆæ¡ˆç›®éŒ„ â”œâ”€â”€ .config/ â”‚ â””â”€â”€ dotnet-tools.json â”œâ”€â”€ .vscode/ â”‚ â”œâ”€â”€ launch.js â”‚ â””â”€â”€ tasks.json â”œâ”€â”€ Controller/ â”‚ â”œâ”€â”€ AuthenticateController.cs â”‚ â”œâ”€â”€ TodoController.cs â”‚ â””â”€â”€ WeatherForecast.cs â”œâ”€â”€ Data/ â”‚ â””â”€â”€ ApiDbContext.cs â”œâ”€â”€ Migrations/ â”œâ”€â”€ Models/ â”‚ â”œâ”€â”€ AuthenticateData.cs â”‚ â””â”€â”€ ItemData.cs â”œâ”€â”€ obj/ â”œâ”€â”€ Properties/ â”‚ â””â”€â”€ launchSettings.","title":"ä½¿ç”¨ .NET 6.0 é€²è¡Œ JWT èº«ä»½é©—è­‰çš„ ASP.NET Web Apiã€‚ä¸¦ä½¿ç”¨ Microsoft Identity æ¡†æ¶ä¾†å­˜å„²ä½¿ç”¨è€…å’Œè§’è‰²ç­‰è³‡æ–™"},{"content":"å¦‚ä½•åœ¨ Ubuntu ä¸­ä½¿ç”¨ Docker å•Ÿå‹• MS SQL Server 2019  åƒè€ƒè³‡æ–™ï¼šã€€https://docs.microsoft.com/en-us/sql/linux/quickstart-install-connect-docker?view=sql-server-ver15\u0026amp;pivots=cs1-bash\n é¦–å…ˆç•¶ç„¶åœ¨ä½ çš„ä½œæ¥­ç³»çµ±ä¸­å¿…é ˆå…ˆå®‰è£å¥½ Docker ä¸‹è¼‰ã€€SQL Server Image file $ sudo docker pull mcr.microsoft.com/mssql/server:2019-latest $ docker images REPOSITORY TAG IMAGE ID CREATED SIZE mcr.microsoft.com/mssql/server 2019-latest f554c0722914 4 weeks ago 1.64GB ä½¿ç”¨ Docker æŠŠ SQL Server image file å•Ÿå‹• $ docker run -e \u0026quot;ACCEPT_EULA=Y\u0026quot; -e \u0026quot;SA_PASSWORD=Sql@1234\u0026quot; \\ -p 1433:1433 --name sql1 -h sql1 \\ -v sqlvolume:/var/opt/mssql \\ # å°‡è³‡æ–™æ˜ å°„åˆ° local çš„ volume ä¸Š -d mcr.microsoft.com/mssql/server:2019-latest $ docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES 36c9fe84ea3e mcr.microsoft.com/mssql/server:2019-latest \u0026quot;/opt/mssql/bin/permâ€¦\u0026quot; 42 hours ago Up 40 minutes 0.0.0.0:1433-\u0026gt;1433/tcp, :::1433-\u0026gt;1433/tcp sql1 ä¿®æ”¹ SA Password $ docker exec -it sql1 /opt/mssql-tools/bin/sqlcmd \\  -S localhost -U SA -P \u0026#34;Sql@1234\u0026#34; \\  -Q \u0026#39;ALTER LOGIN SA WITH PASSWORD=\u0026#34;Sql@12345\u0026#34;\u0026#39; æŸ¥çœ‹ Volume $ docker volume ls local sqlvolume $ docker volume inspect sqlvolume [ { \u0026quot;CreatedAt\u0026quot;: \u0026quot;2022-07-09T12:53:39+08:00\u0026quot;, \u0026quot;Driver\u0026quot;: \u0026quot;local\u0026quot;, \u0026quot;Labels\u0026quot;: null, \u0026quot;Mountpoint\u0026quot;: \u0026quot;/var/lib/docker/volumes/sqlvolume/_data\u0026quot;, \u0026quot;Name\u0026quot;: \u0026quot;sqlvolume\u0026quot;, \u0026quot;Options\u0026quot;: null, \u0026quot;Scope\u0026quot;: \u0026quot;local\u0026quot; } ] $ sudo ls -al /var/lib/docker/volumes/sqlvolume/_data/data ç¸½ç”¨é‡ 146956 drwxr-xr-x 2 10001 root 4096 ä¸ƒ 9 13:08 . drwxrwx--- 6 root root 4096 ä¸ƒ 9 12:53 .. -rw-r----- 1 10001 root 256 ä¸ƒ 9 12:53 Entropy.bin -rw-r----- 1 10001 root 4653056 ä¸ƒ 10 12:25 master.mdf -rw-r----- 1 10001 root 2097152 ä¸ƒ 10 12:25 mastlog.ldf -rw-r----- 1 10001 root 8388608 ä¸ƒ 10 12:25 modellog.ldf -rw-r----- 1 10001 root 8388608 ä¸ƒ 10 12:25 model.mdf -rw-r----- 1 10001 root 14090240 ä¸ƒ 10 12:21 model_msdbdata.mdf -rw-r----- 1 10001 root 524288 ä¸ƒ 10 12:21 model_msdblog.ldf -rw-r----- 1 10001 root 524288 ä¸ƒ 10 12:21 model_replicatedmaster.ldf -rw-r----- 1 10001 root 4653056 ä¸ƒ 10 12:21 model_replicatedmaster.mdf -rw-r----- 1 10001 root 14090240 ä¸ƒ 10 12:25 msdbdata.mdf -rw-r----- 1 10001 root 786432 ä¸ƒ 10 12:25 msdblog.ldf -rw-r----- 1 10001 root 8388608 ä¸ƒ 10 12:21 tempdb2.ndf -rw-r----- 1 10001 root 8388608 ä¸ƒ 10 12:21 tempdb3.ndf -rw-r----- 1 10001 root 8388608 ä¸ƒ 10 12:21 tempdb4.ndf -rw-r----- 1 10001 root 8388608 ä¸ƒ 10 12:21 tempdb5.ndf -rw-r----- 1 10001 root 8388608 ä¸ƒ 10 12:21 tempdb6.ndf -rw-r----- 1 10001 root 8388608 ä¸ƒ 10 12:21 tempdb7.ndf -rw-r----- 1 10001 root 8388608 ä¸ƒ 10 12:21 tempdb8.ndf -rw-r----- 1 10001 root 8388608 ä¸ƒ 10 12:21 tempdb.mdf -rw-r----- 1 10001 root 8388608 ä¸ƒ 10 12:25 templog.ldf -rw-r----- 1 10001 root 8388608 ä¸ƒ 10 12:25 TestDB_log.ldf -rw-r----- 1 10001 root 8388608 ä¸ƒ 10 12:25 TestDB.mdf é€£æ¥ä¸Š Docker ä¸­çš„ SQL Server $ docker exec -it sql1 \u0026#34;bash\u0026#34; åŸ·è¡Œ SQL Commander å·¥å…·ä¾†æ“ä½œ SQL Server mssql@sql1:/$ /opt/mssql-tools/bin/sqlcmd -S localhost -U SA -P \u0026#34;Sql@12345\u0026#34; æŸ¥çœ‹ SQL Server ç‰ˆæœ¬ 1\u0026gt; select @@version 2\u0026gt; go Microsoft SQL Server 2019 (RTM-CU16) (KB5011644) - 15.0.4223.1 (X64) Apr 11 2022 16:24:07 Copyright (C) 2019 Microsoft Corporation Developer Edition (64-bit) on Linux (Ubuntu 20.04.4 LTS) \u0026lt;X64\u0026gt; (1 rows affected) å»ºç«‹ TestDB è³‡æ–™åº« 1\u0026gt; CREATE DATABASE TestDB 2\u0026gt; Select name from sys.databases 3\u0026gt; go åœ¨ TestDB è³‡æ–™åº«ä¸­å»ºç«‹ Inventory è³‡æ–™è¡¨ ä¸¦ å¯«å…¥è³‡æ–™ 1\u0026gt; USE TestDB 2\u0026gt; CREATE TABLE Inventory (id INT, name NVARCHAR(50), quantity INT) 3\u0026gt; INSERT INTO Inventory VALUES (1, \u0026#39;banana\u0026#39;, 150); INSERT INTO Inventory VALUES (2, \u0026#39;orange\u0026#39;, 154); 4\u0026gt; go æŸ¥è©¢ Inventory è³‡æ–™è¡¨ 1\u0026gt; SELECT * FROM Inventory WHERE quantity \u0026gt; 152; 2\u0026gt; go é›¢é–‹ SQL Commder å·¥å…· 1\u0026gt; quit é›¢é–‹ Docker ç’°å¢ƒ mssql@sql1:/$ exit å®‰è£ dbeaver-ce æœ‰äº†è³‡æ–™å¾Œï¼Œé€šå¸¸ä½ æœƒéœ€è¦ä¸€å€‹ç®¡ç†å·¥å…·ä¾†é€£çµä¸Šè©²è³‡æ–™åº«ä¾†åšä¸€äº›æ—¥å¸¸çš„è³‡æ–™ç®¡ç†ã€‚ç”±æ–¼å·¥ä½œé—œä¿‚ï¼Œæœƒå¸¸ä½¿ç”¨åˆ°å„å¼è³‡æ–™åº«ï¼Œè‹¥ä½ çš„ç®¡ç†å·¥å…·åªé©ç”¨æŸé¡è³‡æ–™ï¼Œé‚£å‹¢å¿…è¦å®‰è£å¥½å¹¾å€‹å·¥å…·äº†ã€‚åœ¨æ­¤å»ºè­°å¯ä½¿ç”¨ bdeaver-cd (https://dbeaver.io/download/)\n$ wget https://dbeaver.io/files/dbeaver-ce_latest_amd64.deb $ sudo dpkg -i dbeaver-ce_latest_amd64.deb å®‰è£å®Œæˆå¾Œå•Ÿå‹•å®ƒï¼Œé€²è¡Œé€£çµè³‡æ–™åº«è¨­å®š\né€£çµ SQL Server è³‡æ–™åº«\nç®¡ç†è³‡æ–™åº« - æŸ¥è©¢è³‡æ–™è¡¨è³‡æ–™ã€çµæ§‹ã€ä¿®æ”¹è³‡æ–™è¡¨è³‡æ–™ã€çµæ§‹\u0026hellip;\n","permalink":"https://calvinegs.github.io/posts/sqlserver2019-docker/","summary":"å¦‚ä½•åœ¨ Ubuntu ä¸­ä½¿ç”¨ Docker å•Ÿå‹• MS SQL Server 2019  åƒè€ƒè³‡æ–™ï¼šã€€https://docs.microsoft.com/en-us/sql/linux/quickstart-install-connect-docker?view=sql-server-ver15\u0026amp;pivots=cs1-bash\n é¦–å…ˆç•¶ç„¶åœ¨ä½ çš„ä½œæ¥­ç³»çµ±ä¸­å¿…é ˆå…ˆå®‰è£å¥½ Docker ä¸‹è¼‰ã€€SQL Server Image file $ sudo docker pull mcr.microsoft.com/mssql/server:2019-latest $ docker images REPOSITORY TAG IMAGE ID CREATED SIZE mcr.microsoft.com/mssql/server 2019-latest f554c0722914 4 weeks ago 1.64GB ä½¿ç”¨ Docker æŠŠ SQL Server image file å•Ÿå‹• $ docker run -e \u0026quot;ACCEPT_EULA=Y\u0026quot; -e \u0026quot;SA_PASSWORD=Sql@1234\u0026quot; \\ -p 1433:1433 --name sql1 -h sql1 \\ -v sqlvolume:/var/opt/mssql \\ # å°‡è³‡æ–™æ˜ å°„åˆ° local çš„ volume ä¸Š -d mcr.","title":"Run SQL Server container images with Docker"},{"content":"github Source code\næœ¬ç¯‡ç­†è¨˜ä¸­å°‡ç´€éŒ„å¦‚ä½•ä½¿ç”¨ ASP.NET Core 6 æä¾›çš„ Minimal APIs æ–°æ¡†æ¶å»ºç½®ä¸€å€‹ä½¿ç”¨ Token-base èº«ä»½é©—è­‰çš„ Web API ç¶²ç«™ã€‚\nå»ºç«‹æ–°å°ˆæ¡ˆ $ dotnet new webapi -o JwtAuthDemo -minimal ç¯„æœ¬ã€ŒASP.NET Core Web APIã€å·²æˆåŠŸå»ºç«‹ã€‚ æ­£åœ¨è™•ç†å»ºç«‹å¾Œçš„å‹•ä½œ... æ­£åœ¨ /home/egs/cal-data/tech-test/webapi/Minimal/JwtAuthDemo/JwtAuthDemo.csproj ä¸ŠåŸ·è¡Œ \u0026#39;dotnet restore\u0026#39;... æ­£åœ¨åˆ¤æ–·è¦é‚„åŸçš„å°ˆæ¡ˆ... å·²é‚„åŸ /home/egs/cal-data/tech-test/webapi/Minimal/JwtAuthDemo/JwtAuthDemo.csproj (214 ms å…§)ã€‚ é‚„åŸæˆåŠŸã€‚ $ cd JwtAuthDemo $ ls -al ç¸½ç”¨é‡ 32 drwxrwxr-x 4 egs egs 4096 äº” 13 18:36 . drwxrwxr-x 7 egs egs 4096 äº” 13 18:36 .. -rw-rw-r-- 1 egs egs 127 äº” 13 18:36 appsettings.Development.json -rw-rw-r-- 1 egs egs 151 äº” 13 18:36 appsettings.json -rw-rw-r-- 1 egs egs 327 äº” 13 18:36 JwtAuthDemo.csproj drwxrwxr-x 2 egs egs 4096 äº” 13 18:36 obj -rw-rw-r-- 1 egs egs 1131 äº” 13 18:36 Program.cs drwxrwxr-x 2 egs egs 4096 äº” 13 18:36 Properties  dotnet code ç‰ˆæœ¬å®‰è£èˆ‡ç®¡ç†\n $ dotnet --list-sdks # é¡¯ç¤ºå·²å®‰è£çš„ sdk ç‰ˆæœ¬è³‡è¨Š 5.0.408 [/usr/share/dotnet/sdk] 6.0.300 [/usr/share/dotnet/sdk] $ dotnet --version # é¡¯ç¤ºç›®å‰æ‰€ä½¿ç”¨çš„ç‰ˆæœ¬ 6.0.300 # é è¨­æ˜¯æœ€æ–°çš„ç‰ˆæœ¬  ç”±æ–¼ dotnet ç‰ˆæœ¬æ¼”åŒ–æ»¿å¿«çš„ï¼Œæ‰€ä»¥æœƒå»ºè­°åœ¨å°ˆæ¡ˆç›®éŒ„ä¸­è¦æŒ‡å®šä½¿ç”¨ SDK çš„ç‰ˆæœ¬ï¼Œä»¥å…ç•¶ä½ åˆå®‰è£äº†æ›´æ–°ç‰ˆæœ¬ï¼ˆå¦‚7.0ï¼‰å¾Œç¨‹å¼åŸ·è¡Œå‡ºå•é¡Œã€‚\n $ dotnet new globaljson --sdk-version 6.0.300 ç¯„æœ¬ã€Œglobal.json æª”æ¡ˆã€å·²æˆåŠŸå»ºç«‹ã€‚ $ cat global.json { \u0026#34;sdk\u0026#34;: { \u0026#34;version\u0026#34;: \u0026#34;6.0.300\u0026#34; } }  ä½¿ç”¨ dotnet cli ä¾†ç”¢ç”Ÿé è¨­çš„ git ignore æª”æ¡ˆ\n $ dotnet new gitignore  å»ºç«‹ git åˆå§‹ç‰ˆæœ¬\n $ git init \u0026amp;\u0026amp; git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Initial commit\u0026#34;  å®‰è£ Microsoft.AspNetCore.Authentication.JwtBearer å¥—ä»¶\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  $ dotnet add package Microsoft.AspNetCore.Authentication.JwtBearer  $ cat JwtAuthDemo.csproj \u0026lt;Project Sdk=\u0026#34;Microsoft.NET.Sdk.Web\u0026#34;\u0026gt; \u0026lt;PropertyGroup\u0026gt; \u0026lt;TargetFramework\u0026gt;net6.0\u0026lt;/TargetFramework\u0026gt; \u0026lt;Nullable\u0026gt;enable\u0026lt;/Nullable\u0026gt; \u0026lt;ImplicitUsings\u0026gt;enable\u0026lt;/ImplicitUsings\u0026gt; \u0026lt;/PropertyGroup\u0026gt; \u0026lt;ItemGroup\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Microsoft.AspNetCore.Authentication.JwtBearer\u0026#34; Version=\u0026#34;6.0.5\u0026#34; /\u0026gt;  \u0026lt;PackageReference Include=\u0026#34;Swashbuckle.AspNetCore\u0026#34; Version=\u0026#34;6.2.3\u0026#34; /\u0026gt; \u0026lt;/ItemGroup\u0026gt; \u0026lt;/Project\u0026gt;    åŠ å…¥ Git æ–°ç‰ˆæœ¬\n $ git commit -m \u0026#34;Add new package Microsoft.AspNetCore.Authentication.JwtBearer\u0026#34; -a $ code . # æ‰“é–‹ VS Code  ç›®å‰ç”£ç”Ÿçš„ç¨‹å¼æ¶æ§‹\n  åŸ·è¡Œç¨‹å¼\n $ dotnet watch å¯¦ä½œ JWT çš„æµç¨‹ ä¸Šåœ–ä¸­å¯ä»¥çœ‹åˆ°ï¼Œç”±ç³»çµ±è‡ªå‹•ç”£ç”Ÿçš„ sample code å·²ç¶“å¯ä»¥æ­£å¸¸åŸ·è¡Œã€‚\næ¥ä¸‹ä¾†å°‡åœ¨ç¨‹å¼ä¸­å¯¦ä½œJWTåŠŸèƒ½ï¼Œ é€é JWTã€€çš„å¯¦ä½œå¯ä»¥è®“ä½ çš„å°ˆæ¡ˆå¯¦ç¾ Token-base çš„èº«ä»½é©—è­‰èˆ‡æˆæ¬Šã€‚ ï¼ˆJson Web Token) å¯¦ä½œçš„éç¨‹å¤§è‡´å¯ä»¥åˆ†æˆä¸‰å€‹éƒ¨åˆ†:\n åœ¨ç™»å…¥æˆåŠŸå¾Œç”£ç”Ÿåˆæ³•çš„ JWT Token æ¯æ¬¡æ”¶åˆ° request æ™‚é©—è­‰æ˜¯å¦ç‚ºåˆæ³•æœ‰æ•ˆçš„ JWT Token åœ¨ç‰¹å®š API Endpoint ä¸Šé©—è­‰æ˜¯å¦å¸¶æœ‰ â€œåˆæ³•æœ‰æ•ˆçš„ JWT Tokenâ€ï¼Œä»¥é”åˆ°æ¬Šé™ç®¡ç†çš„éœ€æ±‚  ç”£ç”Ÿåˆæ³•çš„ Jason Web Token  åœ¨ Program.cs ä¸­æ–°ä¸€å€‹å»ºç«‹ Token çš„ function\n string CreateToken(LoginViewModel user) { List\u0026lt;Claim\u0026gt; claims = new List\u0026lt;Claim\u0026gt; { new Claim(ClaimTypes.Name, user.Username), new Claim(ClaimTypes.Role, \u0026#34;Admin\u0026#34;) }; ConfigurationManager _configuration = builder.Configuration; var secretkey = new SymmetricSecurityKey(System.Text.Encoding.UTF8.GetBytes( _configuration.GetValue\u0026lt;string\u0026gt;(\u0026#34;JwtSettings:Secret\u0026#34;))); // _configuration.GetSection(\u0026#34;JwtSettings:Secret\u0026#34;).Value)  var credentials = new SigningCredentials(secretkey, SecurityAlgorithms.HmacSha512Signature); var token = new JwtSecurityToken( // äº¦å¯ä½¿ç”¨ã€€SecurityTokenDescriptorã€€ä¾†ç”£ç”Ÿ Token  issuer: _configuration.GetValue\u0026lt;string\u0026gt;(\u0026#34;JwtSettings:Issuer\u0026#34;), audience: _configuration.GetValue\u0026lt;string\u0026gt;(\u0026#34;JwtSettings:Audience\u0026#34;), claims: claims, expires: DateTime.Now.AddDays(1), signingCredentials: credentials); var jwt = new JwtSecurityTokenHandler().WriteToken(token); return jwt; }  å»ºç«‹ä¸€å€‹ ç™»å…¥ çš„ Endpoint\n app.MapPost(\u0026#34;/signin\u0026#34;, (LoginViewModel login) =\u0026gt; { if (ValidateUser(login)) // é©—è­‰ç™»å…¥çš„å¸³è™Ÿæ˜¯å¦åˆæ³•  { var token = CreateToken(login); // è‹¥ç‚ºåˆæ³•ä½¿ç”¨è€…ï¼Œå‰‡ç”£ç”Ÿä¸€å€‹ä½¿ç”¨ Token  return Results.Ok(new { token }); // å°‡ç™»å…¥ç‹€æ…‹èˆ‡Tokenä¸€ä½µå›å‚³å‰ç«¯  } else { return Results.BadRequest(); // é©—è­‰å¤±æ•—æ™‚å›å‚³ status: 400 Bad Request  } } ).WithName(\u0026#34;SignIn\u0026#34;).AllowAnonymous(); bool ValidateUser(LoginViewModel login) { return login.Username == \u0026#34;cal\u0026#34; ? true : false; }  å»ºç«‹ä¸€å€‹ model ä¾†æ¥æ”¶ login è³‡æ–™\n record LoginViewModel(string Username, string Password); é©—è­‰æ˜¯å¦ç‚ºåˆæ³•æœ‰æ•ˆçš„ JWT Token  ç¬¬ä¸€æ­¥ï¼Œé€é DI å°‡ JWT ç›¸é—œè¨­å®šè¨­ç½®å¥½\n builder.Services .AddAuthentication(JwtBearerDefaults.AuthenticationScheme) .AddJwtBearer(options =\u0026gt; { // ç•¶é©—è­‰å¤±æ•—æ™‚ï¼Œå›æ‡‰æ¨™é ­æœƒåŒ…å« WWW-Authenticate æ¨™é ­ï¼Œé€™è£¡æœƒé¡¯ç¤ºå¤±æ•—çš„è©³ç´°éŒ¯èª¤åŸå›   options.IncludeErrorDetails = true; // é è¨­å€¼ç‚º trueï¼Œæœ‰æ™‚æœƒç‰¹åˆ¥é—œé–‰  options.TokenValidationParameters = new TokenValidationParameters { // é€éé€™é …å®£å‘Šï¼Œå°±å¯ä»¥å¾ \u0026#34;NAME\u0026#34; å–å€¼  NameClaimType = \u0026#34;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier\u0026#34;, // é€éé€™é …å®£å‘Šï¼Œå°±å¯ä»¥å¾ \u0026#34;Role\u0026#34; å–å€¼ï¼Œä¸¦å¯è®“ [Authorize] åˆ¤æ–·è§’è‰²  RoleClaimType = \u0026#34;http://schemas.microsoft.com/ws/2008/06/identity/claims/role\u0026#34;, // é©—è­‰ Issuer (ä¸€èˆ¬éƒ½æœƒ)  ValidateIssuer = true, ValidIssuer = _configuration.GetValue\u0026lt;string\u0026gt;(\u0026#34;JwtSettings:Issuer\u0026#34;), // é©—è­‰ Audience (é€šå¸¸ä¸å¤ªéœ€è¦)  ValidateAudience = false, //ValidAudience = \u0026#34;JwtAuthDemo\u0026#34;, // ä¸é©—è­‰å°±ä¸éœ€è¦å¡«å¯«  // é©—è­‰ Token çš„æœ‰æ•ˆæœŸé–“ (ä¸€èˆ¬éƒ½æœƒ)  ValidateLifetime = true, // å¦‚æœ Token ä¸­åŒ…å« key æ‰éœ€è¦é©—è­‰ï¼Œä¸€èˆ¬éƒ½åªæœ‰ç°½ç« è€Œå·²  ValidateIssuerSigningKey = false, // æ‡‰è©²å¾ IConfiguration å–å¾—  IssuerSigningKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(secret)) }; }); builder.Services.AddAuthorization();  ç¬¬äºŒæ­¥ï¼Œè¦è¨˜å¾—ä¹Ÿè¦å•Ÿå‹• request pipeline ä¸­çš„ Middleware (UseAuthentication \u0026amp; UseAuthorization éƒ½éœ€è¦)\n app.UseAuthentication(); app.UseAuthorization(); åœ¨ç‰¹å®š API EndPoint ä¸Šé©—è­‰æ˜¯å¦å¸¶æœ‰åˆæ³•æœ‰æ•ˆçš„ JWT Token  åŠ å…¥.RequireAuthorization() å³å¯\n 1 2 3 4 5 6 7 8 9 10 11 12 13  app.MapGet(\u0026#34;/weatherforecast\u0026#34;, () =\u0026gt; { var forecast = Enumerable.Range(1, 5).Select(index =\u0026gt; new WeatherForecast ( DateTime.Now.AddDays(index), Random.Shared.Next(-20, 55), summaries[Random.Shared.Next(summaries.Length)] )) .ToArray(); return forecast; }) .WithName(\u0026#34;GetWeatherForecast\u0026#34;).RequireAuthorization();    å¦‚ä¸Šç¨‹å¼åŠ å…¥.RequireAuthorization()å¾Œï¼Œå†é‡æ–°ç€è¦½ weatherforecast endpointï¼Œæœƒå›å‚³ Status: 401 Unauthorized çš„éŒ¯èª¤è¨Šæ¯ã€‚\n  ä½¿ç”¨ Postmanï¼Œå…ˆåŠ å…¥ Authorization Headerï¼Œä¸¦å°‡ç™»å…¥æˆåŠŸå¾Œå›å‚³çš„ Token åŠ åˆ° Authorization Header ä¸­ã€‚å†æ¬¡é€å‡ºå°±å¯æ­£å¸¸çš„å–å¾—æ‰€æœ‰å¤©æ°£é æ¸¬è³‡æ–™äº†ã€‚\n  åŠ å…¥ git ç‰ˆæœ¬æ§åˆ¶\n $ git commit -m \u0026#34;finished JWT function\u0026#34; -a  å®Œæ•´ç¨‹å¼å¦‚ä¸‹(Program.cs)\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166  using System.IdentityModel.Tokens.Jwt; using System.Security.Claims; using System.Text; using Microsoft.AspNetCore.Authentication.JwtBearer; using Microsoft.IdentityModel.Tokens; var builder = WebApplication.CreateBuilder(args); ConfigurationManager _configuration = builder.Configuration; var secret = _configuration.GetValue\u0026lt;string\u0026gt;(\u0026#34;JwtSettings:Secret\u0026#34;); // Add services to the container. // Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle builder.Services.AddEndpointsApiExplorer(); builder.Services.AddSwaggerGen(); builder.Services .AddAuthentication(JwtBearerDefaults.AuthenticationScheme) .AddJwtBearer(options =\u0026gt; { // ç•¶é©—è­‰å¤±æ•—æ™‚ï¼Œå›æ‡‰æ¨™é ­æœƒåŒ…å« WWW-Authenticate æ¨™é ­ï¼Œé€™è£¡æœƒé¡¯ç¤ºå¤±æ•—çš„è©³ç´°éŒ¯èª¤åŸå›   options.IncludeErrorDetails = true; // é è¨­å€¼ç‚º trueï¼Œæœ‰æ™‚æœƒç‰¹åˆ¥é—œé–‰  options.TokenValidationParameters = new TokenValidationParameters { // é€éé€™é …å®£å‘Šï¼Œå°±å¯ä»¥å¾ \u0026#34;NAME\u0026#34; å–å€¼  NameClaimType = \u0026#34;http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier\u0026#34;, // é€éé€™é …å®£å‘Šï¼Œå°±å¯ä»¥å¾ \u0026#34;Role\u0026#34; å–å€¼ï¼Œä¸¦å¯è®“ [Authorize] åˆ¤æ–·è§’è‰²  RoleClaimType = \u0026#34;http://schemas.microsoft.com/ws/2008/06/identity/claims/role\u0026#34;, // é©—è­‰ Issuer (ä¸€èˆ¬éƒ½æœƒ)  ValidateIssuer = true, ValidIssuer = _configuration.GetValue\u0026lt;string\u0026gt;(\u0026#34;JwtSettings:Issuer\u0026#34;), // é©—è­‰ Audience (é€šå¸¸ä¸å¤ªéœ€è¦)  ValidateAudience = false, //ValidAudience = \u0026#34;JwtAuthDemo\u0026#34;, // ä¸é©—è­‰å°±ä¸éœ€è¦å¡«å¯«  // é©—è­‰ Token çš„æœ‰æ•ˆæœŸé–“ (ä¸€èˆ¬éƒ½æœƒ)  ValidateLifetime = true, // å¦‚æœ Token ä¸­åŒ…å« key æ‰éœ€è¦é©—è­‰ï¼Œä¸€èˆ¬éƒ½åªæœ‰ç°½ç« è€Œå·²  ValidateIssuerSigningKey = false, // æ‡‰è©²å¾ IConfiguration å–å¾—  IssuerSigningKey = new SymmetricSecurityKey(Encoding.UTF8.GetBytes(secret)) }; }); builder.Services.AddAuthorization(); var app = builder.Build(); // Configure the HTTP request pipeline. if (app.Environment.IsDevelopment()) { app.UseSwagger(); app.UseSwaggerUI(); } app.UseHttpsRedirection(); app.UseAuthentication(); app.UseAuthorization(); var summaries = new[] { \u0026#34;Freezing\u0026#34;, \u0026#34;Bracing\u0026#34;, \u0026#34;Chilly\u0026#34;, \u0026#34;Cool\u0026#34;, \u0026#34;Mild\u0026#34;, \u0026#34;Warm\u0026#34;, \u0026#34;Balmy\u0026#34;, \u0026#34;Hot\u0026#34;, \u0026#34;Sweltering\u0026#34;, \u0026#34;Scorching\u0026#34; }; app.MapGet(\u0026#34;/weatherforecast\u0026#34;, () =\u0026gt; { var forecast = Enumerable.Range(1, 5).Select(index =\u0026gt; new WeatherForecast ( DateTime.Now.AddDays(index), Random.Shared.Next(-20, 55), summaries[Random.Shared.Next(summaries.Length)] )) .ToArray(); return forecast; }) .WithName(\u0026#34;GetWeatherForecast\u0026#34;).RequireAuthorization(); app.MapPost(\u0026#34;/signin\u0026#34;, (LoginViewModel login) =\u0026gt; { if (ValidateUser(login)) { var token = CreateToken(login); return Results.Ok(new { token }); } else { return Results.BadRequest(); } } ).WithName(\u0026#34;SignIn\u0026#34;).AllowAnonymous(); string CreateToken(LoginViewModel user) { List\u0026lt;Claim\u0026gt; claims = new List\u0026lt;Claim\u0026gt; { new Claim(ClaimTypes.Name, user.Username), new Claim(ClaimTypes.Role, \u0026#34;Admin\u0026#34;), new Claim(ClaimTypes.Role, \u0026#34;Users\u0026#34;), new Claim(\u0026#34;ProjectType\u0026#34;, \u0026#34;TTG\u0026#34;), }; var secretkey = new SymmetricSecurityKey(System.Text.Encoding.UTF8.GetBytes(secret)); // _configuration.GetSection(\u0026#34;JwtSettings:Secret\u0026#34;).Value)  var credentials = new SigningCredentials(secretkey, SecurityAlgorithms.HmacSha512Signature); var token = new JwtSecurityToken( // äº¦å¯ä½¿ç”¨ã€€SecurityTokenDescriptorã€€ä¾†ç”£ç”Ÿ Token  issuer: _configuration.GetValue\u0026lt;string\u0026gt;(\u0026#34;JwtSettings:Issuer\u0026#34;), audience: _configuration.GetValue\u0026lt;string\u0026gt;(\u0026#34;JwtSettings:Audience\u0026#34;), claims: claims, expires: DateTime.Now.AddDays(1), signingCredentials: credentials); var jwt = new JwtSecurityTokenHandler().WriteToken(token); return jwt; } bool ValidateUser(LoginViewModel login) { return login.Username == \u0026#34;cal\u0026#34; ? true : false; } app.MapGet(\u0026#34;/claims\u0026#34;, (ClaimsPrincipal user) =\u0026gt; { return Results.Ok(user.Claims.Select(p =\u0026gt; new { p.Type, p.Value })); }) .WithName(\u0026#34;Claims\u0026#34;) .RequireAuthorization(); app.MapGet(\u0026#34;/username\u0026#34;, (ClaimsPrincipal user) =\u0026gt; { return Results.Ok(user.Claims.FirstOrDefault(p =\u0026gt; p.Type == ClaimTypes.Name)?.Value); }) .WithName(\u0026#34;Username\u0026#34;) .RequireAuthorization(); app.MapGet(\u0026#34;/roles\u0026#34;, (ClaimsPrincipal user) =\u0026gt; { return Results.Ok(user.Claims.Select(p =\u0026gt; new { p.Type, p.Value }).Where( c=\u0026gt; c.Type == ClaimTypes.Role)); }) .WithName(\u0026#34;Userrole\u0026#34;) .RequireAuthorization(); app.MapGet(\u0026#34;/issuer\u0026#34;, (ClaimsPrincipal user) =\u0026gt; { return Results.Ok(user.Claims.FirstOrDefault(p =\u0026gt; p.Type == \u0026#34;iss\u0026#34;)?.Value); }) .WithName(\u0026#34;Issuer\u0026#34;) .RequireAuthorization(); await app.RunAsync(); record WeatherForecast(DateTime Date, int TemperatureC, string? Summary) { public int TemperatureF =\u0026gt; 32 + (int)(TemperatureC / 0.5556); } record LoginViewModel(string Username, string Password);   ä½¿ç”¨ OpenApi Swagger ä¾†æ¸¬è©¦ API  å°‡ç¨‹å¼ç¢¼ä¸­çš„ builder.Services.AddSwaggerGen();æ”¹æˆä»¥ä¸‹å…§å®¹\n builder.Services.AddSwaggerGen(c =\u0026gt; { c.SwaggerDoc(\u0026#34;v1\u0026#34;, new OpenApiInfo { Title = \u0026#34;JwtDemo\u0026#34;, Version = \u0026#34;v1\u0026#34; }); c.AddSecurityDefinition(\u0026#34;Bearer\u0026#34;, new OpenApiSecurityScheme { In = ParameterLocation.Header, Description = \u0026#34;Please enter JWT with Bearer into field\u0026#34;, Name = \u0026#34;Authorization\u0026#34;, Type = SecuritySchemeType.ApiKey }); c.AddSecurityRequirement(new OpenApiSecurityRequirement { { new OpenApiSecurityScheme { Reference = new OpenApiReference { Type = ReferenceType.SecurityScheme, Id = \u0026#34;Bearer\u0026#34;} }, new string[] {} } }); });  æœ‰äº†ä¸Šè¿°çš„ç¨‹å¼è¨­å®šï¼Œç•¶å†æ¬¡ dotnet run å•Ÿå‹•ç¨‹å¼å¾Œï¼Œç€è¦½å™¨å‘ˆç¾çš„ Swagger ç•«é¢å³ä¸Šè§’æœƒå¤šå‡ºäº†ï½€Authorizeï½€ çš„æŒ‰éˆ•ã€‚æŒ‰ä¸‹æŒ‰éˆ•å°±æ˜¯è®“ä½ å¡«å…¥ç™»å…¥æˆåŠŸå¾Œå›å‚³çš„ Token\n  åœ¨ Value: æ–‡å­—æ¡†å…§å¡«å…¥ \u0026ldquo;Bearer yJhbGciOiJodHRwOi8vd3d3LnczLm9yZy8yMDAxLzA0L3htbGRzaWctbW9yZSNobWFjLXNoYTUxMiIsInR5cCI6IkpXVCJ9\u0026hellip;..\u0026quot;ï¼Œå†æŒ‰ä¸‹ Authorize æŒ‰éˆ•å³è¡¨ä¸‹åœ¨æ¥ä¸‹ä¾†çš„ Request ä¸­éƒ½æœƒè‡ªå‹•å¸¶å…¥ Token å‚³çµ¦ WebApi Serverã€‚ ï¼ˆè«‹æ³¨æ„ Bearerå¾Œå†å…ˆæ¥è‘—ä¸€å€‹ç©ºç™½å­—å…ƒå†åŠ ä¸Š Tokenå€¼ï¼‰\n ","permalink":"https://calvinegs.github.io/posts/dotnet6-minimalapi-jwt/","summary":"github Source code\næœ¬ç¯‡ç­†è¨˜ä¸­å°‡ç´€éŒ„å¦‚ä½•ä½¿ç”¨ ASP.NET Core 6 æä¾›çš„ Minimal APIs æ–°æ¡†æ¶å»ºç½®ä¸€å€‹ä½¿ç”¨ Token-base èº«ä»½é©—è­‰çš„ Web API ç¶²ç«™ã€‚\nå»ºç«‹æ–°å°ˆæ¡ˆ $ dotnet new webapi -o JwtAuthDemo -minimal ç¯„æœ¬ã€ŒASP.NET Core Web APIã€å·²æˆåŠŸå»ºç«‹ã€‚ æ­£åœ¨è™•ç†å»ºç«‹å¾Œçš„å‹•ä½œ... æ­£åœ¨ /home/egs/cal-data/tech-test/webapi/Minimal/JwtAuthDemo/JwtAuthDemo.csproj ä¸ŠåŸ·è¡Œ \u0026#39;dotnet restore\u0026#39;... æ­£åœ¨åˆ¤æ–·è¦é‚„åŸçš„å°ˆæ¡ˆ... å·²é‚„åŸ /home/egs/cal-data/tech-test/webapi/Minimal/JwtAuthDemo/JwtAuthDemo.csproj (214 ms å…§)ã€‚ é‚„åŸæˆåŠŸã€‚ $ cd JwtAuthDemo $ ls -al ç¸½ç”¨é‡ 32 drwxrwxr-x 4 egs egs 4096 äº” 13 18:36 . drwxrwxr-x 7 egs egs 4096 äº” 13 18:36 .. -rw-rw-r-- 1 egs egs 127 äº” 13 18:36 appsettings.","title":"ä½¿ç”¨ ASP.NET Core 6 æä¾›çš„ Minimal APIs æ–°æ¡†æ¶å»ºç½®ä¸€å€‹æ¥µç°¡çš„ Web API æœå‹™"},{"content":"Snowpack è™Ÿç¨±æ˜¯æ›´å¿«é€Ÿçš„å‰ç«¯å»ºæ§‹å·¥å…·ï¼Œåœ¨é–‹ç™¼ Web æ‡‰ç”¨ç¨‹å¼çš„å·¥ä½œæµç¨‹ä¸­ï¼Œå®ƒå¯ä»¥æ›¿ä»£æ›´é‡ã€æ›´è¤‡é›œçš„æ‰“åŒ…å·¥å…·ï¼Œå¦‚ webpack æˆ– Parcelã€‚\nåœ¨æ­¤ä¸æœƒè¨è«– Snowpack çš„è¨­è¨ˆç´°ç¯€ï¼Œåªç´€éŒ„å¦‚å¯å¿«é€Ÿçš„ä½¿ç”¨ Snowpack ä¾†å»ºç½®ä¸€å€‹ç”± Typescript æ”¯æ´ç¶²é ç¨‹å¼ã€‚ç”±æ’°å¯« Typescript çš„éç¨‹ä¸­äº†è§£åˆ°å¼·å‹åˆ¥ï¼ˆåŠèˆ‡æ­é… vscode ç·¨è¼¯å™¨ï¼‰æ‰€å¸¶ä¾†çš„å¥½è™•ã€‚\nä½¿ç”¨ create-snowpack-app å»ºç«‹å°ˆæ¡ˆ $ mkdir doto-list \u0026amp;\u0026amp; cd todo-list $ $ npx create-snowpack-app . --template @snowpack/app-template-blank-typescript --force $ npm install $ code . ç”£ç”Ÿçš„ç¨‹å¼çµæ§‹å¦‚ä¸‹ï¼š\npackage.json çš„å…§å®¹ï¼š\n{ \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;snowpack dev\u0026#34;,  \u0026#34;build\u0026#34;: \u0026#34;snowpack build\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;echo \\\u0026#34;This template does not include a test runner by default.\\\u0026#34; \u0026amp;\u0026amp; exit 1\u0026#34;, \u0026#34;format\u0026#34;: \u0026#34;prettier --write \\\u0026#34;src/**/*.{ts,js}\\\u0026#34;\u0026#34;, \u0026#34;lint\u0026#34;: \u0026#34;prettier --check \\\u0026#34;src/**/*.{ts,js}\\\u0026#34;\u0026#34; }, \u0026#34;dependencies\u0026#34;: { \u0026#34;canvas-confetti\u0026#34;: \u0026#34;^1.2.0\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;@snowpack/plugin-typescript\u0026#34;: \u0026#34;^1.2.1\u0026#34;, \u0026#34;@types/canvas-confetti\u0026#34;: \u0026#34;^1.0.0\u0026#34;, \u0026#34;@types/snowpack-env\u0026#34;: \u0026#34;^2.3.3\u0026#34;, \u0026#34;prettier\u0026#34;: \u0026#34;^2.2.1\u0026#34;, \u0026#34;snowpack\u0026#34;: \u0026#34;^3.3.7\u0026#34;, \u0026#34;typescript\u0026#34;: \u0026#34;^4.2.4\u0026#34;  } } åŸ·è¡Œç¨‹å¼ $ npm start\né–‹å§‹å»ºç½® Todo List ç¶²é  èª¿æ•´ index.html é¦–å…ˆå°‡ public/index.html å…§å®¹ä¿®æ”¹å¦‚ä¸‹ï¼š\n\u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34; /\u0026gt; \u0026lt;link rel=\u0026#34;icon\u0026#34; href=\u0026#34;/favicon.ico\u0026#34; /\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1\u0026#34; /\u0026gt; \u0026lt;meta name=\u0026#34;description\u0026#34; content=\u0026#34;Web site created using create-snowpack-app\u0026#34; /\u0026gt; \u0026lt;script type=\u0026#34;module\u0026#34; src=\u0026#34;/dist/index.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;title\u0026gt;Snowpack App\u0026lt;/title\u0026gt; \u0026lt;style\u0026gt; #list { list-style: none; padding: 0; } \u0026lt;/style\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;ul id=\u0026#34;list\u0026#34;\u0026gt;\u0026lt;/ul\u0026gt; \u0026lt;form action=\u0026#34;\u0026#34; id=\u0026#34;new-task-form\u0026#34;\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;\u0026#34; id=\u0026#34;new-task-title\u0026#34;\u0026gt; \u0026lt;button type=\u0026#34;submit\u0026#34;\u0026gt;Add\u0026lt;/button\u0026gt; \u0026lt;/form\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; å®‰è£é¡å¤–çš„ module $ npm install uuid $ npm install types@uuid --save-dev # uuid moduel ä¸æ˜¯ Typescript æ‰€æ’°å¯«ï¼Œè¦å°‡ uuid ä½¿ç”¨åœ¨ Typescript ä¸­å¿…é ˆæ­é…é¡å¤–çš„å®£å‘Šæª”ï¼Œé€éé€™å€‹å®£å‘Šæª”ï¼Œæˆ‘å€‘å°±èƒ½äº«å—å¼·å‹åˆ¥çš„å¥½è™• { \u0026#34;dependencies\u0026#34;: { \u0026#34;canvas-confetti\u0026#34;: \u0026#34;^1.2.0\u0026#34;, \u0026#34;uuid\u0026#34;: \u0026#34;^8.3.2\u0026#34;  }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;@snowpack/plugin-typescript\u0026#34;: \u0026#34;^1.2.1\u0026#34;, \u0026#34;@types/canvas-confetti\u0026#34;: \u0026#34;^1.0.0\u0026#34;, \u0026#34;@types/snowpack-env\u0026#34;: \u0026#34;^2.3.3\u0026#34;, \u0026#34;@types/uuid\u0026#34;: \u0026#34;^8.3.4\u0026#34;,  \u0026#34;prettier\u0026#34;: \u0026#34;^2.2.1\u0026#34;, \u0026#34;snowpack\u0026#34;: \u0026#34;^3.3.7\u0026#34;, \u0026#34;typescript\u0026#34;: \u0026#34;^4.2.4\u0026#34; } } ä½¿ç”¨ uuid ä¿®æ”¹ src/index.ts å…§å®¹\nimport {v4 as uuidV4 } from \u0026#39;uuid\u0026#39;; console.log(uuidV4()); å­˜æª”å¾Œç”±ç€è¦½å™¨ Console è¦–çª—ä¸­å¯ä»¥çœ‹åˆ°ç”± uuid module æä¾›çš„åŠŸèƒ½æ‰€ç”£ç”Ÿçš„ IDï¼š ï½€637fd7c4-1bc3-444a-9335-4b355617edbdï½€\nimport {v4 as uuidV4 } from \u0026#39;uuid\u0026#39;; //console.log(uuidV4());  const list = document.querySelector(\u0026#39;#list\u0026#39;); é–‹å§‹æ’°å¯«ç¨‹å¼ import {v4 as uuidV4 } from \u0026#39;uuid\u0026#39;; // console.log(uuidV4());  const list = document.querySelector(\u0026#39;#list\u0026#39;); const form = document.getElementById(\u0026#39;new-task-form\u0026#39;) as HTMLFormElement | null; const input = document.querySelector\u0026lt;HTMLInputElement\u0026gt;(\u0026#39;#new-task-title\u0026#39;); å°‡æ»‘é¼ ç§»è‡³ list è®Šæ•¸ï¼Œå¯ä»¥ç™¼ç¾ç›®å‰ list çš„å‹åˆ¥æ˜¯ \u0026ldquo;Element æˆ– null\u0026rdquo;ã€‚\né€é index.html æˆ‘å€‘å¯ä»¥çŸ¥é“ #list å…¶å¯¦æ˜¯ ul listï¼Œåœ¨é€é TypeScript ä¾†æ’°å¯«ç¨‹å¼æ™‚æˆ‘å€‘å¯ä»¥å¤šåˆ©ç”¨å®ƒçš„å‹åˆ¥æª¢æ ¸ï¼Œä¾†æ›´æ–¹ä¾¿ã€æ›´æ­£ç¢ºçš„ä½¿ç”¨ç¨‹å¼ä¸­çš„è®Šæ•¸ã€‚\nimport {v4 as uuidV4 } from \u0026#39;uuid\u0026#39;; //console.log(uuidV4());  const list = document.querySelector\u0026lt;HTMLUListElement\u0026gt;(\u0026#39;#list\u0026#39;); é€éä¸Šè¿°ç¨‹å¼ï¼Œä½¿ç”¨ æ³›å‹ æŒ‡å®šquerySelector å›å‚³çš„æ˜¯ï½€HTMLUListElementï½€ï¼Œå†å°‡æ»‘é¼ ç§»è‡³ list è®Šæ•¸ï¼Œå¯ä»¥ç™¼ç¾ç›®å‰ list çš„å‹åˆ¥å·²ç¶“è®Šæˆæ˜¯ \u0026ldquo;HTMLUListElement æˆ– null\u0026rdquo;ã€‚é€™æ¨£çš„å¥½è™•æ˜¯åœ¨æ¥ä¸‹å»çš„ç¨‹å¼ä¸­å¯ä»¥æ›´ç²¾æº–çš„ä½¿ç”¨ list é€™å€‹ç‰©ä»¶ã€‚ç•¶ä½¿ç”¨äº†ä¸æ˜¯ HTMLUlistElementçš„å±¬æ€§æ™‚ï¼Œç·¨è¼¯å™¨å°±æœƒçµ¦ä½ è­¦å‘Šï¼Œè®“ç¨‹å¼éŒ¯èª¤åœ¨ç·¨è¼¯æ™‚æœŸå°±èƒ½å³æ™‚ç™¼ç¾ã€‚é€™å°±æ˜¯ Typescript å¼·å‹åˆ¥çš„å¥½è™•ã€‚\nå°‡ index.ts ç¨‹å¼ä¿®æ”¹å¦‚ä¸‹ï¼š\nimport {v4 as uuidV4 } from \u0026#39;uuid\u0026#39;; // console.log(uuidV4());  const list = document.querySelector\u0026lt;HTMLUListElement\u0026gt;(\u0026#39;#list\u0026#39;); const form = document.getElementById(\u0026#39;new-task-form\u0026#39;) as HTMLFormElement | null; const input = document.querySelector\u0026lt;HTMLInputElement\u0026gt;(\u0026#39;#new-task-title\u0026#39;); è¦æ³¨æ„çš„æ˜¯ document.getElementById çš„èªæ³•å¿…ä¸æ”¯æ´æ³›å‹ï¼Œå¿…é ˆæ”¹æˆå¼·åˆ¶è½‰å‹çš„æ–¹å¼ä¾†é™åˆ¶å›å‚³çš„å‹åˆ¥\nç¹¼çºŒå®Œæˆ index.ts ç¨‹å¼ï¼Œç•¶ä½ è¼¸å…¥form.addEventListener æŒ‰ä¸‹ tab æ™‚ï¼ŒVSCode ç·¨è¼¯å™¨æœƒè‡ªå‹•å°‡ä½ è¼¸å…¥çš„ç¨‹å¼æ”¹æˆ form?.addEventListenerã€‚åŸå› æ˜¯ç·¨è¼¯å™¨çŸ¥é“ form è®Šæ•¸çš„å‹åˆ¥æ˜¯ HTMLFormElement | null è€Œè‡ªå‹•å¹«ä½ èª¿æ•´åˆé©çš„èªæ³•ã€‚ ä¸€æ¨£çš„é“ç†ï¼Œåœ¨ä½ è¼¸å…¥ input.value å¾Œç·¨è¼¯å™¨ä¹Ÿæœƒå¹«å¿™èª¿æˆ input?.valueã€‚\nimport {v4 as uuidV4 } from \u0026#39;uuid\u0026#39;; // console.log(uuidV4());  const list = document.querySelector\u0026lt;HTMLUListElement\u0026gt;(\u0026#39;#list\u0026#39;); const form = document.getElementById(\u0026#39;new-task-form\u0026#39;) as HTMLFormElement | null; const input = document.querySelector\u0026lt;HTMLInputElement\u0026gt;(\u0026#39;#new-task-title\u0026#39;); form?.addEventListener(\u0026#34;submit\u0026#34;, e =\u0026gt; { e.preventDefault(); if (input?.value == \u0026#34;\u0026#34; || input?.value == null) return; input.value }) åœ¨ä¸Šåœ–ç¨‹å¼ç¬¬ 11 è¡Œï¼Œå¯ç™¼ç¾æ­¤æ™‚çš„ input è®Šæ•¸çš„å‹åˆ¥æ˜¯ HTMLInputElement | nullï¼Œä½†åœ¨æœ¬è¡Œç¨‹å¼å¾Œï¼Œç”±æ–¼å·²æ’é™¤ null çš„å¯èƒ½æ€§ï¼Œæ‰€åœ¨åœ¨ç¨‹å¼ç¬¬ 13 è¡Œçš„ input è®Šæ•¸çš„å‹åˆ¥å·²æˆç‚º HTMLInputElement(å¦‚ä¸‹åœ–)\nç¹¼çºŒå®Œæˆç•¶æŒ‰ä¸‹ \u0026ldquo;Sumit\u0026rdquo; æŒ‰éˆ•æ™‚è¦å°‡æ–°çš„ Task åŠ å…¥åˆ° Doto list æ¸…å–®ä¸­\nimport {v4 as uuidV4 } from \u0026#39;uuid\u0026#39;; // console.log(uuidV4());  const list = document.querySelector\u0026lt;HTMLUListElement\u0026gt;(\u0026#39;#list\u0026#39;); const form = document.getElementById(\u0026#39;new-task-form\u0026#39;) as HTMLFormElement | null; const input = document.querySelector\u0026lt;HTMLInputElement\u0026gt;(\u0026#39;#new-task-title\u0026#39;); form?.addEventListener(\u0026#34;submit\u0026#34;, e =\u0026gt; { e.preventDefault(); if (input?.value == \u0026#34;\u0026#34; || input?.value == null) return; // å–å¾—ä¸€å€‹æ–°çš„ Task  const newTask = { id: uuidV4(), title: input.value, completed: false, createdAt: new Date() }; // é€é addListItem é€™å€‹ Function ä¾†æ–°å¢ä¸€å€‹ Todo List  addListItem(newTask); }) function addListItem(task) { } å®Œæˆä¸Šè¿°ç¨‹å¼å¾Œï¼Œç™¼ç¾åœ¨ VSCode ç·¨è¼¯å™¨ä¸­çµ¦äº†ä¸€å€‹è­¦å‘Šï¼Œå‘Šè¨´æˆ‘å€‘åƒæ•¸çš„å‹åˆ¥ä¸ç¬¦ï¼Œåœ¨ function å®£å‘Šä¸­æ‡‰è©²ç‚ºåƒæ•¸è¨­å®šé©ç•¶çš„å‹åˆ¥\né€éç·¨è¼¯å™¨æˆ‘å€‘å¯ä»¥çŸ¥é“ newTask çš„å‹åˆ¥\nå°‡ function ä¸­åƒæ•¸å‹åˆ¥è¨­å®šæˆå¦‚ä¸‹åœ–ï¼Œç·¨è¼¯å™¨ä¸å†æœ‰è­¦å‘Šè¨Šæ¯\nfunction addListItem(task : { id: string, title: string, completed: boolean, createdAt: Date }) { } ä½†é€™æ¨£çš„å¯«æ³•é¡¯ç„¶çš„ä¸æ˜¯å¥½æ–¹å¼ï¼Œæ”¹å¯«æˆå¦‚ä¸‹ï¼Œå°‡ Task çš„å‹åˆ¥å®šç¾©æˆä¸€å€‹å« Task custom typeï¼Œä¸¦å°‡é€™å€‹æ–°çš„å‹åˆ¥åˆ†åˆ¥å¥—ç”¨åœ¨ NewTask å®£å‘Šçš„åœ°æ–¹ä»¥åŠ addListItem function å®£å‘Šçš„åœ°æ–¹\nimport {v4 as uuidV4 } from \u0026#39;uuid\u0026#39;; // console.log(uuidV4());  type Task = { id: string; title: string; completed: boolean; createdAt: Date; }  const list = document.querySelector\u0026lt;HTMLUListElement\u0026gt;(\u0026#39;#list\u0026#39;); const form = document.getElementById(\u0026#39;new-task-form\u0026#39;) as HTMLFormElement | null; const input = document.querySelector\u0026lt;HTMLInputElement\u0026gt;(\u0026#39;#new-task-title\u0026#39;); form?.addEventListener(\u0026#34;submit\u0026#34;, e =\u0026gt; { e.preventDefault(); if (input?.value == \u0026#34;\u0026#34; || input?.value == null) return; // å–å¾—ä¸€å€‹æ–°çš„ Task  const newTask: Task = {  id: uuidV4(), title: input.value, completed: false, createdAt: new Date() }; // é€é addListItem é€™å€‹ Function ä¾†æ–°å¢ä¸€å€‹ Todo List  addListItem(newTask); }) function addListItem(task : Task) { } ç¶“éå¼·å‹åˆ¥çš„è¨­è¨ˆå¯ä»¥å¾ˆæ–¹ä¾¿çš„åœ¨ç¨‹å¼æ’°å¯«æ™‚å°±æ‰¾å‡ºå¯èƒ½æœ‰å•é¡Œçš„ç¨‹å¼ç¢¼ï¼Œå¦‚ä¸‹åœ–ï¼šç•¶å‚³çµ¦ addListItem çš„åƒæ•¸å‹åˆ¥ä¸æ­£ç¢ºæ™‚ï¼Œç·¨è¼¯å™¨ç«‹å³æœƒé¡¯ç¤ºè­¦å‘Šè¨Šæ¯ã€‚\nç¹¼çºŒå®Œæˆ addListItem function çš„è™•ç†é‚è¼¯ï¼š\nfunction addListItem(task : Task) { const item = document.createElement(\u0026#34;li\u0026#34;); const lable = document.createElement(\u0026#34;label\u0026#34;); const checkbox = document.createElement(\u0026#34;input\u0026#34;); checkbox.type=\u0026#34;checkbox\u0026#34;; checkbox.checked = task.completed; lable.append(checkbox, task.title); item.append(lable); list?.append(item); } åŸ·è¡Œçµæœ\nç¨‹å¼è‡³æ­¤å·²ç¶“å¯ä»¥åŠ å…¥æ–° Task ä¹Ÿå¯ä»¥è¨­å®šï¼ˆå‹¾é¸ï¼‰æ˜¯å¦å·²å®Œæˆï¼Œä½†ç•¶æŒ‰ä¸‹ ç€è¦§å™¨çš„ ï½€é‡æ–°è¼‰å…¥æ­¤é ï½€ åŠŸèƒ½æ™‚æœƒç™¼ç¾æ‰€æœ‰æ–°å¢çš„ Tasks éƒ½æœƒä¸è¦‹ï¼Œæ¥ä¸‹ä¾†æˆ‘å€‘å°‡åŠ  Local Storeage çš„åŠŸèƒ½å°‡æ–°å¢çš„ Tasks ä¸åƒ…é¡¯ç¤ºåœ¨ç•«é¢ä¸Šä¹Ÿæœƒå¯«å…¥åˆ° Local Storeage ä¸­ï¼Œåœ¨é‡æ–°è¼‰å…¥æ™‚æœƒå°‡ç´€éŒ„åœ¨ Local Storeage çš„ Tasks å†é‡æ–°é¡¯ç¤ºåœ¨ç•«é¢ä¸­ã€‚\nå®Œæˆå¾Œç¨‹å¼ import {v4 as uuidV4 } from \u0026#39;uuid\u0026#39;; type Task = { id: string; title: string; completed: boolean; createdAt: Date; } const list = document.querySelector\u0026lt;HTMLUListElement\u0026gt;(\u0026#39;#list\u0026#39;); const form = document.getElementById(\u0026#39;new-task-form\u0026#39;) as HTMLFormElement | null; const input = document.querySelector\u0026lt;HTMLInputElement\u0026gt;(\u0026#39;#new-task-title\u0026#39;); const tasks: Task[] = LoadTasks(); // TasK[] é è¨­ç”± Local Storeage ä¸­è¼‰å…¥æ‰€æœ‰å·²æ–°å¢çš„ Task tasks.forEach(addListItem); //å°‡ Task[] ä¸­çš„ Task é¡¯ç¤ºåˆ°ç•«é¢ä¸Š  form?.addEventListener(\u0026#34;submit\u0026#34;, e =\u0026gt; { e.preventDefault(); if (input?.value == \u0026#34;\u0026#34; || input?.value == null) return; // å–å¾—ä¸€å€‹æ–°çš„ Task  const newTask: Task = { id: uuidV4(), title: input.value, completed: false, createdAt: new Date() }; tasks.push(newTask); // é€é addListItem é€™å€‹ Function ä¾†æ–°å¢ä¸€å€‹ Todo List  addListItem(newTask); input.value = \u0026#34;\u0026#34;; // å°‡ input æ¸…ç©º  input.focus(); // å°‡ç„¦é»é‡æ–°å®šä½åœ¨ input element ä¸Š  }) function addListItem(task : Task) { const item = document.createElement(\u0026#34;li\u0026#34;); const lable = document.createElement(\u0026#34;label\u0026#34;); const checkbox = document.createElement(\u0026#34;input\u0026#34;); checkbox.addEventListener(\u0026#34;change\u0026#34;, () =\u0026gt; { task.completed = checkbox.checked; saveTasks(); // checkbox æœ‰è®ŠåŒ–æ™‚ï¼Œå°‡ Tasks å¯«å…¥ Local Storeage  }) checkbox.type=\u0026#34;checkbox\u0026#34;; checkbox.checked = task.completed; saveTasks(); // æ–°å¢ Task æ™‚ï¼Œå°‡ Tasks å¯«å…¥ Local Storeage  lable.append(checkbox, task.title); item.append(lable); list?.append(item); } function saveTasks() { localStorage.setItem(\u0026#34;TASKS\u0026#34;, JSON.stringify(tasks)); }  function LoadTasks(): Task[] { const taskJSON = localStorage.getItem(\u0026#34;TASKS\u0026#34;); if (taskJSON == null) return []; return JSON.parse(taskJSON); } åœ¨ç€è¦§å™¨çš„ â€œé–‹ç™¼äººå“¡å·¥å…·â€ çš„ â€œApplication\u0026quot; åŠŸèƒ½ä¸­é€é Clear All å¯å°‡ Local Storage è³‡æ–™æ¸…é™¤ã€‚æ¸…é™¤å¾Œå†æŒ‰ä¸‹ â€œé‡æ–°è¼‰å…¥é€™å€‹ç¶²é â€ ç•«é¢æœƒå›åˆ°åˆå§‹ç‹€æ…‹ã€‚\næ–°å¢ Taskã€æ”¹è®Š Task å®Œæˆå¦ï¼Œå† â€œé‡æ–°è¼‰å…¥é€™å€‹ç¶²é â€ï¼Œç•«é¢å¦‚æˆ‘å€‘å¸Œæœ›çš„ä¿ç•™äº†æˆ‘å€‘å·²æ–°å¢/ä¿®æ”¹çš„ç‹€æ…‹ã€‚\n","permalink":"https://calvinegs.github.io/posts/snowpack-typescript/","summary":"Snowpack è™Ÿç¨±æ˜¯æ›´å¿«é€Ÿçš„å‰ç«¯å»ºæ§‹å·¥å…·ï¼Œåœ¨é–‹ç™¼ Web æ‡‰ç”¨ç¨‹å¼çš„å·¥ä½œæµç¨‹ä¸­ï¼Œå®ƒå¯ä»¥æ›¿ä»£æ›´é‡ã€æ›´è¤‡é›œçš„æ‰“åŒ…å·¥å…·ï¼Œå¦‚ webpack æˆ– Parcelã€‚\nåœ¨æ­¤ä¸æœƒè¨è«– Snowpack çš„è¨­è¨ˆç´°ç¯€ï¼Œåªç´€éŒ„å¦‚å¯å¿«é€Ÿçš„ä½¿ç”¨ Snowpack ä¾†å»ºç½®ä¸€å€‹ç”± Typescript æ”¯æ´ç¶²é ç¨‹å¼ã€‚ç”±æ’°å¯« Typescript çš„éç¨‹ä¸­äº†è§£åˆ°å¼·å‹åˆ¥ï¼ˆåŠèˆ‡æ­é… vscode ç·¨è¼¯å™¨ï¼‰æ‰€å¸¶ä¾†çš„å¥½è™•ã€‚\nä½¿ç”¨ create-snowpack-app å»ºç«‹å°ˆæ¡ˆ $ mkdir doto-list \u0026amp;\u0026amp; cd todo-list $ $ npx create-snowpack-app . --template @snowpack/app-template-blank-typescript --force $ npm install $ code . ç”£ç”Ÿçš„ç¨‹å¼çµæ§‹å¦‚ä¸‹ï¼š\npackage.json çš„å…§å®¹ï¼š\n{ \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;snowpack dev\u0026#34;,  \u0026#34;build\u0026#34;: \u0026#34;snowpack build\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;echo \\\u0026#34;This template does not include a test runner by default.\\\u0026#34; \u0026amp;\u0026amp; exit 1\u0026#34;, \u0026#34;format\u0026#34;: \u0026#34;prettier --write \\\u0026#34;src/**/*.","title":"ä½¿ç”¨ Snowpack + Typescript ä¾†å»ºç½®ä¸€å€‹ Web App"},{"content":"github Source code #tag: restapi_nodejs\nKEYWORDï¼š MongoDB Cloud Servicesã€Node.jsã€REST APIã€JWTã€åŠ è§£å¯†ã€MongoDB Compassã€Postmanã€expressã€cryptojsã€dotenvã€jsonwebtokenã€mongoose\nè¨­ç½®å°ˆæ¡ˆç’°å¢ƒ $ node --version # æª¢æ¸¬ç’°å¢ƒå·²è£å¦¥ node.js (è‹¥å·²å®‰è£æœƒé¡¯ç¤ºç›®å‰å®‰è£çš„ç‰ˆæœ¬ï¼‰ $ mkdir ecommerceapi \u0026amp;\u0026amp; cd ecommerceapi ï¼ƒ å»ºç«‹ä¸€å€‹å°ˆæ¡ˆç›®éŒ„ $ npm init -y\tï¼ƒ ç”£ä¸€å°ˆæ¡ˆè¨­å®šæª” package.json $ touch index.js\tï¼ƒ ç”£ç”Ÿä¸€å€‹æ–°æª”æ¡ˆ $ yarn add express mongoose dotenv\t# åŠ å…¥ç›¸ä¾å¥—ä»¶ $ yarn add --dev nodemon # åŠ å…¥é–‹ç™¼æ™‚æœŸç›¸ä¾å¥—ä»¶ $ git init $ echo \u0026#39;node_modules/\u0026#39; \u0026gt; .gitignore # æ–°å¢ git ignore è¨­å®šæª”ï¼Œä¸¦è¨­å®š node_modules/ ç›®éŒ„ä¸åŠ å…¥ç‰ˆæ§ $ git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Initial commit\u0026#34; å»ºç«‹ç¬¬ä¸€ç‰ˆæœ¬çš„è³‡è¨Š  è¨­å®šå°ˆæ¡ˆå•Ÿå‹•æŒ‡ä»¤ï¼ˆå¦‚ç¬¬ä¸ƒè¡Œçš„æŒ‡ä»¤è¨­å®šï¼‰ï¼Œç•¶è¼¸å…¥ npm start æ™‚ç³»çµ±è‡ªå‹•ä»¥ node ä¾†åŸ·è¡Œ index.js ç¨‹å¼ï¼Œä¸¦å³æ™‚ç›£æ¸¬ index.js æª”æ¡ˆæœ‰è®ŠåŒ–å­˜æª”æ™‚é¦¬ä¸Šé‡æ–°å•Ÿå‹• node index.js ä¾†åŸ·è¡Œè©²ç¨‹å¼ã€‚\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  { \u0026#34;name\u0026#34;: \u0026#34;ecom\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;1.0.0\u0026#34;, \u0026#34;description\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;main\u0026#34;: \u0026#34;index.js\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;start\u0026#34;: \u0026#34;nodemon index.js\u0026#34;  }, \u0026#34;keywords\u0026#34;: [], \u0026#34;author\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;license\u0026#34;: \u0026#34;ISC\u0026#34;, \u0026#34;dependencies\u0026#34;: { \u0026#34;dotenv\u0026#34;: \u0026#34;^16.0.0\u0026#34;, \u0026#34;express\u0026#34;: \u0026#34;^4.17.3\u0026#34;, \u0026#34;mongoose\u0026#34;: \u0026#34;^6.3.1\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;nodemon\u0026#34;: \u0026#34;^2.0.15\u0026#34; } }    åœ¨ index.js ä¸­åŠ å…¥æ­¤è¡Œç¨‹å¼ï¼Œä¸¦åœ¨ vscode Terminal ä¸­è¼¸å…¥ npm start\n console.log(\u0026#34;Hi NodeJS...\u0026#34;)\t é¡¯ç¤ºçµæœå¦‚ä¸‹\n Hi NodeJS... å»ºç«‹ä¸€å€‹ Express æ‡‰ç”¨ç¨‹å¼  ä½¿ç”¨ä»¥ä¸‹ç¨‹å¼è¦†è“‹ index.js æª”æ¡ˆ\n const express = require(\u0026#34;express\u0026#34;); const app = express(); app.get(\u0026#34;api/test\u0026#34;, () =\u0026gt; { console.log(\u0026#34;test is successful\u0026#34;); }); app.listen(5000, () =\u0026gt; { console.log(\u0026#34;Backend server is running...\u0026#34;); })  å­˜æª”å¾Œï¼Œé–‹å•Ÿ ç€è¦½å™¨ï¼Œè¼¸å…¥ localhost:5000/api/testï¼Œåœ¨ vscode terminal è¦–çª—ä¸­æœƒé¡¯ç¤ºï¼š\n Backend server is running... test is successful ä½¿ç”¨ Node.js é€£çµ MongoDB åœ¨ä½¿ç”¨ MongoDB é™¤äº†åœ¨ local ç«¯å®‰è£çš„æ–¹å¼å¤–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Docker çš„æ–¹å¼ä¾†å•Ÿç”¨ MongoDBï¼Œè€Œæ›´æ–¹ä¾¿çš„æ˜¯ç›´æ¥ä½¿ç”¨ https://cloud.mongodb.com/ ç·šä¸Šçš„å…è²»æœå‹™ã€‚\nåœ¨è¨»å†Šå®Œæˆå¾Œï¼Œå¯è®¤åœ¨ Database / Connect / Connect your application ä¸­æ‰¾åˆ°é€£çµå­—ä¸²  åœ¨ç¨‹å¼ä¸­ä½¿ç”¨äº† mongoose é€™å€‹å¥—ä»¶çš„åŠŸèƒ½ä¾†é€£çµ MongoDB è³‡æ–™åº«ï¼ˆç¬¬ä¸‰è¡Œï¼‰ï¼Œä¸¦åœ¨ç¨‹å¼ç¬¬6è¡Œï¼Œconnect function ä¸­æ”¾å…¥â€œé€£çµå­—ä¸²â€\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  const express = require(\u0026#34;express\u0026#34;); const app = express(); const mongoose = require(\u0026#34;mongoose\u0026#34;);  mongoose .connect(\u0026#34;mongodb+srv://calv______ @cluster0.6f8ky.mongodb.net/myFirstDatabase?retryWrites=true\u0026amp;w=majority\u0026#34;)  .then(()=\u0026gt;console.log(\u0026#34;DB Connection successful\u0026#34;)) .catch((err)=\u0026gt; { console.log(err) } ); app.listen(5000, () =\u0026gt; { console.log(\u0026#34;Backend server is running...\u0026#34;); })    å­˜æª”å¾Œï¼Œåœ¨ vscode terminal è¦–çª—ä¸­æœƒé¡¯ç¤ºï¼š\n Backend server is running... DB Connection successful  è¡¨ç¤ºé€£çµæˆåŠŸã€‚\n å½ˆæ€§ç®¡ç†ç¨‹å¼ä¸­çš„â€œè¨­å®šå€¼â€  ä½¿ç”¨ dotenv å¥—ä»¶çš„åŠŸèƒ½ä¾†ç®¡ç†ç¨‹å¼ä¸­ç›¸é—œçš„è¨­å®šå€¼\n  é¦–å…ˆåœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„ä¸‹å»ºç«‹ä¸€å€‹åç‚º \u0026ldquo;.env\u0026rdquo; çš„æª”æ¡ˆ  MONGO_URL=mongodb+srv://cal...............  åœ¨ç¨‹å¼ä¸­å…ˆåŒ¯å…¥ dotenv å¥—ä»¶(ç¬¬1è¡Œï¼‰ï¼Œå†â€œå•Ÿå‹•å®ƒâ€(ç¬¬2è¡Œï¼‰ï¼Œä½¿ç”¨æ™‚é€é â€œprocess.env.MONGO_URL\u0026quot; èªæ³•(ç¬¬4è¡Œï¼‰ ç¬¬åè¡Œç¨‹å¼ç¢¼ä¸­çš„ process.env.PORT ç‚ºç›¸åŒçš„åŸå‰‡å¯åœ¨ .evn æª”æ¡ˆä¸­åŠ å…¥ PORT çš„è¨­å®šå€¼èª¿æ•´  const dotenv = require(\u0026#34;dotenv\u0026#34;); dotenv.config(); mongoose .connect(process.env.MONGO_URL) .then(()=\u0026gt;console.log(\u0026#34;DB Connection successful\u0026#34;)) .catch((err)=\u0026gt; { console.log(err) } ); app.listen(process.env.PORT || 5000, ()=\u0026gt;{ # port é è¨­ç‚º 5000 ï¼Œä¸¦å¯ä»¥åœ¨ .env æª”æ¡ˆä¸­é€²è¡Œå®¢è£½åŒ– ï¼ˆå¦‚ï¼šPORTï¼5001ï¼‰ console.log(\u0026#34;Backend server is running...\u0026#34;); }) äº†è§£ Node.js è·¯ç”±  æ–°å¢ routes ç›®éŒ„ï¼Œåœ¨æ­¤ç›®éŒ„ä¸‹æ–°å¢ user.js æª”æ¡ˆ\n  routes/user.js\n const router = require(\u0026#34;express\u0026#34;).Router(); router.get(\u0026#34;/usertest\u0026#34;, (req, res) =\u0026gt; { res.send(\u0026#34;user test is successful\u0026#34;); }); module.exports = router;  åœ¨ index.js ç¨‹å¼ä¸­å…ˆåŒ¯å…¥ \u0026ldquo;./routes/user\u0026rdquo; é€™å€‹ router è¨­å®šæª”ï¼Œå†é€é app.use èªæ³•ä¾†ä½¿ç”¨é€™å€‹ router(ç¬¬18è¡Œ)ã€‚å®Œæ•´çš„ route ç‚º http://localhost:5000/api/user/usertest\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22  const express = require(\u0026#34;express\u0026#34;); const app = express(); const mongoose = require(\u0026#34;mongoose\u0026#34;); const dotenv = require(\u0026#34;dotenv\u0026#34;); const userRoute = require(\u0026#34;./routes/user\u0026#34;);  dotenv.config(); mongoose .connect(process.env.MONGO_URL) .then(()=\u0026gt;console.log(\u0026#34;DB Connection successful\u0026#34;)) .catch((err)=\u0026gt; { console.log(err) } ); app.use(\u0026#34;/api/users\u0026#34;, userRoute);  app.listen(process.env.PORT || 5000, ()=\u0026gt;{ console.log(\u0026#34;Backend server is running...\u0026#34;); });    é–‹å•Ÿç€è¦§å™¨ï¼Œè¼¸å…¥ http:5000/api/users/usertestï¼Œç€è¦§å™¨å°‡å‘ˆç¾æˆåŠŸè¨Šæ¯\n user test is successfull  ç‚º routes/user.js å†æ–°å¢ä¸€å€‹ post method\n 1 2 3 4 5 6 7 8 9 10 11  const router = require(\u0026#34;express\u0026#34;).Router(); router.get(\u0026#34;/usertest\u0026#34;, (req, res) =\u0026gt; { res.send(\u0026#34;user test is successful\u0026#34;); }); router.post(\u0026#34;/userposttest\u0026#34;, (req, res) =\u0026gt; { const username = req.body.username; res.send(\u0026#34;your username is: \u0026#34; + username) })  module.exports = router;    ä½¿ç”¨ postman ä¾†æ¸¬è©¦ postï¼Œçµæœå›å‚³çš„æ˜¯ Server Errorï¼ŒåŸå› æ˜¯ express é è¨­æ˜¯ä¸æ¥å— json æ ¼å¼çš„è³‡æ–™ã€‚\n  åœ¨ index.js ç¨‹å¼ä¸­åŠ å…¥å¦‚ç¬¬ä¸€è¡Œçš„è¨­å®š\n 1 2  app.use(express.json()); app.use(\u0026#34;/api/users\u0026#34;, userRoute);    è¨­å®šå®Œæˆå¾Œå°±å¯æ­£å¸¸äº†\n ä½¿ç”¨ Node.js MongoDB æ¨¡å‹  æ¥ä¸‹ä¾†æˆ‘å€‘å°‡è³‡æ–™å¯«å…¥ MongoDB è³‡æ–™åº«ä¸­ï¼Œé¦–å…ˆè¦å…ˆå»ºç«‹ model file(æ¨¡å‹æª”æ¡ˆï¼‰ï¼Œåœ¨é€™å€‹æª”æ¡ˆä¸­ä½¿ç”¨äº† mongoose çš„ Schema çš„èªæ³•ï¼Œåªè¦åœ¨æ–°å¢è³‡æ–™æ™‚å¥—ç”¨é€™å€‹é€™å€‹æ¨¡å‹æª”ï¼Œå‰‡æœƒè‡ªå‹•åœ¨ MongoDB ä¸­å»ºç«‹ç›¸å°æ‡‰çš„ collectionï¼Œå°‡è³‡æ–™å­˜å…¥è³‡æ–™åº«ä¸­ã€‚\n æ–°å¢ User æ¨¡å‹æª” (models/User.js)  å…ˆæ–°å¢ä¸€å€‹ models ç›®éŒ„ï¼Œåœ¨ç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹ User.jsï¼Œå…§å®¹å¦‚ä¸‹\n const mongoose = require(\u0026#34;mongoose\u0026#34;); const UserSchema = new mongoose.Schema({ username: { type: String, required: true, unique: true }, email: { type: String, required: true, unique: true }, password: { type: String, required: true }, isAdmin: { type: Boolean, default: false }, }, { timestamps: true } // é€éé€™å€‹å±¬æ€§è¨­å®šï¼Œæœƒè‡ªå‹•åœ¨collectionä¸­æ–°å¢äºŒå€‹å±¬æ€§: createdAtã€updateedAtã€‚ ); module.exports = mongoose.model(\u0026#34;User\u0026#34;, UserSchema); å»ºç«‹ auth.js router file (routes/auth.js) å°‡ä½¿ç”¨è€…è³‡æ–™è¨»å†Šå’Œè³‡ç”¨è€…å¸³è™Ÿé©—è­‰çš„æ©Ÿåˆ¶ç¨ç«‹åœ¨é€™å€‹ route file ä¸­ï¼Œè®“ç¨‹å¼çµæ§‹æ›´æ¸…æ™°ã€‚å…§å®¹å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  const router = require(\u0026#34;express\u0026#34;).Router(); const User = require(\u0026#34;../models/User\u0026#34;); // å¸³è™Ÿè¨»å†Š router.post(\u0026#34;/register\u0026#34;, async (req, res) =\u0026gt; { const newUser = new User({  username: req.body.username, email: req.body.email, password: req.body.password, }); try { const savedUser = await newUser.save();  res.status(201).json(savedUser); } catch (err) { res.status(500).json(err); } }); module.exports = router;    åœ¨ index.js å¼•ç”¨é€™å€‹æ–°çš„ router\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  const express = require(\u0026#34;express\u0026#34;); const app = express(); const mongoose = require(\u0026#34;mongoose\u0026#34;); const dotenv = require(\u0026#34;dotenv\u0026#34;); const userRoute = require(\u0026#34;./routes/user\u0026#34;); const authRoute = require(\u0026#34;./routes/auth\u0026#34;);  dotenv.config(); mongoose .connect(process.env.MONGO_URL) .then(()=\u0026gt;console.log(\u0026#34;DB Connection successful\u0026#34;)) .catch((err)=\u0026gt; { console.log(err) } ); app.use(express.json()); app.use(\u0026#34;/api/users\u0026#34;, userRoute); app.use(\u0026#34;/api/auth\u0026#34;, authRoute); app.listen(process.env.PORT || 5000, ()=\u0026gt;{ console.log(\u0026#34;Backend server is running...\u0026#34;); });    åŸ·è¡ŒæˆåŠŸå¾Œï¼ŒæŸ¥çœ‹ MongoDB è³‡æ–™åº«çš„çµæœï¼š\n ä½¿ç”¨ crypto.js ä¾†ç‚ºæ•æ„Ÿè³‡æ–™åŠ å¯† ç”±ä¸Šè¿°çš„æŸ¥è©¢ç•«é¢å¯ä»¥å¾—çŸ¥ Password æ¬„ä½æ˜¯ä»¥æ˜ç¢¼å„²å­˜ï¼Œæ­¤é¡æ•æ„Ÿè³‡æ–™å¯ä»¥é€éåŠ å¯†æŠ€è¡“ä¾†åŠ å¼·å®ƒçš„å®‰å…¨æ€§ã€‚\ncryptojs æ˜¯ä¸€å€‹ javascript çš„åŠ è§£å¯†å‡½æ•¸åº«ï¼Œä½¿ç”¨å‰å…ˆå®‰è£å¥—ä»¶ï¼š $ yarn add crypto-js\nconst CryptoJS = require(\u0026#34;crypto-js\u0026#34;); password: CryptoJS.AES.encrypt(req.body.password, process.env.PASS_SEC), encrypt function åƒæ•¸é™¤äº†è¦åŠ å¯†çš„å­—ä¸²å¤–ï¼Œéœ€è¦ä¸€å€‹åŠ å¯† Keyï¼Œç‚ºå½ˆæ€§èµ·è¦‹ï¼ŒæŠŠå®ƒå¯«åœ¨ .env æª”æ¡ˆä¸­\n1 2  MONGO_URL=mongodb+srv://cal......... PASS_SEC=cal   åŠ å¯†å¾Œçš„ password å¦‚ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10  { \u0026#34;username\u0026#34;: \u0026#34;calvin\u0026#34;, \u0026#34;email\u0026#34;: \u0026#34;cal@gmail.com\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;U2FsdGVkX19F5ULehTVaQfCzw3B0xIefomDIZTTop7g=\u0026#34;,  \u0026#34;isAdmin\u0026#34;: false, \u0026#34;_id\u0026#34;: \u0026#34;6269f53be0bd74d778bb8934\u0026#34;, \u0026#34;createdAt\u0026#34;: \u0026#34;2022-04-28T02:00:27.195Z\u0026#34;, \u0026#34;updatedAt\u0026#34;: \u0026#34;2022-04-28T02:00:27.195Z\u0026#34;, \u0026#34;__v\u0026#34;: 0 }   login function (è§£å¯†) ç¹¼çºŒå®Œæˆ auth.js ä¸­çš„ LOGIN åŠŸèƒ½ï¼Œ\n// å¸³è™Ÿç™»éŒ„ router.post(\u0026#34;/login\u0026#34;, async (req, res) =\u0026gt; { try { const user = await User.findOne({ username: req.body.username }); !user \u0026amp;\u0026amp; res.status(401).json(\u0026#34;Wrong Credentials!\u0026#34;); const hashedPassword = CryptoJS.AES.decrypt(user.password, process.env.PASS_SEC); const orginalPassword = hashedPassword.toString(CryptoJS.enc.Utf8); orginalPassword !== req.body.password \u0026amp;\u0026amp; res.status(401).json(\u0026#34;Wrong Credentials!\u0026#34;); res.status(200).json(user); } catch(err) { res.status(500).json(err) } })  ä½¿ç”¨ postman ä¾†åŸ·è¡Œ Login\n  ä¸Šåœ–çš„ User å›å‚³è³‡æ–™ä¸­ç‚ºå®‰å…¨èµ·è¦‹ï¼Œæ‡‰è©²æŠŠ password æ¬„ä½éš±è”µèµ·ä¾†ã€‚é€éjavascript è§£æ§‹èªæ³•å¾ˆå®¹æ˜“å°±å¯å®Œæˆé€™å€‹éœ€æ±‚ã€‚\n // å¸³è™Ÿç™»éŒ„ router.post(\u0026#34;/login\u0026#34;, async (req, res) =\u0026gt; { try { const user = await User.findOne({ username: req.body.username }); !user \u0026amp;\u0026amp; res.status(401).json(\u0026#34;Wrong Credentials!\u0026#34;); const hashedPassword = CryptoJS.AES.decrypt(user.password, process.env.PASS_SEC); const orginalPassword = hashedPassword.toString(CryptoJS.enc.Utf8); orginalPassword !== req.body.password \u0026amp;\u0026amp; res.status(401).json(\u0026#34;Wrong Credentials!\u0026#34;); const { password, ...others } = user._doc; res.status(200).json(others); } catch(err) { res.status(500).json(err) } }) { \u0026#34;_id\u0026#34;: \u0026#34;6269f53be0bd74d778bb8934\u0026#34;, \u0026#34;username\u0026#34;: \u0026#34;calvin\u0026#34;, \u0026#34;email\u0026#34;: \u0026#34;cal@gmail.com\u0026#34;, \u0026#34;isAdmin\u0026#34;: false, \u0026#34;createdAt\u0026#34;: \u0026#34;2022-04-28T02:00:27.195Z\u0026#34;, \u0026#34;updatedAt\u0026#34;: \u0026#34;2022-04-28T02:00:27.195Z\u0026#34;, \u0026#34;__v\u0026#34;: 0 } åœ¨ Node.js ä¸­ä½¿ç”¨ JWT ä¾†é€²è¡Œ Token-Based çš„ä½¿ç”¨è€…æˆæ¬Šé©—è­‰ ç‚ºä½¿æˆ‘å€‘çš„æ‡‰ç”¨ç¨‹å¼æ›´å®‰å…¨ Token-Based çš„æˆæ¬Šé©—è­‰æ–¹å¼ä¾†è¨­è¨ˆ API\nå®‰è£å¥—ä»¶ï¼š$ yarn add jsonwebtoken\nç”£ç”Ÿ JWT åœ¨ç™»å…¥è­‰é©—ä¸­åŠ å…¥ç”£ç”Ÿ Token çš„é‚è¼¯ï¼Œåœ¨æª¢æ ¸ä½¿ç”¨è€…è¼¸å…¥çš„å¯†ç¢¼æ­£ç¢ºå¾Œï¼Œå°‡ User ID (_idé€™å€‹å…§éƒ¨ Key)åŠ isAdminé€™å…©å€‹å±¬æ€§å€¼é€é sign function ä¾†ç”£ç”Ÿ access tokenï¼Œä¸¦å›å‚³çµ¦å‰ç«¯ã€‚\nconst jwt = require(\u0026#34;jsonwebtoken\u0026#34;); // åŒ¯å…¥ JsonWebTokenå¥—ä»¶ ... const accessToken = jwt.sign( { id: user._id, isAdmin: user.isAdmin }, process.env.JWT_SEC, { expiresIn: \u0026#34;3d\u0026#34; } ); ... res.status(200).json({ ...others, accessToken });  ä¾ç…§è²«ä¾‹å°‡ Json web token çš„ key å€¼æ”¾åœ¨ .env æª”æ¡ˆä¸­\n 1 2 3  MONGO_URL=mongodb+srv://cal....... PASS_SEC=cal JWT_SEC=cal    ä½¿ç”¨ postman å† Login ä¸€æ¬¡ï¼Œæœƒç™¼ç¾å›å‚³çš„è³‡æ–™ä¸­å·²ç¶“åŒ…å«ä¸€å€‹åˆæ³•çš„ JWT Tokenäº†\n ä½¿ç”¨ JWT åœ¨å‰ç«¯å–å¾—åˆæ³•çš„ JWT Tokenå¾Œï¼Œä¾†çœ‹çœ‹ç•¶ä½¿ç”¨è€…åœ¨å‘¼å«å…¶ä»– API æ™‚ä¸€ä½µå›å‚³çš„ Tokenã€€å¦‚ä½•åœ¨ server ç«¯ä¾†é€²è¡Œé©—è­‰ã€‚\né¦–å…ˆæˆ‘å€‘è¦åœ¨ routes ç›®éŒ„ä¸­æ–°å¢ä¸€å€‹åç‚º verifyToken.js çš„ express Middleware\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37  const jwt = require(\u0026#34;jsonwebtoken\u0026#34;); const verifyToken = (req, res, next) =\u0026gt; {  const authHeader = req.headers.token; if (authHeader) { const token = authHeader.split(\u0026#34; \u0026#34;)[1]; jwt.verify(token, process.env.JWT_SEC, (err, user) =\u0026gt; { if (err) res.status(403).json(\u0026#34;Token ä¸åˆæ³•ï¼\u0026#34;); req.user = user; next(); }) } else { return res.status(401).json(\u0026#34;æœªè¢«æˆæ¬ŠåŸ·è¡Œæœ¬åŠŸèƒ½ï¼\u0026#34;); } }; const verifyTokenAndAuthorization = (req, res, next) =\u0026gt; {  verifyToken(req, res, () =\u0026gt; { if (req.user.id === req.params.id || req.user.isAdmin) { next(); } else { res.status(403).json(\u0026#34;ä¸å…è¨±åŸ·è¡Œæœ¬åŠŸèƒ½ï¼\u0026#34;); } }) }; const verifyTokenAndAdmin = (req, res, next) =\u0026gt; {  verifyToken(req, res, () =\u0026gt; { if (req.user.isAdmin) { next(); } else { res.status(403).json(\u0026#34;éç®¡ç†è€…ä¸å…è¨±åŸ·è¡Œæœ¬åŠŸèƒ½ï¼\u0026#34;); } }) }; module.exports = { verifyToken, verifyTokenAndAuthorizationï¼Œã€€verifyTokenAndAdmin };    åœ¨ user.jsã€€Route file ä¸­åŠ å…¥ update username çš„åŠŸèƒ½\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29  const router = require(\u0026#34;express\u0026#34;).Router(); const User = require(\u0026#34;../models/User\u0026#34;); const { verifyToken, verifyTokenAndAuthorization } = require(\u0026#34;./verifyToken\u0026#34;);  router.put(\u0026#34;/:id\u0026#34;, verifyTokenAndAuthorization, async (req, res) =\u0026gt; {  if (req.user.id === req.params.id || req.user.isAdmin) { if (req.body.password) { req.body.password = CryptoJS.AES.encrypt( req.body.password, process.env.PASS_SEC ).toString(); } }; try { const updatedUser = await User.findByIdAndUpdate(  req.params.id, { $set: req.body, }, { new: true } ); res.status(200).json(updatedUser); } catch(err) { res.status(403).json(err); } }); module.exports = router;    å…ˆå–å¾— user collection ç¬¬ä¸€å€‹ document çš„ key id\n  åœ¨ postman æ–°å¢ä¸€å€‹ put çš„ requestï¼ŒURL = localhost:5000/api/users/6269f53be0bd74d778bb8934ï¼Œå…¶ä¸­çš„â€œ6269f53be0bd74d778bb8934â€ã€€æŒ‡çš„æ˜¯è¦è®Šæ›´çš„ document çš„IDã€‚åŒæ™‚åœ¨Headersä¸­æ–°åŠ å…¥ä¸€å€‹ token çš„ header\n  å…¶å…§å®¹å€¼ = \u0026ldquo;Bearer token_value\u0026rdquo;ï¼Œæ³¨æ„ \u0026ldquo;Bearer\u0026rdquo; å¾Œè¦æœ‰ä¸€å€‹â€œç©ºç™½å­—å…ƒâ€\n  é€™å€‹ request çš„ body å­˜æ”¾çš„æ˜¯ä¸€å€‹ json æ ¼å¼çš„è³‡æ–™ï¼Œä¹Ÿå°±æ˜¯è¦è®Šæ›´çš„ username\n  é€å‡º request æˆåŠŸå¾Œå›å‚³å€¼çš„æ˜¯ä¿®æ”¹å¾Œçš„ user document\n 1 2 3 4 5 6 7 8 9 10  { \u0026#34;_id\u0026#34;: \u0026#34;6269f53be0bd74d778bb8934\u0026#34;, \u0026#34;username\u0026#34;: \u0026#34;calUpdate\u0026#34;,  \u0026#34;email\u0026#34;: \u0026#34;cal@gmail.com\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;U2FsdGVkX19F5ULehTVaQfCzw3B0xIefomDIZTTop7g=\u0026#34;, \u0026#34;isAdmin\u0026#34;: false, \u0026#34;createdAt\u0026#34;: \u0026#34;2022-04-28T02:00:27.195Z\u0026#34;, \u0026#34;updatedAt\u0026#34;: \u0026#34;2022-04-28T09:59:33.456Z\u0026#34;, \u0026#34;__v\u0026#34;: 0 }    è‹¥é€å‡º request ä¸­æœªåŒ…å« Token å‰‡æœƒå›å‚³â€œæœªè¢«æˆæ¬ŠåŸ·è¡Œæœ¬åŠŸèƒ½â€ã€‚\n  è‹¥é€å‡º request ä¸­åŒ…å«çš„æ˜¯ä¸åˆæ³•çš„ Token å‰‡æœƒå›å‚³â€œTokenä¸åˆæ³•â€œã€‚\n  ç·Šæ¥è‘—åœ¨ user.jsã€€Route file ä¸­å†åŠ å…¥ delete user è³‡æ–™çš„åŠŸèƒ½\n 1 2 3 4 5 6 7 8  router.delete(\u0026#34;/:id\u0026#34;, verifyTokenAndAuthorization, async (req, res) =\u0026gt; { try { await User.findByIdAndDelete(req.params.id);  res.status(200).json(updatedUser); } catch(err) { res.status(403).json(err); } });    å¦å¤–åœ¨ user.jsã€€Route file ä¸­å†åŠ å…¥ get user çš„åŠŸèƒ½ï¼Œè€ŒåŸ·è¡Œæœ¬åŠŸèƒ½çš„æˆæ¬Šæª¢æ ¸é‚è¼¯æ”¹æˆ verifyTokenAndAdminï¼Œä¹Ÿå°±æ˜¯å¿…é ˆæ˜¯å…·æœ‰ admin èº«ä»½çš„ä½¿ç”¨è€…æ‰èƒ½åŸ·è¡Œæœ¬åŠŸèƒ½ã€‚\n 1 2 3 4 5 6 7 8 9  router.get(\u0026#34;/find/:id\u0026#34;, verifyTokenAndAdmin, async (req, res) =\u0026gt; { try { const user = await User.findById(req.params.id);  const { password, ...others } = user._doc; res.status(200).json(other); } catch(err) { res.status(500).json(err); } });    è‹¥ä½ ä½¿ç”¨çš„ token æ‰€ä»£è¡¨çš„ user isAdmin=false çš„è©±ï¼Œå°‡å›å‚³\u0026quot;éç®¡ç†è€…ä¸å…è¨±åŸ·è¡Œæœ¬åŠŸèƒ½ï¼\u0026ldquo;çš„è­¦å‘Šè¨Šæ¯ã€‚\n  æˆ‘å€‘å†æ–°è¨»å†Šä¸€å€‹æ–°çš„ä½¿ç”¨è€…ï¼š\n  ä¸¦åœ¨ MongoDB ä¸­æŠŠé€™å€‹æ–°ä½¿ç”¨è€…çš„isAdminä¿®æ”¹æˆtrue\n  ä½¿ç”¨é€™å€‹å¸³è™Ÿä¾†ç™»å…¥ä¸¦å–å¾Œ token å€¼ã€‚\n  ä½¿ç”¨é€™å€‹ token å€¼ä¾†å‘¼å« GET USER åŠŸèƒ½å°±å¯ä»¥æ­£å¸¸çš„å–å¾—è¦æŸ¥è©¢çš„ä½¿ç”¨è€…è³‡æ–™äº†\n 1 2 3 4 5 6 7 8 9  {  \u0026#34;_id\u0026#34;: \u0026#34;6269f53be0bd74d778bb8934\u0026#34;, \u0026#34;username\u0026#34;: \u0026#34;calvin\u0026#34;, \u0026#34;email\u0026#34;: \u0026#34;cal@gmail.com\u0026#34;, \u0026#34;isAdmin\u0026#34;: false, \u0026#34;createdAt\u0026#34;: \u0026#34;2022-04-28T02:00:27.195Z\u0026#34;, \u0026#34;updatedAt\u0026#34;: \u0026#34;2022-04-29T02:56:33.670Z\u0026#34;, \u0026#34;__v\u0026#34;: 0 }   å¦‚ä½•è™•ç† URL ä¸­çš„ query string  åœ¨ã€€user.js Route file ä¸­å†åŠ å…¥ get all users çš„åŠŸèƒ½ã€‚\n 1 2 3 4 5 6 7 8  router.get(\u0026#34;/\u0026#34;, verifyTokenAndAdmin, async (req, res) =\u0026gt; { try { const users = await User.find(); res.status(200).json(users);  } catch(err) { res.status(500).json(err); } });    åœ¨ url ä¸­è¼¸å…¥ï¼šlocalhost:5000/api/users/ï¼Œå°‡å›å‚³æ‰€æœ‰çš„ users è³‡æ–™\n [ { \u0026#34;_id\u0026#34;: \u0026#34;6269f53be0bd74d778bb8934\u0026#34;, \u0026#34;username\u0026#34;: \u0026#34;calvin\u0026#34;, \u0026#34;email\u0026#34;: \u0026#34;cal@gmail.com\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;U2FsdGVkX19F5ULehTVaQfCzw3B0xIefomDIZTTop7g=\u0026#34;, \u0026#34;isAdmin\u0026#34;: false, \u0026#34;createdAt\u0026#34;: \u0026#34;2022-04-28T02:00:27.195Z\u0026#34;, \u0026#34;updatedAt\u0026#34;: \u0026#34;2022-04-29T02:56:33.670Z\u0026#34;, \u0026#34;__v\u0026#34;: 0 }, { \u0026#34;_id\u0026#34;: \u0026#34;626b55f9af6c24eb6c911f40\u0026#34;, \u0026#34;username\u0026#34;: \u0026#34;admin\u0026#34;, \u0026#34;email\u0026#34;: \u0026#34;admin@gmail.com\u0026#34;, \u0026#34;password\u0026#34;: \u0026#34;U2FsdGVkX190QQrScanCS64GYHup956hNIQ5ALKbjS4=\u0026#34;, \u0026#34;isAdmin\u0026#34;: true, \u0026#34;createdAt\u0026#34;: \u0026#34;2022-04-29T03:05:29.788Z\u0026#34;, \u0026#34;updatedAt\u0026#34;: \u0026#34;2022-04-29T03:05:29.788Z\u0026#34;, \u0026#34;__v\u0026#34;: 0 } ]  å¦‚æœæƒ³è¦ç”± url ä¸­åŠ å…¥é¡å¤–çš„ query string ä¾†é”åˆ°å‹•æ…‹åŸ·è¡Œä¸åŒçš„é‚è¼¯ï¼Œæ‡‰è©²æ€éº¼åšå‘¢ï¼Ÿå¦‚ï¼šlocalhost:5000/api/users?new=true ä¾†çœ‹çœ‹ç¨‹å¼ä¸­è¦å¦‚ä½•ä¾†è™•ç† url æ‰€å‚³å…¥çš„ query string\n 1 2 3 4 5 6 7 8 9 10 11 12  // GET ALL USERS router.get(\u0026#34;/\u0026#34;, verifyTokenAndAdmin, async (req, res) =\u0026gt; {  const query = req.query.new; // é€é req.query.new ä¾†å–å¾— new é€™å€‹ query string çš„å€¼  try {  const users = query ? await User.find().sort({ _id: -1 }).limit(5) : await User.find(); res.status(200).json(users); } catch(err) { res.status(500).json(err); } });    ä¸Šè¿°çš„ç¨‹å¼ä¸­ User.find().sort({ _id: -1 }).limit(5) è¡¨ç¤ºçš„æ˜¯æ‰¾å‡ºè‡³å¤šäº”ç­†çš„ User è³‡æ–™ä¸¦ä»¥ _id ä¾†é€²è¡Œâ€˜åâ€™æ’åºï¼Œ-1è¡¨åæ’åºã€‚æ•´å€‹è™•ç†é‚„è¼¯è¡¨ç¤ºè‹¥åœ¨ url ä¸­è¼¸å…¥ localhost:5000/api/users çš„è©±ï¼Œæœƒå›å‚³æ‰€æœ‰ User çš„è³‡æ–™ã€‚è‹¥æ–¼ url ä¸­è¼¸å…¥ localhost:5000/api/users?new=trueï¼Œå‰‡æœƒå›å‚³ æœ€å¤šäº”ç­†ä¸¦ä»¥ _id ä¾†é€²è¡Œâ€˜åâ€™æ’åºçš„ User è³‡æ–™ã€‚\n ","permalink":"https://calvinegs.github.io/posts/nodejs-restapi-example/","summary":"github Source code #tag: restapi_nodejs\nKEYWORDï¼š MongoDB Cloud Servicesã€Node.jsã€REST APIã€JWTã€åŠ è§£å¯†ã€MongoDB Compassã€Postmanã€expressã€cryptojsã€dotenvã€jsonwebtokenã€mongoose\nè¨­ç½®å°ˆæ¡ˆç’°å¢ƒ $ node --version # æª¢æ¸¬ç’°å¢ƒå·²è£å¦¥ node.js (è‹¥å·²å®‰è£æœƒé¡¯ç¤ºç›®å‰å®‰è£çš„ç‰ˆæœ¬ï¼‰ $ mkdir ecommerceapi \u0026amp;\u0026amp; cd ecommerceapi ï¼ƒ å»ºç«‹ä¸€å€‹å°ˆæ¡ˆç›®éŒ„ $ npm init -y\tï¼ƒ ç”£ä¸€å°ˆæ¡ˆè¨­å®šæª” package.json $ touch index.js\tï¼ƒ ç”£ç”Ÿä¸€å€‹æ–°æª”æ¡ˆ $ yarn add express mongoose dotenv\t# åŠ å…¥ç›¸ä¾å¥—ä»¶ $ yarn add --dev nodemon # åŠ å…¥é–‹ç™¼æ™‚æœŸç›¸ä¾å¥—ä»¶ $ git init $ echo \u0026#39;node_modules/\u0026#39; \u0026gt; .gitignore # æ–°å¢ git ignore è¨­å®šæª”ï¼Œä¸¦è¨­å®š node_modules/ ç›®éŒ„ä¸åŠ å…¥ç‰ˆæ§ $ git add .","title":"ä½¿ç”¨ Node.js + express å»ºç«‹ä¸€å€‹é›»å­å•†å‹™å¾Œç«¯æœå‹™çš„ REST API"},{"content":"rest å’Œ spread ä¹‹é–“çš„ä¸»è¦å€åˆ¥åœ¨æ–¼ï¼Œrest é‹ç®—ç¬¦å°‡ä½¿ç”¨è€…æä¾›çš„ç‰¹å®šçš„å€¼çš„â€œå…¶é¤˜â€éƒ¨åˆ†æ”¾å…¥ JavaScript é™£åˆ—ä¸­ã€‚ä½†æ˜¯æ“´å±•èªæ³•å°‡å¯ç–Šä»£ç‰©ä»¶æ“´å±•ç‚ºå„åˆ¥çš„å…ƒç´ ã€‚\nrest çš„ç¯„ä¾‹ // å°‡ä½¿ç”¨è€…æä¾›çš„æŸäº›å€¼æ”¾å…¥é™£åˆ—ä¸­ function myBio(firstName, lastName, ...otherInfo) {  return otherInfo; } // å‘¼å« myBio åŠŸèƒ½æ™‚å‚³å…¥äº”å€‹åƒæ•¸å€¼: myBio(\u0026#34;Oluwatobi\u0026#34;, \u0026#34;Sofela\u0026#34;, \u0026#34;CodeSweetly\u0026#34;, \u0026#34;Web Developer\u0026#34;, \u0026#34;Male\u0026#34;); // å›å‚³ä»¥ä¸‹é™£åˆ—: [\u0026#34;CodeSweetly\u0026#34;, \u0026#34;Web Developer\u0026#34;, \u0026#34;Male\u0026#34;] // å®£å‘ŠäºŒå€‹ä¸€èˆ¬è®Šæ•¸åŠä¸€å€‹ rest è®Šæ•¸ï¼Œå†ä½¿ç”¨ destructruing æ–¹å¼çµ¦å€¼: const [firstName, lastName, ...otherInfo] = [  \u0026#34;Oluwatobi\u0026#34;, \u0026#34;Sofela\u0026#34;, \u0026#34;CodeSweetly\u0026#34;, \u0026#34;Web Developer\u0026#34;, \u0026#34;Male\u0026#34; ]; console.log(otherInfo); // çµæœ: [\u0026#34;CodeSweetly\u0026#34;, \u0026#34;Web Developer\u0026#34;, \u0026#34;Male\u0026#34;] // ES7+çš„ç‰©ä»¶å±¬æ€§å…¶é¤˜é‹ç®—ç¬¦ const {a, b, ...rest} = {a:1, b:2, c:3, d:4} //a=1, b=2, rest={c:3, d:4}  let options = { title: \u0026#34;Menu\u0026#34;, height: 200, width: 100 }; // title = property named title // rest = object with the rest of properties let {title, ...rest} = options; // now title=\u0026#34;Menu\u0026#34;, rest={height: 200, width: 100} alert(rest.height); // 200 alert(rest.width); // 100 function sum(...numbers) { let result = 0 result = numbers.reduce((orgValue, value) =\u0026gt; orgValue += value) return result } console.log(sum(1)); // 1 console.log(sum(1, 2, 3, 4, 5)); // 15 spread çš„ç¯„ä¾‹ // å®šç¾©ä¸€å€‹æœ‰ä¸‰å€‹åƒæ•¸å‚³å…¥å€¼çš„åŠŸèƒ½ function myBio(firstName, lastName, company) { return `${firstName} ${lastName} runs ${company}`; } // ä½¿ç”¨æ“´å±•é‹ç®—ç¬¦å°‡é™£åˆ—ä¸­çš„å€¼å±•é–‹è‡³å„åˆ¥çš„åƒæ•¸ä¸­: myBio(...[\u0026quot;Oluwatobi\u0026quot;, \u0026quot;Sofela\u0026quot;, \u0026quot;CodeSweetly\u0026quot;]); // ä¸Šè¿°ç¨‹å¼çš„çµæœ: â€œOluwatobi Sofela runs CodeSweetlyâ€ let first = [1,3,5]; let second = [2,4,6]; second = [ ...first, ...second]; console.log(\u0026quot;second : \u0026quot;, second); // second [ 1, 3, 5, 2, 4, 6 ] const myName = \u0026#34;Oluwatobi Sofela\u0026#34;; console.log([...myName]); // The invocation above will return: [ \u0026#34;O\u0026#34;, \u0026#34;l\u0026#34;, \u0026#34;u\u0026#34;, \u0026#34;w\u0026#34;, \u0026#34;a\u0026#34;, \u0026#34;t\u0026#34;, \u0026#34;o\u0026#34;, \u0026#34;b\u0026#34;, \u0026#34;i\u0026#34;, \u0026#34; \u0026#34;, \u0026#34;S\u0026#34;, \u0026#34;o\u0026#34;, \u0026#34;f\u0026#34;, \u0026#34;e\u0026#34;, \u0026#34;l\u0026#34;, \u0026#34;a\u0026#34; ] const numbers = [1, 3, 5, 7, 10, 200, 90, 59]; function addNumbers(a, b, c, d) { return a + b + c + d; } console.log(addNumbers(...numbers)); // The invocation above will return: 16 // å°‡æ“´å±•é‹ç®—ç¬¦é‹ç”¨åœ¨ç‰©ä»¶ä¸Š const myNames = [\u0026#34;Oluwatobi\u0026#34;, \u0026#34;Sofela\u0026#34;]; const bio = { ...myNames, runs: \u0026#34;codesweetly.com\u0026#34; }; console.log(bio); // The invocation above will return: { 0: \u0026#34;Oluwatobi\u0026#34;, 1: \u0026#34;Sofela\u0026#34;, runs: \u0026#34;codesweetly.com\u0026#34; } // ç›¸åŒå±¬æ€§æœƒè¢«è¦†è“‹ const myName = { firstName: \u0026#34;Tobi\u0026#34;, lastName: \u0026#34;Sofela\u0026#34; }; const bio = { ...myName, firstName: \u0026#34;Oluwatobi\u0026#34;, website: \u0026#34;codesweetly.com\u0026#34; }; console.log(bio); // The invocation above will return: { firstName: \u0026#34;Oluwatobi\u0026#34;, lastName: \u0026#34;Sofela\u0026#34;, website: \u0026#34;codesweetly.com\u0026#34; }; // myName é™£åˆ—çš„å€¼éƒ½æ˜¯ Primitive value, æ‰€ä»¥ myName é™£åˆ—çš„è®ŠåŒ–ä¸æœƒåæ‡‰åˆ° aboutMe é™£åˆ—ä¸­ const myName = [\u0026#34;Sofela\u0026#34;, \u0026#34;is\u0026#34;, \u0026#34;my\u0026#34;]; const aboutMe = [\u0026#34;Oluwatobi\u0026#34;, ...myName, \u0026#34;name.\u0026#34;]; console.log(aboutMe); // The invocation above will return: [\u0026#34;Oluwatobi\u0026#34;, \u0026#34;Sofela\u0026#34;, \u0026#34;is\u0026#34;, \u0026#34;my\u0026#34;, \u0026#34;name.\u0026#34;]  myName.push(\u0026#34;real\u0026#34;);  console.log(myName); // [\u0026#34;Sofela\u0026#34;, \u0026#34;is\u0026#34;, \u0026#34;my\u0026#34;, \u0026#34;real\u0026#34;] console.log(aboutMe); // [\u0026#34;Oluwatobi\u0026#34;, \u0026#34;Sofela\u0026#34;, \u0026#34;is\u0026#34;, \u0026#34;my\u0026#34;, \u0026#34;name.\u0026#34;] // myName é™£åˆ—çš„å€¼åŒ…å«äº† non-primitive value, æ‰€ä»¥ myName é™£åˆ—çš„è®ŠåŒ–æœƒå½±éŸ¿ aboutMe é™£åˆ— const myName = [[\u0026#34;Sofela\u0026#34;, \u0026#34;is\u0026#34;, \u0026#34;my\u0026#34;]]; const aboutMe = [\u0026#34;Oluwatobi\u0026#34;, ...myName, \u0026#34;name.\u0026#34;]; console.log(aboutMe); // The invocation above will return: [ \u0026#34;Oluwatobi\u0026#34;, [\u0026#34;Sofela\u0026#34;, \u0026#34;is\u0026#34;, \u0026#34;my\u0026#34;], \u0026#34;name.\u0026#34; ]  myName[0].push(\u0026#34;real\u0026#34;);  console.log(myName); // [[\u0026#34;Sofela\u0026#34;, \u0026#34;is\u0026#34;, \u0026#34;my\u0026#34;, \u0026#34;real\u0026#34;]] console.log(aboutMe); // [\u0026#34;Oluwatobi\u0026#34;, [\u0026#34;Sofela\u0026#34;, \u0026#34;is\u0026#34;, \u0026#34;my\u0026#34;, \u0026#34;real\u0026#34;], \u0026#34;name.\u0026#34;] ","permalink":"https://calvinegs.github.io/posts/rest-spread-js/","summary":"rest å’Œ spread ä¹‹é–“çš„ä¸»è¦å€åˆ¥åœ¨æ–¼ï¼Œrest é‹ç®—ç¬¦å°‡ä½¿ç”¨è€…æä¾›çš„ç‰¹å®šçš„å€¼çš„â€œå…¶é¤˜â€éƒ¨åˆ†æ”¾å…¥ JavaScript é™£åˆ—ä¸­ã€‚ä½†æ˜¯æ“´å±•èªæ³•å°‡å¯ç–Šä»£ç‰©ä»¶æ“´å±•ç‚ºå„åˆ¥çš„å…ƒç´ ã€‚\nrest çš„ç¯„ä¾‹ // å°‡ä½¿ç”¨è€…æä¾›çš„æŸäº›å€¼æ”¾å…¥é™£åˆ—ä¸­ function myBio(firstName, lastName, ...otherInfo) {  return otherInfo; } // å‘¼å« myBio åŠŸèƒ½æ™‚å‚³å…¥äº”å€‹åƒæ•¸å€¼: myBio(\u0026#34;Oluwatobi\u0026#34;, \u0026#34;Sofela\u0026#34;, \u0026#34;CodeSweetly\u0026#34;, \u0026#34;Web Developer\u0026#34;, \u0026#34;Male\u0026#34;); // å›å‚³ä»¥ä¸‹é™£åˆ—: [\u0026#34;CodeSweetly\u0026#34;, \u0026#34;Web Developer\u0026#34;, \u0026#34;Male\u0026#34;] // å®£å‘ŠäºŒå€‹ä¸€èˆ¬è®Šæ•¸åŠä¸€å€‹ rest è®Šæ•¸ï¼Œå†ä½¿ç”¨ destructruing æ–¹å¼çµ¦å€¼: const [firstName, lastName, ...otherInfo] = [  \u0026#34;Oluwatobi\u0026#34;, \u0026#34;Sofela\u0026#34;, \u0026#34;CodeSweetly\u0026#34;, \u0026#34;Web Developer\u0026#34;, \u0026#34;Male\u0026#34; ]; console.log(otherInfo); // çµæœ: [\u0026#34;CodeSweetly\u0026#34;, \u0026#34;Web Developer\u0026#34;, \u0026#34;Male\u0026#34;] // ES7+çš„ç‰©ä»¶å±¬æ€§å…¶é¤˜é‹ç®—ç¬¦ const {a, b, ...rest} = {a:1, b:2, c:3, d:4} //a=1, b=2, rest={c:3, d:4}  let options = { title: \u0026#34;Menu\u0026#34;, height: 200, width: 100 }; // title = property named title // rest = object with the rest of properties let {title, .","title":"é€éç¯„ä¾‹äº†è§£ Javascript Rest ï¼† Spread é‹ç®—ç¬¦æœ‰ä½•ä¸åŒ"},{"content":"ç‰©ä»¶è§£æ§‹ æŒ‡å®šå€¼çµ¦å·²å­˜åœ¨çš„è®Šæ•¸ const superHero = { name : \u0026#34;Spiderman\u0026#34;, power : \u0026#34;Spider Sense\u0026#34;, color : \u0026#34;red\u0026#34; }; const { name, power, color } = superHero; console.log(\u0026#34;name:\u0026#34;, name); // Spiderman console.log(\u0026#34;color:\u0026#34;, color); // red console.log(\u0026#34;power:\u0026#34;, power); // Spider Sense é‡æ–°æŒ‡å®šå€¼çš„ç”¨æ³• const superMan = { name : \u0026#34;Superman\u0026#34;, power : \u0026#34;Super Sense\u0026#34;, color : \u0026#34;blue\u0026#34; }; ({ name, power, color } = superMan); console.log(\u0026#34;name:\u0026#34;, name); console.log(\u0026#34;color:\u0026#34;, color); console.log(\u0026#34;power:\u0026#34;, power); æŒ‡å®šå€¼çµ¦æ–°çš„è®Šæ•¸ const superHero = { name : \u0026#34;Spiderman\u0026#34;, power : \u0026#34;Spider Sense\u0026#34;, color : \u0026#34;red\u0026#34; }; const { name : n, power : p, color : c } = superHero; console.log(\u0026#34;color:\u0026#34;, c); // red console.log(\u0026#34;power:\u0026#34;, p); // Spider Sense console.log(\u0026#34;name:\u0026#34;, n); // Spiderman é è¨­å€¼ const person = { name: \u0026#39;Skay\u0026#39;, age: 38 }; // Assign default value of Canada to country if undefined const { name, age, country = \u0026#39;Canada\u0026#39; } = person; console.log(`I am ${name}from ${country}and I am ${age}years old.`); // Output -\u0026gt; I am Skay from Canada and I am 38 years old.\u0026#39; è§£æ§‹å›å‚³å€¼ const data = () =\u0026gt; ({ name: \u0026#39;George\u0026#39;, role: \u0026#39;SA\u0026#39; }); const { name, role } = data(); æ§½ç‹€çš„è§£æ§‹ const superHero = { name : \u0026#34;Spiderman\u0026#34;, power : \u0026#34;Spider Sense\u0026#34;, \u0026#34;character\u0026#34; : { \u0026#34;realName\u0026#34; : \u0026#34;Tom Holland\u0026#34;, \u0026#34;citizenship\u0026#34; : \u0026#34;British\u0026#34;, \u0026#34;appearances\u0026#34; : { \u0026#34;movie\u0026#34; : \u0026#34;captain america civil war\u0026#34;, \u0026#34;releaseDate\u0026#34; : \u0026#34;6 May 2016\u0026#34; } } }; const { character } = superHero; console.log(character); { realName: \u0026#39;Tom Holland\u0026#39;, citizenship: \u0026#39;British\u0026#39;, appearances: { movie: \u0026#39;captain america civil war\u0026#39;, releaseDate: \u0026#39;6 May 2016\u0026#39; } } const superHero = { name : \u0026#34;Spiderman\u0026#34;, power : \u0026#34;Spider Sense\u0026#34;, \u0026#34;character\u0026#34; : { \u0026#34;realName\u0026#34; : \u0026#34;Tom Holland\u0026#34;, \u0026#34;citizenship\u0026#34; : \u0026#34;British\u0026#34;, \u0026#34;appearances\u0026#34; : { \u0026#34;movie\u0026#34; : \u0026#34;captain america civil war\u0026#34;, \u0026#34;releaseDate\u0026#34; : \u0026#34;6 May 2016\u0026#34; } } }; const { character : {appearances : { movie }} } = superHero; console.log(movie); captain america civil war é™£åˆ—è§£æ§‹ // we have an array with the name and surname let arr = [\u0026#34;John\u0026#34;, \u0026#34;Smith\u0026#34;] // destructuring assignment // sets firstName = arr[0] // and surname = arr[1] let [firstName, surname] = arr;  console.log(firstName); // John console.log(surname); // Smith let [firstName, surname] = \u0026#34;John Smith\u0026#34;.split(\u0026#39; \u0026#39;); alert(firstName); // John alert(surname); // Smith // è®Šæ•¸å€¼äº’æ› const a = 1, b = 2; [b, a] = [a, b] //a=2, b=1 const [a, [b, [c, d]]] = [1, [2, [[[3, 4], 5], 6]]]; console.log(c); //[ [ 3, 4 ], 5 ] ä¹ç•¥æŸäº›å€¼ // second element is not needed let [firstName, , title] = [\u0026#34;Julius\u0026#34;, \u0026#34;Caesar\u0026#34;, \u0026#34;Consul\u0026#34;, \u0026#34;of the Roman Republic\u0026#34;]; console.log(title); // Consul æ”¯æ´ä»»ä½•å¯ç–Šä»£çš„å€¼ let [a, b, c] = \u0026#34;abc\u0026#34;; // [\u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;, \u0026#34;c\u0026#34;] let [one, two, three] = new Set([1, 2, 3]); é è¨­å€¼ let [a, b, c] = \u0026#34;abc\u0026#34;; // [\u0026#34;a\u0026#34;, \u0026#34;b\u0026#34;, \u0026#34;c\u0026#34;] let [one, two, three] = new Set([1, 2, 3]); ","permalink":"https://calvinegs.github.io/posts/destructuring-js/","summary":"ç‰©ä»¶è§£æ§‹ æŒ‡å®šå€¼çµ¦å·²å­˜åœ¨çš„è®Šæ•¸ const superHero = { name : \u0026#34;Spiderman\u0026#34;, power : \u0026#34;Spider Sense\u0026#34;, color : \u0026#34;red\u0026#34; }; const { name, power, color } = superHero; console.log(\u0026#34;name:\u0026#34;, name); // Spiderman console.log(\u0026#34;color:\u0026#34;, color); // red console.log(\u0026#34;power:\u0026#34;, power); // Spider Sense é‡æ–°æŒ‡å®šå€¼çš„ç”¨æ³• const superMan = { name : \u0026#34;Superman\u0026#34;, power : \u0026#34;Super Sense\u0026#34;, color : \u0026#34;blue\u0026#34; }; ({ name, power, color } = superMan); console.log(\u0026#34;name:\u0026#34;, name); console.log(\u0026#34;color:\u0026#34;, color); console.log(\u0026#34;power:\u0026#34;, power); æŒ‡å®šå€¼çµ¦æ–°çš„è®Šæ•¸ const superHero = { name : \u0026#34;Spiderman\u0026#34;, power : \u0026#34;Spider Sense\u0026#34;, color : \u0026#34;red\u0026#34; }; const { name : n, power : p, color : c } = superHero; console.","title":"é€éç¯„ä¾‹äº†è§£ Javascript Destructuring (è§£æ§‹æŒ‡å®šå€¼)"},{"content":"Keyboard Shortcuts For Ubuntu Terminal åŸºæœ¬æ“ä½œ  Ctrl+Alt+T: é–‹å•Ÿæ–°çµ‚ç«¯æ©Ÿ\nCtrl+Shift+Wï¼šé—œé–‰çµ‚ç«¯æ©Ÿ (é—œé–‰ Tabï¼‰\nCtrl+Dï¼šé—œé–‰æœªè¼¸å…¥ä»»ä½•æŒ‡ä»¤çµ‚ç«¯æ©Ÿ (é—œé–‰ Tabï¼‰\nCtrl+Cï¼šå–æ¶ˆæ­£åœ¨åŸ·è¡Œä¸­çš„æŒ‡ä»¤\nCtrl+Lï¼š æ¸…é™¤çµ‚ç«¯æ©Ÿç•«é¢\nCtrl+Shift+Tï¼š é–‹å•Ÿæ–°çš„ Tab\nALT+ï¼»æ•¸å­—éµï¼½ï¼š ç§»åˆ°ç¬¬å¹¾å€‹ Tab\nCtrl+PgUp/PgDnï¼š åˆ‡æ› Tab\nCtrl+Shift+'+': Zoom In\nCtrl+'-': Zoom Out\n åœ¨çµ‚ç«¯æ©Ÿä¸­ç§»å‹•  Ctrl+A: æ¸¸æ¨™ç§»å‹•åˆ°ä¸€è¡Œé–‹é ­\nCtrl+E: æ¸¸æ¨™ç§»å‹•åˆ°ä¸€è¡Œçµå°¾\nCtrl+F: æ¸¸æ¨™å¾€å‰ç§»å‹•ä¸€å€‹å­—å…ƒ\nCtrl+B: æ¸¸æ¨™å¾€å¾Œç§»å‹•ä¸€å€‹å­—å…ƒ\nAlt+F: æ¸¸æ¨™å¾€å‰ç§»å‹•ä¸€å€‹å­— (åŒ Alt+l)\nAlt+B: æ¸¸æ¨™å¾€å¾Œç§»å‹•ä¸€å€‹å­—\n ä¿®æ”¹æ–‡å­—çš„æ“ä½œ  Ctrl+D: åˆªé™¤æ¸¸æ¨™æ‰€åœ¨çš„å­—å…ƒ\nCtrl+H: åˆªé™¤æ¸¸æ¨™æ‰€åœ¨çš„å‰ä¸€å€‹å­—å…ƒ\nCtrl+U: åˆªé™¤æ¸¸æ¨™æ‰€åœ¨ä½ç½®ä¹‹å‰çš„æ‰€æœ‰å­—å…ƒ\nCtrl+K: åˆªé™¤æ¸¸æ¨™æ‰€åœ¨ä½ç½®ä¹‹å¾Œçš„æ‰€æœ‰å­—å…ƒï¼ˆå«æ¸¸æ¨™æ‰€åœ¨çš„å­—å…ƒ)\nCtrl+W: åˆªé™¤æ¸¸æ¨™æ‰€åœ¨çš„é€™å€‹ä¸€å€‹å­—ï¼ˆé™¤æ¸¸æ¨™æ‰€åœ¨çš„å­—å…ƒå¤–)\nCtrl+T: äº¤æ›æ¸¸æ¨™æ‰€åœ¨çš„å­—å…ƒèˆ‡å‰ä¸€å€‹å­—å…ƒä½ç½®\nAlt+T: äº¤æ›æ¸¸æ¨™æ‰€åœ¨çš„å­—èˆ‡å‰ä¸€å€‹å­—ä½ç½®\nAlt+U: å°‡æ¸¸æ¨™æ‰€åœ¨çš„å­—å¾æ¸¸æ¨™é–‹å§‹çš„å­—å…ƒèµ·è½‰æ›æˆå¤§å¯«\n History  Ctrl+R: ä»¥Key wordæ–¹å¼åå‘æœå°‹ History æŒ‡ä»¤\nCtrl+P: å‰ä¸€å€‹ History ä¸­çš„æŒ‡ä»¤\nCtrl+N: ä¸‹ä¸€å€‹ History ä¸­çš„æŒ‡ä»¤\n  $ HISTTIMEFORMAT=\u0026quot;%Y-%m-%d %T \u0026quot;\n ","permalink":"https://calvinegs.github.io/posts/terminal-shortcuts/","summary":"Keyboard Shortcuts For Ubuntu Terminal åŸºæœ¬æ“ä½œ  Ctrl+Alt+T: é–‹å•Ÿæ–°çµ‚ç«¯æ©Ÿ\nCtrl+Shift+Wï¼šé—œé–‰çµ‚ç«¯æ©Ÿ (é—œé–‰ Tabï¼‰\nCtrl+Dï¼šé—œé–‰æœªè¼¸å…¥ä»»ä½•æŒ‡ä»¤çµ‚ç«¯æ©Ÿ (é—œé–‰ Tabï¼‰\nCtrl+Cï¼šå–æ¶ˆæ­£åœ¨åŸ·è¡Œä¸­çš„æŒ‡ä»¤\nCtrl+Lï¼š æ¸…é™¤çµ‚ç«¯æ©Ÿç•«é¢\nCtrl+Shift+Tï¼š é–‹å•Ÿæ–°çš„ Tab\nALT+ï¼»æ•¸å­—éµï¼½ï¼š ç§»åˆ°ç¬¬å¹¾å€‹ Tab\nCtrl+PgUp/PgDnï¼š åˆ‡æ› Tab\nCtrl+Shift+'+': Zoom In\nCtrl+'-': Zoom Out\n åœ¨çµ‚ç«¯æ©Ÿä¸­ç§»å‹•  Ctrl+A: æ¸¸æ¨™ç§»å‹•åˆ°ä¸€è¡Œé–‹é ­\nCtrl+E: æ¸¸æ¨™ç§»å‹•åˆ°ä¸€è¡Œçµå°¾\nCtrl+F: æ¸¸æ¨™å¾€å‰ç§»å‹•ä¸€å€‹å­—å…ƒ\nCtrl+B: æ¸¸æ¨™å¾€å¾Œç§»å‹•ä¸€å€‹å­—å…ƒ\nAlt+F: æ¸¸æ¨™å¾€å‰ç§»å‹•ä¸€å€‹å­— (åŒ Alt+l)\nAlt+B: æ¸¸æ¨™å¾€å¾Œç§»å‹•ä¸€å€‹å­—\n ä¿®æ”¹æ–‡å­—çš„æ“ä½œ  Ctrl+D: åˆªé™¤æ¸¸æ¨™æ‰€åœ¨çš„å­—å…ƒ\nCtrl+H: åˆªé™¤æ¸¸æ¨™æ‰€åœ¨çš„å‰ä¸€å€‹å­—å…ƒ\nCtrl+U: åˆªé™¤æ¸¸æ¨™æ‰€åœ¨ä½ç½®ä¹‹å‰çš„æ‰€æœ‰å­—å…ƒ\nCtrl+K: åˆªé™¤æ¸¸æ¨™æ‰€åœ¨ä½ç½®ä¹‹å¾Œçš„æ‰€æœ‰å­—å…ƒï¼ˆå«æ¸¸æ¨™æ‰€åœ¨çš„å­—å…ƒ)\nCtrl+W: åˆªé™¤æ¸¸æ¨™æ‰€åœ¨çš„é€™å€‹ä¸€å€‹å­—ï¼ˆé™¤æ¸¸æ¨™æ‰€åœ¨çš„å­—å…ƒå¤–)\nCtrl+T: äº¤æ›æ¸¸æ¨™æ‰€åœ¨çš„å­—å…ƒèˆ‡å‰ä¸€å€‹å­—å…ƒä½ç½®\nAlt+T: äº¤æ›æ¸¸æ¨™æ‰€åœ¨çš„å­—èˆ‡å‰ä¸€å€‹å­—ä½ç½®\nAlt+U: å°‡æ¸¸æ¨™æ‰€åœ¨çš„å­—å¾æ¸¸æ¨™é–‹å§‹çš„å­—å…ƒèµ·è½‰æ›æˆå¤§å¯«\n History  Ctrl+R: ä»¥Key wordæ–¹å¼åå‘æœå°‹ History æŒ‡ä»¤","title":"Ubuntu çµ‚ç«¯æ©Ÿå¸¸ç”¨å¿«é€Ÿéµ"},{"content":"ç¶²é è£½ä½œæ™‚ï¼Œæ‰‹åˆ» HTML/CSS å³å‚·ç¥åˆå®¹æ˜“å‡ºéŒ¯ï¼Œè®“æˆ‘å€‘ä¾†çœ‹çœ‹ Emmet å¦‚ä½•å¿«é€Ÿåˆä¾¿æ·çš„å”åŠ©æˆ‘å€‘é€²è¡Œ HTML/CSS çš„è¼¸å…¥ã€‚\nElements è¼¸å…¥ div æŒ‰ä¸‹ Enter æˆ– Tab éµï¼Œè¼¸å…¥ innerHtml - abc å†æŒ‰ä¸‹ Ctrl+Enter éµ\n\u0026lt;div\u0026gt;abc\u0026lt;/div\u0026gt; è¼¸å…¥ p æŒ‰ä¸‹ Enter æˆ– Tab éµï¼Œè¼¸å…¥ innerHtml -abc å†æŒ‰ä¸‹ Ctrl+Enter éµ\n\u0026lt;p\u0026gt;abc\u0026lt;/p\u0026gt; Nesting operators Child: \u0026gt; div\u0026gt;ul\u0026gt;li\n\u0026lt;div\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; Sibling: + div+p+bq\n\u0026lt;div\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;p\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;blockquote\u0026gt;\u0026lt;/blockquote\u0026gt; Climb-up: ^ div+div\u0026gt;p\u0026gt;span+em\ndiv+div\u0026gt;p\u0026gt;span+em^bq\ndiv+div\u0026gt;p\u0026gt;span+em^^^bq\n\u0026lt;!-- div+div\u0026gt;p\u0026gt;span+em --\u0026gt; \u0026lt;div\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;p\u0026gt;\u0026lt;span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;em\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- div+div\u0026gt;p\u0026gt;span+em^bq --\u0026gt; \u0026lt;div\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;p\u0026gt;\u0026lt;span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;em\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;blockquote\u0026gt;\u0026lt;/blockquote\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- div+div\u0026gt;p\u0026gt;span+em^^^bq --\u0026gt; \u0026lt;div\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;p\u0026gt;\u0026lt;span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;em\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;blockquote\u0026gt;\u0026lt;/blockquote\u0026gt; Multiplication: * ul\u0026gt;li*5\n\u0026lt;ul\u0026gt; \u0026lt;li\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; Grouping: () div\u0026gt;(header\u0026gt;ul\u0026gt;li*2\u0026gt;a)+footer\u0026gt;p\n\u0026lt;div\u0026gt; \u0026lt;header\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;a href=\u0026quot;\u0026quot;\u0026gt;\u0026lt;/a\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/header\u0026gt; \u0026lt;footer\u0026gt; \u0026lt;p\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;/footer\u0026gt; \u0026lt;/div\u0026gt; (div\u0026gt;dl\u0026gt;(dt+dd)*3)+footer\u0026gt;p\n\u0026lt;div\u0026gt; \u0026lt;dl\u0026gt; \u0026lt;dt\u0026gt;\u0026lt;/dt\u0026gt; \u0026lt;dd\u0026gt;\u0026lt;/dd\u0026gt; \u0026lt;dt\u0026gt;\u0026lt;/dt\u0026gt; \u0026lt;dd\u0026gt;\u0026lt;/dd\u0026gt; \u0026lt;dt\u0026gt;\u0026lt;/dt\u0026gt; \u0026lt;dd\u0026gt;\u0026lt;/dd\u0026gt; \u0026lt;/dl\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;footer\u0026gt; \u0026lt;p\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;/footer\u0026gt; Attribute operators abbr#anId.aClass[style=color:blue; title=\u0026lsquo;Hypertext Markup Language\u0026rsquo;]{HTML}\n\u0026lt;abbr title=\u0026quot;Hypertext Markup Language\u0026quot; id=\u0026quot;anId\u0026quot; class=\u0026quot;aClass\u0026quot; style=\u0026quot;color:blue;\u0026quot; \u0026gt;HTML\u0026lt;/abbr \u0026gt; ID and CLASS div#header+div.page+div#footer.class1.class2.class3\n\u0026lt;div id=\u0026quot;header\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div class=\u0026quot;page\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div id=\u0026quot;footer\u0026quot; class=\u0026quot;class1 class2 class3\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; div.class1\n\u0026lt;div class=\u0026quot;class1\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; (header\u0026gt;ul.nav\u0026gt;li*5)+footer\n\u0026lt;header\u0026gt; \u0026lt;ul class=\u0026quot;nav\u0026quot;\u0026gt; \u0026lt;li\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/header\u0026gt; \u0026lt;footer\u0026gt;\u0026lt;/footer\u0026gt; Custome attributes td[title=\u0026ldquo;Hello world!\u0026rdquo; colspan=3]\n\u0026lt;td title=\u0026quot;Hello world!\u0026quot; colspan=\u0026quot;3\u0026quot;\u0026gt;\u0026lt;/td\u0026gt; a:blank\n\u0026lt;a href=\u0026quot;http://\u0026quot; target=\u0026quot;_blank\u0026quot; rel=\u0026quot;noopener noreferrer\u0026quot;\u0026gt;\u0026lt;/a\u0026gt; Item numbering: $ ul\u0026gt;li.item$*5\n\u0026lt;ul\u0026gt; \u0026lt;li class=\u0026quot;item1\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item2\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item3\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item4\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item5\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; ul\u0026gt;li.item$$$*5\n\u0026lt;ul\u0026gt; \u0026lt;li class=\u0026quot;item001\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item002\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item003\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item004\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item005\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; ul\u0026gt;li.item$@-*5\nè¨»: @-: è¡¨ç¤ºåå‘æ’åº\n\u0026lt;ul\u0026gt; \u0026lt;li class=\u0026quot;item5\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item4\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item3\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item2\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item1\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; ul\u0026gt;li.item$@3*5\n\u0026lt;ul\u0026gt; \u0026lt;li class=\u0026quot;item3\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item4\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item5\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item6\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item7\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; ul\u0026gt;li.item$@-3*5\n\" data-lang=\"\" \u0026lt;li class=\u0026quot;item7\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item6\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item5\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item4\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item3\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; ul\u0026gt;li.item${Item $@3}*5\n\u0026lt;ul\u0026gt; \u0026lt;li class=\u0026quot;item1\u0026quot;\u0026gt;Item 3\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item2\u0026quot;\u0026gt;Item 4\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item3\u0026quot;\u0026gt;Item 5\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item4\u0026quot;\u0026gt;Item 6\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item5\u0026quot;\u0026gt;Item 7\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; ul.my-list\u0026gt;(li.my-list-item#id-$$)*6\n\u0026lt;ul class=\u0026quot;my-list\u0026quot;\u0026gt; \u0026lt;li class=\u0026quot;my-list-item\u0026quot; id=\u0026quot;id-01\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;my-list-item\u0026quot; id=\u0026quot;id-02\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;my-list-item\u0026quot; id=\u0026quot;id-03\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;my-list-item\u0026quot; id=\u0026quot;id-04\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;my-list-item\u0026quot; id=\u0026quot;id-05\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;my-list-item\u0026quot; id=\u0026quot;id-06\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; Text: a{Click me}\n\u0026lt;!-- a{click}+b{here} --\u0026gt; \u0026lt;a href=\u0026quot;\u0026quot;\u0026gt;click\u0026lt;/a\u0026gt;\u0026lt;b\u0026gt;here\u0026lt;/b\u0026gt; \u0026lt;!-- a\u0026gt;{click}+b{here} --\u0026gt; \u0026lt;a href=\u0026quot;\u0026quot;\u0026gt;click\u0026lt;b\u0026gt;here\u0026lt;/b\u0026gt;\u0026lt;/a\u0026gt; \u0026lt;!-- p\u0026gt;{Click }+a{here}+{ to continue} --\u0026gt; \u0026lt;p\u0026gt;Click \u0026lt;a href=\u0026quot;\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt; to continue\u0026lt;/p\u0026gt; \u0026lt;!-- p{Click }+a{here}+{ to continue} --\u0026gt; \u0026lt;p\u0026gt;Click\u0026lt;/p\u0026gt; \u0026lt;a href=\u0026quot;\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt; to continue Implicit .class1\n\u0026lt;div class=\u0026quot;class1\u0026quot;\u0026gt;\u0026lt;/div\u0026gt; em\u0026gt;.class1\n\u0026lt;em\u0026gt;\u0026lt;span class=\u0026quot;class1\u0026quot;\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;/em\u0026gt; ul\u0026gt;.class1\n\u0026lt;ul\u0026gt; \u0026lt;li class=\u0026quot;class1\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; table\u0026gt;.row\u0026gt;.col\n\u0026lt;table\u0026gt; \u0026lt;tr class=\u0026quot;row\u0026quot;\u0026gt; \u0026lt;td class=\u0026quot;col\u0026quot;\u0026gt;\u0026lt;/td\u0026gt; \u0026lt;/tr\u0026gt; \u0026lt;/table\u0026gt; Forms \u0026amp; Inputs form:get\n\u0026lt;form action=\u0026quot;\u0026quot; method=\u0026quot;get\u0026quot;\u0026gt;\u0026lt;/form\u0026gt; form:post\n\u0026lt;form action=\u0026quot;\u0026quot; method=\u0026quot;post\u0026quot;\u0026gt;\u0026lt;/form\u0026gt; Lorem lpsum lorem\nlorem20\nul.mylist\u0026gt;lorem4.item*5\n\u0026lt;ul class=\u0026quot;mylist\u0026quot;\u0026gt; \u0026lt;li\u0026gt;Lorem ipsum dolor sit.\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;Repellendus iusto debitis vel.\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;Aperiam similique architecto odio!\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;Exercitationem iusto nesciunt maxime.\u0026lt;/li\u0026gt; \u0026lt;li\u0026gt;Minus reiciendis eaque nemo?\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; p*4\u0026gt;lorem4\n\u0026lt;p\u0026gt;Lorem ipsum dolor sit.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;Accusantium odit nostrum modi.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;Consequatur soluta voluptatibus amet.\u0026lt;/p\u0026gt; \u0026lt;p\u0026gt;Molestiae quo a asperiores!\u0026lt;/p\u0026gt; Advanced Structures p\u0026gt;{Click }+a{here}+{ to continue}\n\u0026lt;p\u0026gt;Click \u0026lt;a href=\u0026quot;\u0026quot;\u0026gt;here\u0026lt;/a\u0026gt; to continue\u0026lt;/p\u0026gt; CSS Abbreviations body { /* c#000 */ color: #000; /* c#f */ color: #fff; /* c#f4 */ color: #f4f4f4; /* p10 */ padding: 10px; /* default pixel */ /* p10% or p10p */ padding: 10%; /* p10r */ padding: 10rem; /* pr10 */ padding-right: 10px; /* pl10 pt10 pb10 */ padding-left: 10px; padding-top: 10px; padding-bottom: 10px; /* m20 ml20 mt20 mb20*/ margin: 20px; margin-left: 20px; margin-top: 20px; margin-bottom: 2%; /* t10 b10 db di dib */ top: 10px; bottom: 10px; display: block; display: inline; display: inline-block; /* w300 taj dn df*/ width: 300px; text-align: justify; display: none; display: flex; /* ff ffa fft ffv*/ font-family: serif; /* default font: serif */ font-family: Arial, \u0026#34;Helvetica Neue\u0026#34;, Helvetica, sans-serif; font-family: \u0026#34;Times New Roman\u0026#34;, Times, Baskerville, Georgia, serif; font-family: Verdana, Geneva, sans-serif; /* fwb fw700 fsi fsn fso */ font-weight: bold; font-weight: 700; font-style: italic; font-style: normal; font-style: oblique; /* fz2e */ font-size: 2em; /* pr15+ml10 */ padding-right: 15px; margin-left: 10px; } Custom Snippets å…ˆè¨­å®š Emmet Snippets è¦å­˜æ”¾çš„ç›®éŒ„ (å¦‚: f:\\emmet )\nåœ¨è©²ç›®éŒ„ä¸‹å»ºç«‹ä¸€å€‹åç‚º snippets.json æª”æ¡ˆï¼Œå…§å®¹å¦‚ä¸‹\n{ \u0026#34;html\u0026#34;: { \u0026#34;snippets\u0026#34;: { \u0026#34;nl\u0026#34;: \u0026#34;nav.main-nav\u0026gt;ul\u0026gt;li.item$*4\u0026#34;, \u0026#34;ull\u0026#34;: \u0026#34;ul\u0026gt;li[id=${1} class=${2}]*2\u0026#34; } }, \u0026#34;css\u0026#34;: { \u0026#34;snippets\u0026#34;: { \u0026#34;cb\u0026#34;: \u0026#34;color: black\u0026#34;, \u0026#34;bsd\u0026#34;: \u0026#34;border: 1px solid ${1:red}\u0026#34; } } } è¨»:\n ${1} è¡¨ç¤ºç‚ºç¬¬ä¸€å€‹æ¸¸æ¨™åœé§çš„åœ°æ–¹ï¼Œå¯ç›´æ¥é€²è¡Œ id è¼¸å…¥, ç•¶æŒ‰ä¸‹ Tab éµå¾Œï¼Œæ¸¸æ¨™æœƒè‡ªå‹•åœé§åœ¨ ${2} çš„åœ°æ–¹ï¼Œæ–¹ä¾¿è¼¸å…¥ class nameã€‚ ${1:red} å…¶ä¸­çš„ red è¡¨ç¤ºæ˜¯é è¨­å€¼ã€‚  å­˜æª”å¾Œé‡æ–°å•Ÿå‹• VS Code\n\u0026lt;!-- åœ¨ html æ¨˜ä¸­è¼ªå…¥ nl æŒ‰ä¸‹ Tab éµ --\u0026gt; \u0026lt;nav class=\u0026quot;main-nav\u0026quot;\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li class=\u0026quot;item1\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item2\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item3\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li class=\u0026quot;item4\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/nav\u0026gt; \u0026lt;!-- ull --\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li id=\u0026quot;\u0026quot; class=\u0026quot;\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;li id=\u0026quot;\u0026quot; class=\u0026quot;\u0026quot;\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; /* cb */ color: black; /* bsd */ border: 1px solid red; ","permalink":"https://calvinegs.github.io/posts/emmet-syntax/","summary":"ç¶²é è£½ä½œæ™‚ï¼Œæ‰‹åˆ» HTML/CSS å³å‚·ç¥åˆå®¹æ˜“å‡ºéŒ¯ï¼Œè®“æˆ‘å€‘ä¾†çœ‹çœ‹ Emmet å¦‚ä½•å¿«é€Ÿåˆä¾¿æ·çš„å”åŠ©æˆ‘å€‘é€²è¡Œ HTML/CSS çš„è¼¸å…¥ã€‚\nElements è¼¸å…¥ div æŒ‰ä¸‹ Enter æˆ– Tab éµï¼Œè¼¸å…¥ innerHtml - abc å†æŒ‰ä¸‹ Ctrl+Enter éµ\n\u0026lt;div\u0026gt;abc\u0026lt;/div\u0026gt; è¼¸å…¥ p æŒ‰ä¸‹ Enter æˆ– Tab éµï¼Œè¼¸å…¥ innerHtml -abc å†æŒ‰ä¸‹ Ctrl+Enter éµ\n\u0026lt;p\u0026gt;abc\u0026lt;/p\u0026gt; Nesting operators Child: \u0026gt; div\u0026gt;ul\u0026gt;li\n\u0026lt;div\u0026gt; \u0026lt;ul\u0026gt; \u0026lt;li\u0026gt;\u0026lt;/li\u0026gt; \u0026lt;/ul\u0026gt; \u0026lt;/div\u0026gt; Sibling: + div+p+bq\n\u0026lt;div\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;p\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;blockquote\u0026gt;\u0026lt;/blockquote\u0026gt; Climb-up: ^ div+div\u0026gt;p\u0026gt;span+em\ndiv+div\u0026gt;p\u0026gt;span+em^bq\ndiv+div\u0026gt;p\u0026gt;span+em^^^bq\n\u0026lt;!-- div+div\u0026gt;p\u0026gt;span+em --\u0026gt; \u0026lt;div\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;p\u0026gt;\u0026lt;span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;em\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- div+div\u0026gt;p\u0026gt;span+em^bq --\u0026gt; \u0026lt;div\u0026gt;\u0026lt;/div\u0026gt; \u0026lt;div\u0026gt; \u0026lt;p\u0026gt;\u0026lt;span\u0026gt;\u0026lt;/span\u0026gt;\u0026lt;em\u0026gt;\u0026lt;/em\u0026gt;\u0026lt;/p\u0026gt; \u0026lt;blockquote\u0026gt;\u0026lt;/blockquote\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!","title":"é€éç¯„ä¾‹å­¸ç¿’ Emmet èªæ³•"},{"content":"ä½¿ç”¨ Typescript ä¾†é–‹ç™¼å‰ç«¯æ‡‰ç”¨ç¨‹å¼å·²æ˜¯ä¸€å€‹è¶¨å‹¢ï¼Œé€™ç¯‡ç­†è¨˜æ˜¯ç”¨ä¾†ç´€éŒ„å¦‚ä½•ç”¨ Parcel.js ä¾†å»ºç½®ä¸€å€‹ç°¡æ½”åˆæœ‰å½ˆæ€§çš„é–‹ç™¼ç’°å¢ƒç”¨ä¾†å­¸ç¿’ Typescriptã€‚\nä½¿ç”¨çš„å·¥å…· \u0026amp; ä½œæ¥­ç³»çµ±  git vscode Mint 20.2 (ä½œæ¥­ç³»çµ±)  å°ˆæ¡ˆåˆå§‹åŒ– $ mkdir parcel_ts \u0026amp;\u0026amp; cd parcel_ts # å»ºç«‹å°ˆæ¡ˆç›®éŒ„ $ npm init -y # åˆå§‹åŒ–å°ˆæ¡ˆç›®éŒ„ $ touch Startup.ts Employee.ts index.html # æ–°å¢ä¸‰å€‹ç©ºç™½ç¨‹å¼æª” $ npm install --save-dev parcel parcel-bundler # å®‰è£ parcel \u0026amp; parcel-bundler $ code . # é–‹å•Ÿ vs code åœ¨ package.json ä¸­å»ºç«‹åŸ·è¡Œç¨‹å¼çš„ script \u0026#34;script\u0026#34;: { \u0026#34;dev\u0026#34;: \u0026#34;parcel index.html\u0026#34; } ä½¿ç”¨ Typescript æ’°å¯«ç¨‹å¼  Employee.ts\n export class Employee { constructor( private name: string = \u0026#34;no name\u0026#34;, private department: string = \u0026#34;no department\u0026#34; ) {} displayInfo(): string { return `${this.name}department is ${this.department}`; } }  Startup.ts\n import { Employee } from \u0026#34;./Employee\u0026#34;; window.onload = () =\u0026gt; { let information = document.querySelector(\u0026#34;#info\u0026#34;); const employee = new Employee(\u0026#34;Dany Green\u0026#34;, \u0026#34;Market\u0026#34;); if (employee) information.innerHTML = employee.displayInfo(); };  index.html\n \u0026lt;!-- ! : è¼¸å…¥ \u0026#34;!\u0026#34; æŒ‰ä¸‹ Tab æˆ– Enteréµï¼ŒEmmet å°‡è‡ªå‹•å»ºç«‹ html5 æ¨£ç‰ˆæª”æ¡ˆ--\u0026gt; \u0026lt;!-- é€é Tab éµå¯å¿«é€Ÿè·³è‡³ \u0026lt;title\u0026gt;\u0026lt;/title\u0026gt; --\u0026gt; \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34; /\u0026gt; \u0026lt;meta http-equiv=\u0026#34;X-UA-Compatible\u0026#34; content=\u0026#34;IE=edge\u0026#34; /\u0026gt; \u0026lt;meta name=\u0026#34;viewport\u0026#34; content=\u0026#34;width=device-width, initial-scale=1.0\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;What\u0026#39;s up\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;!-- ç›´æ¥è¼¸å…¥ä»¥ä¸‹ Emmet èªæ³•: div[name=\u0026#34;container\u0026#34;]\u0026gt;h2#info, å³å¯ç”£ç”Ÿä»¥ä¸‹ Html div å…§å®¹--\u0026gt; \u0026lt;div name=\u0026#34;container\u0026#34;\u0026gt; \u0026lt;h2 id=\u0026#34;info\u0026#34;\u0026gt;\u0026lt;/h2\u0026gt; \u0026lt;/div\u0026gt; \u0026lt;!-- ç›´æ¥è¼¸å…¥ä»¥ä¸‹ Emmet èªæ³•: script[type=\u0026#34;module\u0026#34; src=\u0026#34;Startup.ts\u0026#34;] , å³å¯ç”£ç”Ÿä»¥ä¸‹ Html script å…§å®¹--\u0026gt; \u0026lt;script type=\u0026#34;module\u0026#34; src=\u0026#34;Startup.ts\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; è¨»: å¯åƒè€ƒå¦ä¸€ç·¨ç­†è¨˜æ˜¯ç´€éŒ„å¦‚ä½•ä½¿ç”¨ Emmet èªæ³• é€éç¯„ä¾‹å­¸ç¿’ Emmet èªæ³•\nåŸ·è¡Œç¨‹å¼ $ npm run dev \u0026gt; parcel_ts@1.0.0 dev \u0026gt; parcel index.html Server running at http://localhost:1234 âœ¨ Built in 22ms Typescript è½‰è­¯æˆ Javascript  ç¨‹å¼åŸ·è¡Œå¾Œï¼Œå¯ç™¼ç¾åœ¨ dist ç›®éŒ„ä¸‹ï¼ŒParcel.js å·²ç¶“è‡ªå‹•çš„ Typescript ç¨‹å¼è½‰è­¯æˆ Javascript äº†ã€‚  åŒæ™‚ä¹ŸæŠŠ HTML æª”æ¡ˆä¸­çš„ .ts è‡ªå‹•çš„è½‰æˆ .js é™¤éŒ¯  æŒ‰ä¸‹å¿«é€Ÿéµ Ctrl+Shift+D å«å‡º \u0026ldquo;Run and Debug\u0026rdquo; åŠŸèƒ½ï¼Œé»é¸ create a launch.sjon file   é»é¸ \u0026ldquo;Edge: Launch\u0026rdquo;   è‡ªå‹•ç”£ç”Ÿ launch.sjon\n { // Use IntelliSense to learn about possible attributes.  // Hover to view descriptions of existing attributes.  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387  \u0026#34;version\u0026#34;: \u0026#34;0.2.0\u0026#34;, \u0026#34;configurations\u0026#34;: [ { \u0026#34;type\u0026#34;: \u0026#34;pwa-msedge\u0026#34;, \u0026#34;request\u0026#34;: \u0026#34;launch\u0026#34;, \u0026#34;name\u0026#34;: \u0026#34;Launch Edge against localhost\u0026#34;, \u0026#34;url\u0026#34;: \u0026#34;http://localhost:8080\u0026#34;, // 8080 æ”¹æˆ 1234  \u0026#34;webRoot\u0026#34;: \u0026#34;${workspaceFolder}\u0026#34; } ] }  å…ˆå°‡ \u0026ldquo;url\u0026rdquo;: \u0026ldquo;http://localhost:8080\u0026rdquo; Port æ”¹æˆ1234,ï¼Œä¸¦åœ¨æª”æ¡ˆå°¾éƒ¨åŠ å…¥ä»¥ä¸‹è¨­å®šï¼Œä¸¦å­˜æª”ã€‚\n \u0026#34;breakOnLoad\u0026#34;: true, \u0026#34;sourceMapPathOverrides\u0026#34;: { \u0026#34;../*\u0026#34;: \u0026#34;${webRoot}/*\u0026#34; }  å†æ¬¡æŒ‰ä¸‹å¿«é€Ÿéµ Ctrl+Shift+D å«å‡º \u0026ldquo;Run and Debug\u0026rdquo; åŠŸèƒ½ï¼Œ ä¸‹æ‹‰é¸å–®ä¸­é¸æ“‡ â€œLaunch Edge against localhost\u0026quot;ã€‚åœ¨ Source code ä¸­è¨­å®šä¸­æ–·é»ï¼Œå†ä»¥æ»‘é¼ é»é¸å³é‚Šçš„ç¶ è‰²ä¸‰è§’å‹æŒ‰éµï¼Œé–‹å§‹é€²è¡Œé™¤éŒ¯ã€‚VSCode æœƒè‡ªå‹•å•Ÿå‹• edge ç€è¦½å™¨ï¼ŒåŒæ™‚ç¨‹å¼æœƒæš«åœåœ¨ä¸­æ–·é»è™•ã€‚  çµè«–  ä½ æœƒç™¼ç¾é€é Parcel çš„å¹«åŠ©ï¼Œç•¶ä½¿ç”¨ Typescript ä¾†æ’°å¯« ç¶²ç«™ç¨‹å¼å³æ–¹ä¾¿åˆå¿«é€Ÿã€‚\n ","permalink":"https://calvinegs.github.io/posts/parcel-typescript/","summary":"ä½¿ç”¨ Typescript ä¾†é–‹ç™¼å‰ç«¯æ‡‰ç”¨ç¨‹å¼å·²æ˜¯ä¸€å€‹è¶¨å‹¢ï¼Œé€™ç¯‡ç­†è¨˜æ˜¯ç”¨ä¾†ç´€éŒ„å¦‚ä½•ç”¨ Parcel.js ä¾†å»ºç½®ä¸€å€‹ç°¡æ½”åˆæœ‰å½ˆæ€§çš„é–‹ç™¼ç’°å¢ƒç”¨ä¾†å­¸ç¿’ Typescriptã€‚\nä½¿ç”¨çš„å·¥å…· \u0026amp; ä½œæ¥­ç³»çµ±  git vscode Mint 20.2 (ä½œæ¥­ç³»çµ±)  å°ˆæ¡ˆåˆå§‹åŒ– $ mkdir parcel_ts \u0026amp;\u0026amp; cd parcel_ts # å»ºç«‹å°ˆæ¡ˆç›®éŒ„ $ npm init -y # åˆå§‹åŒ–å°ˆæ¡ˆç›®éŒ„ $ touch Startup.ts Employee.ts index.html # æ–°å¢ä¸‰å€‹ç©ºç™½ç¨‹å¼æª” $ npm install --save-dev parcel parcel-bundler # å®‰è£ parcel \u0026amp; parcel-bundler $ code . # é–‹å•Ÿ vs code åœ¨ package.json ä¸­å»ºç«‹åŸ·è¡Œç¨‹å¼çš„ script \u0026#34;script\u0026#34;: { \u0026#34;dev\u0026#34;: \u0026#34;parcel index.html\u0026#34; } ä½¿ç”¨ Typescript æ’°å¯«ç¨‹å¼  Employee.","title":"ä½¿ç”¨ Parcel.js + Typescript ä¾†å»ºç½®ä¸€å€‹ Web App"},{"content":"ç•¶å·²æœ‰ç¾å­˜çš„è³‡æ–™åº«(æ­¤ä»¥ Oracle ç‚ºä¾‹)ä¸¦ä¸”å­˜åœ¨æœ‰æ­·å²è³‡æ–™ï¼Œæˆ–èˆ‡å…¶ä»–ç³»çµ±å…±ç”¨è³‡æ–™åº«ï¼Œåœ¨é€™å‰é¡Œä¸‹ï¼Œé€šå¸¸ç„¡æ³•éš¨æ„çš„å»æ›´æ”¹è³‡æ–™åº«çµæ§‹ï¼Œé€™æ™‚è‹¥è¦æ¡ç”¨ Entity Framework æ¶æ§‹å°±å®¹æ˜“é‡åˆ°è³‡æ–™åº«çµæ§‹æ­£è¦åŒ–çš„å•é¡Œã€‚å¦ä¸€ç¨®æƒ…å¢ƒæ˜¯ï¼ŒèˆŠç³»çµ±ä½¿ç”¨äº†éå¸¸çš„SQLèªæ³•ï¼Œè¦å°‡é€™äº›é‚è¼¯\u0026quot;ç¿»è­¯\u0026quot;æˆåˆç†çš„ Entity Framework æ¶æ§‹æœ‰æŠ€è¡“ä¸Šæˆ–æ™‚é–“ä¸Šçš„é™åˆ¶æ™‚ï¼Œå°±æœƒè€ƒæ…®ä½¿ç”¨ Dapper é€™å€‹è¼•é‡çš„ ORM æ­é…ä¸Š SQL èªæ³•ã€‚\nä½¿ç”¨ dotnet cli å»ºç«‹å°ˆæ¡ˆ $ dotnet new webapi -o OracleDapperRepository \u0026amp;\u0026amp; cd OracleDapperRepository $ dotnet build $ dotnet run $ dotnet new gitignore $ git init \u0026amp;\u0026amp; git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Initial commit\u0026#34; å®‰è£ç›¸ä¾å¥—ä»¶ $ dotnet add package Dapper --2.0.123 # åŠ å…¥ Dapper package $ dotnet add package Oracle.ManagedDataAccess.Core --3.21.50 # åŠ å…¥ é€£çµ Oracle package $ git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Add Dapper \u0026amp; Oracle Data Access NuGet packages\u0026#34; æŸ¥çœ‹ csproj æª”æ¡ˆä¸­ä½¿ç”¨çš„ç›¸é—œå¥—ä»¶\n`$ cat OracleDapperRepository.csproj'\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  \u0026lt;Project Sdk=\u0026#34;Microsoft.NET.Sdk.Web\u0026#34;\u0026gt; \u0026lt;PropertyGroup\u0026gt; \u0026lt;TargetFramework\u0026gt;net6.0\u0026lt;/TargetFramework\u0026gt;  \u0026lt;Nullable\u0026gt;enable\u0026lt;/Nullable\u0026gt; \u0026lt;ImplicitUsings\u0026gt;enable\u0026lt;/ImplicitUsings\u0026gt; \u0026lt;/PropertyGroup\u0026gt; \u0026lt;ItemGroup\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Dapper\u0026#34; Version=\u0026#34;2.0.123\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Oracle.ManagedDataAccess.Core\u0026#34; Version=\u0026#34;3.21.50\u0026#34; /\u0026gt; \u0026lt;PackageReference Include=\u0026#34;Swashbuckle.AspNetCore\u0026#34; Version=\u0026#34;6.2.3\u0026#34; /\u0026gt;  \u0026lt;/ItemGroup\u0026gt; \u0026lt;/Project\u0026gt;   è¨­å®š Connection string æ‰“é–‹ VS Codeï¼Œåœ¨ appsettings.json æª”æ¡ˆä¸­åŠ å…¥ Connection String\n{ \u0026#34;ConnectionStrings\u0026#34;: { \u0026#34;OracleConnection\u0026#34;:\u0026#34;Data Source=192.0.0.1/ORCLCDB;User ID=username;Password=password\u0026#34; }, //... } å°ˆæ¡ˆå®Œæˆå¾Œçš„æª”æ¡ˆçµæ§‹ ./å°ˆæ¡ˆç›®éŒ„ â”œâ”€â”€ .config/ â”‚ â””â”€â”€ dotnet-tools.json â”œâ”€â”€ .vscode/ â”‚ â”œâ”€â”€ launch.js â”‚ â””â”€â”€ tasks.json â”œâ”€â”€ Controller/ â”‚ â”œâ”€â”€ SysmstafController.cs â”‚ â””â”€â”€ WeatherForecast.cs â”œâ”€â”€ Models/ â”‚ â””â”€â”€ sysmstaf.cs â”œâ”€â”€ obj/ â”œâ”€â”€ Properties/ â”‚ â””â”€â”€ launchSettings.json â”œâ”€â”€ Repositories/ â”‚ â”œâ”€â”€ Interfaces/ â”‚ â”‚ â””â”€â”€ ISysmstafRepository.cs â”‚ â””â”€â”€ SysmstafRepository.cs â”œâ”€â”€ .gitignore â”œâ”€â”€ appsettings.json â”œâ”€â”€ OracleDapperRepository.csproj â”œâ”€â”€ Program.cs â”œâ”€â”€ README.md â””â”€â”€ WeatherForecast.cs å°ˆæ¡ˆå®Œæˆå¾Œæ‰€æä¾›çš„ API ç«¯é»    Methods Urls Actions     POST /api/Sysmstaf/StaffId/:id ä½¿ç”¨å“¡å·¥ç·¨è™ŸæŸ¥è©¢å“¡å·¥è³‡æ–™   POST /api/Sysmstaf/LoginId/:id ä½¿ç”¨ç™»éŒ„ç·¨è™ŸæŸ¥è©¢å“¡å·¥è³‡æ–™   POST /api/Sysmstaf/GetDatas å–å¾—æ‰€æœ‰å“¡å·¥è³‡æ–™   GET /api/Sysmstaf/GetAllData å–å¾—æ‰€æœ‰å“¡å·¥è³‡æ–™    å»ºç½®å°ˆæ¡ˆä¸­ç›®éŒ„çµæ§‹èˆ‡ç¨‹å¼ åœ¨å°ˆæ¡ˆç›®éŒ„ä¸­æ–°å¢ Models/ å’Œ Repositories/ äºŒå€‹ç›®éŒ„ï¼Œä¸¦åœ¨ Repositories/ ç›®éŒ„ä¸‹å»ºç«‹ä¸€å€‹ Interfaces/ å­ç›®éŒ„\nåœ¨ Models/ è³‡æ–™å¤¾ä¸­æ–°å¢ Data Model æ–°å¢ Model class: Models\\sysmstaf.cs\nnamespace OracleDapperRepository.Models { public class sysmstaf { public string? STAFF_ID { get; set; } public int ROLE_ID { get; set; } public string? PASS_TX { get; set; } public string? LOGIN_TX { get; set; } } } åœ¨ Repositories/Interfaces/ ç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹ ISysmstafRepository.cs Interface file using OracleDapperRepository.Models; namespace OracleDapperRepository.Repositories.Interfaces { public interface ISysmstafRepository { Task\u0026lt;sysmstaf\u0026gt; GetByStaffID(string staffId); Task\u0026lt;sysmstaf\u0026gt; GetByLoginID(string loginID); Task\u0026lt;IEnumerable\u0026lt;sysmstaf\u0026gt;\u0026gt; GetAllData(); } } åœ¨ Repositories/ ç›®éŒ„ä¸‹æ–°å¢ SysmstafRepository.cs using System.Data; using Dapper; using Oracle.ManagedDataAccess.Client; using OracleDapperRepository.Models; using OracleDapperRepository.Repositories.Interfaces; namespace OracleDapperRepository.Repositories { public class SysmstafRepository : ISysmstafRepository { private readonly string _connectionString; public SysmstafRepository(string connectionStr) { _connectionString = connectionStr; } public IDbConnection Connection { get { return new OracleConnection(_connectionString); } } public async Task\u0026lt;sysmstaf\u0026gt; GetByLoginID(string loginID) { using (IDbConnection conn = Connection) { string sSQL = \u0026#34;select * from sysmstaf where login_tx= :LOGIN_ID\u0026#34;; return await conn.QueryFirstOrDefaultAsync\u0026lt;sysmstaf\u0026gt;(sSQL, new { LOGIN_ID = loginID }); } } public async Task\u0026lt;sysmstaf\u0026gt; GetByStaffID(string staffId) { using (IDbConnection conn = Connection) { string sSQL = \u0026#34;select * from sysmstaf where staff_id= :STAFF_ID\u0026#34;; return await conn.QueryFirstOrDefaultAsync\u0026lt;sysmstaf\u0026gt;(sSQL, new { STAFF_ID = staffId }); } } public async Task\u0026lt;IEnumerable\u0026lt;sysmstaf\u0026gt;\u0026gt; GetAllData() { using (IDbConnection conn = Connection) { string sSql = \u0026#34;select * from sysmstaf Order by login_tx\u0026#34;; var result = await conn.QueryAsync\u0026lt;sysmstaf\u0026gt;(sSql); return result.ToList(); } } } } åœ¨ Controllers/ ç›®éŒ„ä¸‹æ–°å¢ SysmstafController.cs using Microsoft.AspNetCore.Mvc; using OracleDapperRepository.Models; using OracleDapperRepository.Repositories.Interfaces; namespace OracleDapperRepository.Controllers { [Route(\u0026#34;api/[controller]\u0026#34;)] [ApiController] public class SysmstafController : ControllerBase { private readonly ISysmstafRepository _sysmstafRepo; public SysmstafController(ISysmstafRepository sysmstafRepo) { _sysmstafRepo = sysmstafRepo; } [HttpGet] [Route(\u0026#34;StaffId/{staffId}\u0026#34;)] public async Task\u0026lt;ActionResult\u0026lt;sysmstaf\u0026gt;\u0026gt; GetByStaffID(string staffId) { return await _sysmstafRepo.GetByStaffID(staffId); } [HttpGet] [Route(\u0026#34;LoginId/{loginId}\u0026#34;)] public async Task\u0026lt;ActionResult\u0026lt;sysmstaf\u0026gt;\u0026gt; GetByLoginID(string loginId) { return await _sysmstafRepo.GetByLoginID(loginId); } [HttpGet] [Route(\u0026#34;GetAllData\u0026#34;)] public async Task\u0026lt;IEnumerable\u0026lt;sysmstaf\u0026gt;\u0026gt; GetAllData() { return await _sysmstafRepo.GetAllData(); ; } } } åœ¨ Program.cs ä¸­å°‡ SysmstafRepository æ³¨å…¥ Container ä¸­ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  using OracleDapperRepository.Repositories; using OracleDapperRepository.Repositories.Interfaces; var builder = WebApplication.CreateBuilder(args); string ConnectionString = builder.Configuration.GetConnectionString(\u0026#34;OracleConnection\u0026#34;); // å–å¾— appsettings.json ä¸­çš„ ConnectionStrings è¨­å®šå€¼  // Add services to the container. builder.Services.AddTransient\u0026lt;ISysmstafRepository\u0026gt;(x =\u0026gt; new SysmstafRepository(ConnectionString)); // å°‡  builder.Services.AddControllers(); // Learn more about configuring Swagger/OpenAPI at https://aka.ms/aspnetcore/swashbuckle builder.Services.AddEndpointsApiExplorer(); builder.Services.AddSwaggerGen(); var app = builder.Build(); // ...   é€é swagger (OpenAPI) ä¾†çœ‹çµæœ å•Ÿå‹•ç¨‹å¼ä¾†æ¸¬è©¦åŸ·è¡Œçµæœ $ dotnet watch\ngithub Source code #tag: dapper_oracle\n","permalink":"https://calvinegs.github.io/posts/dotnet6-webapi-oracle-dapper/","summary":"ç•¶å·²æœ‰ç¾å­˜çš„è³‡æ–™åº«(æ­¤ä»¥ Oracle ç‚ºä¾‹)ä¸¦ä¸”å­˜åœ¨æœ‰æ­·å²è³‡æ–™ï¼Œæˆ–èˆ‡å…¶ä»–ç³»çµ±å…±ç”¨è³‡æ–™åº«ï¼Œåœ¨é€™å‰é¡Œä¸‹ï¼Œé€šå¸¸ç„¡æ³•éš¨æ„çš„å»æ›´æ”¹è³‡æ–™åº«çµæ§‹ï¼Œé€™æ™‚è‹¥è¦æ¡ç”¨ Entity Framework æ¶æ§‹å°±å®¹æ˜“é‡åˆ°è³‡æ–™åº«çµæ§‹æ­£è¦åŒ–çš„å•é¡Œã€‚å¦ä¸€ç¨®æƒ…å¢ƒæ˜¯ï¼ŒèˆŠç³»çµ±ä½¿ç”¨äº†éå¸¸çš„SQLèªæ³•ï¼Œè¦å°‡é€™äº›é‚è¼¯\u0026quot;ç¿»è­¯\u0026quot;æˆåˆç†çš„ Entity Framework æ¶æ§‹æœ‰æŠ€è¡“ä¸Šæˆ–æ™‚é–“ä¸Šçš„é™åˆ¶æ™‚ï¼Œå°±æœƒè€ƒæ…®ä½¿ç”¨ Dapper é€™å€‹è¼•é‡çš„ ORM æ­é…ä¸Š SQL èªæ³•ã€‚\nä½¿ç”¨ dotnet cli å»ºç«‹å°ˆæ¡ˆ $ dotnet new webapi -o OracleDapperRepository \u0026amp;\u0026amp; cd OracleDapperRepository $ dotnet build $ dotnet run $ dotnet new gitignore $ git init \u0026amp;\u0026amp; git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Initial commit\u0026#34; å®‰è£ç›¸ä¾å¥—ä»¶ $ dotnet add package Dapper --2.0.123 # åŠ å…¥ Dapper package $ dotnet add package Oracle.ManagedDataAccess.Core --3.21.50 # åŠ å…¥ é€£çµ Oracle package $ git add .","title":"ASP.NET Core 6 Web API ä½¿ç”¨ Dapper ORM é€£çµ Oracle"},{"content":"   çµ„åˆéµ èªªæ˜     Ctrl+K F Close folder   Ctrl+K Ctrl+O Open folder   Ctrl+R Open Project (é€éæ­·å²è¨˜éŒ„æ¸…å–®)   Ctrl+Shift+E Explorer / Editor é–“çš„ç„¦é»åˆ‡æ›   Ctrl+0 Focus Side Bar å°‡ç„¦é»åˆ‡æ›è‡³ Side Bar   Ctrl+B é¡¯ç¤º/éš è”µ Side Bar   Ctrl+[1~9] åœ¨ Editor Groups é–“ç„¦é»åˆ‡æ›   Ctrl+Enter åœ¨ æ–° Group ä¸­æ‰“é–‹æ–°æŒ‡å®šæª”æ¡ˆ   Ctrl+\\ æ‹†åˆ†ç·¨è¼¯è¦–çª—   Ctrl+K Ctrl+\\ åœ¨æ–° Group ä¸­(åœ¨ç¾åœ¨ Group çš„ä¸‹æ–¹)æ‰“é–‹æ¸¸æ¨™åœ¨çš„æª”æ¡ˆ   Ctrl+F4 or Crtl+W Close Editor   Ctrl+Alt+â†â†’ åœ¨ Groups é–“ç§»å‹•æª”æ¡ˆ   Ctrl+Shift+PgUp/PgDn åœ¨åŒä¸€å€‹ Group ä¸­ç§»å‹•ç›®å‰çš„ editor åˆ°å·¦/å³é‚Š   Ctrl+PgDn/PgUp åœ¨ Tabs é–“çš„ç„¦é»åˆ‡æ›(è·¨ Groups)   Ctrl+Tab åœ¨åŒä¸€å€‹ Group åœ¨å·²é–‹å•Ÿçš„æª”æ¡ˆæ¸…å–®ä¸­åˆ‡æ›(å¾€ä¸‹)   Ctrl+Shift+Tab åœ¨åŒä¸€å€‹ Groupåœ¨å·²é–‹å•Ÿçš„æª”æ¡ˆæ¸…å–®ä¸­åˆ‡æ›(å¾€ä¸Š)   Ctrl+K Ctrl+C è¨»è§£æ¸¸æ¨™åœ¨çš„é€™è¡Œ   Ctrl+Shift+\\ æ‰¾åˆ°å°æ‡‰çš„æ‹¬å¼§   Ctrl+K Ctrl+U ç§»é™¤è¨»è§£ (æ¸¸æ¨™åœ¨çš„é€™è¡Œ)   Ctrl+/ åœ¨ \u0026ldquo;è¨»è§£/ç§»é™¤è¨»è§£\u0026rdquo; é–“åˆ‡æ› (æ¸¸æ¨™åœ¨çš„é€™è¡Œ)   Shift+Alt+A åˆ‡æ›å€å¡Šè¨»è§£ (é‡å°è¢«é¸æ“‡çš„ç¨‹å¼ç¢¼)   Shift+Alt+F å°‡æª”æ¡ˆä¸­ç¨‹å¼ç¢¼æ ¼å¼åŒ–   Ctrl+K Ctrl+F å°‡è¢«é¸å–çš„ç¨‹å¼ç¢¼æ ¼å¼åŒ–   Ctrl+L å…¨é¸æ•´è¡Œ (é‡è¦†å‰‡å¯å¾€ä¸‹é¸æ“‡å¤šè¡Œ)   Ctrl+X æˆ– Ctrl+Shift+K åˆªé™¤ä¸€è¡Œ   Ctrl + backspace åˆªé™¤æ¸¸æ¨™å‰çš„å­—å¥   Ctrl+K Ctrl+X åˆªé™¤è¡Œå°¾çš„ç©ºç™½å­—å…ƒ   Ctrl+, Settings é¡¯ç¤ºè¨­å®šåŠŸèƒ½   Ctrl+K V é¡¯ç¤º/éš±è— Markdown file çš„ Preview åŠŸèƒ½   Alt+[1~9] åœ¨Group ä¸­ Tabs é–“ä½œç„¦é»åˆ‡æ›   Alt+0 ç§»è‡³åŒä¸€å€‹ Group ä¸­æœ€å¾Œä¸€å€‹ editor Tab   Alt+Shift+0 åˆ‡æ› Groups æˆç‚ºä¸¦åˆ—æˆ–ä¸¦æ’   Ctrl+Shift+P Show Command Palette   Ctrl+P Open File   Ctrl+K Ctrl+S Keyboard Shortcuts   Ctrl+K S Save All Files   Ctrl+N New File   Ctrl+K Ctrl+W é—œé–‰æ‰€æœ‰é–‹å•Ÿçš„æª”æ¡ˆ   Ctrl+K W é—œé–‰ç¾è¡Œ Group   Ctrl+I é¡¯ç¤ºç³»çµ±å»ºè­°   Ctrl+Shift+T é‡æ–°é–‹å•Ÿé—œé–‰çš„æª”æ¡ˆ   Ctrl+K M åˆ‡æ›æª”æ¡ˆæ ¼å¼ Change Language Mode   Ctrl+K Enter Keep preview mode editor open (å°‡ç›®å‰ä»¥ Preview æ¨¡å¼é–‹å•Ÿçš„æª”æ¡ˆè½‰æ›æˆç·¨è¼¯æ¨¡å¼)   Ctrl+K P Copy path of an active file (å°‡ç›®å‰çš„æª”æ¡ˆç›®å¾‘å«æª”åè¤‡è£½åˆ°å‰ªè²¼ç°¿ä¸­)   Ctrl+K R Reveal active file in Explorer (å°‡ç›®å‰çš„æª”æ¡ˆé–‹å•Ÿåœ¨æ–°çš„ æª”æ¡ˆç¸½ç®¡è¦–çª— ä¸­)   Ctrl+K O Show active file in a new window/instance (å°‡ç›®å‰çš„æª”æ¡ˆé–‹å•Ÿåœ¨æ–°çš„ vscode ä¸­)   Ctrl+Alt N run code in code runner (å±¬æ“´å……å¥—ä»¶çš„åŠŸèƒ½)   Ctrl+= æ”¾å¤§   Ctrl+- ç¸®å°   Ctrl+0 (Num Lock) æ¢å¾©åŸä¾†å¤§å°   Ctrl+Shift+L ç”¨ä½ å·²é¸æ“‡çš„å­—ä¸²ä¾†æ¨™ç¤º(é¸æ“‡)æ•´å€‹æª”æ¡ˆä¸­æ‰€æœ‰ç¬¦åˆçš„æ–‡å­—   Ctrl+F2 ä¸é ˆè¦å…ˆé¸æ“‡ç›®æ¨™å­—ä¸²å³å¯æœ‰åŒä¸Šçš„åŠŸèƒ½   Shift+Alt+â†â†’ Select until the end of the word   Ctrl+F Find   Ctrl+Shift+O Show Symbol Document Outline   Ctrl+Shift+F File Find   Ctrl+Shift+G Git   Ctrl+Shift+D Debug   Ctrl+Shift+X Extension   Ctrl+Alt+â†‘â†“ Multi line column selection   Ctrl+D Multi Currsor selection   Alt+z åˆ‡æ›æ–·è¡ŒåŠŸèƒ½   Alt+Shift+â†“ è¤‡è£½ç„¦é»åœ¨çš„é€™ä¸€è¡Œ   Alt+â†‘â†“ ç§»å‹•ç„¦é»åœ¨çš„é€™ä¸€è¡Œå¾€ä¸Š/å¾€ä¸‹   Alt+â†â†’ Go back / forward (å¾€å‰/å¾Œ æ›¾ç¶“çš„æ“ä½œéç¨‹)   Alt+F5 åœ¨ç¨‹å¼ç¢¼æ¯”å°è¦–çª—ä¸­ï¼Œç§»å‹•åˆ°ä¸‹ä¸€å€‹ç¨‹å¼ç¢¼æœ‰è®Šå‹•è™•   Alt+Shift+F5 åœ¨ç¨‹å¼ç¢¼æ¯”å°è¦–çª—ä¸­ï¼Œç§»å‹•åˆ°ä¸Šä¸€å€‹ç¨‹å¼ç¢¼æœ‰è®Šå‹•è™•   F12 Go to Definition (è·³è‡³\u0026quot;Function\u0026quot; / \u0026ldquo;è®Šæ•¸\u0026rdquo; å®šç¾©åœ°æ–¹)   Shift+F12 Go to References (æª¢è¦– \u0026ldquo;Function\u0026rdquo; / \u0026ldquo;è®Šæ•¸\u0026rdquo; ä½¿ç”¨çš„åœ°æ–¹)   Ctrl+F12 Go to implementations (è·³è‡³\u0026quot;Function\u0026quot; / \u0026ldquo;è®Šæ•¸\u0026rdquo; å¯¦ç¾çš„åœ°æ–¹)   Alt+F12 Peek definition (æª¢è¦– \u0026ldquo;Function\u0026rdquo; / \u0026ldquo;è®Šæ•¸\u0026rdquo; çš„å‡ºè™•åŠå®šç¾©å…§å®¹)   Ctrl + â€µ (or Ctrl+J) åˆ‡æ›æ•´åˆæ˜¯çµ‚ç«¯æ©Ÿ   Ctrl + shift + â€µ å»ºç«‹æ–°çš„æ•´åˆçµ‚ç«¯æ©Ÿ   Ctrl + shift + c å»ºç«‹æ–°çš„çµ‚ç«¯æ©Ÿ (ç„¦é»åœ¨ Terminal æ™‚ç„¡æ•ˆ)   Ctrl + shift + 5 åˆ‡å‰²çµ‚ç«¯æ©Ÿ   Alt + â†‘â†“â†â†’ åˆ‡æ›æ•´åˆçµ‚ç«¯æ©Ÿèšç„¦é»   Alt + U è‹¥æ‰€åœ¨æª”æ¡ˆä¸æ˜¯ ts æª”ï¼Œå‰‡é¡¯ç¤ºå°æ‡‰çš„ ts æª”æ¡ˆã€‚è‹¥æ˜¯ ts æª”ï¼Œå‰‡é¡¯ç¤ºå‰ä¸€å€‹æª”æ¡ˆ   Alt + I è‹¥æ‰€åœ¨æª”æ¡ˆä¸æ˜¯ css æª”ï¼Œå‰‡é¡¯ç¤ºå°æ‡‰çš„ css æª”æ¡ˆã€‚è‹¥æ˜¯ css æª”ï¼Œå‰‡é¡¯ç¤ºå‰ä¸€å€‹æª”æ¡ˆ   Alt + O è‹¥æ‰€åœ¨æª”æ¡ˆä¸æ˜¯ html æª”ï¼Œå‰‡é¡¯ç¤ºå°æ‡‰çš„ html æª”æ¡ˆã€‚è‹¥æ˜¯ html æª”ï¼Œå‰‡é¡¯ç¤ºå‰ä¸€å€‹æª”æ¡ˆ   Alt + P è‹¥æ‰€åœ¨æª”æ¡ˆä¸æ˜¯ spec.ts æª”ï¼Œå‰‡é¡¯ç¤ºå°æ‡‰çš„ spec.ts æª”æ¡ˆã€‚è‹¥æ˜¯ spec.ts æª”ï¼Œå‰‡é¡¯ç¤ºå‰ä¸€å€‹æª”æ¡ˆ    è¨»: å¾Œå››é …æ˜¯ VSCide Extension angular2-switcher æ‰€æ”¯æ´\n","permalink":"https://calvinegs.github.io/posts/vscod-shortcut/","summary":"çµ„åˆéµ èªªæ˜     Ctrl+K F Close folder   Ctrl+K Ctrl+O Open folder   Ctrl+R Open Project (é€éæ­·å²è¨˜éŒ„æ¸…å–®)   Ctrl+Shift+E Explorer / Editor é–“çš„ç„¦é»åˆ‡æ›   Ctrl+0 Focus Side Bar å°‡ç„¦é»åˆ‡æ›è‡³ Side Bar   Ctrl+B é¡¯ç¤º/éš è”µ Side Bar   Ctrl+[1~9] åœ¨ Editor Groups é–“ç„¦é»åˆ‡æ›   Ctrl+Enter åœ¨ æ–° Group ä¸­æ‰“é–‹æ–°æŒ‡å®šæª”æ¡ˆ   Ctrl+\\ æ‹†åˆ†ç·¨è¼¯è¦–çª—   Ctrl+K Ctrl+\\ åœ¨æ–° Group ä¸­(åœ¨ç¾åœ¨ Group çš„ä¸‹æ–¹)æ‰“é–‹æ¸¸æ¨™åœ¨çš„æª”æ¡ˆ   Ctrl+F4 or Crtl+W Close Editor   Ctrl+Alt+â†â†’ åœ¨ Groups é–“ç§»å‹•æª”æ¡ˆ   Ctrl+Shift+PgUp/PgDn åœ¨åŒä¸€å€‹ Group ä¸­ç§»å‹•ç›®å‰çš„ editor åˆ°å·¦/å³é‚Š   Ctrl+PgDn/PgUp åœ¨ Tabs é–“çš„ç„¦é»åˆ‡æ›(è·¨ Groups)   Ctrl+Tab åœ¨åŒä¸€å€‹ Group åœ¨å·²é–‹å•Ÿçš„æª”æ¡ˆæ¸…å–®ä¸­åˆ‡æ›(å¾€ä¸‹)   Ctrl+Shift+Tab åœ¨åŒä¸€å€‹ Groupåœ¨å·²é–‹å•Ÿçš„æª”æ¡ˆæ¸…å–®ä¸­åˆ‡æ›(å¾€ä¸Š)   Ctrl+K Ctrl+C è¨»è§£æ¸¸æ¨™åœ¨çš„é€™è¡Œ   Ctrl+Shift+\\ æ‰¾åˆ°å°æ‡‰çš„æ‹¬å¼§   Ctrl+K Ctrl+U ç§»é™¤è¨»è§£ (æ¸¸æ¨™åœ¨çš„é€™è¡Œ)   Ctrl+/ åœ¨ \u0026ldquo;è¨»è§£/ç§»é™¤è¨»è§£\u0026rdquo; é–“åˆ‡æ› (æ¸¸æ¨™åœ¨çš„é€™è¡Œ)   Shift+Alt+A åˆ‡æ›å€å¡Šè¨»è§£ (é‡å°è¢«é¸æ“‡çš„ç¨‹å¼ç¢¼)   Shift+Alt+F å°‡æª”æ¡ˆä¸­ç¨‹å¼ç¢¼æ ¼å¼åŒ–   Ctrl+K Ctrl+F å°‡è¢«é¸å–çš„ç¨‹å¼ç¢¼æ ¼å¼åŒ–   Ctrl+L å…¨é¸æ•´è¡Œ (é‡è¦†å‰‡å¯å¾€ä¸‹é¸æ“‡å¤šè¡Œ)   Ctrl+X æˆ– Ctrl+Shift+K åˆªé™¤ä¸€è¡Œ   Ctrl + backspace åˆªé™¤æ¸¸æ¨™å‰çš„å­—å¥   Ctrl+K Ctrl+X åˆªé™¤è¡Œå°¾çš„ç©ºç™½å­—å…ƒ   Ctrl+, Settings é¡¯ç¤ºè¨­å®šåŠŸèƒ½   Ctrl+K V é¡¯ç¤º/éš±è— Markdown file çš„ Preview åŠŸèƒ½   Alt+[1~9] åœ¨Group ä¸­ Tabs é–“ä½œç„¦é»åˆ‡æ›   Alt+0 ç§»è‡³åŒä¸€å€‹ Group ä¸­æœ€å¾Œä¸€å€‹ editor Tab   Alt+Shift+0 åˆ‡æ› Groups æˆç‚ºä¸¦åˆ—æˆ–ä¸¦æ’   Ctrl+Shift+P Show Command Palette   Ctrl+P Open File   Ctrl+K Ctrl+S Keyboard Shortcuts   Ctrl+K S Save All Files   Ctrl+N New File   Ctrl+K Ctrl+W é—œé–‰æ‰€æœ‰é–‹å•Ÿçš„æª”æ¡ˆ   Ctrl+K W é—œé–‰ç¾è¡Œ Group   Ctrl+I é¡¯ç¤ºç³»çµ±å»ºè­°   Ctrl+Shift+T é‡æ–°é–‹å•Ÿé—œé–‰çš„æª”æ¡ˆ   Ctrl+K M åˆ‡æ›æª”æ¡ˆæ ¼å¼ Change Language Mode   Ctrl+K Enter Keep preview mode editor open (å°‡ç›®å‰ä»¥ Preview æ¨¡å¼é–‹å•Ÿçš„æª”æ¡ˆè½‰æ›æˆç·¨è¼¯æ¨¡å¼)   Ctrl+K P Copy path of an active file (å°‡ç›®å‰çš„æª”æ¡ˆç›®å¾‘å«æª”åè¤‡è£½åˆ°å‰ªè²¼ç°¿ä¸­)   Ctrl+K R Reveal active file in Explorer (å°‡ç›®å‰çš„æª”æ¡ˆé–‹å•Ÿåœ¨æ–°çš„ æª”æ¡ˆç¸½ç®¡è¦–çª— ä¸­)   Ctrl+K O Show active file in a new window/instance (å°‡ç›®å‰çš„æª”æ¡ˆé–‹å•Ÿåœ¨æ–°çš„ vscode ä¸­)   Ctrl+Alt N run code in code runner (å±¬æ“´å……å¥—ä»¶çš„åŠŸèƒ½)   Ctrl+= æ”¾å¤§   Ctrl+- ç¸®å°   Ctrl+0 (Num Lock) æ¢å¾©åŸä¾†å¤§å°   Ctrl+Shift+L ç”¨ä½ å·²é¸æ“‡çš„å­—ä¸²ä¾†æ¨™ç¤º(é¸æ“‡)æ•´å€‹æª”æ¡ˆä¸­æ‰€æœ‰ç¬¦åˆçš„æ–‡å­—   Ctrl+F2 ä¸é ˆè¦å…ˆé¸æ“‡ç›®æ¨™å­—ä¸²å³å¯æœ‰åŒä¸Šçš„åŠŸèƒ½   Shift+Alt+â†â†’ Select until the end of the word   Ctrl+F Find   Ctrl+Shift+O Show Symbol Document Outline   Ctrl+Shift+F File Find   Ctrl+Shift+G Git   Ctrl+Shift+D Debug   Ctrl+Shift+X Extension   Ctrl+Alt+â†‘â†“ Multi line column selection   Ctrl+D Multi Currsor selection   Alt+z åˆ‡æ›æ–·è¡ŒåŠŸèƒ½   Alt+Shift+â†“ è¤‡è£½ç„¦é»åœ¨çš„é€™ä¸€è¡Œ   Alt+â†‘â†“ ç§»å‹•ç„¦é»åœ¨çš„é€™ä¸€è¡Œå¾€ä¸Š/å¾€ä¸‹   Alt+â†â†’ Go back / forward (å¾€å‰/å¾Œ æ›¾ç¶“çš„æ“ä½œéç¨‹)   Alt+F5 åœ¨ç¨‹å¼ç¢¼æ¯”å°è¦–çª—ä¸­ï¼Œç§»å‹•åˆ°ä¸‹ä¸€å€‹ç¨‹å¼ç¢¼æœ‰è®Šå‹•è™•   Alt+Shift+F5 åœ¨ç¨‹å¼ç¢¼æ¯”å°è¦–çª—ä¸­ï¼Œç§»å‹•åˆ°ä¸Šä¸€å€‹ç¨‹å¼ç¢¼æœ‰è®Šå‹•è™•   F12 Go to Definition (è·³è‡³\u0026quot;Function\u0026quot; / \u0026ldquo;è®Šæ•¸\u0026rdquo; å®šç¾©åœ°æ–¹)   Shift+F12 Go to References (æª¢è¦– \u0026ldquo;Function\u0026rdquo; / \u0026ldquo;è®Šæ•¸\u0026rdquo; ä½¿ç”¨çš„åœ°æ–¹)   Ctrl+F12 Go to implementations (è·³è‡³\u0026quot;Function\u0026quot; / \u0026ldquo;è®Šæ•¸\u0026rdquo; å¯¦ç¾çš„åœ°æ–¹)   Alt+F12 Peek definition (æª¢è¦– \u0026ldquo;Function\u0026rdquo; / \u0026ldquo;è®Šæ•¸\u0026rdquo; çš„å‡ºè™•åŠå®šç¾©å…§å®¹)   Ctrl + â€µ (or Ctrl+J) åˆ‡æ›æ•´åˆæ˜¯çµ‚ç«¯æ©Ÿ   Ctrl + shift + â€µ å»ºç«‹æ–°çš„æ•´åˆçµ‚ç«¯æ©Ÿ   Ctrl + shift + c å»ºç«‹æ–°çš„çµ‚ç«¯æ©Ÿ (ç„¦é»åœ¨ Terminal æ™‚ç„¡æ•ˆ)   Ctrl + shift + 5 åˆ‡å‰²çµ‚ç«¯æ©Ÿ   Alt + â†‘â†“â†â†’ åˆ‡æ›æ•´åˆçµ‚ç«¯æ©Ÿèšç„¦é»   Alt + U è‹¥æ‰€åœ¨æª”æ¡ˆä¸æ˜¯ ts æª”ï¼Œå‰‡é¡¯ç¤ºå°æ‡‰çš„ ts æª”æ¡ˆã€‚è‹¥æ˜¯ ts æª”ï¼Œå‰‡é¡¯ç¤ºå‰ä¸€å€‹æª”æ¡ˆ   Alt + I è‹¥æ‰€åœ¨æª”æ¡ˆä¸æ˜¯ css æª”ï¼Œå‰‡é¡¯ç¤ºå°æ‡‰çš„ css æª”æ¡ˆã€‚è‹¥æ˜¯ css æª”ï¼Œå‰‡é¡¯ç¤ºå‰ä¸€å€‹æª”æ¡ˆ   Alt + O è‹¥æ‰€åœ¨æª”æ¡ˆä¸æ˜¯ html æª”ï¼Œå‰‡é¡¯ç¤ºå°æ‡‰çš„ html æª”æ¡ˆã€‚è‹¥æ˜¯ html æª”ï¼Œå‰‡é¡¯ç¤ºå‰ä¸€å€‹æª”æ¡ˆ   Alt + P è‹¥æ‰€åœ¨æª”æ¡ˆä¸æ˜¯ spec.","title":"VS Code ä¸­å¸¸ç”¨å¿«æ·éµ"},{"content":"åœ¨å¦ä¸€ç¯‡ç­†è¨˜ä¸­ ASP.NET Core 5 Web API - å¾ç„¡åˆ°æœ‰ å·²ç¶“äº†è§£å¦‚ä½•å¾ç„¡åˆ°æœ‰ ä½¿ç”¨ Dotnet core 5.0 å»ºç«‹ ä¸€å€‹ Web APIï¼Œæœ¬ç¯‡ç­†è¨˜å°‡ä»¥æ­¤æœ‰åŸºç¤ä¾†è¨˜éŒ„å¦‚ä½•ä½¿ç”¨ Asp.Net Core Identity framework åŠ JWT ä¾†å»ºç½®ä¸€å€‹ç°¡å–®åˆå®‰å…¨çš„ \u0026ldquo;ä½¿ç”¨è€…æ¬Šé™ç®¡ç†\u0026quot;åŠŸèƒ½ã€‚\ngithub Source code #tag: identity_jwt\nä½¿ç”¨ Asp.Net Core Identity framework ä¾†ç®¡ç†ä½¿ç”¨è€…ä½¿ç”¨æ¬Šé™ ASP.NET Core Identity:\n æ”¯æ´ä½¿ç”¨è€…ä»‹é¢ (UI) ç™»å…¥åŠŸèƒ½çš„ APIã€‚ ç®¡ç†ä½¿ç”¨è€…ã€å¯†ç¢¼ã€è¨­å®šæª”è³‡æ–™ã€è§’è‰²ã€å®£å‘Šã€æ¬Šæ–ã€é›»å­éƒµä»¶ç¢ºèªç­‰ã€‚  ASP.Net Core Identity Framework æ˜¯ä¸€å€‹å¾ˆæ–¹ä¾¿ä¸”é‚„ç®—å®Œå–„çš„ä½¿ç”¨æ¬Šé™ç®¡ç†æ¶æ§‹ã€‚\nå®‰è£çµ¦ AspNetCore Idendity Framework ä½¿ç”¨çš„ç›¸é—œå¥—ä»¶ $ dotnet add package Microsoft.AspNetCore.Identity.EntityFrameworkCore --version 5.0.13 $ dotnet add package Microsoft.AspNetCore.Identity.UI --version 5.0.13 é™¤äº†å®‰è£ç›¸é—œå¥—ä»¶å¤–ï¼Œé‚„è¦èª¿æ•´ç›¸é—œç¨‹å¼:\n åœ¨ Startup.cs æª”æ¡ˆä¸­å°‡ AspNetCore Identity Service æ³¨å…¥åˆ° container ä¸­ (before services.AddControllers())  # åœ¨ startup.cs æª”æ¡ˆä¸­ services.AddControllers() æŒ‡ä»¤å‰åŠ å…¥ä»¥ä¸‹æŒ‡ä»¤ services.AddDefaultIdentity\u0026lt;IdentityUser\u0026gt;(options =\u0026gt; options.SignIn.RequireConfirmedAccount = true) .AddEntityFrameworkStores\u0026lt;ApiDbContext\u0026gt;();  åœ¨ Startup.cs æª”æ¡ˆä¸­ HTTP request pipeline ä¸­ æ–°åŠ å…¥ UseAuthentication()  # åœ¨ startup.cs æª”æ¡ˆä¸­ app.UseAuthorization() æŒ‡ä»¤å‰åŠ å…¥ä»¥ä¸‹æŒ‡ä»¤ app.UseAuthentication();  ä½¿ç”¨ AspNetCore Identityï¼Œå‰‡ DataContext (ApiDbContext.cs ä¸­) å¿…é ˆè¦ç¹¼æ‰¿ IdentityDbContextï¼Œ åŒæ™‚ Model creationg æ™‚è¦æ”¹æˆå‘¼å« base.OnModelCreation  1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  public partial class ApiDbContext : IdentityDbContext { public DbSet\u0026lt;ItemData\u0026gt; ItemData { get; set; }  public ApiDbContext() { } // ...  protected override void OnModelCreating(ModelBuilder modelBuilder) { // OnModelCreatingPartial(modelBuilder);  base.OnModelCreating(modelBuilder);  } }   æ–°å¢ä¸€å€‹ entity framework é·ç§» ä¸¦ æ›´æ–°è³‡æ–™åº« å®Œæˆä¸Šè¿°ç¨‹å¼èª¿æ•´å¾Œï¼Œä¾†åŸ·è¡Œè³‡æ–™åº«é·ç§»(migrations)\n$ dotnet build $ dotnet ef migrations add \u0026#34;Add Identity Framework\u0026#34; $ dotnet ef database update (app.db ç”¢ç”Ÿ Identity Framework æœƒä½¿ç”¨åˆ°çš„è³‡æ–™è¡¨) æ–°å¢ ä½¿ç”¨è€…è¨»å†Šå’Œç™»å…¥æ™‚ä½¿ç”¨çš„ Data model class (Models/AuthData.cs) using System.Collections.Generic; using System.ComponentModel.DataAnnotations; namespace Todo5.Models { public class RegistrationResponse { public string Token { get; set; } public bool Success { get; set; } public List\u0026lt;string\u0026gt; Errors { get; set; } } public class UserLoginRequest { [Required] [EmailAddress] public string Email { get; set; } [Required] public string Password { get; set; } } public class UserRegistrationDto { [Required] public string Username { get; set; } [Required] [EmailAddress] public string Email { get; set; } [Required] public string Password { get; set; } } } æ–°å¢ è¨»å†Šå’Œç™»å…¥é‚è¼¯ (Controllers/AuthManagementControll.cs) using System.Collections.Generic; using System.Linq; using System.Threading.Tasks; using Microsoft.AspNetCore.Identity; using Microsoft.AspNetCore.Mvc; using Todo5.Models; namespace Todo5.Controllers { [Route(\u0026#34;api/[controller]\u0026#34;)] // api/authManagement [ApiController] public class AuthManagementController : ControllerBase { private readonly UserManager\u0026lt;IdentityUser\u0026gt; _userManager; public AuthManagementController( UserManager\u0026lt;IdentityUser\u0026gt; userManager) { _userManager = userManager; } [HttpPost] [Route(\u0026#34;Register\u0026#34;)] public async Task\u0026lt;IActionResult\u0026gt; Register([FromBody] UserRegistrationDto user) { if (ModelState.IsValid) { // We can utilise the model  var existingUser = await _userManager.FindByEmailAsync(user.Email); if (existingUser != null) { return BadRequest(new RegistrationResponse() { Errors = new List\u0026lt;string\u0026gt;() { \u0026#34;Email already in use\u0026#34; }, Success = false }); } var newUser = new IdentityUser() { Email = user.Email, UserName = user.Username }; var isCreated = await _userManager.CreateAsync(newUser, user.Password); if (isCreated.Succeeded) { return Ok(new RegistrationResponse() { Success = true, }); } else { return BadRequest(new RegistrationResponse() { Errors = isCreated.Errors.Select(x =\u0026gt; x.Description).ToList(), Success = false }); } } return BadRequest(new RegistrationResponse() { Errors = new List\u0026lt;string\u0026gt;() { \u0026#34;Invalid payload\u0026#34; }, Success = false }); } [HttpPost] [Route(\u0026#34;Login\u0026#34;)] public async Task\u0026lt;IActionResult\u0026gt; Login([FromBody] UserLoginRequest user) { if (ModelState.IsValid) { var existingUser = await _userManager.FindByEmailAsync(user.Email); if (existingUser == null) { return BadRequest(new RegistrationResponse() { Errors = new List\u0026lt;string\u0026gt;() { \u0026#34;Invalid login request\u0026#34; }, Success = false }); } var isCorrect = await _userManager.CheckPasswordAsync(existingUser, user.Password); if (!isCorrect) { return BadRequest(new RegistrationResponse() { Errors = new List\u0026lt;string\u0026gt;() { \u0026#34;Invalid login request\u0026#34; }, Success = false }); } return Ok(new RegistrationResponse() { Success = true, }); } return BadRequest(new RegistrationResponse() { Errors = new List\u0026lt;string\u0026gt;() { \u0026#34;Invalid payload\u0026#34; }, Success = false }); } } } ä½¿ç”¨è€…å¸³è™Ÿè¨»å†Š è¨»å†ŠæˆåŠŸ ä½¿ç”¨å·²è¨»å†ŠæˆåŠŸå¸³è™Ÿä¾†é€²è¡Œç™»å…¥ å»ºç«‹ git æ–°ç‰ˆæœ¬ $ git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Add Asp.Net Core Identity framework\u0026#34; æ–°å¢ JWT åŠŸèƒ½ åˆ°ç›®å‰ç‚ºæ­¢æˆ‘å€‘å·²é€é Dotnet Core Identity framework å®Œæˆäº†ç°¡æ˜“çš„ä½¿ç”¨è€…è³‡æ–™é©—è­‰çš„åŠŸèƒ½(è¨»å†Š/ç™»å…¥)ï¼Œä¸‹é¢è¦ç¹¼çºŒå®Œæˆæ¡ç”¨ JWT é€²è¡Œ Token-based çš„èº«åˆ†é©—è­‰èˆ‡æˆæ¬Šå¯¦ä½œã€‚\nJWT(Json Web Token)æ˜¯ä¸€å€‹å¯¦ç¾æˆæ¬ŠåŠŸèƒ½ä¸Šç›¸å°ç°¡å–®åˆå®‰å…¨æ–¹å¼ã€‚å¯¦ä½œçš„æ­¥é©ŸåŒ…å«äº†ä¸‰å€‹éƒ¨åˆ†ï¼š\n ç”¢ç”Ÿåˆæ³•æœ‰æ•ˆçš„ JWT Token é©—è­‰åˆæ³•æœ‰æ•ˆçš„ JWT Token é™åˆ¶ç‰¹å®š API åªèƒ½åœ¨é€šé JWT é©—è­‰çš„ HTTP è¦æ±‚æ‰èƒ½å­˜å–  é¦–å…ˆï¼Œå…ˆåŠ å…¥ç›¸é—œå¥—ä»¶:\n$ dotnet add package Microsoft.AspNetCore.Authentication.JwtBearer --version 5.0.13 $ dotnet add package Microsoft.IdentityModel.Tokens --version 6.11.1 ç”¢ç”Ÿåˆæ³•æœ‰æ•ˆçš„ JWT Token  åœ¨å‰è¿°çš„ã€€Controller ç¨‹å¼(Controllers/AuthManagementControll.cs)ä¸­åŠ å…¥ GenerateJwtToken Function\n private string GenerateJwtToken(IdentityUser user) { var key = Encoding.ASCII.GetBytes(_appSettings.Secret); var claims = new ClaimsIdentity(new [] { new Claim(\u0026#34;Id\u0026#34;, user.Id), new Claim(JwtRegisteredClaimNames.Email, user.Email), new Claim(JwtRegisteredClaimNames.Sub, user.Email), new Claim(JwtRegisteredClaimNames.Jti, Guid.NewGuid().ToString()) }); var tokenDescriptor = new SecurityTokenDescriptor { Subject = claims, Expires = DateTime.UtcNow.AddHours(6), SigningCredentials = new SigningCredentials(new SymmetricSecurityKey(key), SecurityAlgorithms.HmacSha256Signature) }; var jwtTokenHandler = new JwtSecurityTokenHandler(); var token = jwtTokenHandler.CreateToken(tokenDescriptor); var jwtToken = jwtTokenHandler.WriteToken(token); return jwtToken; }  ä¸¦åœ¨ Login \u0026amp; Register function ä¸­å»å‘¼å«ã€€GenerateJwtToken functionï¼Œä¸¦å›å‚³ Token ()\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100  [HttpPost] [Route(\u0026#34;Register\u0026#34;)] public async Task\u0026lt;IActionResult\u0026gt; Register([FromBody] UserRegistrationDto user) { if (ModelState.IsValid) { // We can utilise the model  var existingUser = await _userManager.FindByEmailAsync(user.Email); if (existingUser != null) { return BadRequest(new RegistrationResponse() { Errors = new List\u0026lt;string\u0026gt;() { \u0026#34;Email already in use\u0026#34; }, Success = false }); } var newUser = new IdentityUser() { Email = user.Email, UserName = user.Username }; var isCreated = await _userManager.CreateAsync(newUser, user.Password); if (isCreated.Succeeded) { var jwtToken = GenerateJwtToken(newUser);  return Ok(new RegistrationResponse() { Success = true, Token = jwtToken  }); } else { return BadRequest(new RegistrationResponse() { Errors = isCreated.Errors.Select(x =\u0026gt; x.Description).ToList(), Success = false }); } } return BadRequest(new RegistrationResponse() { Errors = new List\u0026lt;string\u0026gt;() { \u0026#34;Invalid payload\u0026#34; }, Success = false }); } [HttpPost] [Route(\u0026#34;Login\u0026#34;)] public async Task\u0026lt;IActionResult\u0026gt; Login([FromBody] UserLoginRequest user) { if (ModelState.IsValid) { var existingUser = await _userManager.FindByEmailAsync(user.Email); if (existingUser == null) { return BadRequest(new RegistrationResponse() { Errors = new List\u0026lt;string\u0026gt;() { \u0026#34;Invalid login request\u0026#34; }, Success = false }); } var isCorrect = await _userManager.CheckPasswordAsync(existingUser, user.Password); if (!isCorrect) { return BadRequest(new RegistrationResponse() { Errors = new List\u0026lt;string\u0026gt;() { \u0026#34;Invalid login request\u0026#34; }, Success = false }); } var jwtToken = GenerateJwtToken(existingUser);  return Ok(new RegistrationResponse() { Success = true, Token = jwtToken  }); } return BadRequest(new RegistrationResponse() { Errors = new List\u0026lt;string\u0026gt;() { \u0026#34;Invalid payload\u0026#34; }, Success = false }); }   é©—è­‰åˆæ³•æœ‰æ•ˆçš„ JWT Token å…ˆåœ¨ Helpers ç›®éŒ„ä¸‹æ–°å¢ AppSettings Class ç”¨ä¾†å­˜æ”¾ JWT ä½¿ç”¨åˆ°çš„ Key\nnamespace Todo5.Helpers { public class AppSettings { public string Secret { get; set; } } } ä¸¦åœ¨ appsettings.json è¨­å®šæª”ä¸­åŠ å…¥ Secret å€¼:\n{ \u0026#34;ConnectionStrings\u0026#34;: { \u0026#34;DefaultConnection\u0026#34;: \u0026#34;Data Source=app.db; Cache=Shared\u0026#34; }, \u0026#34;AppSettings\u0026#34;: { \u0026#34;Secret\u0026#34;: \u0026#34;This is a test for Authorization in asp.net webapi. Using JWT Technology to keep user info.\u0026#34; }, \u0026#34;Logging\u0026#34;: { \u0026#34;LogLevel\u0026#34;: { \u0026#34;Default\u0026#34;: \u0026#34;Information\u0026#34;, \u0026#34;Microsoft\u0026#34;: \u0026#34;Warning\u0026#34;, \u0026#34;Microsoft.Hosting.Lifetime\u0026#34;: \u0026#34;Information\u0026#34; } }, \u0026#34;AllowedHosts\u0026#34;: \u0026#34;*\u0026#34; } å†åˆ° Startup.cs æª”æ¡ˆä¸­æ³¨å…¥ \u0026ldquo;é©—è­‰åˆæ³•æœ‰æ•ˆ JWT Token çš„åŠŸèƒ½\u0026rdquo;\n// é–‹å§‹: ç‚º JWT æ–°å¢çš„ç¨‹å¼ç¢¼ services.Configure\u0026lt;AppSettings\u0026gt;(Configuration.GetSection(\u0026#34;AppSettings\u0026#34;)); var key = Encoding.ASCII.GetBytes(Configuration[\u0026#34;AppSettings:Secret\u0026#34;]); var TokenValidationParameters = new TokenValidationParameters { ValidateIssuerSigningKey = true, // this will validate the 3rd part of the jwt token using the secret that we added in the appsettings and verify we have generated the jwt token  IssuerSigningKey = new SymmetricSecurityKey(key), // Add the secret key to our Jwt encryption  ValidateIssuer = false, ValidateAudience = false, ValidateLifetime = true, RequireExpirationTime = false, }; services .AddAuthentication(options =\u0026gt; { options.DefaultAuthenticateScheme = JwtBearerDefaults.AuthenticationScheme; options.DefaultScheme = JwtBearerDefaults.AuthenticationScheme; options.DefaultChallengeScheme = JwtBearerDefaults.AuthenticationScheme; }) .AddJwtBearer(cfg =\u0026gt; { cfg.RequireHttpsMetadata = false; cfg.TokenValidationParameters = TokenValidationParameters; }); // çµæŸ: ç‚º JWT æ–°å¢çš„ç¨‹å¼ç¢¼ é™åˆ¶ç‰¹å®š API åªèƒ½åœ¨é€šé JWT é©—è­‰çš„ HTTP è¦æ±‚æ‰èƒ½å­˜å– åœ¨æ¬²é™åˆ¶çš„åŠŸèƒ½(function in Controller)å‰åŠ å…¥ \u0026ldquo;[Authorize]\u0026rdquo; å±¬æ€§ (TodoController.cs ç¨‹å¼ä¸­)\n// GET: api/Todo [HttpGet] [Authorize] # åŠ å…¥å±¬æ€§ public async Task\u0026lt;ActionResult\u0026lt;IEnumerable\u0026lt;ItemData\u0026gt;\u0026gt;\u0026gt; GetItemData() { return await _context.ItemData.ToListAsync(); } ç‚º Swagger åŠ å…¥ JWT åŠŸèƒ½ ç¨‹å¼åˆ°æ­¤å·²å®ŒæˆåŠ å…¥ JWT åŠŸèƒ½ï¼Œä¸‹é¢æ˜¯ç‚ºäº†ä½¿ç”¨ Swagger é€²è¡Œ API æ¸¬è©¦æ™‚ï¼Œå¯ä»¥æœ‰ JWT ç›¸é—œåŠŸèƒ½è€Œèª¿æ•´çš„éƒ¨ä»½\n// è¨»è§£æ‰åŸæœ‰ç¨‹å¼ç¢¼ (ä»¥ä¸‹ä¸‰è¡Œ) // services.AddSwaggerGen(c =\u0026gt; // { // c.SwaggerDoc(\u0026#34;v1\u0026#34;, new OpenApiInfo { Title = \u0026#34;Todo5\u0026#34;, Version = \u0026#34;v1\u0026#34; }); // });  // æ”¹æˆä¸‹é¢çš„ç¨‹å¼ï¼Œè®“ Swagger å…·å‚™æœ‰ JWT çš„ç›¸é—œåŠŸèƒ½ services.AddSwaggerGen(c =\u0026gt; { c.SwaggerDoc(\u0026#34;v1\u0026#34;, new OpenApiInfo { Title = \u0026#34;TodoApp\u0026#34;, Version = \u0026#34;v1\u0026#34; }); c.AddSecurityDefinition(\u0026#34;Bearer\u0026#34;, new OpenApiSecurityScheme { In = ParameterLocation.Header, Description = \u0026#34;Please enter JWT with Bearer into field\u0026#34;, Name = \u0026#34;Authorization\u0026#34;, Type = SecuritySchemeType.ApiKey }); c.AddSecurityRequirement(new OpenApiSecurityRequirement { { new OpenApiSecurityScheme { Reference = new OpenApiReference { Type = ReferenceType.SecurityScheme, Id = \u0026#34;Bearer\u0026#34;} }, new string[] {} } }); }); åœ¨ Swagger çš„ UI ä¸­ï¼Œç•«é¢å³ä¸Šè§’å¤šå‡ºäº† \u0026ldquo;Authorize\u0026rdquo; æŒ‰éˆ•ã€‚æ­¤åŠŸèƒ½æ˜¯ç”¨ä¾†è¨˜éŒ„ ç™»å…¥æˆåŠŸå¾Œæ‰€å›å‚³çš„ Token\næ­¤åˆ» API å·²è¦æ±‚è¦æ“•å¸¶æœ‰åˆæ³• Tokenï¼Œè‹¥åœ¨æœªé€é\u0026quot;Authorize\u0026quot;åŠŸèƒ½å¡«å…¥ Token æ™‚ä¾†æ“ä½œ APIï¼Œå°‡æœƒå›å‚³\u0026quot;æœªæˆæ¬Š\u0026quot;çš„éŒ¯èª¤ã€‚å¦‚ä¸‹åœ–: å…ˆä»¥åˆæ³•ä½¿ç”¨è€…å¸³è™Ÿç™»å…¥ï¼Œåœ¨ç™»å…¥æˆåŠŸå¾Œï¼Œå›å‚³çš„ Response body ä¸­æœƒå¸¶æœ‰ Tokenï¼Œå°‡æ­¤ Token å€¼è¤‡è£½ä¸‹ä¾† æŒ‰ä¸‹ Authorize æŒ‰éˆ•å¾Œï¼Œå¡«å…¥è©² Token å€¼ï¼Œä¸¦åœ¨ Token å€¼å‰éµå…¥ \u0026ldquo;bearer \u0026quot; å†æ¬¡æ“ä½œ Get APIï¼Œå³å¯æˆåŠŸå–å¾—å›å‚³å€¼ã€‚ ","permalink":"https://calvinegs.github.io/posts/dotnet5-webapi-ii/","summary":"åœ¨å¦ä¸€ç¯‡ç­†è¨˜ä¸­ ASP.NET Core 5 Web API - å¾ç„¡åˆ°æœ‰ å·²ç¶“äº†è§£å¦‚ä½•å¾ç„¡åˆ°æœ‰ ä½¿ç”¨ Dotnet core 5.0 å»ºç«‹ ä¸€å€‹ Web APIï¼Œæœ¬ç¯‡ç­†è¨˜å°‡ä»¥æ­¤æœ‰åŸºç¤ä¾†è¨˜éŒ„å¦‚ä½•ä½¿ç”¨ Asp.Net Core Identity framework åŠ JWT ä¾†å»ºç½®ä¸€å€‹ç°¡å–®åˆå®‰å…¨çš„ \u0026ldquo;ä½¿ç”¨è€…æ¬Šé™ç®¡ç†\u0026quot;åŠŸèƒ½ã€‚\ngithub Source code #tag: identity_jwt\nä½¿ç”¨ Asp.Net Core Identity framework ä¾†ç®¡ç†ä½¿ç”¨è€…ä½¿ç”¨æ¬Šé™ ASP.NET Core Identity:\n æ”¯æ´ä½¿ç”¨è€…ä»‹é¢ (UI) ç™»å…¥åŠŸèƒ½çš„ APIã€‚ ç®¡ç†ä½¿ç”¨è€…ã€å¯†ç¢¼ã€è¨­å®šæª”è³‡æ–™ã€è§’è‰²ã€å®£å‘Šã€æ¬Šæ–ã€é›»å­éƒµä»¶ç¢ºèªç­‰ã€‚  ASP.Net Core Identity Framework æ˜¯ä¸€å€‹å¾ˆæ–¹ä¾¿ä¸”é‚„ç®—å®Œå–„çš„ä½¿ç”¨æ¬Šé™ç®¡ç†æ¶æ§‹ã€‚\nå®‰è£çµ¦ AspNetCore Idendity Framework ä½¿ç”¨çš„ç›¸é—œå¥—ä»¶ $ dotnet add package Microsoft.AspNetCore.Identity.EntityFrameworkCore --version 5.0.13 $ dotnet add package Microsoft.AspNetCore.Identity.UI --version 5.0.13 é™¤äº†å®‰è£ç›¸é—œå¥—ä»¶å¤–ï¼Œé‚„è¦èª¿æ•´ç›¸é—œç¨‹å¼:","title":"ASP.NET Core 5 Web API åŠ å…¥æ¬Šé™ç®¡ç† (Dotnet Core Identity Framework + JWT)"},{"content":"åœ¨æ­¤è¦è¨è«–çš„æ˜¯æœ‰é—œ TypeScript çš„ å‹åˆ¥æ¨è«–(type inference) èˆ‡ å‹åˆ¥è¨»è¨˜(type annotation)\né—œæ–¼ Javascript çš„å‹åˆ¥ Javascript æ˜¯å€‹å‹•æ…‹å‹åˆ¥çš„èªè¨€ï¼Œä¹Ÿå°±æ˜¯èªªæ“æœ‰ \u0026lsquo;å‹åˆ¥\u0026rsquo; çš„æ˜¯ \u0026lsquo;å€¼\u0026rsquo; è€Œä¸æ˜¯è®Šæ•¸ã€‚\nlet myVar; console.log(`${myVar}: ${typeof myVar}`); // undefined : undefined myVar = 20; console.log(`${myVar}: ${typeof myVar}`); // 20 : number myVar = \u0026#34;Hi\u0026#34;; console.log(`${myVar}: ${typeof myVar}`); // Hi : string myVar = true; console.log(`${myVar}: ${typeof myVar}`); // true : boolean Type Annotation (å‹åˆ¥è¨»è¨˜) TypeScript æä¾›éœå‹åˆ¥åŠŸèƒ½ï¼Œè®“æˆ‘å€‘å¯ä»¥æ˜ç¢ºæŒ‡å®šè®Šæ•¸çš„å‹åˆ¥ã€‚ç·¨è­¯å™¨åœ¨è½‰è­¯éç¨‹å³å¯åµæ¸¬åˆ°ä½¿ç”¨ä¸åŒå‹åˆ¥æ™‚ä¸»å‹•æŠ›å‡ºéŒ¯èª¤è¨Šæ¯ã€‚ä¸‹é¢çš„ä¾‹å­å°±æ˜¯ä½¿ç”¨å‹åˆ¥è¨»è¨˜ä¾†å®šç¾©éœæ…‹å‹åˆ¥:\nfunction calculateTax(amount: number): number { return amount * 1.2; } console.log(`${20}: ${calculateTax(20)}`); //20: 24 console.log(`${\u0026#34;Hello\u0026#34;}: ${calculateTax(\u0026#34;Hello\u0026#34;)}`); //error console.log(`${true}: ${calculateTax(true)}`); //error Type inference (å‹åˆ¥æ¨è«–) TypeScript ç·¨è­¯å™¨å¯ä»¥æ ¹æ“šè®Šæ•¸å®£å‘Šæ™‚çµ¦å®šçš„å€¼ä¾†æ¨è«–å®ƒçš„å‹åˆ¥ã€‚\nfunction calculateTax(amount: number): number { return amount * 1.2; } let price = 100; //æœªçµ¦å®šè³‡æ–™å‹åˆ¥ï¼Œç”±çµ¦å®šçš„å€¼æ¨è«–æ­¤æ™‚çš„ price è®Šæ•¸å‹åˆ¥ç‚º number let taxAmount = calculateTax(price); //æœªçµ¦å®šè³‡æ–™å‹åˆ¥ï¼Œç”±å›å‚³å€¼æ¨è«–æ­¤æ™‚çš„è®Šæ•¸å‹åˆ¥ç‚º numberï¼Œå› ç‚º calculateTax å‹åˆ¥è¨»è¨˜ç‚º number let halfShare = taxAmount / 2; //æœªçµ¦å®šè³‡æ–™å‹åˆ¥ï¼Œç”±è¨ˆç®—çµæœå€¼æ¨è«–æ­¤æ™‚çš„è®Šæ•¸å‹åˆ¥ç‚º number console.log(`Full amount in tax: ${taxAmount}`); //Full amount in tax: 120 console.log(`Half share: ${halfShare}`); //Half share: 60 èª¿æ•´ tsc ç·¨è¼¯åƒæ•¸ä¾†æŸ¥çœ‹ç·¨è­¯å™¨æ‰€æ¡ç”¨çš„å‹åˆ¥ tsc ç·¨è­¯å™¨æ¨è«–çš„å‹åˆ¥è‹¥èˆ‡é æœŸçš„æœ‰å‡ºå…¥ï¼Œå¯ä»¥åœ¨ tscconfig.json \u0026ldquo;compilerOptions\u0026quot;ä¸­åŠ å…¥ä¸€æ¢\u0026quot;declaration\u0026rdquo;: true çš„è¨­å®šå€¼\n{ \u0026quot;compilerOptions\u0026quot;: { \u0026quot;target\u0026quot;: \u0026quot;es2020\u0026quot;, \u0026quot;outDir\u0026quot;: \u0026quot;./dist\u0026quot;, \u0026quot;rootDir\u0026quot;: \u0026quot;./src\u0026quot;, \u0026quot;declaration\u0026quot;: true } } ä¸Šè¿°ç¯„ä¾‹æ”¹æˆ:\nfunction calculateTax(amount: number) { return (amount * 1.2).toFixed(2); } let price = 100; //æœªçµ¦å®šè³‡æ–™å‹åˆ¥ï¼Œç”±çµ¦å®šçš„å€¼æ¨è«–æ­¤æ™‚çš„ price è®Šæ•¸å‹åˆ¥ç‚º number let taxAmount = calculateTax(price); //æœªçµ¦å®šè³‡æ–™å‹åˆ¥ï¼Œç”±å›å‚³å€¼æ¨è«–æ­¤æ™‚çš„è®Šæ•¸å‹åˆ¥ç‚º stringï¼Œå› ç‚º calculateTax function toFixed(2) çµæœæ˜¯ string let halfShare = taxAmount / 2; // ç”¢ç”ŸéŒ¯èª¤ console.log(`Full amount in tax: ${taxAmount}`); //Full amount in tax: 120 console.log(`Half share: ${halfShare}`); //Half share: 60 ç”±æ–¼ toFixed(2) å›å‚³çš„æ˜¯ stringï¼Œå°è‡´ taxAmount è®Šæ•¸å‹åˆ¥è¢«æ¨è«–æˆ string è€Œç”¢ç”ŸéŒ¯èª¤è­¦å‘Šã€‚ tsc å› ç‚ºåœ¨ tscconfig.json å¤šåŠ å…¥äº†ç·¨è¼¯åƒæ•¸ \u0026ldquo;declaration\u0026rdquo;: trueï¼Œé€™å€‹åƒæ•¸å‘Šè¨´ç·¨è­¯å™¨ï¼Œé™¤äº†è¼¸å‡ºç¨‹å¼ç¢¼è½‰è­¯å¤–ï¼Œé‚„è¦è¼¸èŠ”åŒ…å«å‹åˆ¥å®£å‘Šè³‡è¨Šçš„ .d.ts æª”ï¼Œæ‰€ä»¥æœƒåœ¨ build ç›®éŒ„ä¸­ç”¢ç”Ÿä¸€å€‹ index.d.jsï¼Œå…§å®¹å¦‚ä¸‹åœ–ï¼Œå¯ä»¥çœ‹åˆ° taxAmount è¢«æ¨è«–æˆ string\ndeclare function calculateTax(amount: number): string; declare let price: number; declare let taxAmount: string; declare let halfShare: number; é—œæ–¼ Any çš„å‹åˆ¥æ¨è«– å°‡ç¯„ä¾‹æ”¹æˆå¦‚ä¸‹åœ–ï¼ŒcalculateTax å›å‚³å€¼åŠå‚³å…¥åƒæ•¸çš†è¨»è¨˜æˆç‚º any\nfunction calculateTax(amount: any): any { return (amount * 1.2).toFixed(2); } let price = 100; //æœªçµ¦å®šè³‡æ–™å‹åˆ¥ï¼Œç”±çµ¦å®šçš„å€¼æ¨è«–æ­¤æ™‚çš„ price è®Šæ•¸å‹åˆ¥ç‚º number let taxAmount = calculateTax(price); //ç”±æ–¼ calcaulateTax å‹åˆ¥è¨»è¨˜ç‚º anyï¼Œæ•…è¢«æ¨è«–æˆ any let halfShare = taxAmount / 2; // æœªçµ¦å®šè³‡æ–™å‹åˆ¥ï¼Œ(any / 2) è¨ˆç®—çµæœæœƒè¢«æ¨è«–æˆ number console.log(`Full amount in tax: ${taxAmount}`); //Full amount in tax: 120.00 console.log(`Half share: ${halfShare}`); //Half share: 60 çµæœç™¼ç¾åœ¨ index.d.js æª”ä¸­ taxAmount ä¹Ÿè¢«æ¨è«–æˆ anyï¼Œä¸”ç·¨è­¯çµæœæ­£å¸¸ã€‚\ndeclare function calculateTax(amount: any): any; declare let price: number; declare let taxAmount: any; declare let halfShare: number; ä½†é€™æ¨£çš„ä½¿ç”¨ any å‹åˆ¥ï¼Œä½ æœƒç™¼ç¾é€™å’Œå¯« javascript ç¨‹å¼ç¢¼ç„¡ä»»ä½•å·®åˆ¥ï¼Œä¹Ÿå°±æ˜¯èªªä½ è®“ç¨‹å¼è‡ªè¡Œæ‰¿æ“”çµæ±ï¼Œè€Œæ²’æœ‰ç”¨åˆ° TypeScript éœæ…‹å‹åˆ¥çš„å¥½è™•(ç·¨è­¯æ™‚æœŸå³å¯æª¢æŸ¥å‡ºç¨‹å¼å¯èƒ½å‡ºå•é¡Œçš„åœ°æ–¹)ã€‚\næˆ‘å€‘ä¾†æ¸¬è©¦ä¸€ä¸‹ï¼Œå°‡ calculateTax function æ”¹æˆå¦‚ä¸‹:\nfunction calculateTax(amount: any): any { return `$${(amount * 1.2).toFixed(2)}`; } å†åŸ·è¡Œçœ‹çœ‹ï¼Œç™¼ç¾ç·¨è­¯ç¨‹å¼æ™‚æ­£å¸¸ï¼Œç¢ºåœ¨åŸ·è¡Œæ™‚æœŸç”¢ç”Ÿéé æœŸçµæœ\nFull amount in tax: $120.00 Half share: NaN çµè«–å°±æ˜¯ä½ æ‡‰è©²å„˜å¯èƒ½çš„ä¸è¦æœ‰ any é€™æ¨£çš„å‹åˆ¥è¨»è¨˜ã€‚\nContextual Typing (ä¾ç…§èƒŒæ™¯ä¾†é€²è¡Œçš„å‹æ…‹æ¨è«–) TypeScript ä½¿ç”¨è®Šé‡çš„ä½ç½®ä¾†æ¨æ–·å®ƒå€‘çš„é¡å‹ï¼Œé€™å°±æ˜¯æ‰€è¬‚çš„ contextual typing\ndocument.addEventListener(\u0026#34;click\u0026#34;, function (event) { console.log(event.button); // }); åœ¨é€™å€‹ä¾‹å­ä¸­ï¼ŒTypeScript å› ç‚º click äº‹ä»¶è€ŒçŸ¥é“ event åƒæ•¸æ˜¯ MouseEvent çš„ä¸€å€‹å¯¦ä¾‹ã€‚\ndocument.addEventListener(\u0026#34;scroll\u0026#34;, function (event) { console.log(event.button); // compiler error }); è€Œåœ¨é€™å€‹ä¾‹å­ä¸­ï¼Œå› ç‚ºæ˜¯ \u0026lsquo;scroll\u0026rsquo; äº‹ä»¶ï¼Œæ‰€ä»¥åƒæ•¸ä¸­ä¸èƒ½æ˜¯ buttonï¼Œå› æ­¤è½‰è­¯æ™‚æœƒç”¢ç”ŸéŒ¯èª¤ã€‚\nwindow.onmousedown = function(mouseEvent) { console.log(mouseEvent.button); //\u0026lt;- OK  console.log(mouseEvent.kangaroo); //\u0026lt;- Error! }; Typescript å‹åˆ¥æª¢æŸ¥å™¨ä½¿ç”¨ Window.onmousedown å‡½æ•¸çš„å‹åˆ¥ä¾†æ¨æ–·è³¦å€¼å³é‚Šçš„å‡½æ•¸é‹ç®—å¼çš„å‹åˆ¥ã€‚å› æ­¤ï¼Œå®ƒèƒ½å¤ æ¨æ–·å‡º mouseEvent åƒæ•¸çš„å‹åˆ¥ï¼Œå®ƒç¢ºå¯¦åŒ…å«ä¸€å€‹æŒ‰éˆ•å±¬æ€§ï¼Œä½†ä¸åŒ…å«è¢‹é¼ å±¬æ€§ã€‚\n","permalink":"https://calvinegs.github.io/posts/ts-type-inferenc-annotation/","summary":"åœ¨æ­¤è¦è¨è«–çš„æ˜¯æœ‰é—œ TypeScript çš„ å‹åˆ¥æ¨è«–(type inference) èˆ‡ å‹åˆ¥è¨»è¨˜(type annotation)\né—œæ–¼ Javascript çš„å‹åˆ¥ Javascript æ˜¯å€‹å‹•æ…‹å‹åˆ¥çš„èªè¨€ï¼Œä¹Ÿå°±æ˜¯èªªæ“æœ‰ \u0026lsquo;å‹åˆ¥\u0026rsquo; çš„æ˜¯ \u0026lsquo;å€¼\u0026rsquo; è€Œä¸æ˜¯è®Šæ•¸ã€‚\nlet myVar; console.log(`${myVar}: ${typeof myVar}`); // undefined : undefined myVar = 20; console.log(`${myVar}: ${typeof myVar}`); // 20 : number myVar = \u0026#34;Hi\u0026#34;; console.log(`${myVar}: ${typeof myVar}`); // Hi : string myVar = true; console.log(`${myVar}: ${typeof myVar}`); // true : boolean Type Annotation (å‹åˆ¥è¨»è¨˜) TypeScript æä¾›éœå‹åˆ¥åŠŸèƒ½ï¼Œè®“æˆ‘å€‘å¯ä»¥æ˜ç¢ºæŒ‡å®šè®Šæ•¸çš„å‹åˆ¥ã€‚ç·¨è­¯å™¨åœ¨è½‰è­¯éç¨‹å³å¯åµæ¸¬åˆ°ä½¿ç”¨ä¸åŒå‹åˆ¥æ™‚ä¸»å‹•æŠ›å‡ºéŒ¯èª¤è¨Šæ¯ã€‚ä¸‹é¢çš„ä¾‹å­å°±æ˜¯ä½¿ç”¨å‹åˆ¥è¨»è¨˜ä¾†å®šç¾©éœæ…‹å‹åˆ¥:\nfunction calculateTax(amount: number): number { return amount * 1.2; } console.","title":"å‹åˆ¥æ¨è«–(type inference) èˆ‡ å‹åˆ¥è¨»è¨˜(type annotation)"},{"content":"github Source code #tag: web_api\næœ¬æ–‡å°‡è¨˜éŒ„å¦‚ä½•ä¸€æ­¥æ­¥å¾ç„¡åˆ°æœ‰ä½¿ç”¨ Dotnet Core 5.0 å»ºç«‹ ASP.NET Core 5 Web APIï¼Œå…¶ä¸­å°‡æœƒä½¿ç”¨åˆ°ä¸‹åˆ—æŠ€è¡“:\n Dotnet cli Entity Framework Sqlite ASP.NET Core Generator  ä½¿ç”¨ dotnet cli å»ºç«‹å°ˆæ¡ˆ $ dotnet --version # æª¢æŸ¥ dotnet ç‰ˆæœ¬ï¼Œç›®å‰ç‰ˆæœ¬ç‚º: 5.0.201 $ dotnet new webapi -n \u0026#34;Todo5\u0026#34; \u0026amp;\u0026amp; cd \u0026#34;Todo5\u0026#34; $ ls # æŸ¥çœ‹ å°ˆæ¡ˆæª”æ¡ˆçµæ§‹ $ dotnet new gitignore # ä½¿ç”¨ dotnet cli ä¾†ç”¢ç”Ÿé è¨­çš„ git ignore æª”æ¡ˆ å»ºç«‹ git åˆå§‹ç‰ˆæœ¬ $ git init \u0026amp;\u0026amp; git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Initial commit\u0026#34; å®‰è£æœ¬æ©Ÿå·¥å…· æ­¤æ–¹å¼å®‰è£çš„å·¥å…·ï¼Œåƒ…é™æœ¬æ©Ÿå­˜å–(åªé‡å°ç›®å‰çš„ç›®éŒ„å’Œå­ç›®éŒ„)ï¼Œ é¦–å…ˆé€é dotnet new tool-manifest å‘½ä»¤ä¾†ç”¢ç”Ÿå·¥å…·è³‡è¨Šæ¸…å–®æª”ï¼Œå†ä½¿ç”¨ dotnet tool install ä¾†å®‰è£å„å¼å·¥å…·ç¨‹å¼ã€‚é€™æ¨£çš„æ–¹å¼å¥½è™•æ˜¯åœ¨å°ˆæ¡ˆè‹¥å¤šäººå”åŠ©æ–¹å¼æ™‚ï¼Œå‰‡å¯åˆ©ç”¨ dotnet tool restore å‘½ä»¤å°‡ç´€éŒ„åœ¨ .config/dotnet-tools.json çš„å·¥å…·è³‡è¨Šæ¸…å–®æª”é‡å»ºåœ¨ä¸åŒå”åŠ©äººå“¡çš„é›»è…¦ä¸­ã€‚\n$ dotnet new tool-manifest #æœƒç”¢ç”Ÿ .config/dotnet-tools.json æª”æ¡ˆ $ dotnet tool install dotnet-ef --version 5.0.13 #ä½¿ç”¨ local å®‰è£æ–¹å¼ä¾†å®‰è£ Entity Framework å·¥å…· $ dotnet tool install dotnet-aspnet-codegenerator --version 5.0.2 #ä½¿ç”¨ local å®‰è£æ–¹å¼ä¾†å®‰è£ Code Generator å·¥å…· $ cat .\\.config\\dotnet-tools.json # æŸ¥çœ‹å®‰è£ä¸Šè¿°äºŒé …å·¥å…·å¾Œçš„è¨­å®šè³‡è¨Š 1 2 3 4 5 6 7 8 9 10 11 12 13 14  { \u0026#34;version\u0026#34;: 1, \u0026#34;isRoot\u0026#34;: true, \u0026#34;tools\u0026#34;: { \u0026#34;dotnet-ef\u0026#34;: {  \u0026#34;version\u0026#34;: \u0026#34;5.0.13\u0026#34;, \u0026#34;commands\u0026#34;: [\u0026#34;dotnet-ef\u0026#34;] }, \u0026#34;dotnet-aspnet-codegenerator\u0026#34;: {  \u0026#34;version\u0026#34;: \u0026#34;5.0.2\u0026#34;, \u0026#34;commands\u0026#34;: [\u0026#34;dotnet-aspnet-codegenerator\u0026#34;] } } }   å®‰è£ç¨‹å¼ä½¿ç”¨çš„ç›¸é—œå¥—ä»¶ $ dotnet add package Microsoft.EntityFrameworkCore.Sqlite --version 5.0.13 #Sqlite ä½¿ç”¨çš„å¥—ä»¶ $ dotnet add package Microsoft.EntityFrameworkCore.Tools --version 5.0.13 #ä½¿ç”¨ dotnet Entity Frameworkæ™‚å¿…é ˆå®‰è£æ­¤å¥—ä»¶ $ dotnet add package Microsoft.EntityFrameworkCore.Design --version 5.0.13 #ä½¿ç”¨ dotnet Entity Frameworkæ™‚å¿…é ˆå®‰è£æ­¤å¥—ä»¶ $ dotnet add package Microsoft.EntityFrameworkCore.SqlServer --version 5.0.13 #ä½¿ç”¨ dotnet Entity Frameworkæ™‚å¿…é ˆå®‰è£æ­¤å¥—ä»¶ $ dotnet add package Microsoft.VisualStudio.Web.CodeGeneration.Design --version 5.0.2 #æ­é… dotnet-aspnet-codegenerator ä½¿ç”¨ å®‰è£çš„ç¨‹å¼å¥—ä»¶è³‡è¨Šç´€éŒ„åœ¨ \u0026ldquo;å°ˆæ¡ˆ\u0026rdquo;.csproj æª”æ¡ˆä¸­\n$ cat .\\Todo5.csproj #æŸ¥çœ‹ å®‰è£å¥—ä»¶çš„ç›¸é—œè¨­å®šå€¼ 1\u0026lt;Project Sdk=\u0026#34;Microsoft.NET.Sdk.Web\u0026#34;\u0026gt; 2 3 \u0026lt;PropertyGroup\u0026gt; 4 \u0026lt;TargetFramework\u0026gt;net5.0\u0026lt;/TargetFramework\u0026gt; 5 \u0026lt;RootNamespace\u0026gt;_5Todo\u0026lt;/RootNamespace\u0026gt; 6 \u0026lt;/PropertyGroup\u0026gt; 7 8 \u0026lt;ItemGroup\u0026gt; 9 \u0026lt;PackageReference Include=\u0026#34;Microsoft.EntityFrameworkCore.Design\u0026#34; Version=\u0026#34;5.0.13\u0026#34;\u0026gt; 10 \u0026lt;IncludeAssets\u0026gt;runtime; build; native; contentfiles; analyzers; buildtransitive\u0026lt;/IncludeAssets\u0026gt; 11 \u0026lt;PrivateAssets\u0026gt;all\u0026lt;/PrivateAssets\u0026gt; 12 \u0026lt;/PackageReference\u0026gt; 13 \u0026lt;PackageReference Include=\u0026#34;Microsoft.EntityFrameworkCore.Sqlite\u0026#34; Version=\u0026#34;5.0.13\u0026#34; /\u0026gt; 14 \u0026lt;PackageReference Include=\u0026#34;Microsoft.EntityFrameworkCore.SqlServer\u0026#34; Version=\u0026#34;5.0.13\u0026#34; /\u0026gt; 15 \u0026lt;PackageReference Include=\u0026#34;Microsoft.EntityFrameworkCore.Tools\u0026#34; Version=\u0026#34;5.0.13\u0026#34;\u0026gt; 16 \u0026lt;IncludeAssets\u0026gt;runtime; build; native; contentfiles; analyzers; buildtransitive\u0026lt;/IncludeAssets\u0026gt; 17 \u0026lt;PrivateAssets\u0026gt;all\u0026lt;/PrivateAssets\u0026gt; 18 \u0026lt;/PackageReference\u0026gt; 19 \u0026lt;PackageReference Include=\u0026#34;Microsoft.VisualStudio.Web.CodeGeneration.Design\u0026#34; Version=\u0026#34;5.0.2\u0026#34; /\u0026gt; 20 \u0026lt;PackageReference Include=\u0026#34;Swashbuckle.AspNetCore\u0026#34; Version=\u0026#34;5.6.3\u0026#34; /\u0026gt; 21 \u0026lt;/ItemGroup\u0026gt; 22 23\u0026lt;/Project\u0026gt; å»ºç«‹ git æ–°ç‰ˆæœ¬ $ git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Add EFCore NuGet packages\u0026#34; æ–°å¢ database context (è‡ªå‹•ç”¢ç”Ÿ) $ dotnet ef dbcontext scaffold \u0026#34;Data Source=app.db; Cache=Shared\u0026#34; Microsoft.EntityFrameworkCore.Sqlite -c ApiDbContext -o Data #åœ¨å°ˆæ¡ˆç›®éŒ„ ./Data å­ç›®éŒ„ä¸‹æ–°å»ºç«‹ä¸€å€‹ ApiDbContext.cs çš„ DB Context file $ dotnet run #å¯ä½¿ç”¨ dotnet watch run å‘½ä»¤ä¾†è‡ªå‹•ç›£æ§ç¨‹å¼ç¢¼çš„è®Šå‹• é–‹å•Ÿç€è¦½å™¨æŸ¥çœ‹ä»¥ä¸‹ç¶²å€ \u0026ldquo;https://localhost:5001/WeatherForecast\u0026rdquo; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32  [ { \u0026#34;date\u0026#34;: \u0026#34;2022-01-11T11:44:43.1899069+08:00\u0026#34;, \u0026#34;temperatureC\u0026#34;: -6, \u0026#34;temperatureF\u0026#34;: 22, \u0026#34;summary\u0026#34;: \u0026#34;Hot\u0026#34; }, { \u0026#34;date\u0026#34;: \u0026#34;2022-01-12T11:44:43.190114+08:00\u0026#34;, \u0026#34;temperatureC\u0026#34;: 28, \u0026#34;temperatureF\u0026#34;: 82, \u0026#34;summary\u0026#34;: \u0026#34;Balmy\u0026#34; }, { \u0026#34;date\u0026#34;: \u0026#34;2022-01-13T11:44:43.1901167+08:00\u0026#34;, \u0026#34;temperatureC\u0026#34;: 23, \u0026#34;temperatureF\u0026#34;: 73, \u0026#34;summary\u0026#34;: \u0026#34;Hot\u0026#34; }, { \u0026#34;date\u0026#34;: \u0026#34;2022-01-14T11:44:43.1901169+08:00\u0026#34;, \u0026#34;temperatureC\u0026#34;: 42, \u0026#34;temperatureF\u0026#34;: 107, \u0026#34;summary\u0026#34;: \u0026#34;Warm\u0026#34; }, { \u0026#34;date\u0026#34;: \u0026#34;2022-01-15T11:44:43.1901171+08:00\u0026#34;, \u0026#34;temperatureC\u0026#34;: 22, \u0026#34;temperatureF\u0026#34;: 71, \u0026#34;summary\u0026#34;: \u0026#34;Cool\u0026#34; } ]   é–‹å•Ÿç€è¦½å™¨æŸ¥çœ‹ä»¥ä¸‹ Swagger ç¶²å€ \u0026ldquo;https://localhst:5001/swagger/index.html\u0026rdquo; å»ºç«‹å¦ä¸€å€‹ git æ–°ç‰ˆæœ¬ $ git add . \u0026amp;\u0026amp; git commit -m \u0026#34;Create dbcontext classes using dotnet-ef\u0026#34; Open VS Code $ Code . åœ¨ Models ç›®éŒ„ä¸‹æ–°å¢ä¸€å€‹ model(æ¨¡å‹) class - ItemData 1 2 3 4 5 6 7 8 9 10  namespace Todo5.Models { public class ItemData { public int Id { get; set; } public string Title { get; set; } public string Details { get; set; } public bool Done { get; set; } } }   åœ¨ ApiDbContext.cs ä¸­å®£å‘Šä¸€å€‹ ItemData table public DbSet\u0026lt;ItemData\u0026gt; ItemDatas { get; set; }\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  using System; using Microsoft.EntityFrameworkCore; using Microsoft.EntityFrameworkCore.Metadata; using Todo5.Models; #nullable disable namespace Todo5.Data { public partial class ApiDbContext : DbContext { public DbSet\u0026lt;ItemData\u0026gt; ItemDatas { get; set; }  public ApiDbContext() { } //...  } }   åœ¨ appsettings.json æª”æ¡ˆä¸­æ–°å¢ ConnectionString è¨­å®šè³‡æ–™ \u0026#34;ConnectionStrings\u0026#34;: { \u0026#34;DefaultConnection\u0026#34;: \u0026#34;Data Source=app.db;Cache=Shared\u0026#34; }, åœ¨ Startup.cs æª”æ¡ˆä¸­è¨»å†Š database context (é€£çµ¡åˆ° Sqlite DB) 15 16 17 18 19  services.AddDbContext\u0026lt;ApiDbContext\u0026gt;(options =\u0026gt; options.UseSqlite( Configuration.GetConnectionString(\u0026#34;DefaultConnection\u0026#34;)  ) );   1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25  namespace TodoApp { public class Startup { public Startup(IConfiguration configuration) { Configuration = configuration; } public IConfiguration Configuration { get; } // This method gets called by the runtime. Use this method to add services to the container.  public void ConfigureServices(IServiceCollection services) { services.AddDbContext\u0026lt;ApiDbContext\u0026gt;(options =\u0026gt; options.UseSqlite( Configuration.GetConnectionString(\u0026#34;DefaultConnection\u0026#34;)  ) ); services.AddControllers(); // ...  } }; }   ç§»é™¤é è¨­ç”¢ç”Ÿçš„æ¨£æœ¬ç¨‹å¼ç¢¼ Weather Forecast ç¨‹å¼ç¢¼æ˜¯é è¨­è‡ªå‹•ç”¢ç”Ÿçš„ï¼Œå¯ç›´æ¥å°‡ WeatherForecast.cs \u0026amp; WeatherForecastController.cs åˆªé™¤\nAdd the initial migration to create the database $ dotnet build $ dotnet ef migrations add \u0026#34;Initial Migrations\u0026#34; $ dotnet ef database update # åœ¨æ ¹ç›®éŒ„ç”¢ç”Ÿ app.db sqlite database ä½¿ç”¨ ASPNET Codegenerator è‡ªå‹•ç”¢ç”Ÿ Todo Controller $ dotnet aspnet-codegenerator controller -name TodoController -async -api -m ItemData -dc ApiDbContext -outDir Controllers åŸ·è¡Œ Swagger é–‹å•Ÿç€è¦½å™¨æŸ¥çœ‹ä»¥ä¸‹ç¶²å€ \u0026ldquo;https://localhst:5001/swagger/index.html\u0026rdquo;\né€é POST Method æ–°å¢ä¸€ç­†è³‡æ–™\nä½¿ç”¨ GET Method æŸ¥è©¢è³‡æ–™ ","permalink":"https://calvinegs.github.io/posts/dotnet5-webapi/","summary":"github Source code #tag: web_api\næœ¬æ–‡å°‡è¨˜éŒ„å¦‚ä½•ä¸€æ­¥æ­¥å¾ç„¡åˆ°æœ‰ä½¿ç”¨ Dotnet Core 5.0 å»ºç«‹ ASP.NET Core 5 Web APIï¼Œå…¶ä¸­å°‡æœƒä½¿ç”¨åˆ°ä¸‹åˆ—æŠ€è¡“:\n Dotnet cli Entity Framework Sqlite ASP.NET Core Generator  ä½¿ç”¨ dotnet cli å»ºç«‹å°ˆæ¡ˆ $ dotnet --version # æª¢æŸ¥ dotnet ç‰ˆæœ¬ï¼Œç›®å‰ç‰ˆæœ¬ç‚º: 5.0.201 $ dotnet new webapi -n \u0026#34;Todo5\u0026#34; \u0026amp;\u0026amp; cd \u0026#34;Todo5\u0026#34; $ ls # æŸ¥çœ‹ å°ˆæ¡ˆæª”æ¡ˆçµæ§‹ $ dotnet new gitignore # ä½¿ç”¨ dotnet cli ä¾†ç”¢ç”Ÿé è¨­çš„ git ignore æª”æ¡ˆ å»ºç«‹ git åˆå§‹ç‰ˆæœ¬ $ git init \u0026amp;\u0026amp; git add .","title":"ASP.NET Core 5 Web API - å¾ç„¡åˆ°æœ‰"},{"content":"Angular çš„ç‰ˆæœ¬æ›´æ–°è¿­ä»£çš„ç›¸ç•¶å¿« (æ‰€æœ‰çš„å‰ç«¯é–‹æ–¼å·¥å…·éƒ½æœ‰ç›¸åŒçš„æƒ…å½¢)ï¼Œå®‰è£åŠä½¿ç”¨ Angular Cli æ™‚å¿…é ˆåœ¨æœ‰ Node.js çš„ç’°å¢ƒä¸‹æ‰èƒ½é€²è¡Œã€‚\nç•¶ä½ åœ¨åŒä¸€å°é›»è…¦ä¸­ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ Angular æ™‚å°±å®¹æ˜“åœ¨å®‰è£ç›¸é—œå¥—ä»¶æ™‚é‡åˆ°è­¦èªï¼ŒåŸå› å¸¸æ˜¯å› ç‚º Angular èˆ‡ Node.js ç‰ˆæœ¬æ­é…çš„é—œä¿‚ã€‚\nè‡³æ–¼ç‚ºä½•æœ‰åŒæ™‚ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ Angular å‘¢? é™¤äº†é–‹ç™¼çš„å°ˆæ¡ˆæ²’æœ‰å…¨éƒ¨éƒ½ä¸€èµ·å‡ç´šè‡³çµ±ä¸€ç‰ˆæœ¬(é€™æ˜¯ä¸€ä»¶è¤‡é›œçš„äº‹)çš„å› ç´ å¤–ï¼Œå€‹äººæœ€å¸¸é‡åˆ°çš„ç‹€æ³æ˜¯: ç•¶åœ¨ç¶²ä¸Š(github)æ‰¾åˆ°å¾ˆæ£’çš„ Demo / Sample ç¨‹å¼ï¼Œåœ¨ git clone å›é›»è…¦å¾Œç™¼ç¾å®ƒçš„ç‰ˆæœ¬æ˜¯èˆŠç‰ˆæœ¬ Angular æ‰€æ’°å¯«ï¼Œä½¿ç”¨ npm install å®‰è£ç›¸é—œå¥—ä»¶æ™‚ï¼Œå‡ºç¾è­¦å‘Šè¨Šæ¯ï¼Œç”šè‡³ç„¡æ³•å®‰è£æˆåŠŸã€‚\nç‚ºäº†è¦ç®¡ç†åŒä¸€å°é›»è…¦ä¸­å­˜åœ¨è‘—æœ‰ä¸åŒç‰ˆ Node.jsï¼Œè®“ä½ å¾ˆå®¹æ˜“åœ¨å„ç‰ˆæœ¬ä¸­è‡ªç”±çš„é€²è¡Œåˆ‡æ› (ç”šè‡³åœ¨é€²å…¥ä¸åŒç›®éŒ„æ™‚è‡ªå‹•åˆ‡æ›å°æ‡‰çš„ Node.js ç‰ˆæœ¬)ï¼Œä½ éœ€è¦ Node.js ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œå¦‚: NVM æˆ– NVSï¼Œåœ¨é€™å€‹ç­†è¨˜ä¸­è¦è¨˜éŒ„çš„æ˜¯ NVSã€‚\nå®‰è£ nvs F:\\\u0026gt; choco list nvs #å…ˆæŸ¥çœ‹æ˜¯å¦å·²å®‰è£äº† nvs F:\\\u0026gt; choco install nvs #å®‰è£ nvs F:\\\u0026gt; nvs --version #æŸ¥çœ‹æ˜¯å¦å®‰è£æˆåŠŸï¼Œä¸¦é¡¯ç¤º nvs ç‰ˆæœ¬  è¨»ï¼šå®‰è£å®Œæˆå¾Œè‹¥é‡åˆ°åœ¨ cmd ä¸­å¯æ­£å¸¸åŸ·è¡Œï¼Œä½†åœ¨Windows PowerShell ç„¡æ³•ä½¿ç”¨æ™‚ï¼Œå¯ä½¿ç”¨â€˜ç³»çµ±ç®¡ç†å“¡â€™èº«ä»½é–‹å•Ÿ Posershellï¼Œä¸¦åŸ·è¡Œ PS\u0026gt;Set-ExecutionPolicy RemoteSigned æ‡‰å¯è§£æ±ºé€™å€‹å•é¡Œã€‚\n å®‰è£ä¸åŒç‰ˆæœ¬ Node.js ä»¥å€‹äººå·¥ä½œç’°å¢ƒç‚ºä¾‹ï¼Œç›®å‰ä½¿ç”¨çš„ Angular æ˜¯ 13.0 æ­é…çš„ Node.js ç‰ˆæœ¬æ˜¯ V16.10.0ã€‚\nç•¶æˆ‘éœ€è¦åƒè€ƒå…¶ä»–ç¯„ä¾‹æ™‚ï¼Œå¦‚åœ¨ github æ‰¾åˆ°ä¸€å€‹ç¯„ä¾‹ç¨‹å¼ï¼Œgit clone å¾Œï¼ŒæŸ¥çœ‹è©²å°ˆæ¡ˆç™¼ç¾å®ƒæ’°å¯«æ™‚ä½¿ç”¨ Angular 8.2.0 é€™å€‹ç‰ˆæœ¬\nPS F:\\test\\angular-forms-workshop\u0026gt; cat package.json\n{ \u0026#34;name\u0026#34;: \u0026#34;angular-forms-workshop\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0.0.0\u0026#34;, \u0026#34;scripts\u0026#34;: { \u0026#34;ng\u0026#34;: \u0026#34;ng\u0026#34;, \u0026#34;start\u0026#34;: \u0026#34;ng serve\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;ng build\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;ng test\u0026#34;, \u0026#34;lint\u0026#34;: \u0026#34;ng lint\u0026#34;, \u0026#34;e2e\u0026#34;: \u0026#34;ng e2e\u0026#34; }, \u0026#34;private\u0026#34;: true, \u0026#34;dependencies\u0026#34;: { \u0026#34;@angular/animations\u0026#34;: \u0026#34;~8.2.0\u0026#34;, \u0026#34;@angular/common\u0026#34;: \u0026#34;~8.2.0\u0026#34;, \u0026#34;@angular/compiler\u0026#34;: \u0026#34;~8.2.0\u0026#34;, \u0026#34;@angular/core\u0026#34;: \u0026#34;~8.2.0\u0026#34;, \u0026#34;@angular/forms\u0026#34;: \u0026#34;~8.2.0\u0026#34;, \u0026#34;@angular/platform-browser\u0026#34;: \u0026#34;~8.2.0\u0026#34;, \u0026#34;@angular/platform-browser-dynamic\u0026#34;: \u0026#34;~8.2.0\u0026#34;, \u0026#34;@angular/router\u0026#34;: \u0026#34;~8.2.0\u0026#34;, \u0026#34;@ng-bootstrap/ng-bootstrap\u0026#34;: \u0026#34;^5.1.0\u0026#34;, \u0026#34;@ng-dynamic-forms/core\u0026#34;: \u0026#34;^9.0.1\u0026#34;, \u0026#34;@ng-dynamic-forms/ui-ng-bootstrap\u0026#34;: \u0026#34;^9.0.1\u0026#34;, \u0026#34;angular2-text-mask\u0026#34;: \u0026#34;^9.0.0\u0026#34;, \u0026#34;bootstrap\u0026#34;: \u0026#34;^4.3.1\u0026#34;, \u0026#34;rxjs\u0026#34;: \u0026#34;~6.4.0\u0026#34;, \u0026#34;tslib\u0026#34;: \u0026#34;^1.10.0\u0026#34;, \u0026#34;zone.js\u0026#34;: \u0026#34;~0.9.1\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;@angular-devkit/build-angular\u0026#34;: \u0026#34;~0.802.0\u0026#34;, \u0026#34;@angular/cli\u0026#34;: \u0026#34;~8.2.0\u0026#34;, \u0026#34;@angular/compiler-cli\u0026#34;: \u0026#34;~8.2.0\u0026#34;, \u0026#34;@angular/language-service\u0026#34;: \u0026#34;~8.2.0\u0026#34;, \u0026#34;@types/node\u0026#34;: \u0026#34;~8.9.4\u0026#34;, \u0026#34;@types/jasmine\u0026#34;: \u0026#34;~3.3.8\u0026#34;, \u0026#34;@types/jasminewd2\u0026#34;: \u0026#34;~2.0.3\u0026#34;, \u0026#34;codelyzer\u0026#34;: \u0026#34;^5.0.0\u0026#34;, \u0026#34;jasmine-core\u0026#34;: \u0026#34;~3.4.0\u0026#34;, \u0026#34;jasmine-spec-reporter\u0026#34;: \u0026#34;~4.2.1\u0026#34;, \u0026#34;karma\u0026#34;: \u0026#34;~4.1.0\u0026#34;, \u0026#34;karma-chrome-launcher\u0026#34;: \u0026#34;~2.2.0\u0026#34;, \u0026#34;karma-coverage-istanbul-reporter\u0026#34;: \u0026#34;~2.0.1\u0026#34;, \u0026#34;karma-jasmine\u0026#34;: \u0026#34;~2.0.1\u0026#34;, \u0026#34;karma-jasmine-html-reporter\u0026#34;: \u0026#34;^1.4.0\u0026#34;, \u0026#34;protractor\u0026#34;: \u0026#34;~5.4.0\u0026#34;, \u0026#34;ts-node\u0026#34;: \u0026#34;~7.0.0\u0026#34;, \u0026#34;tslint\u0026#34;: \u0026#34;~5.15.0\u0026#34;, \u0026#34;typescript\u0026#34;: \u0026#34;~3.5.3\u0026#34; } } è‹¥ç›´æ¥ä½¿ç”¨ npm install ä¾†å›å¾©æ­¤å°ˆæ¡ˆçš„å¥—ä»¶ï¼Œå°‡æœƒå‡ºç¾è¨±å¤šçš„è­¦å‘Šè¨Šæ¯ï¼Œå¦‚ä¸‹åœ–:\næŸ¥é–±å°ç…§è¡¨å¾Œç™¼ç¾ Angular 8.2 ç‰ˆæœ¬æ‡‰è©²æ­é…çš„æ˜¯ Node.js 10.9.0 ( Angular èˆ‡ Node.js å°ç…§è¡¨ )\næ­¤æ™‚å¯é€é nvs ä¾†é¡å¤–å†å®‰è£ Node.js 10.9.0 ç‰ˆæœ¬åˆ°ä½ çš„ç³»çµ±ä¸­ï¼Œä¸¦å°‡ Node.js ä½¿ç”¨ç‰ˆæœ¬ åˆ‡æ›åˆ° 10.9.0\nPS F:\\test\\angular-forms-workshop\u0026gt; nvs add 10.9.0 PS F:\\test\\angular-forms-workshop\u0026gt; nvs use 10.9.0 å®Œæˆå¾Œï¼Œä½¿ç”¨é€™å€‹ æ­£ç¢º çš„ç‰ˆæœ¬å°±å¯ä»¥é †åˆ©å®‰è£ç›¸é—œçš„å¥—ä»¶äº†ã€‚\nåŒä¸€æ™‚é–“ï¼Œæˆ‘åˆåœ¨ github æ‰¾åˆ°å¦ä¸€å€‹åˆé©çš„ç¯„ä¾‹ç¨‹å¼ï¼Œgit clone å¾Œï¼ŒæŸ¥çœ‹è©²å°ˆæ¡ˆæ’°å¯«æ™‚æ˜¯ä½¿ç”¨é‚£å€‹ç‰ˆæœ¬çš„ Angularï¼Œç™¼ç¾æ˜¯ 11.2.13\nPS F:\\test\\angular-forms-workshop\u0026gt; cd ..\\angular.io-example\\ PS F:\\test\\angular.io-example\u0026gt; cat package.json { \u0026#34;name\u0026#34;: \u0026#34;angular.io-example\u0026#34;, \u0026#34;version\u0026#34;: \u0026#34;0.0.0\u0026#34;, \u0026#34;private\u0026#34;: true, \u0026#34;dependencies\u0026#34;: { \u0026#34;rxjs\u0026#34;: \u0026#34;6.6.7\u0026#34;, \u0026#34;tslib\u0026#34;: \u0026#34;2.2.0\u0026#34;, \u0026#34;zone.js\u0026#34;: \u0026#34;0.10.3\u0026#34;, \u0026#34;jasmine-core\u0026#34;: \u0026#34;3.6.0\u0026#34;, \u0026#34;@angular/core\u0026#34;: \u0026#34;11.2.13\u0026#34;, \u0026#34;@angular/forms\u0026#34;: \u0026#34;11.2.13\u0026#34;, \u0026#34;@angular/common\u0026#34;: \u0026#34;11.2.13\u0026#34;, \u0026#34;@angular/router\u0026#34;: \u0026#34;11.2.13\u0026#34;, \u0026#34;jasmine-marbles\u0026#34;: \u0026#34;0.6.0\u0026#34;, \u0026#34;@angular/compiler\u0026#34;: \u0026#34;11.2.13\u0026#34;, \u0026#34;@angular/animations\u0026#34;: \u0026#34;11.2.13\u0026#34;, \u0026#34;@angular/platform-browser\u0026#34;: \u0026#34;11.2.13\u0026#34;, \u0026#34;angular-in-memory-web-api\u0026#34;: \u0026#34;0.11.0\u0026#34;, \u0026#34;@angular/platform-browser-dynamic\u0026#34;: \u0026#34;11.2.13\u0026#34; }, \u0026#34;scripts\u0026#34;: { \u0026#34;ng\u0026#34;: \u0026#34;ng\u0026#34;, \u0026#34;start\u0026#34;: \u0026#34;ng serve\u0026#34;, \u0026#34;build\u0026#34;: \u0026#34;ng build\u0026#34;, \u0026#34;test\u0026#34;: \u0026#34;ng test\u0026#34;, \u0026#34;lint\u0026#34;: \u0026#34;ng lint\u0026#34;, \u0026#34;e2e\u0026#34;: \u0026#34;ng e2e\u0026#34; }, \u0026#34;devDependencies\u0026#34;: { \u0026#34;@angular-devkit/build-angular\u0026#34;: \u0026#34;~0.1102.12\u0026#34;, \u0026#34;@angular/cli\u0026#34;: \u0026#34;~11.2.12\u0026#34;, \u0026#34;@angular/compiler-cli\u0026#34;: \u0026#34;~11.2.13\u0026#34;, \u0026#34;@types/jasmine\u0026#34;: \u0026#34;~3.6.0\u0026#34;, \u0026#34;@types/node\u0026#34;: \u0026#34;^12.11.1\u0026#34;, \u0026#34;codelyzer\u0026#34;: \u0026#34;^6.0.0\u0026#34;, \u0026#34;jasmine-core\u0026#34;: \u0026#34;~3.6.0\u0026#34;, \u0026#34;jasmine-spec-reporter\u0026#34;: \u0026#34;~5.0.0\u0026#34;, \u0026#34;karma\u0026#34;: \u0026#34;~6.1.0\u0026#34;, \u0026#34;karma-chrome-launcher\u0026#34;: \u0026#34;~3.1.0\u0026#34;, \u0026#34;karma-coverage\u0026#34;: \u0026#34;~2.0.3\u0026#34;, \u0026#34;karma-jasmine\u0026#34;: \u0026#34;~4.0.0\u0026#34;, \u0026#34;karma-jasmine-html-reporter\u0026#34;: \u0026#34;^1.5.0\u0026#34;, \u0026#34;protractor\u0026#34;: \u0026#34;~7.0.0\u0026#34;, \u0026#34;ts-node\u0026#34;: \u0026#34;~8.3.0\u0026#34;, \u0026#34;tslint\u0026#34;: \u0026#34;~6.1.0\u0026#34;, \u0026#34;typescript\u0026#34;: \u0026#34;~4.1.5\u0026#34; } } ä¸€æ¨£çš„é“ç†ï¼Œé€é nvs å†å¤šå®‰è£ Node.js 12.11.1 ç‰ˆæœ¬\nPS F:\\test\\angular-forms-workshop\u0026gt; nvs add 12.11.1 nvs çš„ä½¿ç”¨æ–¹æ³• æŸ¥çœ‹ç›®å‰æ‰€æœ‰å·²å®‰è£çš„ Node.js ç‰ˆæœ¬\nPS F:\\test\\angular-forms-workshop\u0026gt; nvs ls\nnode/16.10.0/x64 #Angular 13 æ‰€æ­é…çš„ Node.js ç‰ˆæœ¬ node/14.15.5/x64 (Fermium) #Angular 12 æ‰€æ­é…çš„ Node.js ç‰ˆæœ¬ node/12.11.1/x64 #Angular 11 æ‰€æ­é…çš„ Node.js ç‰ˆæœ¬ node/10.9.0/x64 #Angular 8 æ‰€æ­é…çš„ Node.js ç‰ˆæœ¬ node/8.9.4/x64 #Angular 7 æ‰€æ­é…çš„ Node.js ç‰ˆæœ¬ æ‰‹å‹•åˆ‡æ› PS F:\\test\\angular-forms-workshop\u0026gt; nvs use 10 #ä½¿ç”¨(åˆ‡æ›åˆ°)ç¬¬åç‰ˆï¼Œåœ¨ç¯„ä¾‹ä¸­æœƒè‡ªå‹•åˆ‡æ›åˆ° 10.9.0 PS F:\\test\\angular-forms-workshop\u0026gt; node -v #é¡¯ç¤ºç›®å‰ä½¿ç”¨ä¸­çš„ Node.js ç‰ˆæœ¬ v10.9.0 PS F:\\test\\angular-forms-workshop\u0026gt; nvs ls #å‰å° \u0026#39;\u0026gt;\u0026#39; ç¬¦è™Ÿè¡¨ç¤ºæ˜¯ç›®å‰`ä½¿ç”¨ä¸­`çš„ç‰ˆæœ¬ node/16.10.0/x64 node/14.15.5/x64 (Fermium) node/12.11.1/x64 \u0026gt;node/10.9.0/x64 node/8.9.4/x64 (Carbon) è‡ªå‹•åˆ‡æ› æ¯å€‹ç›®éŒ„è‹¥æ­é… .node-version æª”åçš„æ–‡å­—æª”ï¼Œä¸”å…§å®¹æ˜¯ Node.js çš„ç‰ˆæœ¬è³‡è¨Š:\nPS F:\\test\u0026gt; node -v \u0026gt; .node-version #å°‡ç‰ˆæœ¬è³‡è¨Šå¯«å…¥ .node-version æª”æ¡ˆä¸­ PS F:\\test\u0026gt; cat .node-version #æŸ¥çœ‹å…§å®¹ v10.9.0 é™¤æœ‰ä¸Šè¿°æª”æ¡ˆåŠå…§å®¹å¤–ï¼Œé‚„å¿…é ˆæ­é… é–‹å•“ nvs è‡ªå‹•åˆ‡æ› åŠŸèƒ½\nPS F:\\test\u0026gt; nvs auto on \nä»¥ä¸Šå…©å€‹æ¢ä»¶éƒ½æˆç«‹æ™‚ï¼Œç•¶åˆ‡æ›ä¸åŒç¾è¡Œç›®éŒ„æ™‚ï¼Œç³»çµ±æœƒè‡ªå‹•é¸æ“‡å¥—ç”¨ä¸åŒçš„ Node.js ç‰ˆæœ¬\nPS F:\\test\u0026gt; cd .\\angular.io-example\\ PATH += $env:LOCALAPPDATA\\nvs\\node\\12.11.1\\x64 PS F:\\test\\angular.io-example\u0026gt; node -v v12.11.1 PS F:\\test\\angular.io-example\u0026gt; cat .\\.node-version v12.11.1 PS F:\\test\\angular.io-example\u0026gt; cd ..\\angular-forms-workshop\\ PATH -= $env:LOCALAPPDATA\\nvs\\node\\12.11.1\\x64 PATH += $env:LOCALAPPDATA\\nvs\\node\\10.9.0\\x64 PS F:\\test\\angular-forms-workshop\u0026gt; node -v v10.9.0 åŠè‡ªå‹•å‹æ‰‹å‹•åˆ‡æ› è‹¥ nvs è‡ªå‹•åˆ‡æ› åŠŸèƒ½è¨­ç‚º off å‰‡å¯è¦–ç‚ºæ‰€è¬‚çš„ åŠè‡ªå‹• æ¨¡å¼ã€‚\nç„¡.node-version æª”æ¡ˆï¼Œä¹Ÿç„¡ nvs ä¹Ÿç„¡è¨­å®šé è¨­ç‰ˆæœ¬çš„æƒ…æ³:\nPS F:\\test\u0026gt; nvs use\nä¸Šè¿°æŒ‡ä»¤ç­‰åŒ nvs use default (nvs use autoã€nvs auto äº¦åŒç¾©) å°±æ˜¯åˆ‡æ›æ‰€åœ¨ç›®éŒ„çš„ Node.js ç‰ˆæœ¬ï¼Œç³»çµ±ç¬¬ä¸€å„ªå…ˆæŸ¥çœ‹çš„ç¾è¡Œç›®éŒ„ä¸­çš„ .node-version æª”æ¡ˆè£¡æ‰€æŒ‡å®šçš„ Node.js ç‰ˆæœ¬ï¼Œè‹¥ç„¡ .node-version æª”æ¡ˆï¼Œå‰‡ä½¿ç”¨ nvs default (é è¨­)ç‰ˆæœ¬ï¼Œè‹¥ nvs ä¹Ÿç„¡è¨­å®šé è¨­ç‰ˆæœ¬ï¼Œå‰‡æœƒå°‡ç›®å‰çš„ \u0026lsquo;ä½¿ç”¨ç‰ˆæœ¬\u0026rsquo; reset æˆ nullã€‚\n","permalink":"https://calvinegs.github.io/posts/nvs-using/","summary":"Angular çš„ç‰ˆæœ¬æ›´æ–°è¿­ä»£çš„ç›¸ç•¶å¿« (æ‰€æœ‰çš„å‰ç«¯é–‹æ–¼å·¥å…·éƒ½æœ‰ç›¸åŒçš„æƒ…å½¢)ï¼Œå®‰è£åŠä½¿ç”¨ Angular Cli æ™‚å¿…é ˆåœ¨æœ‰ Node.js çš„ç’°å¢ƒä¸‹æ‰èƒ½é€²è¡Œã€‚\nç•¶ä½ åœ¨åŒä¸€å°é›»è…¦ä¸­ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ Angular æ™‚å°±å®¹æ˜“åœ¨å®‰è£ç›¸é—œå¥—ä»¶æ™‚é‡åˆ°è­¦èªï¼ŒåŸå› å¸¸æ˜¯å› ç‚º Angular èˆ‡ Node.js ç‰ˆæœ¬æ­é…çš„é—œä¿‚ã€‚\nè‡³æ–¼ç‚ºä½•æœ‰åŒæ™‚ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„ Angular å‘¢? é™¤äº†é–‹ç™¼çš„å°ˆæ¡ˆæ²’æœ‰å…¨éƒ¨éƒ½ä¸€èµ·å‡ç´šè‡³çµ±ä¸€ç‰ˆæœ¬(é€™æ˜¯ä¸€ä»¶è¤‡é›œçš„äº‹)çš„å› ç´ å¤–ï¼Œå€‹äººæœ€å¸¸é‡åˆ°çš„ç‹€æ³æ˜¯: ç•¶åœ¨ç¶²ä¸Š(github)æ‰¾åˆ°å¾ˆæ£’çš„ Demo / Sample ç¨‹å¼ï¼Œåœ¨ git clone å›é›»è…¦å¾Œç™¼ç¾å®ƒçš„ç‰ˆæœ¬æ˜¯èˆŠç‰ˆæœ¬ Angular æ‰€æ’°å¯«ï¼Œä½¿ç”¨ npm install å®‰è£ç›¸é—œå¥—ä»¶æ™‚ï¼Œå‡ºç¾è­¦å‘Šè¨Šæ¯ï¼Œç”šè‡³ç„¡æ³•å®‰è£æˆåŠŸã€‚\nç‚ºäº†è¦ç®¡ç†åŒä¸€å°é›»è…¦ä¸­å­˜åœ¨è‘—æœ‰ä¸åŒç‰ˆ Node.jsï¼Œè®“ä½ å¾ˆå®¹æ˜“åœ¨å„ç‰ˆæœ¬ä¸­è‡ªç”±çš„é€²è¡Œåˆ‡æ› (ç”šè‡³åœ¨é€²å…¥ä¸åŒç›®éŒ„æ™‚è‡ªå‹•åˆ‡æ›å°æ‡‰çš„ Node.js ç‰ˆæœ¬)ï¼Œä½ éœ€è¦ Node.js ç‰ˆæœ¬ç®¡ç†å·¥å…·ï¼Œå¦‚: NVM æˆ– NVSï¼Œåœ¨é€™å€‹ç­†è¨˜ä¸­è¦è¨˜éŒ„çš„æ˜¯ NVSã€‚\nå®‰è£ nvs F:\\\u0026gt; choco list nvs #å…ˆæŸ¥çœ‹æ˜¯å¦å·²å®‰è£äº† nvs F:\\\u0026gt; choco install nvs #å®‰è£ nvs F:\\\u0026gt; nvs --version #æŸ¥çœ‹æ˜¯å¦å®‰è£æˆåŠŸï¼Œä¸¦é¡¯ç¤º nvs ç‰ˆæœ¬  è¨»ï¼šå®‰è£å®Œæˆå¾Œè‹¥é‡åˆ°åœ¨ cmd ä¸­å¯æ­£å¸¸åŸ·è¡Œï¼Œä½†åœ¨Windows PowerShell ç„¡æ³•ä½¿ç”¨æ™‚ï¼Œå¯ä½¿ç”¨â€˜ç³»çµ±ç®¡ç†å“¡â€™èº«ä»½é–‹å•Ÿ Posershellï¼Œä¸¦åŸ·è¡Œ PS\u0026gt;Set-ExecutionPolicy RemoteSigned æ‡‰å¯è§£æ±ºé€™å€‹å•é¡Œã€‚","title":"ä½¿ç”¨ nvs ä¾†ç®¡ç†ä¸åŒç‰ˆæœ¬ Node.js åŸ·è¡Œç’°å¢ƒ"},{"content":" ","permalink":"https://calvinegs.github.io/posts/ngcli-nodejs-verion/","summary":" ","title":"Angular cli èˆ‡ Node.js ç‰ˆæœ¬å°ç…§"},{"content":"TypeScript ä¸åƒ…å·²å¯ä½¿ç”¨åœ¨ä¸»æ©Ÿç«¯ä¾†é€²è¡Œ Node.js ç¨‹å¼çš„é–‹ç™¼ï¼Œä¹Ÿæ”¯æ´å‰ç«¯é–‹ç™¼çš„çœ¾å¤šæ¶æ§‹ï¼Œä½¿ç”¨ TypeScript æœ‰è¨±å¤šé¡å¤–çš„å¥½è™•ï¼Œå› æ­¤å­¸ç¿’ TypeScript æ˜¯ç¾åœ¨è»Ÿé«”é–‹ç™¼å·¥ç¨‹å¸«ä¸å¯ç¼ºçš„ä¸€é …æŠ€èƒ½ã€‚æœ¬æ–‡æ˜¯ç”¨ä¾†è¨˜éŒ„å¦‚ä½•è¨­ç½®ä¸€å€‹ç°¡æ˜“çš„ TypeScript é–‹ç™¼ç’°å¢ƒï¼Œç”¨ä¾†å­¸ç¿’ TypeScriptã€‚\né–‹å§‹è¨­ç½® å»ºç«‹ä¸€å€‹ç›®éŒ„\n$ mkdir typescript-starter $ cd typescript-starter é€é npm ç”¢ç”Ÿ package.json æª”æ¡ˆ\n$ npm init -y åœ¨ Local ç«¯å®‰è£ TypeScript\n$ npm install typescript --save-dev #or -D ç‚º Node.js å®‰è£é¡å‹æª”\n$ npm install @types/node --save-dev é€é tsc å»ºç«‹ TypeScript çš„è¨­å®šæª” (tsconfig.json)\n$ npx tsc --init P.S. ç”±æ–¼ typescript æ˜¯å®‰è£åœ¨ localï¼ŒåŸ·è¡Œæ™‚è¦é€é npx æŒ‡ä»¤(ç”± npm æ‰€æä¾›)\næŒ‡å®šé¡å¤–çš„åƒæ•¸\n$ npx tsc --init --rootDir src --outDir build --esModuleInterop --resolveJsonModule --lib es6 --module commonjs --allowJs true --noImplicitAny true  rootDir: tsc è½‰ç¢¼å™¨æ‰¾å°‹ç¨‹å¼çš„åœ°æ–¹ã€‚ outDir: TypeScript è½‰è­¯æˆ JavaScript æ‰€å­˜æ”¾çš„åœ°æ–¹ã€‚ esModuleInterop: è‹¥ä½¿ç”¨ commonjs ç‚ºæ­¤å°ˆæ¡ˆçš„ module systemï¼Œå‰‡æ­¤è¨­å®šå€¼å¿…é ˆè¨­å®šç‚º trueã€‚ resolveJsonModule: è‹¥æ­¤å°ˆæ¡ˆæœƒä½¿ç”¨ JSONï¼Œå‰‡æ­¤è¨­å®šå€¼å¿…é ˆè¨­å®šç‚º trueã€‚ lib: æŒ‡å®šç‚º \u0026lsquo;es6\u0026rsquo; æŒ‡å¯ä½¿ç”¨åˆ°æ–°ç‰ˆ JS çš„ä¸€äº›èªè¨€ç‰¹æ€§ï¼ŒæŒ‡å®š \u0026lsquo;es5\u0026rsquo; å‰‡æœƒæœ‰è¼ƒé«˜çš„ç›¸å®¹æ˜“ã€‚ module: æŒ‡å­˜ module systemï¼Œå¦‚: commonjsã€‚ allowJs: æ­¤é¸é …å°‡å…è¨±æ‚¨åœ¨ .ts æ–‡ä»¶ä¸­åŒ…å« .js æ–‡ä»¶ã€‚ noImplicitAny: å€¼ç‚º true æ™‚ï¼Œåœ¨ TypeScript æ–‡ä»¶ä¸­ï¼Œä¸å…è¨±ä¸æ˜ç¢ºåœ°æŒ‡å®šé¡å‹ã€‚  å°‡å¤šé¤˜ä¸æœƒä½¿ç”¨çš„åƒæ•¸ç§»é™¤\n{ \u0026#34;compilerOptions\u0026#34;: { \u0026#34;target\u0026#34;: \u0026#34;es5\u0026#34;, \u0026#34;module\u0026#34;: \u0026#34;commonjs\u0026#34;, \u0026#34;lib\u0026#34;: [\u0026#34;es6\u0026#34;], \u0026#34;allowJs\u0026#34;: true, \u0026#34;outDir\u0026#34;: \u0026#34;build\u0026#34;, \u0026#34;rootDir\u0026#34;: \u0026#34;src\u0026#34;, \u0026#34;strict\u0026#34;: true, \u0026#34;noImplicitAny\u0026#34;: true, \u0026#34;esModuleInterop\u0026#34;: true, \u0026#34;resolveJsonModule\u0026#34;: true } } å»ºç«‹ src ç›®éŒ„ï¼Œä¸¦åœ¨æ­¤ç›®éŒ„ä¸‹å¯«ç¨‹å¼\n$ mkdir src $ touch src/index.ts ç¨‹å¼å¦‚ä¸‹:\nimport * as cowsay from \u0026#34;cowsay\u0026#34;; console.log( cowsay.say({ text: \u0026#34;I\u0026#39;m a moooodule\u0026#34;, e: \u0026#34;oO\u0026#34;, T: \u0026#34;U \u0026#34;, }) ); å› ç‚ºç¨‹å¼ä¸­ä½¿ç”¨åˆ°é¡å¤–çš„ library - cowsayï¼Œè¦å…ˆå®‰è£\n$ npm install cowsay åˆ©ç”¨ tsc ä¾†è½‰è­¯ TypeScript æˆç‚º JavaScript\n$ npx tsc è½‰è­¯æˆ es5 ç‰ˆæœ¬ JavaScript çš„çµæœ:\n\u0026#34;use strict\u0026#34;; // const aVar = \u0026#39;abc\u0026#39;; // console.log(\u0026#39;Hello world!\u0026#39; + `${aVar}`) var __createBinding = (this \u0026amp;\u0026amp; this.__createBinding) || (Object.create ? function (o, m, k, k2) { if (k2 === undefined) k2 = k; Object.defineProperty(o, k2, { enumerable: true, get: function () { return m[k]; }, }); } : function (o, m, k, k2) { if (k2 === undefined) k2 = k; o[k2] = m[k]; }); var __setModuleDefault = (this \u0026amp;\u0026amp; this.__setModuleDefault) || (Object.create ? function (o, v) { Object.defineProperty(o, \u0026#34;default\u0026#34;, { enumerable: true, value: v }); } : function (o, v) { o[\u0026#34;default\u0026#34;] = v; }); var __importStar = (this \u0026amp;\u0026amp; this.__importStar) || function (mod) { if (mod \u0026amp;\u0026amp; mod.__esModule) return mod; var result = {}; if (mod != null) for (var k in mod) if (k !== \u0026#34;default\u0026#34; \u0026amp;\u0026amp; Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k); __setModuleDefault(result, mod); return result; }; Object.defineProperty(exports, \u0026#34;__esModule\u0026#34;, { value: true }); var cowsay = __importStar(require(\u0026#34;cowsay\u0026#34;)); console.log( cowsay.say({ text: \u0026#34;I\u0026#39;m a moooodule\u0026#34;, e: \u0026#34;Ox\u0026#34;, T: \u0026#34;V \u0026#34;, }) ); ä½¿ç”¨ä¸€äº›æœ‰ç”¨çš„è¨­å®šåŠ Script å®‰è£ ts-node å’Œ nodemon\nts-node æ˜¯ä¸€å€‹ TypeScript åŸ·è¡Œå¼•æ“å’Œ Node.js çš„ REPLã€‚å®ƒä»¥JITæ–¹å¼å°‡TypeScriptè½‰è­¯ç‚º JavaScriptï¼Œä½¿ä½ èƒ½å¤ ç›´æ¥åœ¨ Node.jsä¸Š åŸ·è¡Œ TypeScript è€Œä¸éœ€è¦é è½‰è­¯ã€‚é€šé node çš„æ¨¡çµ„è¼‰å…¥ API ä¾†å¯¦ç¾çš„ï¼Œä½¿å…¶èƒ½å¤ èˆ‡å…¶ä»– Node.js å·¥å…·å’Œç¨‹å¼åº«ä¸€èµ·ç„¡ç¸«ä½¿ç”¨ã€‚\nnodemon æ˜¯ä¸€å€‹å·¥å…·ï¼Œå®ƒé€šéæª¢æ¸¬ç¨‹å¼ç›®éŒ„ä¸­çš„æ–‡ä»¶æ›´æ”¹æ™‚å¯ä»¥è‡ªå‹•é‡æ–°å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼(æœ¬ç¯„ä¾‹ä¸­æ˜¯å•Ÿå‹• Node.js)ï¼Œä»¥æ­¤å”åŠ©æ‡‰ç”¨ç¨‹å¼é–‹ç™¼ã€‚\n$ npm install --save-dev ts-node nodemon æ–°å¢ä¸€å€‹ nodemon çš„è¨­å®šæª” nodemon.json\n$ touch nodemon.json å…§å®¹å¦‚ä¸‹:\n{ \u0026#34;watch\u0026#34;: [\u0026#34;src\u0026#34;], \u0026#34;ext\u0026#34;: \u0026#34;.ts,.js\u0026#34;, \u0026#34;ignore\u0026#34;: [], \u0026#34;exec\u0026#34;: \u0026#34;npx ts-node ./src/index.ts\u0026#34; } åœ¨ package.json ä¸­åŠ å…¥å•Ÿå‹•çš„ script\n\u0026#34;start\u0026#34;: \u0026#34;nodemon\u0026#34;, åŸ·è¡Œ scripts\nPS F:\\test\\ts\\ts-starter\u0026gt; npm start # npm start æ˜¯ npm run start çš„ alias \u0026gt; ts-starter@1.0.0 start \u0026gt; nodemon [nodemon] 2.0.15 [nodemon] to restart at any time, enter `rs` [nodemon] watching path(s): src\\**\\* [nodemon] watching extensions: ts,js [nodemon] starting `npx ts-node ./src/index.ts` ________________________ \u0026lt; I\u0026#39;m a slaughtered deer \u0026gt; ------------------------ \\  ^__^ \\  (Ox)\\_______ (__)\\  )\\/\\  V ||----w | || || [nodemon] clean exit - waiting for changes before restart ç›´æ¥ä¿®æ”¹ç¨‹å¼ç¢¼ï¼Œå°‡ index.ts ä¸­çš„ slaughtered deer æ”¹æˆ deerï¼Œå­˜æª”å¾Œï¼Œç³»çµ±å°‡è‡ªå‹•è½‰è­¯ç¨‹å¼ç¢¼ï¼Œä¸¦é€é Node.js é¡¯ç¤ºå‡ºçµæœ:\n","permalink":"https://calvinegs.github.io/posts/setup-typescript-env/","summary":"TypeScript ä¸åƒ…å·²å¯ä½¿ç”¨åœ¨ä¸»æ©Ÿç«¯ä¾†é€²è¡Œ Node.js ç¨‹å¼çš„é–‹ç™¼ï¼Œä¹Ÿæ”¯æ´å‰ç«¯é–‹ç™¼çš„çœ¾å¤šæ¶æ§‹ï¼Œä½¿ç”¨ TypeScript æœ‰è¨±å¤šé¡å¤–çš„å¥½è™•ï¼Œå› æ­¤å­¸ç¿’ TypeScript æ˜¯ç¾åœ¨è»Ÿé«”é–‹ç™¼å·¥ç¨‹å¸«ä¸å¯ç¼ºçš„ä¸€é …æŠ€èƒ½ã€‚æœ¬æ–‡æ˜¯ç”¨ä¾†è¨˜éŒ„å¦‚ä½•è¨­ç½®ä¸€å€‹ç°¡æ˜“çš„ TypeScript é–‹ç™¼ç’°å¢ƒï¼Œç”¨ä¾†å­¸ç¿’ TypeScriptã€‚\né–‹å§‹è¨­ç½® å»ºç«‹ä¸€å€‹ç›®éŒ„\n$ mkdir typescript-starter $ cd typescript-starter é€é npm ç”¢ç”Ÿ package.json æª”æ¡ˆ\n$ npm init -y åœ¨ Local ç«¯å®‰è£ TypeScript\n$ npm install typescript --save-dev #or -D ç‚º Node.js å®‰è£é¡å‹æª”\n$ npm install @types/node --save-dev é€é tsc å»ºç«‹ TypeScript çš„è¨­å®šæª” (tsconfig.json)\n$ npx tsc --init P.S. ç”±æ–¼ typescript æ˜¯å®‰è£åœ¨ localï¼ŒåŸ·è¡Œæ™‚è¦é€é npx æŒ‡ä»¤(ç”± npm æ‰€æä¾›)\næŒ‡å®šé¡å¤–çš„åƒæ•¸\n$ npx tsc --init --rootDir src --outDir build --esModuleInterop --resolveJsonModule --lib es6 --module commonjs --allowJs true --noImplicitAny true  rootDir: tsc è½‰ç¢¼å™¨æ‰¾å°‹ç¨‹å¼çš„åœ°æ–¹ã€‚ outDir: TypeScript è½‰è­¯æˆ JavaScript æ‰€å­˜æ”¾çš„åœ°æ–¹ã€‚ esModuleInterop: è‹¥ä½¿ç”¨ commonjs ç‚ºæ­¤å°ˆæ¡ˆçš„ module systemï¼Œå‰‡æ­¤è¨­å®šå€¼å¿…é ˆè¨­å®šç‚º trueã€‚ resolveJsonModule: è‹¥æ­¤å°ˆæ¡ˆæœƒä½¿ç”¨ JSONï¼Œå‰‡æ­¤è¨­å®šå€¼å¿…é ˆè¨­å®šç‚º trueã€‚ lib: æŒ‡å®šç‚º \u0026lsquo;es6\u0026rsquo; æŒ‡å¯ä½¿ç”¨åˆ°æ–°ç‰ˆ JS çš„ä¸€äº›èªè¨€ç‰¹æ€§ï¼ŒæŒ‡å®š \u0026lsquo;es5\u0026rsquo; å‰‡æœƒæœ‰è¼ƒé«˜çš„ç›¸å®¹æ˜“ã€‚ module: æŒ‡å­˜ module systemï¼Œå¦‚: commonjsã€‚ allowJs: æ­¤é¸é …å°‡å…è¨±æ‚¨åœ¨ .","title":"è¨­ç½® TypeScript é–‹ç™¼ç’°å¢ƒ (Node.js)"},{"content":"Hugo å…§å®¹æ–‡ä»¶ä¸­ä½¿ç”¨åŸºæœ¬ Markdown èªæ³•ï¼Œé‚„é¡å¤–æ”¯æ´ç”± Hugo æ‰€æä¾›çš„åŠ å¼·èªæ³•(ä¹Ÿæ”¯æ´åŸºæœ¬ HTML å…ƒç´ )ã€‚\næ¨™é¡Œ (Headings) è¦å»ºç«‹æ¨™é¡Œï¼Œè«‹åœ¨æ–‡å­—å‰æ·»åŠ äº•å­—ç¬¦è™Ÿ #(è«‹æ³¨æ„äº•å­—ç¬¦è™Ÿå¾Œè¦åŠ å…¥ä¸€å€‹ç©ºæ ¼)ã€‚ä½¿ç”¨çš„äº•å­—ç¬¦è™Ÿçš„æ•¸é‡æ‡‰èˆ‡æ¨™é¡Œç´šåˆ¥ç›¸å°æ‡‰ã€‚ä¾‹å¦‚ï¼Œè¦å»ºç«‹ä¸‰ç´šæ¨™é¡Œ (\u0026lt;h3\u0026gt;)ï¼Œè«‹ä½¿ç”¨ä¸‰å€‹äº•å­—ç¬¦è™Ÿï¼ˆä¾‹å¦‚ï¼Œ### My Headerï¼‰ã€‚\næ®µè½ (Paragraphs) ä¸€å€‹ Markdown æ®µè½æ˜¯ç”±ä¸€å€‹æˆ–å¤šå€‹é€£çºŒçš„æ–‡å­—è¡Œçµ„æˆï¼Œå®ƒçš„å‰å¾Œè¦æœ‰ä¸€å€‹ä»¥ä¸Šçš„ç©ºè¡Œã€‚\næ–‡å­—å€å¡Šå¼•ç”¨ (Blockquotes) åœ¨æ®µè½çš„ç¬¬ä¸€è¡Œæœ€å‰é¢åŠ \u0026quot;\u0026gt;\u0026quot;\næœªè¨»æ˜å‡ºè™•çš„æ–‡å­—å€å¡Šå¼•ç”¨ (Blockquote without attribution)  Tiam, ad mint andaepu dandae nostion secatur sequo quae. Note that you can use Markdown syntax within a blockquote.\n è¨»æ˜å‡ºè™•çš„æ–‡å­—å€å¡Šå¼•ç”¨ (Blockquote with attribution)  Don\u0026rsquo;t communicate by sharing memory, share memory by communicating.\nâ€” Rob Pike1\n æ–·è¡Œ (Line Breaks) è¦å»ºç«‹æ›è¡Œç¬¦è™Ÿ (\u0026lt;br\u0026gt;)ï¼Œè«‹ä»¥å…©å€‹æˆ–å¤šå€‹ç©ºæ ¼çµæŸä¸€è¡Œï¼Œç„¶å¾Œéµå…¥ return éµã€‚\nè¡¨æ ¼ (Tables) è¡¨æ ¼åŠŸèƒ½ä¸¦ä¸æ˜¯ Markdown è¦æ ¼, ä¸é Hugo æ”¯æ´é€™å€‹å¥½ç”¨çš„åŠŸèƒ½.\n   Name Age     Bob 27   Alice 23    è¡¨æ ¼å…§æ”¯æ´å…§åµŒ Markdown èªæ³•    Italics Bold Code     italics bold code    è¡¨æ ¼å…§çš„å°é½ŠåŠŸèƒ½    Number Next number Previous number     Five Six Four   Ten Eleven Nine   Seven Eight Six   Two Three One    ç¨‹å¼ç¢¼å€å¡Š (Code Blocks) ä½¿ç”¨ \u0026lsquo;åå¼•è™Ÿ\u0026rsquo; çš„ç¨‹å¼ç¢¼å€å¡Š 1 2 3 4 5 6 7 8 9 10  \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34; /\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;   ä½¿ç”¨ \u0026lsquo;å››å€‹ç©ºæ ¼\u0026rsquo; çš„ç¨‹å¼ç¢¼å€å¡Š \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026quot;en\u0026quot;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026quot;utf-8\u0026quot;\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;  ä½¿ç”¨ Hugo å…§éƒ¨æ”¯æ´ highlight shortcode çš„ç¨‹å¼ç¢¼å€å¡Š 1 2 3 4 5 6 7 8 9 10  \u0026lt;!doctype html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;utf-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt;   ä½¿ç”¨ Gist çš„ç¨‹å¼å€å¡Š \u0026lt;script src=\u0026quot;https://gist.github.com/spf13/7896402.js\u0026quot;\u0026gt;\u0026lt;/script\u0026gt;\n æ¸…å–® æœ‰åºæ¸…å–®  First item Second item Third item  ç„¡åºæ¸…å–®  List item Another item And another item  å·¢ç‹€æ¸…å–®  Fruit  Apple Orange Banana   Dairy  Milk Cheese     First item Second item Third item  Indented item Indented item   Fourth item  ä»¥æ•¸å­—é–‹é ­çš„ç„¡åºæ¸…å–® å°‡\u0026rsquo;æ®µè½\u0026rsquo;åŠ å…¥æ¸…å–®ä¸­   This is the first list item.\n  Here\u0026rsquo;s the second list item.\nI need to add another paragraph below the second list item.\n  And here\u0026rsquo;s the third list item.\n  å°‡\u0026rsquo;æ–‡å­—å€å¡Šå¼•ç”¨\u0026rsquo;åŠ å…¥æ¸…å–®ä¸­   This is the first list item.\n  Here\u0026rsquo;s the second list item.\n A blockquote would look great below the second list item.\n   And here\u0026rsquo;s the third list item.\n  å°‡\u0026rsquo;ç¨‹å¼å€å¡Š\u0026rsquo;åŠ å…¥æ¸…å–®ä¸­   Open the file.\n  Find the following code block on line 21:\n\u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;Test\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt;    Update the title to match the name of your website.\n  å°‡\u0026rsquo;åœ–æª”\u0026rsquo;åŠ å…¥æ¸…å–®ä¸­   Open the file containing the Linux mascot.\n  Marvel at its beauty.\n  Close the file.\n  Task List åå¼•è™Ÿçš„ä½¿ç”¨ æ°´å¹³ç·š (Horizontal Rules) Try to put a blank line before\u0026hellip;\n \u0026hellip;and after a horizontal rule.\né€£çµ (Links) My favorite search engine is Duck Duck Go.\nI love supporting the EFF.\nThis is the Markdown Guide.\nSee the section on code.\næ–œé«” \u0026amp; å¼·èª¿ ä½¿ç”¨ * ç¬¦è™Ÿå¥—ç”¨åœ¨æ–‡å­—çš„å‰å¾Œæ–¹ï¼Œå³å¯å°‡æ–‡å­—æ”¹ç‚ºæ–œé«”å­—ï¼›è€Œä½¿ç”¨é€£çºŒå…©å€‹*åŠ åœ¨æ–‡å­—çš„å‰å¾Œæ–¹å‰‡æœƒæ˜¯å¼·èª¿æ–‡å­—ã€‚\næœ‰æ™‚å€™ï¼Œä½ å¾—åœä¸€ä¸‹è…³æ­¥ï¼Œç­‰ä¸€ç­‰ å¿ƒéˆï¼Œè®“å¿ƒæƒ…å¹³å’Œï¼Œæƒ³ä¸€æƒ³è‡ªå·±ç”Ÿæ´»ä¸­æ“æœ‰çš„æ‰€æœ‰ ç¾å¥½ çš„æ±è¥¿ã€‚\nä½¿ç”¨è·³è„«å­—å…ƒ è¦é¡¯ç¤ºåŸæœ¬ç”¨æ–¼æ ¼å¼åŒ– Markdown æ–‡ä»¶ä¸­çš„æ–‡å­—å­—å…ƒï¼Œè«‹åœ¨è©²å­—ç¬¦å‰æ·»åŠ åæ–œç·š (\\)ã€‚\nå…¶ä»–å…ƒç´ çš„ä½¿ç”¨ â€” abbr, sub, sup, kbd, mark GIF is a bitmap image format.\nH2O\nXn + Yn = Zn\nPress CTRL+ALT+Delete to end the session.\nMost salamanders are nocturnal, and hunt for insects, worms, and other small creatures.\n  The above quote is excerpted from Rob Pike\u0026rsquo;s talk during Gopherfest, November 18, 2015.\u0026#160;\u0026#x21a9;\u0026#xfe0e;\n   ","permalink":"https://calvinegs.github.io/posts/markdown-syntax/","summary":"Hugo å…§å®¹æ–‡ä»¶ä¸­ä½¿ç”¨åŸºæœ¬ Markdown èªæ³•ï¼Œé‚„é¡å¤–æ”¯æ´ç”± Hugo æ‰€æä¾›çš„åŠ å¼·èªæ³•(ä¹Ÿæ”¯æ´åŸºæœ¬ HTML å…ƒç´ )ã€‚\næ¨™é¡Œ (Headings) è¦å»ºç«‹æ¨™é¡Œï¼Œè«‹åœ¨æ–‡å­—å‰æ·»åŠ äº•å­—ç¬¦è™Ÿ #(è«‹æ³¨æ„äº•å­—ç¬¦è™Ÿå¾Œè¦åŠ å…¥ä¸€å€‹ç©ºæ ¼)ã€‚ä½¿ç”¨çš„äº•å­—ç¬¦è™Ÿçš„æ•¸é‡æ‡‰èˆ‡æ¨™é¡Œç´šåˆ¥ç›¸å°æ‡‰ã€‚ä¾‹å¦‚ï¼Œè¦å»ºç«‹ä¸‰ç´šæ¨™é¡Œ (\u0026lt;h3\u0026gt;)ï¼Œè«‹ä½¿ç”¨ä¸‰å€‹äº•å­—ç¬¦è™Ÿï¼ˆä¾‹å¦‚ï¼Œ### My Headerï¼‰ã€‚\næ®µè½ (Paragraphs) ä¸€å€‹ Markdown æ®µè½æ˜¯ç”±ä¸€å€‹æˆ–å¤šå€‹é€£çºŒçš„æ–‡å­—è¡Œçµ„æˆï¼Œå®ƒçš„å‰å¾Œè¦æœ‰ä¸€å€‹ä»¥ä¸Šçš„ç©ºè¡Œã€‚\næ–‡å­—å€å¡Šå¼•ç”¨ (Blockquotes) åœ¨æ®µè½çš„ç¬¬ä¸€è¡Œæœ€å‰é¢åŠ \u0026quot;\u0026gt;\u0026quot;\næœªè¨»æ˜å‡ºè™•çš„æ–‡å­—å€å¡Šå¼•ç”¨ (Blockquote without attribution)  Tiam, ad mint andaepu dandae nostion secatur sequo quae. Note that you can use Markdown syntax within a blockquote.\n è¨»æ˜å‡ºè™•çš„æ–‡å­—å€å¡Šå¼•ç”¨ (Blockquote with attribution)  Don\u0026rsquo;t communicate by sharing memory, share memory by communicating.\nâ€” Rob Pike1\n æ–·è¡Œ (Line Breaks) è¦å»ºç«‹æ›è¡Œç¬¦è™Ÿ (\u0026lt;br\u0026gt;)ï¼Œè«‹ä»¥å…©å€‹æˆ–å¤šå€‹ç©ºæ ¼çµæŸä¸€è¡Œï¼Œç„¶å¾Œéµå…¥ return éµã€‚","title":"Hugo ä¸­ä½¿ç”¨çš„ Markdown èªæ³•ä»‹ç´¹"},{"content":"GitHub Page åŠŸèƒ½æ˜¯ GitHub æä¾›çš„ä¸€é …æ”¯æ´éœæ…‹ç¶²é çš„æœå‹™ï¼Œåªè¦åœ¨ä½ çš„ repository ä¸­åŠ å…¥ä¸€å€‹åç‚º gh-pages çš„åˆ†æ”¯ï¼Œå‰‡ GitHub ä¾¿æœƒé è¨­å°‡æ­¤åˆ†æ”¯å…§çš„æª”æ¡ˆä»¥éœæ…‹ç¶²é çš„æ–¹å¼å‘ˆç¾ï¼Œå› æ­¤åˆ©ç”¨æ­¤ç‰¹æ€§å°±å¯å¾ˆå®¹æ˜“çš„è£½ä½œä¸€å€‹ç°¡å–®çš„ç¶²ç«™ã€‚GitHub Pages æä¾›äº†äºŒç¨®ä¸åŒå½¢æ…‹çš„é é¢ \u0026ldquo;User or organization site\u0026rdquo; \u0026amp; \u0026ldquo;Project Site\u0026rdquo;ã€‚å…¶ä¸­å€‹äºº/çµ„ç¹” ç¶²ç«™ä¸€å€‹ GitHub å¸³è™Ÿåªèƒ½æœ‰ä¸€å€‹ã€è€Œå°ˆæ¡ˆç¶²ç«™å‰‡å¯ä»¥å¾ˆå¤šå€‹ã€‚\n https://calvinegs.github.io #åªæœ‰ä¸€å€‹ https://calvinegs.github.io/project1\nhttps://calvinegs.github.io/project2\nhttps://calvinegs.github.io/project3\n\u0026hellip;\n å®‰è£æ­¥é©Ÿ Step 1: åœ¨ GitHub ä¸Šå»ºç«‹ä¸€å€‹ new repository Repository name è‹¥ç‚º Owner_name.github.io å³æ‰€è¬‚çš„ User siteï¼ŒRepository name å³ç‚ºéœæ…‹ç¶²ç«™çš„ç¶²å€ã€‚ä»¥ä¸‹åœ–ç‚ºä¾‹ï¼Œæœ‰æ•ˆç¶²å€ç‚º https://calvinegs.github.io\nStep 2: ä½¿ç”¨ GitHub Action æ§‹å»º Hugo é€é GitHub Action åŠŸèƒ½ï¼Œåœ¨ä½ æ¯æ¬¡å°‡æ–°ç‰ˆæœ¬çš„ Hugo ç¶²ç«™å…§å®¹æ¨é€åˆ° GitHub repository æ™‚ï¼ŒGitHub å°‡è‡ªå‹•å»ºç½®ç¶²ç«™ã€‚\næ–°å¢ä¸€å€‹ .github/workflows/gh-pages.ymlï¼Œå…§å®¹å¦‚ä¸‹:\nname: github pages on: push: branches: - main # Set a branch to deploy pull_request: jobs: deploy: runs-on: ubuntu-20.04 steps: - uses: actions/checkout@v2 with: submodules: true # Fetch Hugo themes (true OR recursive) fetch-depth: 0 # Fetch all history for .GitInfo and .Lastmod - name: Setup Hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: \u0026#39;latest\u0026#39; # extended: true - name: Build run: hugo --minify - name: Deploy uses: peaceiris/actions-gh-pages@v3 if: github.ref == \u0026#39;refs/heads/main\u0026#39; with: github_token: ${{ secrets.GITHUB_TOKEN }} publish_dir: ./public Step 3: GitHub Page çš„è¨­ç½® åœ¨ç¬¬ä¸€æ¬¡æ¨é€ Hugo ç¶²ç«™å…§å®¹æ¨é€åˆ° GitHub repository æ™‚ï¼Œé€é GitHub Action çš„å»ºç½®ï¼Œå°‡åœ¨ä½ çš„ repository ä¸­æ–°æ–°ä¸€å€‹åˆ†æ”¯åç¨±å« gh-pagesã€‚è«‹åœ¨ GitHub Page çš„è¨­ç½®åŠŸèƒ½ä¸­å°‡å®ƒç”± \u0026ldquo;Main\u0026rdquo; æŒ‡å‘ \u0026ldquo;gh-pages\u0026rdquo; åˆ†æ”¯ã€‚\nStep 4: è¨­ç½® Hugo è¨­å®šæª” å°‡ Hugo è¨­å®šæª” config.toml ä¸­çš„ baseURL è¨­å®šæˆ https://Owner_name.github.ioã€‚\nbaseurl = \u0026#34;https://calvinabba.github.io\u0026#34; DefaultContentLanguage = \u0026#34;en\u0026#34; title = \u0026#34;Beautiful Blog\u0026#34; theme = \u0026#34;beautifulhugo\u0026#34; ","permalink":"https://calvinegs.github.io/posts/deployhugo-githubpages/","summary":"GitHub Page åŠŸèƒ½æ˜¯ GitHub æä¾›çš„ä¸€é …æ”¯æ´éœæ…‹ç¶²é çš„æœå‹™ï¼Œåªè¦åœ¨ä½ çš„ repository ä¸­åŠ å…¥ä¸€å€‹åç‚º gh-pages çš„åˆ†æ”¯ï¼Œå‰‡ GitHub ä¾¿æœƒé è¨­å°‡æ­¤åˆ†æ”¯å…§çš„æª”æ¡ˆä»¥éœæ…‹ç¶²é çš„æ–¹å¼å‘ˆç¾ï¼Œå› æ­¤åˆ©ç”¨æ­¤ç‰¹æ€§å°±å¯å¾ˆå®¹æ˜“çš„è£½ä½œä¸€å€‹ç°¡å–®çš„ç¶²ç«™ã€‚GitHub Pages æä¾›äº†äºŒç¨®ä¸åŒå½¢æ…‹çš„é é¢ \u0026ldquo;User or organization site\u0026rdquo; \u0026amp; \u0026ldquo;Project Site\u0026rdquo;ã€‚å…¶ä¸­å€‹äºº/çµ„ç¹” ç¶²ç«™ä¸€å€‹ GitHub å¸³è™Ÿåªèƒ½æœ‰ä¸€å€‹ã€è€Œå°ˆæ¡ˆç¶²ç«™å‰‡å¯ä»¥å¾ˆå¤šå€‹ã€‚\n https://calvinegs.github.io #åªæœ‰ä¸€å€‹ https://calvinegs.github.io/project1\nhttps://calvinegs.github.io/project2\nhttps://calvinegs.github.io/project3\n\u0026hellip;\n å®‰è£æ­¥é©Ÿ Step 1: åœ¨ GitHub ä¸Šå»ºç«‹ä¸€å€‹ new repository Repository name è‹¥ç‚º Owner_name.github.io å³æ‰€è¬‚çš„ User siteï¼ŒRepository name å³ç‚ºéœæ…‹ç¶²ç«™çš„ç¶²å€ã€‚ä»¥ä¸‹åœ–ç‚ºä¾‹ï¼Œæœ‰æ•ˆç¶²å€ç‚º https://calvinegs.github.io\nStep 2: ä½¿ç”¨ GitHub Action æ§‹å»º Hugo é€é GitHub Action åŠŸèƒ½ï¼Œåœ¨ä½ æ¯æ¬¡å°‡æ–°ç‰ˆæœ¬çš„ Hugo ç¶²ç«™å…§å®¹æ¨é€åˆ° GitHub repository æ™‚ï¼ŒGitHub å°‡è‡ªå‹•å»ºç½®ç¶²ç«™ã€‚\næ–°å¢ä¸€å€‹ .github/workflows/gh-pages.ymlï¼Œå…§å®¹å¦‚ä¸‹:\nname: github pages on: push: branches: - main # Set a branch to deploy pull_request: jobs: deploy: runs-on: ubuntu-20.","title":"åœ¨ Github Pages éƒ¨ç½² Hugo éœæ…‹ç¶²ç«™"},{"content":"Hugo æ˜¯ä¸€å€‹é™æ…‹ç¶²ç«™ç”Ÿæˆå™¨ï¼Œæ­é… git å¾ˆé©åˆä¾†å»ºç«‹å€‹äººéƒ¨è½æ ¼ã€‚åœ¨ä¸€ç³»åˆ—çš„ç­†è¨˜ä¸­å°‡ä»‹ç´¹å¦‚ä½•å®‰è£/ä½¿ç”¨ç›¸é—œå·¥å…·èˆ‡æŠ€è¡“ï¼Œç›®çš„æ˜¯æ­å»ºä¸€å€‹å®Œå…¨å…è²»çš„å€‹äººéƒ¨è½æ ¼ã€‚\nä½¿ç”¨çš„ç›¸é—œå·¥å…·/æŠ€è¡“:\n Hugo git vs code gist github page Markdown  Chocolatey Chocolatey æ˜¯ä¸€å€‹ Windows ä¸Šçš„å¥—ä»¶ç®¡ç†å·¥å…·ï¼Œå®ƒçµåˆäº† Nuget åŸºç¤æœå‹™èˆ‡ powershell æŒ‡ä»¤ï¼Œæä¾›å¿«é€Ÿå®‰è£æ‡‰ç”¨ç¨‹å¼èˆ‡å·¥å…·çš„æœå‹™ï¼Œå°‡å®‰è£è»Ÿé«”çš„å…§å®¹å°è£åˆ°ä¸€å€‹å®‰è£åŒ…ä¸­ï¼Œåœ¨ Chocolatey ä¸­åªéœ€è¦ä¸€æ¢ç°¡å–®çš„æŒ‡ä»¤å°±èƒ½å®Œæˆæœå°‹ã€å®‰è£ã€æ›´æ–°ã€è§£å®‰è£ç­‰æ“ä½œã€‚\nåœ¨ Windows 10 ä¸Šå®‰è£ Chocolatey ä»¥â€˜ç³»çµ±ç®¡ç†å“¡â€™èº«ä»½é–‹å•Ÿ \u0026lsquo;Windows PowerShell\u0026rsquo;,ã€€åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†é€²è¡Œ Chocolatey å®‰è£\nPS C:\\\u0026gt;Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString(\u0026#39;https://community.chocolatey.org/install.ps1\u0026#39;)) ç§»é™¤ Chocolatey åˆªé™¤ C:\\ProgramData\\chocolatey ç›®éŒ„åŠç§»é™¤ç’°å¢ƒè®Šæ•¸å³å¯ï¼Œæœå°‹ \u0026ldquo;ç·¨è¼¯ç³»çµ±ç’°å¢ƒè®Šæ•¸\u0026rdquo; \\ \u0026ldquo;é€²éš\u0026rdquo; \\ \u0026ldquo;ç’°å¢ƒè®Šæ•¸\u0026rdquo;\nå®‰è£ hugo Step 1: åœ¨ Windows 10 ä¸Šä½¿ç”¨ choco å®‰è£ hugo C:\\\u0026gt; choco install hugo -confirm C:\\\u0026gt; choco install hugo-extended - config C:\\\u0026gt; hugo version Step 2: Create a New Site (å»ºç«‹éƒ¨è½æ ¼ç¶²ç«™) C:\\\u0026gt; hugo new site quickstart C:\\\u0026gt; hugo new site quickstart -f yml # è‹¥è¦ä½¿ç”¨ config.yaml ç‚º config è¨­å®šæª”ï¼Œå‰‡åŠ å…¥é¡å¤–åƒæ•¸ Step 3: Add a Theme (æ–°å¢éƒ¨è½æ ¼ä¸»é¡Œ) è«‹å…ˆç¢ºèªåœ¨æ‚¨çš„ä½œæ¥­ç³»çµ±ä¸­å·²ç¶“å®‰è£äº† git\nC:\\\u0026gt; cd quickstart C:\\\u0026gt; git init C:\\\u0026gt; git submodule add https://github.com/theNewDynamic/gohugo-theme-ananke.git themes/ananke C:\\\u0026gt; git submodule update --init --recursive # needed when you reclone your repo (submodules may not get cloned automatically) åœ¨ config.toml ä¸­åŠ å…¥ theme = \u0026ldquo;ananke\u0026rdquo;\nC:\\\u0026gt; echo \u0026#39;theme = \u0026#34;ananke\u0026#34;\u0026#39; \u0026gt;\u0026gt; config.toml Step 4: Add Some Content (å»ºç«‹æ–°æ–‡ç« ) C:\\\u0026gt; hugo new posts/my-first-post.md åœ¨ md file ä¸­åŠ å…¥ä»¥ä¸‹å…§å®¹\n # Test Page\nThis is my first test page.\n Step 5: Start the Hugo server (æœ¬æ©Ÿæ¸¬è©¦) C:\\\u0026gt; hugo server -D é–‹å•Ÿç€è¦½å™¨ï¼Œè¼¸å…¥ç¶²å€ https://localhost:1313 ","permalink":"https://calvinegs.github.io/posts/installhugo-windows/","summary":"Hugo æ˜¯ä¸€å€‹é™æ…‹ç¶²ç«™ç”Ÿæˆå™¨ï¼Œæ­é… git å¾ˆé©åˆä¾†å»ºç«‹å€‹äººéƒ¨è½æ ¼ã€‚åœ¨ä¸€ç³»åˆ—çš„ç­†è¨˜ä¸­å°‡ä»‹ç´¹å¦‚ä½•å®‰è£/ä½¿ç”¨ç›¸é—œå·¥å…·èˆ‡æŠ€è¡“ï¼Œç›®çš„æ˜¯æ­å»ºä¸€å€‹å®Œå…¨å…è²»çš„å€‹äººéƒ¨è½æ ¼ã€‚\nä½¿ç”¨çš„ç›¸é—œå·¥å…·/æŠ€è¡“:\n Hugo git vs code gist github page Markdown  Chocolatey Chocolatey æ˜¯ä¸€å€‹ Windows ä¸Šçš„å¥—ä»¶ç®¡ç†å·¥å…·ï¼Œå®ƒçµåˆäº† Nuget åŸºç¤æœå‹™èˆ‡ powershell æŒ‡ä»¤ï¼Œæä¾›å¿«é€Ÿå®‰è£æ‡‰ç”¨ç¨‹å¼èˆ‡å·¥å…·çš„æœå‹™ï¼Œå°‡å®‰è£è»Ÿé«”çš„å…§å®¹å°è£åˆ°ä¸€å€‹å®‰è£åŒ…ä¸­ï¼Œåœ¨ Chocolatey ä¸­åªéœ€è¦ä¸€æ¢ç°¡å–®çš„æŒ‡ä»¤å°±èƒ½å®Œæˆæœå°‹ã€å®‰è£ã€æ›´æ–°ã€è§£å®‰è£ç­‰æ“ä½œã€‚\nåœ¨ Windows 10 ä¸Šå®‰è£ Chocolatey ä»¥â€˜ç³»çµ±ç®¡ç†å“¡â€™èº«ä»½é–‹å•Ÿ \u0026lsquo;Windows PowerShell\u0026rsquo;,ã€€åŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ä¾†é€²è¡Œ Chocolatey å®‰è£\nPS C:\\\u0026gt;Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString(\u0026#39;https://community.chocolatey.org/install.ps1\u0026#39;)) ç§»é™¤ Chocolatey åˆªé™¤ C:\\ProgramData\\chocolatey ç›®éŒ„åŠç§»é™¤ç’°å¢ƒè®Šæ•¸å³å¯ï¼Œæœå°‹ \u0026ldquo;ç·¨è¼¯ç³»çµ±ç’°å¢ƒè®Šæ•¸\u0026rdquo; \\ \u0026ldquo;é€²éš\u0026rdquo; \\ \u0026ldquo;ç’°å¢ƒè®Šæ•¸\u0026rdquo;\nå®‰è£ hugo Step 1: åœ¨ Windows 10 ä¸Šä½¿ç”¨ choco å®‰è£ hugo C:\\\u0026gt; choco install hugo -confirm C:\\\u0026gt; choco install hugo-extended - config C:\\\u0026gt; hugo version Step 2: Create a New Site (å»ºç«‹éƒ¨è½æ ¼ç¶²ç«™) C:\\\u0026gt; hugo new site quickstart C:\\\u0026gt; hugo new site quickstart -f yml # è‹¥è¦ä½¿ç”¨ config.","title":"åœ¨ Windows 10 ä½¿ç”¨ Hugo"}]